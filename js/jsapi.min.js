/*! build Tue Mar 01 2016 15:03:12 */

function egw_insertJS(_html){if(_html){var in_pos=-1,out_pos=-1;do{var in_pos=_html.search(/<script/im),out_pos=_html.search(/<\/script>/im);if(in_pos>-1&&out_pos>-1){if(out_pos>in_pos){var scriptStart=_html.indexOf(">",in_pos);if(scriptStart>in_pos){var script=_html.substring(scriptStart+1,out_pos);try{var tag=document.createElement("script");tag.setAttribute("type","text/javascript"),tag.text=script,document.getElementsByTagName("head")[0].appendChild(tag)}catch(e){"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log("Error while inserting JS code:",_e)}}}_html=_html.substr(out_pos+9)}}while(in_pos>-1&&out_pos>-1)}}function egw_topWindow(){return"undefined"!=typeof window.parent&&"undefined"!=typeof window.parent.top?window.parent.top:"undefined"!=typeof window.opener&&"undefined"!=typeof window.opener.top?window.opener.top:window.top}function egw_appWindow(_app){var framework=egw_getFramework();return framework&&framework.egw_appWindow?framework.egw_appWindow(_app):window}function egw_appWindowOpen(_app,_url){"undefined"==typeof _url&&(_url="about:blank"),window.location=_url}function egw_getApp(_name){return window.parent.framework.getApplicationByName(_name)}function egw_getAppName(){return"undefined"==typeof egw_appName?"egroupware":egw_appName}function egw_refresh(_msg,_app,_id,_type,_targetapp,_replace,_with,_msg_type){egw(window).refresh(_msg,_app,_id,_type,_targetapp,_replace,_with,_msg_type)}function egw_message(_msg,_type){egw(window).message(_msg,_type)}function egw_app_header(_header,_app){egw(window).app_header(_header,_app)}function egw_open(id,app,type,extra,target){window.egw.open(id,app,type,extra,target)}function egw_set_checkbox_multiselect_enabled(_id,_enabled){var ms=document.getElementById("exec["+_id+"]");if(null!==ms){var label_color="";_enabled?(ms.style.backgroundColor="white",label_color="black"):(ms.style.backgroundColor="#EEEEEE",label_color="gray");for(var i=0;i<ms.childNodes.length;i++)"LABEL"==ms.childNodes[i].nodeName&&(ms.childNodes[i].style.color=label_color,ms.childNodes[i].childNodes.length>=1&&"INPUT"==ms.childNodes[i].childNodes[0].nodeName&&(ms.childNodes[i].childNodes[0].disabled=!_enabled,ms.childNodes[i].childNodes[0].checked&=_enabled))}}function egw_openWindowCentered2(_url,_windowName,_width,_height,_status,_app,_returnID){return egw(window).openPopup(_url,_width,_height,_windowName,_app,_returnID,_status)}function egw_openWindowCentered(_url,_windowName,_width,_height){return egw_openWindowCentered2(_url,_windowName,_width,_height,"no",!1,!0)}function egw_getWindowLeft(){try{if(is_mozilla)return window.screenX}catch(e){}return window.screenLeft}function egw_getWindowTop(){try{if(is_mozilla)return window.screenY}catch(e){}return window.screenTop-90}function egw_getWindowInnerWidth(){return is_mozilla?window.innerWidth:document.body.clientWidth}function egw_getWindowInnerHeight(){return is_mozilla?window.innerHeight:document.documentElement.clientHeight}function egw_getWindowOuterWidth(){try{if(is_mozilla)return window.outerWidth}catch(e){}return egw_getWindowInnerWidth()}function egw_getWindowOuterHeight(){try{if(is_mozilla)return window.outerHeight}catch(e){}return egw_getWindowInnerHeight()}function dropdown_menu_hack(el){function showMenu(){function selectMenu(obj){var o=document.createElement("option");for(o.value=obj.value,o.text=obj.innerHTML,o.text=o.text.replace("<NOBR>",""),o.text=o.text.replace("</NOBR>",""),""!=o.value&&(o.innerHTML=o.text);el.options.length>0;)el.options[0].removeNode(!0);el.appendChild(o),el.title=o.innerHTML,el.contentIndex=obj.selectedIndex,el.menu.hide(),el.onchange&&el.onchange()}el.menu.show(0,el.offsetHeight,10,10,el);var mb=el.menu.document.body;mb.style.cssText="border:solid 1px black;margin:0;padding:0;overflow-y:auto;overflow-x:auto;background:white;font:12px Tahoma, sans-serif;";var t=el.contentHTML;t=t.replace(/<select/gi,"<div"),t=t.replace(/<option/gi,"<span"),t=t.replace(/<\/option/gi,"</span"),t=t.replace(/<\/select/gi,"</div"),t=t.replace(/<optgroup label=\"([\w\s\wäöüßÄÖÜ]*[^>])*">/gi,'<span value="i-opt-group-lable-i">$1</span>'),t=t.replace(/<\/optgroup>/gi,'<span value="">---</span>'),mb.innerHTML=t,el.select=mb.all.tags("div")[0],el.select.style.cssText="list-style:none;margin:0;padding:0;",mb.options=el.select.getElementsByTagName("span");for(var i=0;i<mb.options.length;i++)mb.options[i].selectedIndex=i,mb.options[i].style.cssText="list-style:none;margin:0;padding:1px 2px;width/**/:100%;white-space:nowrap;","i-opt-group-lable-i"!=mb.options[i].value&&(mb.options[i].style.cssText=mb.options[i].style.cssText+"cursor:hand;cursor:pointer;"),mb.options[i].title=mb.options[i].innerHTML,mb.options[i].innerHTML="<nobr>"+mb.options[i].innerHTML+"</nobr>","i-opt-group-lable-i"==mb.options[i].value&&(mb.options[i].innerHTML="<b><i>"+mb.options[i].innerHTML+"</b></i>"),"i-opt-group-lable-i"!=mb.options[i].value&&(mb.options[i].onmouseover=function(){mb.options.selected&&(mb.options.selected.style.background="white",mb.options.selected.style.color="black"),mb.options.selected=this,this.style.background="#333366",this.style.color="white"}),mb.options[i].onmouseout=function(){this.style.background="white",this.style.color="black"},"i-opt-group-lable-i"!=mb.options[i].value&&(mb.options[i].onmousedown=function(){selectMenu(this)},mb.options[i].onkeydown=function(){selectMenu(this)}),i==el.contentIndex&&(mb.options[i].style.background="#333366",mb.options[i].style.color="white",mb.options.selected=mb.options[i]);var mw=Math.max(el.select.offsetWidth+22,el.offsetWidth+22);mw=Math.max(mw,mb.scrollWidth+22);var mh=15*mb.options.length+8,mx=ie5?-3:0,docW=document.documentElement.offsetWidth,sideW=docW-el.getBoundingClientRect().left;mw>sideW&&(mx=mx-mw+sideW-5);var my=el.offsetHeight-2;my+=5;var docH=document.documentElement.offsetHeight,bottomH=docH-el.getBoundingClientRect().bottom;mh=Math.min(mh,Math.max(docH-el.getBoundingClientRect().top-50,100)),mh>bottomH&&(mh=Math.max(bottomH-12,10),100>mh&&(my=-100),mh=Math.max(mh,100)),self.focus(),el.menu.show(mx,my,mw,mh,el),sync=null,mb.options.selected&&(mb.scrollTop=mb.options.selected.offsetTop),window.onresize=function(){el.menu.hide()}}function switchMenu(){if(event.keyCode)40==event.keyCode?el.contentIndex++:38==event.keyCode&&el.contentIndex--;else{if(!event.wheelDelta)return!0;event.wheelDelta>=120?el.contentIndex++:event.wheelDelta<=-120&&el.contentIndex--}el.contentIndex>el.contentOptions.length-1?el.contentIndex=0:el.contentIndex<0&&(el.contentIndex=el.contentOptions.length-1);var o=document.createElement("option");for(o.value=el.contentOptions[el.contentIndex].value,o.innerHTML=el.contentOptions[el.contentIndex].text;el.options.length>0;)el.options[0].removeNode(!0);el.appendChild(o),el.title=o.innerHTML}if(el.runtimeStyle){if("undefined"==typeof enable_ie_dropdownmenuhack)return;if(1!=enable_ie_dropdownmenuhack)return;if("none"==el.runtimeStyle.behavior.toLowerCase())return;if(el.runtimeStyle.behavior="none",1==el.multiple)return;if(el.size>1)return;var ie5=null==document.namespaces;if(el.ondblclick=function(e){return window.event.returnValue=!1,!1},null==window.createPopup){var fid="dropdown_menu_hack_"+Date.parse(new Date);window.createPopup=function(){if(null==window.createPopup.frameWindow){el.insertAdjacentHTML("MyFrame","<iframe id='"+fid+"' name='"+fid+"' src='about:blank' frameborder='1' scrolling='no'></></iframe>");var f=document.frames[fid];f.document.open(),f.document.write("<html><body></body></html>"),f.document.close(),f.fid=fid;var fwin=document.getElementById(fid);fwin.style.cssText="position:absolute;top:0;left:0;display:none;z-index:99999;",f.show=function(px,py,pw,ph,baseElement){py=py+baseElement.getBoundingClientRect().top+Math.max(document.body.scrollTop,document.documentElement.scrollTop),px=px+baseElement.getBoundingClientRect().left+Math.max(document.body.scrollLeft,document.documentElement.scrollLeft),fwin.style.width=pw+"px",fwin.style.height=ph+"px",fwin.style.posLeft=px,fwin.style.posTop=py,fwin.style.display="block"},f_hide=function(e){return window.event&&window.event.srcElement&&window.event.srcElement.tagName&&"select"==window.event.srcElement.tagName.toLowerCase()?!0:void(fwin.style.display="none")},f.hide=f_hide,document.attachEvent("onclick",f_hide),document.attachEvent("onkeydown",f_hide)}return f}}null==dropdown_menu_hack.menu&&(dropdown_menu_hack.menu=window.createPopup(),document.attachEvent("onkeydown",dropdown_menu_hack.menu.hide)),el.menu=dropdown_menu_hack.menu,el.contentOptions=new Array,el.contentIndex=el.selectedIndex,el.contentHTML=el.outerHTML;for(var i=0;i<el.options.length;i++)el.contentOptions[el.contentOptions.length]={value:el.options[i].value,text:el.options[i].innerHTML},el.options[i].selected||(el.options[i].removeNode(!0),i--);el.onkeydown=switchMenu,el.onclick=showMenu,el.onmousewheel=switchMenu}}function egw_link_handler(_link,_app){egw(window).link_handler(_link,_app)}function addOption(id,label,value,do_onchange){selectBox=document.getElementById(id);for(var i=0;i<selectBox.length;i++)if(selectBox.options[i].value==value){selectBox.options[i].selected=!0;break}i>=selectBox.length&&(do_onchange||(selectBox.length&&""==selectBox.options[0].value&&(selectBox.options[0]=null),selectBox.multiple=!0,selectBox.size=4),selectBox.options[selectBox.length]=new Option(label,value,!1,!0)),selectBox.onchange&&do_onchange&&selectBox.onchange()}function _egw_json_escape_string(input){for(var len=input.length,res="",i=0;len>i;i++)switch(input.charAt(i)){case'"':res+='\\"';break;case"\n":res+="\\n";break;case"\r":res+="\\r";break;case"\\":res+="\\\\";break;case"/":res+="\\/";break;case"\b":res+="\\b";break;case"\f":res+="\\f";break;case"	":res+="\\t";break;default:res+=input.charAt(i)}return res}function _egw_json_encode_simple(input){switch(input.constructor){case String:return'"'+_egw_json_escape_string(input)+'"';case Number:return input.toString();case Boolean:return input?"true":"false";default:return null}}function egw_json_encode(input){return egw.debug("warn","Function %s is deprecated, use egw.jsonEncode() instead",arguments.callee.name),egw.jsonEncode(input)}function egw_json_register_plugin(_callback,_context){egw.debug("warn","Function %s is deprecated",arguments.callee.name),"undefined"==typeof _context&&(_context=window),_egw_json_plugins[_egw_json_plugins.length]={callback:_callback,context:_context}}function _egw_json_plugin_handle(_type,_response,_context){for(var i=0;i<_egw_json_plugins.length;i++)try{var plugin=_egw_json_plugins[i],context=plugin.context;if(plugin.context||"undefined"==typeof _context||(context=_context),plugin.callback.call(context,_type,_response))return!0}catch(e){"undefined"!=typeof console&&console.log(e)}return!1}function egw_json_request(_menuaction,_parameters,_context){egw.debug("warn","Function %s is deprecated",arguments.callee.name),this.context=window.document,"undefined"!=typeof _context&&(this.context=_context),"undefined"!=typeof _parameters?this.parameters=_parameters:this.parameters=new Array,_menuaction.match(/json.php\?menuaction=[a-z_0-9]*\.[a-z_0-9]*\.[a-z_0-9]*/i)?this.url=_menuaction:this.url=this._assembleAjaxUrl(_menuaction),this.request=null,this.sender=null,this.callback=null,this.alertHandler=this.alertFunc,this.onLoadFinish=null,this.loadedJSFiles={},this.handleResponseDone=!1,this.app=null,window.egw_alertHandler&&(this.alertHandler=window.egw_alertHandler)}function _egw_json_debug_log(_msg,_e){"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log(_msg,_e)}function egw_json_getFormValues(_form,_filterClass){egw.debug("warn","Function %s is deprecated",arguments.callee.name);var elem=null;elem="object"==typeof _form?_form:document.getElementsByName(_form)[0];var serialized=new Object;return"undefined"!=typeof elem&&elem&&elem.childNodes&&("undefined"==typeof _filterClass&&(_filterClass=null),_egw_json_getFormValues(serialized,elem.childNodes,_filterClass)),serialized}function _egw_json_getFormValues(serialized,children,_filterClass){egw.debug("warn","Function %s is deprecated",arguments.callee.name);for(var i=0;i<children.length;++i){var child=children[i];"undefined"!=typeof child.childNodes&&_egw_json_getFormValues(serialized,child.childNodes,_filterClass),_filterClass&&!$j(child).hasClass(_filterClass)||"undefined"==typeof child.name||_egw_json_getFormValue(serialized,child)}}function _egw_json_getObjectLength(_obj){var res=0;for(key in _obj)_obj.hasOwnProperty(key)&&res++;return res}function _egw_json_getFormValue(serialized,child){if(!("undefined"==typeof child.name||child.disabled&&1==child.disabled||child.type&&("radio"==child.type||"checkbox"==child.type||"button"==child.type||"submit"==child.type)&&!child.checked)){var name=child.name,values=null;if("select-multiple"==child.type){values=new Array;for(var j=0;j<child.length;++j){var option=child.options[j];1==option.selected&&values.push(option.value)}}else values=child.value;var keyBegin=name.indexOf("[");if(keyBegin>=0){var n=name,k=n.substr(0,n.indexOf("[")),a=n.substr(n.indexOf("["));"undefined"==typeof serialized[k]&&(serialized[k]=new Object);for(var p=serialized;0!=a.length;){var sa=a.substr(0,a.indexOf("]")+1),lk=k,lp=p;a=a.substr(a.indexOf("]")+1),p=p[k],k=sa.substr(1,sa.length-2),""==k&&("select-multiple"==child.type?(k=lk,p=lp):k=_egw_json_getObjectLength(p)),"undefined"==typeof p[k]&&(p[k]=new Object)}p[k]=values}else"undefined"!=typeof values&&(serialized[name]=values)}}function dtmlXMLLoaderObject(a,b,c,d){return this.xmlDoc="",this.async="undefined"!=typeof c?c:!0,this.onloadAction=a||null,this.mainObject=b||null,this.waitCall=null,this.rSeed=d||!1,this}function callerFunction(a,b){return this.handler=function(c){return c||(c=window.event),a(c,b),!0}}function getAbsoluteLeft(a){return getOffset(a).left}function getAbsoluteTop(a){return getOffset(a).top}function getOffsetSum(a){for(var b=0,c=0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}}function getOffsetRect(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,g=window.pageXOffset||d.scrollLeft||c.scrollLeft,f=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-f,k=b.left+g-h;return{top:Math.round(i),left:Math.round(k)}}function getOffset(a){return a.getBoundingClientRect?getOffsetRect(a):getOffsetSum(a)}function convertStringToBoolean(a){switch("string"==typeof a&&(a=a.toLowerCase()),a){case"1":case"true":case"yes":case"y":case 1:case!0:return!0;default:return!1}}function getUrlSymbol(a){return-1!=a.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0,this.tempDOMM=this.tempDOMU=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function j(){return this.catches||(this.catches=[]),this}function dhtmlXHeir(a,b){for(var c in b)"function"==typeof b[c]&&(a[c]=b[c]);return a}function dhtmlxEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function xmlPointer(data){this.d=data}function dhtmlXTreeObject(htmlObject,width,height,rootId){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}"object"!=typeof htmlObject?this.parentObject=document.getElementById(htmlObject):this.parentObject=htmlObject,this.parentObject.style.overflow="hidden",this._itim_dg=!0,this.dlmtr=",",this.dropLower=!1,this.enableIEImageFix(),this.xmlstate=0,this.mytype="tree",this.smcheck=!0,this.width=width,this.height=height,this.rootId=rootId,this.childCalc=null,this.def_img_x="18px",this.def_img_y="18px",this.def_line_img_x="18px",this.def_line_img_y="18px",this._dragged=new Array,this._selected=new Array,this.style_pointer="pointer",this._aimgs=!0,this.htmlcA=" [",this.htmlcB="]",this.lWin=window,this.cMenu=0,this.mlitems=0,this.iconURL="",this.dadmode=0,this.slowParse=!1,this.autoScroll=!0,this.hfMode=0,this.nodeCut=new Array,this.XMLsource=0,this.XMLloadingWarning=0,this._idpull={},this._pullSize=0,this.treeLinesOn=!0,this.tscheck=!1,this.timgen=!0,this.dpcpy=!1,this._ld_id=null,this._oie_onXLE=[],this.imPath=window.dhx_globalImgPath||"",this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif"),this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif"),this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif"),this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"),this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"),this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif"),this.cutImg=new Array(0,0,0),this.cutImage="but_cut.gif",dhtmlxEventable(this),this.dragger=new dhtmlDragAndDropObject,this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this),this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none",this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow",this.allTree=this._createSelf(),this.allTree.appendChild(this.htmlNode.htmlNode),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden");var self=this;return this.allTree.onselectstart=new Function("return false;"),_isMacOS&&(this.allTree.oncontextmenu=function(e){return self._doContClick(e||window.event,!0)}),this.allTree.onmousedown=function(e){return self._doContClick(e||window.event)},this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe),_isIE&&this.preventIECashing(!0),window.addEventListener&&window.addEventListener("unload",function(){try{self.destructor()}catch(e){}},!1),window.attachEvent&&window.attachEvent("onunload",function(){try{self.destructor()}catch(e){}}),this.setImagesPath=this.setImagePath,this.setIconsPath=this.setIconPath,dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path),dhtmlx.skin&&this.setSkin(dhtmlx.skin),this}function cObject(){return this}function dhtmlXTreeItemObject(itemId,itemText,parentObject,treeObject,actionHandler,mode){return this.htmlNode="",this.acolor="",this.scolor="",this.tr=0,this.childsCount=0,this.tempDOMM=0,this.tempDOMU=0,this.dragSpan=0,this.dragMove=0,this.span=0,this.closeble=1,this.childNodes=new Array,this.userData=new cObject,this.checkstate=0,this.treeNod=treeObject,this.label=itemText,this.parentObject=parentObject,this.actionHandler=actionHandler,this.images=new Array(treeObject.imageArray[0],treeObject.imageArray[1],treeObject.imageArray[2]),this.id=treeObject._globalIdStorageAdd(itemId,this),this.treeNod.checkBoxOff?this.htmlNode=this.treeNod._createItem(1,this,mode):this.htmlNode=this.treeNod._createItem(0,this,mode),this.htmlNode.objBelong=this,this}function jsonPointer(data,parent){this.d=data,this.dp=parent}function egwActionStoreJSON(_data,_obj,_setterOnly){for(var key in _data)"_"!=key.charAt(0)&&("function"==typeof _obj["set_"+key]?_obj["set_"+key](_data[key]):"undefined"==typeof _obj[key]||_setterOnly?"data"===_setterOnly&&("undefined"==typeof _data.data&&(_data.data={}),_data.data[key]=_data[key],_obj.set_data(_data.data)):_obj[key]=_data[key])}function egwSetBit(_set,_bit,_state){return _state?_set|=_bit:_set&=~_bit}function egwBitIsSet(_set,_bit){return(_set&_bit)>0}function egwObjectLength(_obj){var len=0;for(var k in _obj)len++;return len}function egwGetShiftState(e){var state=EGW_AO_SHIFT_STATE_NONE;return state=egwSetBit(state,EGW_AO_SHIFT_STATE_MULTI,e.ctrlKey||e.metaKey),state=egwSetBit(state,EGW_AO_SHIFT_STATE_BLOCK,e.shiftKey)}function egwPreventSelect(e){return egwGetShiftState(e)>EGW_AO_SHIFT_STATE_NONE?(this.onselectstart=function(){return!1},!1):!0}function egwResetPreventSelect(elem){}function egwUnfocus(){document.activeElement&&document.activeElement.blur()}function egwCallAbstract(_obj,_fn,_args){if(_fn)return _fn.apply(_obj,_args);throw"egw_action Exception: Abstract function call in JS code."}function egwArraysEqual(_ar1,_ar2){for(var result=_ar1.length==_ar2.length,i=0;i<_ar1.length;i++)result=result&&_ar1[i]==_ar2[i];return result}function egwQueueCallback(_proc,_args,_context,_id){if(_proc){var cur_id=0;cur_id="undefined"==typeof _egwQueuedCallbacks[_id]?_egwQueuedCallbacks[_id]=1:++_egwQueuedCallbacks[_id],window.setTimeout(function(){_egwQueuedCallbacks[_id]==cur_id&&(_proc.apply(_context,_args),delete _egwQueuedCallbacks[_id])},0)}}function egwEventQueue(){this.events={},this.key_id=0}function egwFnct(_context,_default,_acceptedTypes){"undefined"==typeof _context&&(_context=null),"undefined"==typeof _default&&(_default=!1),"undefined"==typeof _acceptedTypes&&(_acceptedTypes=["boolean"]),this.context=_context,this.acceptedTypes=_acceptedTypes,this.fnct=null,this.value=null,this.isDefault=!1,this.setValue(_default)}function egwIsMobile(){if(null==_egw_mobileBrowser){var ua=navigator.userAgent;_egw_mobileBrowser=ua.match(/iPhone/i)||ua.match(/iPad/i)||ua.match(/iPod/)||ua.match(/Android/i)||ua.match(/SymbianOS/i)}return _egw_mobileBrowser}function str_repeat(i,m){for(var o=[];m>0;o[--m]=i);return o.join("")}function sprintf(){for(var a,m,p,c,x,i=0,f=arguments[i++],o=[],s="";f;){if(m=/^[^\x25]+/.exec(f))o.push(m[0]);else if(m=/^\x25{2}/.exec(f))o.push("%");else{if(!(m=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(f)))throw'Invalid sprintf format "'+arguments[0]+'"';if(null==(a=arguments[m[1]||i++])||void 0==a)throw"Too few arguments.";if(/[^s]/.test(m[7])&&"number"!=typeof a)throw"Expecting number but found "+typeof a;switch(m[7]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":a=parseInt(a);break;case"e":a=m[6]?a.toExponential(m[6]):a.toExponential();break;case"f":a=m[6]?parseFloat(a).toFixed(m[6]):parseFloat(a);break;case"o":a="number"==typeof a?a.toString(8):JSON.stringify(a);break;case"s":a=(a=String(a))&&m[6]?a.substring(0,m[6]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(m[7])&&m[2]&&a>=0?"+"+a:a,c=m[3]?"0"==m[3]?"0":m[3].charAt(1):" ",x=m[5]-String(a).length-s.length,p=m[5]?str_repeat(c,x):"",o.push(s+(m[4]?a+p:p+a))}f=f.substring(m[0].length)}return o.join("")}function egw_getActionManager(_id,_create,_search_depth){"undefined"==typeof _create&&(_create=!0),"undefined"==typeof _search_depth&&(_search_depth=Number.MAX_VALUE);var res=egw_globalActionManager;return null==egw_globalActionManager&&(res=egw_globalActionManager=new egwActionManager),"undefined"!=typeof _id&&null!=_id&&(res=egw_globalActionManager.getActionById(_id,_search_depth),null==res&&_create&&(res=egw_globalActionManager.addAction("actionManager",_id))),res}function egw_getObjectManager(_id,_create,_search_depth){"undefined"==typeof _create&&(_create=!0),"undefined"==typeof _search_depth&&(_search_depth=Number.MAX_VALUE);var res=egw_globalObjectManager;return null==res&&(res=egw_globalObjectManager=new egwActionObjectManager("_egwGlobalObjectManager",egw_getActionManager())),"undefined"!=typeof _id&&null!=_id&&(res=egw_globalObjectManager.getObjectById(_id,_search_depth),null==res&&_create&&(res=new egwActionObjectManager(_id,egw_getActionManager(_id,!0,_search_depth)),egw_globalObjectManager.addObject(res))),res}function egw_getAppObjectManager(_create){return egw_getObjectManager(egw_getAppName(),_create,1)}function egw_getAppActionManager(_create){return egw_getActionManager(egw_getAppName(),_create,1)}function egwActionHandler(_executeEvent){this.execute=_executeEvent}function egwAction(_parent,_id,_caption,_iconUrl,_onExecute,_allowOnMultiple){if(_parent&&("string"!=typeof _id||!_id)&&"actionManager"!=_parent.type)throw"egwAction _id must be a non-empty string!";"undefined"==typeof _caption&&(_caption=""),"undefined"==typeof _iconUrl&&(_iconUrl=""),"undefined"==typeof _onExecute&&(_onExecute=null),"undefined"==typeof _allowOnMultiple&&(_allowOnMultiple=!0),this.id=_id,this.caption=_caption,this.iconUrl=_iconUrl,this.allowOnMultiple=_allowOnMultiple,this.enabled=new egwFnct(this,!0),this.hideOnDisabled=!1,this.data={},this.type="default",this.canHaveChildren=!1,this.parent=_parent,this.children=[],this.onExecute=new egwFnct(this,null,[]),null!==_onExecute&&this.set_onExecute(_onExecute),this.hideOnMobile=!1}function _egwActionTreeContains(_tree,_elem){for(var i=0;i<_tree.length;i++){if(_tree[i].action==_elem)return _tree[i];if("undefined"!=typeof _tree[i].children){var elem=_egwActionTreeContains(_tree[i].children,_elem);if(elem)return elem}}return null}function egwActionManager(_parent,_id){"undefined"==typeof _parent&&(_parent=null),"undefined"==typeof _id&&(_id=!1);var action=new egwAction(_parent,_id);return action.type="actionManager",action.canHaveChildren=!0,action}function egwActionImplementation(){this.doRegisterAction=function(){throw"Abstract function call: registerAction"},this.doUnregisterAction=function(){throw"Abstract function call: unregisterAction"},this.doExecuteImplementation=function(){throw"Abstract function call: executeImplementation"},this.type=""}function egwActionLink(_manager){this.enabled=!0,this.visible=!0,this.actionId="",this.actionObj=null,this.manager=_manager}function egwActionObject(_id,_parent,_iface,_manager,_flags){"undefined"==typeof _manager&&"object"==typeof _parent&&_parent&&(_manager=_parent.manager),"undefined"==typeof _flags&&(_flags=0),this.id=_id,this.parent=_parent,this.children=[],this.actionLinks=[],this.manager=_manager,this.flags=_flags,this.data=null,this.setSelectedCallback=null,this.registeredImpls=[],this.selectedChildren=[],this.focusedChild=null,this.setAOI(_iface)}function egwActionObjectInterface(){this.doGetDOMNode=function(){return null},this.doSetState=function(_state,_outerCall){},this.doTriggerEvent=function(_event,_data){return!1},this.doMakeVisible=function(){},this._state=EGW_AO_STATE_NORMAL||EGW_AO_STATE_VISIBLE,this.stateChangeCallback=null,this.stateChangeContext=null,this.reconnectActionsCallback=null,this.reconnectActionsContext=null}function egwActionObjectManager(_id,_manager){var ao=new egwActionObject(_id,null,new egwActionObjectInterface,_manager,EGW_AO_FLAG_IS_CONTAINER);return ao.triggerCallback=function(){return!1},ao}function egw_keycode_makeValid(_keyCode){var idx=EGW_VALID_KEYS.indexOf(_keyCode);return idx>=0?_keyCode:-1}function _egw_nodeIsInInput(_node){if(null!=_node&&_node!=document){var tagName=_node.tagName.toLowerCase();return"input"==tagName||"select"==tagName||"textarea"==tagName||"button"==tagName?!0:_egw_nodeIsInInput(_node.parentNode)}return!1}function egw_shortcutIdx(_keyCode,_shift,_ctrl,_alt){return"_"+_keyCode+"_"+(_shift?"S":"")+(_ctrl?"C":"")+(_alt?"A":"")}function egw_registerGlobalShortcut(_keyCode,_shift,_ctrl,_alt,_handler,_context){var idx=egw_shortcutIdx(_keyCode,_shift,_ctrl,_alt);egw_registeredShortcuts[idx]={handler:_handler,context:_context,shortcut:{keyCode:_keyCode,shift:_shift,ctrl:_ctrl,alt:_alt}}}function egw_unregisterGlobalShortcut(_keyCode,_shift,_ctrl,_alt){var idx=egw_shortcutIdx(_keyCode,_shift,_ctrl,_alt);delete egw_registeredShortcuts[idx]}function egw_keyHandler(_keyCode,_shift,_ctrl,_alt){var idx=egw_shortcutIdx(_keyCode,_shift,_ctrl,_alt);if("undefined"!=typeof egw_registeredShortcuts[idx]){var shortcut=egw_registeredShortcuts[idx],result=shortcut.handler.call(shortcut.context,shortcut.shortcut);if(result)return result}var appMgr=egw_getAppObjectManager(!1);if(appMgr){var focusedObject=appMgr.getFocusedObject();if(!focusedObject){for(var cntr=null,i=0;i<appMgr.children.length;i++){var child=appMgr.children[i];if(egwBitIsSet(EGW_AO_FLAG_DEFAULT_FOCUS,child.flags)){cntr=child;break}}cntr&&cntr.children.length>0&&(cntr.children[0].setFocused(!0),focusedObject=cntr.children[0])}if(focusedObject){var cntr=focusedObject.getContainerRoot(),handled=!1;return cntr&&(handled=cntr.handleKeyPress(_keyCode,_shift,_ctrl,_alt)),handled?handled:focusedObject.executeActionImplementation({keyEvent:{keyCode:_keyCode,shift:_shift,ctrl:_ctrl,alt:_alt}},"popup",EGW_AO_EXEC_SELECTED)}}return!1}function _egwGenMenuItem(_parent,_id,_caption,_iconUrl,_onClick){"undefined"==typeof _parent&&(_parent=null),"undefined"==typeof _id&&(_id=""),"undefined"==typeof _caption&&(_caption=""),"undefined"==typeof _iconUrl&&(_iconUrl=""),"undefined"==typeof _onClick&&(_onClick=null);var item=new egwMenuItem(_parent,_id);return item.set_caption(_caption),item.set_iconUrl(_iconUrl),item.set_onClick(_onClick),item}function _egwGenMenuStructure(_elements,_parent){for(var items=[],i=0;i<_elements.length;i++){var obj=_elements[i],item=new egwMenuItem(_parent,null);for(var key in obj)"children"==key&&obj[key].constructor===Array?item.children=_egwGenMenuStructure(obj[key],item):"id"!=key&&"caption"!=key&&"iconUrl"!=key&&"checkbox"!=key&&"checked"!=key&&"groupIndex"!=key&&"enabled"!=key&&"default"!=key&&"onClick"!=key&&"hint"!=key&&"shortcutCaption"!=key||item["set_"+key](obj[key]);items.push(item)}return items}function _egwSearchMenuItem(_elements,_id){for(var i=0;i<_elements.length;i++){if(_elements[i].id===_id)return _elements[i];var item=_egwSearchMenuItem(_elements[i].children,_id);if(item)return item}return null}function _egwSetMenuOnClick(_elements,_onClick){for(var i=0;i<_elements.length;i++)null===_elements[i].onClick&&(_elements[i].onClick=_onClick),_egwSetMenuOnClick(_elements[i].children,_onClick)}function egwMenu(){this.children=[],this.instance=null}function egwMenuItem(_parent,_id){this.id=_id,this.caption="",this.checkbox=!1,this.checked=!1,this.groupIndex=0,this.enabled=!0,this.iconUrl="",this.onClick=null,this.default=!1,this.data=null,this.shortcutCaption=null,this.children=[],this.parent=_parent}function egwPopupAction(_id,_handler,_caption,_icon,_onExecute,_allowOnMultiple){var action=new egwAction(_id,_handler,_caption,_icon,_onExecute,_allowOnMultiple);return action.type="popup",action.canHaveChildren=["popup"],action.default=!1,action.order=0,action.group=0,action.hint=!1,action.checkbox=!1,action.radioGroup=0,action.checked=!1,action.shortcut=null,action.set_default=function(_value){action.default=_value},action.set_order=function(_value){action.order=_value},action.set_group=function(_value){action.group=_value},action.set_hint=function(_value){action.hint=_value},action.set_checkbox=function(_value){action.checkbox=_value},action.set_checked=function(_value){action.checked=_value},action.set_radioGroup=function(_value){action.radioGroup=_value},action.set_shortcut=function(_value){if(_value){var sc={keyCode:-1,shift:!1,ctrl:!1,alt:!1};"object"==typeof _value&&"undefined"!=typeof _value.keyCode&&"undefined"!=typeof _value.caption&&(sc.keyCode=_value.keyCode,sc.caption=_value.caption,sc.shift="undefined"==typeof _value.shift?!1:_value.shift,sc.ctrl="undefined"==typeof _value.ctrl?!1:_value.ctrl,sc.alt="undefined"==typeof _value.alt?!1:_value.alt),this.shortcut=sc}else this.shortcut=!1},action}function getPopupImplementation(){return _popupActionImpl||(_popupActionImpl=new egwPopupActionImplementation),_popupActionImpl}function egwPopupActionImplementation(){var ai=new egwActionImplementation;return ai.type="popup",ai.auto_paste=!0,ai._registerDefault=function(_node,_callback,_context){var defaultHandler=function(e){if(egwIsMobile&&"A"==e.target.tagName)return!0;if("undefined"!=typeof document.selection&&"undefined"!=typeof document.selection.empty)document.selection.empty();else if("undefined"!=typeof window.getSelection){var sel=window.getSelection();sel.removeAllRanges()}return _callback.call(_context,"default",ai),e.stopPropagation(),e.cancelBubble=!0,_egw_active_menu&&1==e.which&&_egw_active_menu.hide(),!1};egwIsMobile()?$j(_node).bind("click",defaultHandler):_node.ondblclick=defaultHandler},ai._getDefaultLink=function(_links){var defaultAction=null;for(var k in _links)if(_links[k].actionObj.default&&_links[k].enabled){
defaultAction=_links[k].actionObj;break}return defaultAction},ai._searchShortcut=function(_key,_objs,_links){for(var i=0;i<_objs.length;i++){var sc=_objs[i].shortcut;if(sc&&sc.keyCode==_key.keyCode&&sc.shift==_key.shift&&sc.ctrl==_key.ctrl&&sc.alt==_key.alt&&"popup"==_objs[i].type&&("undefined"==typeof _links[_objs[i].id]||_links[_objs[i].id].enabled))return _objs[i];var obj=this._searchShortcut(_key,_objs[i].children,_links);if(obj)return obj}},ai._searchShortcutInLinks=function(_key,_links){var objs=[];for(var k in _links)_links[k].enabled&&objs.push(_links[k].actionObj);return ai._searchShortcut(_key,objs,_links)},ai._handleKeyPress=function(_key,_selected,_links,_target){if(_key.keyCode==EGW_KEY_ENTER&&!_key.ctrl&&!_key.shift&&!_key.alt){var defaultAction=this._getDefaultLink(_links);if(defaultAction)return defaultAction.execute(_selected),!0}if(_key.keyCode==EGW_KEY_MENU&&!_key.ctrl)return this.doExecuteImplementation({posx:0,posy:0},_selected,_links,_target);var obj=this._searchShortcutInLinks(_key,_links);return obj?(obj.execute(_selected),!0):!1},ai._registerContext=function(_node,_callback,_context){var contextHandler=function(e){if(egwIsMobile()&&(3==e.originalEvent.which,jQuery(".nm-mob-header .nm_action_header").toggleClass("back",_egw_active_menu)),e||(e=window.event),_egw_active_menu)_egw_active_menu.hide();else if(!e.ctrlKey&&3==e.which||0===e.which){var _xy=ai._getPageXY(e),_implContext={event:e,posx:_xy.posx,posy:_xy.posy};_callback.call(_context,_implContext,ai)}return e.cancelBubble=!e.ctrlKey||1==e.which,e.stopPropagation&&e.cancelBubble&&e.stopPropagation(),!e.cancelBubble};$j(_node).on("contextmenu",contextHandler)},ai.doRegisterAction=function(_aoi,_callback,_context){var node=_aoi.getDOMNode();return node?(this._registerDefault(node,_callback,_context),this._registerContext(node,_callback,_context),!0):!1},ai.doUnregisterAction=function(_aoi){},ai.doExecuteImplementation=function(_context,_selected,_links,_target){if("undefined"==typeof _target&&(_target=null),ai._context=_context,"object"==typeof _context&&"object"==typeof _context.keyEvent)return ai._handleKeyPress(_context.keyEvent,_selected,_links,_target);if("default"!=_context){if(("number"!=typeof _context.posx||"number"!=typeof _context.posy)&&"undefined"!=typeof _context.id){var node=_context;x=$j(node).offset().left,y=$j(node).offset().top,_context={posx:x,posy:y}}var menu=ai._buildMenu(_links,_selected,_target);return menu.showAt(_context.posx,_context.posy),!0}var defaultAction=ai._getDefaultLink(_links);return defaultAction&&defaultAction.execute(_selected),!1},ai._groupLayers=function(_layer,_links,_parentGroup){for(var link_groups={},i=0;i<_layer.children.length;i++){var actionObj=_layer.children[i].action,grp=actionObj.group;"undefined"==typeof link_groups[grp]&&(link_groups[grp]=[]);var visible=!0,enabled=!0;"undefined"!=typeof _links[actionObj.id]&&(visible=_links[actionObj.id].visible,enabled=_links[actionObj.id].enabled);for(var inserted=!1,groupObj={actionObj:actionObj,visible:visible,enabled:enabled,groups:[]},j=0;j<link_groups[grp].length;j++){var elem=link_groups[grp][j].actionObj;if(elem.order>actionObj.order){inserted=!0,link_groups[grp].splice(j,0,groupObj);break}}inserted||link_groups[grp].push(groupObj),_layer.children[i].children.length>0&&this._groupLayers(_layer.children[i],_links,groupObj)}var groups=[];for(var k in link_groups)groups.push({grp:k,links:link_groups[k]});groups.sort(function(a,b){var ia=parseInt(a.grp),ib=parseInt(b.grp);return ia>ib?1:ib>ia?-1:0});for(var groups2=[],i=0;i<groups.length;i++)groups2.push(groups[i].links);_parentGroup.groups=groups2},ai._buildMenuLayer=function(_menu,_groups,_selected,_enabled,_target){for(var firstGroup=!0,i=0;i<_groups.length;i++){for(var firstElem=!0,j=0;j<_groups[i].length;j++){var link=_groups[i][j];if(link.visible){!firstGroup&&firstElem&&_menu.addItem("","-"),firstElem=!1;var item=_menu.addItem(link.actionObj.id,link.actionObj.caption,link.actionObj.iconUrl);if(item.default=link.actionObj.default,"popup"==link.actionObj.type&&(item.set_hint(link.actionObj.hint),item.set_checkbox(link.actionObj.checkbox),item.set_checked(link.actionObj.checked),item.set_groupIndex(link.actionObj.radioGroup),link.actionObj.shortcut)){var sc=link.actionObj.shortcut;item.set_shortcutCaption(sc.caption)}item.set_data(link.actionObj),link.enabled&&_enabled?item.set_onClick(function(elem){return elem.data.menu_context=ai._context,"undefined"!=typeof elem.data.checked&&(elem.data.checked=elem.checked),elem.data.execute(_selected,_target),"undefined"!=typeof elem.data.checkbox&&elem.data.checkbox?elem.data.checked:void 0}):item.set_enabled(!1),link.groups&&this._buildMenuLayer(item,link.groups,_selected,link.enabled,_target)}}firstGroup=firstGroup&&firstElem}},ai._buildMenu=function(_links,_selected,_target){var tree={root:[]};this.auto_paste&&this._addCopyPaste(_links,_selected);for(var k in _links)_links[k].actionObj.appendToTree(tree);var groups={groups:[]};tree.root.length>0&&this._groupLayers(tree.root[0],_links,groups);var menu=new egwMenu;return this._buildMenuLayer(menu,groups.groups,_selected,!0,_target),menu},ai._getPageXY=function(event){var scrollTop=document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop,scrollLeft=document.body.scrollLeft?document.body.scrollLeft:document.documentElement.scrollLeft;return{posx:event.clientX+scrollLeft,posy:event.clientY+scrollTop}},ai._addCopyPaste=function(_links,_selected){var drag=_selected[0].getSelectedLinks("drag").links,drop=_selected[0].getSelectedLinks("drop").links;if(drag&&!jQuery.isEmptyObject(drag)||drop&&!jQuery.isEmptyObject(drop)){var mgr=_selected[0].manager,copy_action=mgr.getActionById("egw_copy"),add_action=mgr.getActionById("egw_copy_add"),clipboard_action=mgr.getActionById("egw_os_clipboard"),paste_action=mgr.getActionById("egw_paste");if(this._context.event){var ui={position:{top:0,left:0},offset:{top:0,left:0}},event=this._context.event.originalEvent;ui.position={top:event.pageY,left:event.pageX},ui.offset={top:event.offsetY,left:event.offsetX}}if(drag&&!jQuery.isEmptyObject(drag)){null==copy_action&&(copy_action=mgr.addAction("popup","egw_copy",egw.lang("Copy to clipboard"),egw.image("copy"),function(action,selected){var clipboard={type:[],selected:[]};for(var k in drag)drag[k].enabled&&drag[k].actionObj.dragType.length>0&&(clipboard.type=clipboard.type.concat(drag[k].actionObj.dragType));clipboard.type=jQuery.unique(clipboard.type);for(var k in selected)selected[k].id&&clipboard.selected.push({id:selected[k].id,data:selected[k].data});egw.setSessionItem("phpgwapi","egw_clipboard",JSON.stringify(clipboard))},!0),copy_action.group=2.5),null==add_action&&(add_action=mgr.addAction("popup","egw_copy_add",egw.lang("Add to clipboard"),egw.image("copy"),function(action,selected){var clipboard=JSON.parse(egw.getSessionItem("phpgwapi","egw_clipboard"))||{type:[],selected:[]};for(var k in drag)drag[k].enabled&&drag[k].actionObj.dragType.length>0&&(clipboard.type=clipboard.type.concat(drag[k].actionObj.dragType));clipboard.type=jQuery.unique(clipboard.type);for(var k in selected)selected[k].id&&clipboard.selected.push({id:selected[k].id,data:selected[k].data});egw.setSessionItem("phpgwapi","egw_clipboard",JSON.stringify(clipboard))},!0),add_action.group=2.5),null==clipboard_action&&(clipboard_action=mgr.addAction("popup","egw_os_clipboard",egw.lang("Copy to OS clipboard"),egw.image("copy"),function(action){document.queryCommandSupported("copy")&&$j(action.data.target).trigger("copy")},!0),clipboard_action.group=2.5);var os_clipboard_caption=this._context.event.originalEvent.target.innerHTML.trim();clipboard_action.set_caption(egw.lang('Copy "%1"',os_clipboard_caption.length>20?os_clipboard_caption.substring(0,20)+"...":os_clipboard_caption)),clipboard_action.data.target=this._context.event.originalEvent.target,$j(clipboard_action.data.target).off("copy").on("copy",function(event){var target=$j(clipboard_action.data.target),old_select=target.css("user-select");target.css("user-select","all");var range=document.createRange();range.selectNode(clipboard_action.data.target),window.getSelection().removeAllRanges(),window.getSelection().addRange(range),target.css("user-select",old_select);var successful=!1;try{"undefined"!=typeof event.target.setActive&&window.clipboardData&&window.clipboardData.setData("Text",$j(clipboard_action.data.target).text().trim()),event.clipboardData&&(event.clipboardData.setData("text/plain",$j(clipboard_action.data.target).text().trim()),event.clipboardData.setData("text/html",$j(clipboard_action.data.target).html())),egw.message(egw.lang("Use Ctrl-C/Cmd-C to copy")),successful=document.execCommand("copy")}catch(err){}return successful?(egw.message(""),window.getSelection().removeAllRanges(),target.css("user-select",old_select),!1):void 0}),"undefined"==typeof _links[copy_action.id]&&(_links[copy_action.id]={actionObj:copy_action,enabled:!0,visible:!0,cnt:0}),"undefined"==typeof _links[add_action.id]&&(_links[add_action.id]={actionObj:add_action,enabled:!0,visible:!0,cnt:0}),"undefined"==typeof _links[clipboard_action.id]&&(_links[clipboard_action.id]={actionObj:clipboard_action,enabled:os_clipboard_caption.length>0,visible:os_clipboard_caption.length>0,cnt:0})}if(drop&&!jQuery.isEmptyObject(drop)){var paste_exec=function(action,selected){var clipboard=JSON.parse(egw.getSessionItem("phpgwapi","egw_clipboard"));drop[action.id].actionObj.ui=ui,drop[action.id].actionObj.paste=!0,drop[action.id].actionObj.execute(clipboard.selected,selected[0]),drop[action.id].actionObj.paste=!1},clipboard=JSON.parse(egw.getSessionItem("phpgwapi","egw_clipboard"))||{type:[],selected:[]};null==paste_action&&(paste_action=mgr.addAction("popup","egw_paste",egw.lang("Paste"),egw.image("editpaste"),paste_exec,!0),paste_action.group=2.5,paste_action.order=9,paste_action.canHaveChildren.push("drop"));var hint=egw.lang("Clipboard")+":\n["+clipboard.type.join(",")+"]\n";paste_action.set_hint(hint);for(var i=0;i<clipboard.selected.length;i++){var id=clipboard.selected[i].id.split("::");egw.link_title(id[0],id[1],function(title){title&&(this.hint+=title+"\n")},paste_action)}for("undefined"==typeof _links[paste_action.id]&&(_links[paste_action.id]={actionObj:paste_action,enabled:!1,visible:null!=clipboard,cnt:0});paste_action.children.length>0;)paste_action.children[0].remove();if(null==clipboard||"object"!=typeof clipboard.type)return;for(var k in drop){var drop_clone=jQuery.extend({},drop[k].actionObj);drop_clone.parent=paste_action,drop_clone.onExecute=new egwFnct(this,null,[]),drop_clone.set_onExecute(paste_exec),paste_action.children.push(drop_clone),paste_action.allowOnMultiple=paste_action.allowOnMultiple&&drop_clone.allowOnMultiple,_links[k]=jQuery.extend({},drop[k]),_links[k].actionObj=drop_clone,_links[k].enabled=!1,_links[k].visible=!1;for(var i=0;i<drop_clone.acceptedTypes.length;i++)if(-1!=clipboard.type.indexOf(drop_clone.acceptedTypes[i])){_links[paste_action.id].enabled=!0,_links[k].enabled=!0,_links[k].visible=!0;break}}}}},ai}function egwDragAction(_id,_handler,_caption,_icon,_onExecute,_allowOnMultiple){var action=new egwAction(_id,_handler,_caption,_icon,_onExecute,_allowOnMultiple);return action.type="drag",action.dragType="default",action.hideOnDisabled=!0,action.set_dragType=function(_value){action.dragType=_value},action}function getDragImplementation(){return _dragActionImpl||(_dragActionImpl=new egwDragActionImplementation),_dragActionImpl}function egwDragActionImplementation(){var ai=new egwActionImplementation;return ai.type="drag",ai.helper=null,ai.ddTypes=[],ai.selected=[],ai.defaultDDHelper=function(_selected){for(var table=$j(document.createElement("table")).addClass("egwGridView_grid et2_egw_action_ddHelper_row"),moreRow=$j(document.createElement("tr")).addClass("et2_egw_action_ddHelper_moreRow"),div=$j(document.createElement("div")).append(table),rows=[],maxRows=3,itemLabel=egw.lang(egw.link_get_registry(egw.app_name(),_selected.length>1?"entries":"entry")||egw.app_name()),index=0,i=0;i<_selected.length;i++){var row=$j(_selected[i].iface.getDOMNode()).clone();if(row&&(rows.push(row),table.append(row)),index++,index==maxRows){var spanCnt=$j(document.createElement("span")).addClass("et2_egw_action_ddHelper_itemsCnt").appendTo(div);spanCnt.text(_selected.length+" "+itemLabel);var restRows=_selected.length-maxRows;restRows&&moreRow.text(_selected.length-maxRows+" "+egw.lang("more %1 selected ...",itemLabel)),table.append(moreRow);break}}var text=$j(document.createElement("div")).addClass("et2_egw_action_ddHelper_tip");if(div.append(text),"draggable"in document.createElement("span")&&navigator&&navigator.userAgent.indexOf("Chrome")>=0&&"filemanager"==egw.app_name()){var key=["Mac68K","MacPPC","MacIntel"].indexOf(window.navigator.platform)<0?egw.lang("Alt"):egw.lang("Command ⌘");text.text(egw.lang("Hold [%1] and [%2] key to drag %3 to your desktop",key,egw.lang("Shift ⇧"),itemLabel))}return div},ai.doRegisterAction=function(_aoi,_callback,_context){var node=_aoi.getDOMNode();if(node){if(node.onselectstart=function(){return!1},!(window.FileReader&&"draggable"in document.createElement("span")))return;var action=null,groups=_context.getActionImplementationGroups();if(!groups.drag)return;for(var i=0;i<groups.drag.length;i++)if("file"==groups.drag[i].link.actionObj.dragType||groups.drag[i].link.actionObj.dragType.indexOf("file")>-1){action=groups.drag[i].link.actionObj;break}return action?(jQuery.event.props.push("dataTransfer"),$j(node).off("mousedown").on("mousedown",function(event){var dragOut=_context.isDragOut(event);if($j(this).attr("draggable",dragOut?"true":""),$j(node).draggable("option","disabled",dragOut),dragOut)$j(node).removeClass("ui-draggable-disabled ui-state-disabled");else if(_context.isSelection(event)?($j(node).draggable("disable"),$j(node).removeClass("ui-draggable-disabled ui-state-disabled")):3!=event.which&&document.getSelection().removeAllRanges(),!dragOut||!this.addEventListener)return}).on("mouseup",function(event){_context.isSelection(event)&&$j(node).draggable("enable")}).on("dragstart",function(event){if(!_context.isSelection(event)&&null!=event.dataTransfer){event.dataTransfer.effectAllowed="copy";var selected=[_context];_context.parent.setAllSelected(!1),_context.setSelected(!0);for(var i=0;i<selected.length;i++){var data=selected[i].data||egw.dataGetUIDdata(selected[i].id).data||{};if(data&&data.mime&&data.download_url){var url=data.download_url;"/"==url[0]&&(url=egw.link(url)),"/"==url[0]&&(url=window.location.origin+url),navigator&&navigator.userAgent.indexOf("Chrome")?event.dataTransfer.setData("DownloadURL",data.mime+":"+data.name+":"+url):event.dataTransfer.setData("text/uri-list",url)}}if(0==event.dataTransfer.types.length)return void event.preventDefault();_callback.call(_context,_context,ai),$j("body").append(ai.helper),event.dataTransfer.setDragImage(ai.helper[0],-12,-12)}}).on("drag",function(e){null!=e.dataTransfer&&ai.helper.remove()})):$j(node).off("mousedown").on({mousedown:function(event){_context.isSelection(event)?($j(node).draggable("disable"),$j(node).removeClass("ui-draggable-disabled ui-state-disabled")):3!=event.which&&document.getSelection().removeAllRanges()},mouseup:function(){$j(node).draggable("enable"),$j("body").css({cursor:"auto"})}}),$j(node).draggable({distance:20,cursor:"move",cursorAt:{top:-12,left:-12},helper:function(e){return _callback.call(_context,!1,ai),$j(node).data("ddTypes",ai.ddTypes),$j(node).data("selected",ai.selected),ai.helper?(ai.helper.addClass("et2_egw_action_ddHelper"),$j("body").append(ai.helper),ai.helper):ai.defaultDDHelper(ai.selected)},start:function(e){var $target=$j(e.originalEvent.target);return e.originalEvent.pageX-$target.offset().left+15>$target.innerWidth()?!1:null!=ai.helper},revert:function(valid){var dTarget=this;if(valid)return!1;var tipTelorance=10,helperTop=ai.helper.position().top;if(helperTop>=dTarget.offset().top&&helperTop<=dTarget.height()+dTarget.offset().top+tipTelorance){var key=["Mac68K","MacPPC","MacIntel"].indexOf(window.navigator.platform)<0?egw.lang("Ctrl"):egw.lang("Command ⌘");egw.message(egw.lang("Hold [%1] key to select text eg. to copy it",key),"info")}return!0},refreshPositions:!0,scroll:!1,iframeFix:!0,delay:300}),!0}return!1},ai.doUnregisterAction=function(_aoi){var node=_aoi.getDOMNode();node&&$j(node).data("uiDraggable")&&$j(node).draggable("destroy")},ai.doExecuteImplementation=function(_context,_selected,_links){this.helper=null;var hasLink=!1;this.ddTypes=[],this.selected=_selected;for(var k in _links)if(_links[k].visible){hasLink=!0,!this.helper&&_links[k].actionObj.onExecute.hasHandler()&&(this.helper=_links[k].actionObj.execute(_selected));for(var type=$j.isArray(_links[k].actionObj.dragType)?_links[k].actionObj.dragType:[_links[k].actionObj.dragType],i=0;i<type.length;i++)-1==this.ddTypes.indexOf(type[i])&&this.ddTypes.push(type[i])}return!this.helper&&hasLink&&(this.helper=ai.defaultDDHelper(_selected)),!0},ai}function egwDropAction(_id,_handler,_caption,_icon,_onExecute,_allowOnMultiple){var action=new egwAction(_id,_handler,_caption,_icon,_onExecute,_allowOnMultiple);return action.type="drop",action.acceptedTypes=["default"],action.canHaveChildren=["drag","popup"],action.default=!1,action.order=0,action.group=0,action.set_default=function(_value){action.default=_value},action.set_order=function(_value){action.order=_value},action.set_group=function(_value){action.group=_value},action.set_acceptedTypes=function(_value){_value instanceof Array?action.acceptedTypes=_value:action.acceptedTypes=[_value]},action}function getDropImplementation(){return _dropActionImpl||(_dropActionImpl=new egwDropActionImplementation),_dropActionImpl}function egwDropActionImplementation(){var ai=new egwActionImplementation;return ai.type="drop",ai.doRegisterAction=function(_aoi,_callback,_context){var node=_aoi.getDOMNode(),self=this;return node?($j(node).droppable({accept:function(_draggable){if("undefined"!=typeof _draggable.data("ddTypes")){for(var accepted=self._fetchAccepted(_callback.call(_context,"links",self,EGW_AO_EXEC_THIS)),ddTypes=_draggable.data("ddTypes"),i=0;i<ddTypes.length;i++)if(-1!=accepted.indexOf(ddTypes[i]))return!0;return!1}},drop:function(event,ui){var draggable=ui.draggable,ddTypes=draggable.data("ddTypes"),selected=draggable.data("selected"),links=_callback.call(_context,"links",self,EGW_AO_EXEC_THIS);for(var k in links){for(var accepted=links[k].actionObj.acceptedTypes,enabled=!1,i=0;i<ddTypes.length;i++)if(-1!=accepted.indexOf(ddTypes[i])){enabled=!0;break}!links[k].actionObj.allowOnMultiple&&selected.length>1&&(enabled=!1),enabled||(links[k].enabled=!1,links[k].visible=!links[k].actionObj.hideOnDisabled)}var cnt=0,lnk=null;for(var k in links)links[k].enabled&&links[k].visible&&(lnk=links[k],cnt+=1+links[k].actionObj.children.length,lnk.actionObj.ui=ui);if(1==cnt&&window.setTimeout(function(){lnk.actionObj.execute(selected,_context)},0),cnt>1){var popup=getPopupImplementation(),pos=popup._getPageXY(event.originalEvent);popup.auto_paste=!1,window.setTimeout(function(){popup.doExecuteImplementation(pos,selected,links,_context),popup.auto_paste=!0},0)}$j("body").css({cursor:"auto"}),_aoi.triggerEvent(EGW_AI_DRAG_OUT,{event:event,ui:ui})},over:function(event,ui){_aoi.triggerEvent(EGW_AI_DRAG_OVER,{event:event,ui:ui})},out:function(event,ui){_aoi.triggerEvent(EGW_AI_DRAG_OUT,{event:event,ui:ui})},tolerance:"pointer",hoverClass:"drop-hover",greedy:!0}),!0):!1},ai.doUnregisterAction=function(_aoi){var node=_aoi.getDOMNode();node&&$j(node).data("uiDroppable")&&$j(node).droppable("destroy")},ai._fetchAccepted=function(_links){var accepted=[];for(var k in _links)for(var i=0;i<_links[k].actionObj.acceptedTypes.length;i++){var type=_links[k].actionObj.acceptedTypes[i];-1==accepted.indexOf(type)&&accepted.push(type)}return accepted},ai.doExecuteImplementation=function(_context,_selected,_links){return"links"==_context?_links:void 0},ai}function dhtmlxTree_getNode(_tree,_itemId){var node=_tree._globalIdStorageFind(_itemId);return null!=node?$j("tr:first",node.htmlNode):void 0}function dhtmlxtreeItemAOI(_tree,_itemId){var aoi=new egwActionObjectInterface;return aoi.node=dhtmlxTree_getNode(_tree,_itemId),aoi.id=_itemId,aoi.doGetDOMNode=function(){return aoi.node},aoi.doTriggerEvent=function(_event){_event==EGW_AI_DRAG_OVER&&$j(this.node).addClass("draggedOver"),_event==EGW_AI_DRAG_OUT&&$j(this.node).removeClass("draggedOver")},aoi.doSetState=function(_state){_tree&&_tree.focusItem&&(egwBitIsSet(_state,EGW_AO_STATE_FOCUSED)&&_tree.focusItem(this.id),egwBitIsSet(_state,EGW_AO_STATE_SELECTED)&&_tree.selectItem(this.id,!1))},aoi}function dhtmlXMenuObject(baseId,skin){var main_self=this;if(this.addBaseIdAsContextZone=null,this.isDhtmlxMenuObject=!0,this.skin=null!=skin?skin:"undefined"!=typeof dhtmlx&&"string"==typeof dhtmlx.skin?dhtmlx.skin:"dhx_skyblue",this.imagePath="",this._isIE6=!1,_isIE&&(this._isIE6=null==window.XMLHttpRequest),null==baseId)this.base=document.body;else{var baseObj="string"==typeof baseId?document.getElementById(baseId):baseId;if(null!=baseObj){for(this.base=baseObj,this.base.id||(this.base.id=(new Date).valueOf());this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);this.base.className+=" dhtmlxMenu_"+this.skin+"_Middle dir_left",this.base._autoSkinUpdate=!0,this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu),this.addBaseIdAsContextZone=this.base.id,this.base.onselectstart=function(e){return e=e||event,e.returnValue=!1,!1},this.base.oncontextmenu=function(e){return e=e||event,e.returnValue=!1,!1}}else this.base=document.body}if(this.topId="dhxWebMenuTopId",!this.extendedModule){for(var t=function(){alert(this.i18n.dhxmenuextalert)},extMethods=new Array("setItemEnabled","setItemDisabled","isItemEnabled","_changeItemState","getItemText","setItemText","loadFromHTML","hideItem","showItem","isItemHidden","_changeItemVisible","setUserData","getUserData","setOpenMode","setWebModeTimeout","enableDynamicLoading","_updateLoaderIcon","getItemImage","setItemImage","clearItemImage","setAutoShowMode","setAutoHideMode","setContextMenuHideAllMode","getContextMenuHideAllMode","setVisibleArea","setTooltip","getTooltip","setHotKey","getHotKey","setItemSelected","setTopText","setRTL","setAlign","setHref","clearHref","getCircuit","_clearAllSelectedSubItemsInPolygon","_checkArrowsState","_addUpArrow","_addDownArrow","_removeUpArrow","_removeDownArrow","_isArrowExists","_doScrollUp","_doScrollDown","_countPolygonItems","setOverflowHeight","_getRadioImgObj","_setRadioState","_radioOnClickHandler","getRadioChecked","setRadioChecked","addRadioButton","_getCheckboxState","_setCheckboxState","_readLevel","_updateCheckboxImage","_checkboxOnClickHandler","setCheckboxState","getCheckboxState","addCheckbox","serialize"),q=0;q<extMethods.length;q++)this[extMethods[q]]||(this[extMethods[q]]=t);extMethods=null}return this.fixedPosition=!1,this.menuSelected=-1,this.menuLastClicked=-1,this.idPrefix="",this.itemTagName="item",this.itemTextTagName="itemtext",this.userDataTagName="userdata",this.itemTipTagName="tooltip",this.itemHotKeyTagName="hotkey",this.itemHrefTagName="href",this.dirTopLevel="bottom",this.dirSubLevel="right",this.menuX1=null,this.menuX2=null,this.menuY1=null,this.menuY2=null,this.menuMode="web",this.menuTimeoutMsec=400,this.menuTimeoutHandler=null,this.autoOverflow=!1,this.idPull={},this.itemPull={},this.userData={},this.radio={},this._rtl=!1,this._align="left",this.menuTouched=!1,this.zIndInit=1200,this.zInd=this.zIndInit,this.zIndStep=50,this.menuModeTopLevelTimeout=!0,this.menuModeTopLevelTimeoutTime=200,this._topLevelBottomMargin=1,this._topLevelRightMargin=0,this._topLevelOffsetLeft=1,this._arrowFFFix=_isIE&&"BackCompat"==document.compatMode?0:-4,this.setSkin=function(skin){var oldSkin=this.skin;switch(this.skin=skin,this.skin){case"dhx_black":case"dhx_blue":case"dhx_skyblue":case"dhx_web":this._topLevelBottomMargin=2,this._topLevelRightMargin=1,this._topLevelOffsetLeft=1,this._arrowFFFix=_isIE&&"BackCompat"==document.compatMode?0:-4;break;case"dhx_web":this._arrowFFFix=0;break;case"dhx_terrace":this._topLevelBottomMargin=0,this._topLevelRightMargin=0,this._topLevelOffsetLeft=0,this._arrowFFFix=_isIE&&"BackCompat"==document.compatMode?0:-4}this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+oldSkin+"_Middle","")+" dhtmlxMenu_"+this.skin+"_Middle");for(var a in this.idPull)this.idPull[a].className=String(this.idPull[a].className).replace(oldSkin,this.skin)},this.setSkin(this.skin),this.dLoad=!1,this.dLoadUrl="",this.dLoadSign="?",this.loaderIcon=!1,this.limit=0,this._scrollUpTM=null,this._scrollUpTMTime=20,this._scrollUpTMStep=3,this._scrollDownTM=null,this._scrollDownTMTime=20,this._scrollDownTMStep=3,this.context=!1,this.contextZones={},this.contextMenuZoneId=!1,this.contextAutoShow=!0,this.contextAutoHide=!0,this.contextHideAllMode=!0,this._selectedSubItems=new Array,this._openedPolygons=new Array,this._addSubItemToSelected=function(item,polygon){for(var t=!0,q=0;q<this._selectedSubItems.length;q++)this._selectedSubItems[q][0]==item&&this._selectedSubItems[q][1]==polygon&&(t=!1);return 1==t&&this._selectedSubItems.push(new Array(item,polygon)),t},this._removeSubItemFromSelected=function(item,polygon){for(var m=new Array,t=!1,q=0;q<this._selectedSubItems.length;q++)this._selectedSubItems[q][0]==item&&this._selectedSubItems[q][1]==polygon?t=!0:m[m.length]=this._selectedSubItems[q];return 1==t&&(this._selectedSubItems=m),t},this._getSubItemToDeselectByPolygon=function(polygon){for(var m=new Array,q=0;q<this._selectedSubItems.length;q++)if(this._selectedSubItems[q][1]==polygon){m[m.length]=this._selectedSubItems[q][0],m=m.concat(this._getSubItemToDeselectByPolygon(this._selectedSubItems[q][0]));for(var t=!0,w=0;w<this._openedPolygons.length;w++)this._openedPolygons[w]==this._selectedSubItems[q][0]&&(t=!1);1==t&&(this._openedPolygons[this._openedPolygons.length]=this._selectedSubItems[q][0]),this._selectedSubItems[q][0]=-1,this._selectedSubItems[q][1]=-1}return m},this._hidePolygon=function(id){if(null!=this.idPull["polygon_"+id]){if("undefined"!=typeof this._menuEffect&&this._menuEffect!==!1)this._hidePolygonEffect("polygon_"+id);else{if("none"==this.idPull["polygon_"+id].style.display)return;this.idPull["polygon_"+id].style.display="none",null!=this.idPull["arrowup_"+id]&&(this.idPull["arrowup_"+id].style.display="none"),null!=this.idPull["arrowdown_"+id]&&(this.idPull["arrowdown_"+id].style.display="none"),this._updateItemComplexState(id,!0,!1),this._isIE6&&null!=this.idPull["polygon_"+id+"_ie6cover"]&&(this.idPull["polygon_"+id+"_ie6cover"].style.display="none")}id=String(id).replace(this.idPrefix,""),id==this.topId&&(id=null),this.callEvent("onHide",[id]),null!=id&&"dhx_terrace"==this.skin&&this.itemPull[this.idPrefix+id].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+id,!0)}},this._showPolygon=function(id,openType){var itemCount=this._countVisiblePolygonItems(id);if(0!=itemCount){var pId="polygon_"+id;if(null!=this.idPull[pId]&&null!=this.idPull[id]){if(this.menuModeTopLevelTimeout&&"web"==this.menuMode&&!this.context&&!this.idPull[id]._mouseOver&&openType==this.dirTopLevel)return;this.fixedPosition||this._autoDetectVisibleArea();var arrUpH=0,arrDownH=0,arrowUp=null,arrowDown=null;if(this.idPull[pId].style.visibility="hidden",this.idPull[pId].style.left="0px",this.idPull[pId].style.top="0px",this.idPull[pId].style.display="",this.idPull[pId].style.zIndex=this.zInd,this.autoOverflow)if(this.idPull[pId].firstChild.offsetHeight>this.menuY1+this.menuY2){var t0=Math.floor((this.menuY2-this.menuY1-35)/24);this.limit=t0}else this.limit=0,null!=this.idPull["arrowup_"+id]&&this._removeUpArrow(String(id).replace(this.idPrefix,"")),null!=this.idPull["arrowdown_"+id]&&this._removeDownArrow(String(id).replace(this.idPrefix,""));if(this.limit>0&&this.limit<itemCount&&(null==this.idPull["arrowup_"+id]&&this._addUpArrow(String(id).replace(this.idPrefix,"")),null==this.idPull["arrowdown_"+id]&&this._addDownArrow(String(id).replace(this.idPrefix,"")),arrowUp=this.idPull["arrowup_"+id],arrowUp.style.visibility="hidden",arrowUp.style.display="",arrowUp.style.zIndex=this.zInd,arrUpH=arrowUp.offsetHeight,arrowDown=this.idPull["arrowdown_"+id],arrowDown.style.visibility="hidden",arrowDown.style.display="",arrowDown.style.zIndex=this.zInd,arrDownH=arrowDown.offsetHeight),this.limit>0&&(this.limit<itemCount?(this.idPull[pId].style.height=24*this.limit+"px",this.idPull[pId].scrollTop=0):this.idPull[pId].style.height=""),this.zInd+=this.zIndStep,null!=this.itemPull[id]){"polygon_"+this.itemPull[id].parent}else if(this.context){this.idPull[this.idPrefix+this.topId]}var srcX=null!=this.idPull[id].tagName?getAbsoluteLeft(this.idPull[id]):this.idPull[id][0],srcY=null!=this.idPull[id].tagName?getAbsoluteTop(this.idPull[id]):this.idPull[id][1],srcW=null!=this.idPull[id].tagName?this.idPull[id].offsetWidth:0,srcH=null!=this.idPull[id].tagName?this.idPull[id].offsetHeight:0,x=0,y=0,w=this.idPull[pId].offsetWidth,h=this.idPull[pId].offsetHeight+arrUpH+arrDownH;if("bottom"==openType&&(x=this._rtl?srcX+(null!=srcW?srcW:0)-w:"right"==this._align?srcX+srcW-w:srcX-1+(openType==this.dirTopLevel?this._topLevelRightMargin:0),y=srcY-1+srcH+this._topLevelBottomMargin),"right"==openType&&(x=srcX+srcW-1,y=srcY+2),"left"==openType&&(x=srcX-this.idPull[pId].offsetWidth+2,y=srcY+2),"top"==openType&&(x=srcX-1,y=srcY-h+2),this.fixedPosition)var mx=65536,my=65536;else{var mx=null!=this.menuX2?this.menuX2:0,my=null!=this.menuY2?this.menuY2:0;0==mx&&(window.innerWidth?(mx=window.innerWidth,my=window.innerHeight):(mx=document.body.offsetWidth,my=document.body.scrollHeight))}if(x+w>mx&&!this._rtl&&(x=srcX-w+2),x<this.menuX1&&this._rtl&&(x=srcX+srcW-2),0>x&&(x=0),y+h>my&&null!=this.menuY2&&(y=Math.max(srcY+srcH-h+2,this._isVisibleArea?this.menuY1+2:2),this.context&&this.idPrefix+this.topId==id&&null!=arrowDown&&(y-=2),null==this.itemPull[id]||this.context||this.itemPull[id].parent==this.idPrefix+this.topId&&(y-=this.base.offsetHeight)),this.idPull[pId].style.left=x+"px",this.idPull[pId].style.top=y+arrUpH+"px","undefined"!=typeof this._menuEffect&&this._menuEffect!==!1)this._showPolygonEffect(pId);else if(this.idPull[pId].style.visibility="",this.limit>0&&this.limit<itemCount&&(arrowUp.style.left=x+"px",arrowUp.style.top=y+"px",arrowUp.style.width=w+this._arrowFFFix+"px",arrowUp.style.visibility="",arrowDown.style.left=x+"px",arrowDown.style.top=y+h-arrDownH+"px",arrowDown.style.width=w+this._arrowFFFix+"px",arrowDown.style.visibility="",this._checkArrowsState(id)),this._isIE6){var pIdIE6=pId+"_ie6cover";if(null==this.idPull[pIdIE6]){var ifr=document.createElement("IFRAME");ifr.className="dhtmlxMenu_IE6CoverFix_"+this.skin,ifr.frameBorder=0,ifr.setAttribute("src","javascript:false;"),document.body.insertBefore(ifr,document.body.firstChild),this.idPull[pIdIE6]=ifr}this.idPull[pIdIE6].style.left=x+"px",this.idPull[pIdIE6].style.top=y+"px",this.idPull[pIdIE6].style.width=w+"px",this.idPull[pIdIE6].style.height=h+"px",this.idPull[pIdIE6].style.zIndex=this.idPull[pId].style.zIndex-1,this.idPull[pIdIE6].style.display=""}id=String(id).replace(this.idPrefix,""),id==this.topId&&(id=null),this.callEvent("onShow",[id]),null!=id&&"dhx_terrace"==this.skin&&this.itemPull[this.idPrefix+id].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+id,!1)}}},this._redistribSubLevelSelection=function(id,parentId){for(;this._openedPolygons.length>0;)this._openedPolygons.pop();var i=this._getSubItemToDeselectByPolygon(parentId);this._removeSubItemFromSelected(-1,-1);for(var q=0;q<i.length;q++)null!=this.idPull[i[q]]&&i[q]!=id&&"enabled"==this.itemPull[i[q]].state&&(this.idPull[i[q]].className="sub_item");for(var q=0;q<this._openedPolygons.length;q++)this._openedPolygons[q]!=parentId&&this._hidePolygon(this._openedPolygons[q]);if("enabled"==this.itemPull[id].state){
if(this.idPull[id].className="sub_item_selected",this.itemPull[id].complex&&this.dLoad&&"no"==this.itemPull[id].loaded){1==this.loaderIcon&&this._updateLoaderIcon(id,!0);var xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this.itemPull[id].loaded="get",this.callEvent("onXLS",[]),xmlLoader.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&parentId="+id.replace(this.idPrefix,"")+"&etc="+(new Date).getTime())}(this.itemPull[id].complex||this.dLoad&&"yes"==this.itemPull[id].loaded)&&this.itemPull[id].complex&&null!=this.idPull["polygon_"+id]&&(this._updateItemComplexState(id,!0,!0),this._showPolygon(id,this.dirSubLevel)),this._addSubItemToSelected(id,parentId),this.menuSelected=id}},this._doOnClick=function(id,type,casState){if(this.menuLastClicked=id,null!=this.itemPull[this.idPrefix+id].href_link&&"enabled"==this.itemPull[this.idPrefix+id].state){var form=document.createElement("FORM"),k=String(this.itemPull[this.idPrefix+id].href_link).split("?");if(form.action=k[0],null!=k[1])for(var p=String(k[1]).split("&"),q=0;q<p.length;q++){var j=String(p[q]).split("="),m=document.createElement("INPUT");m.type="hidden",m.name=j[0]||"",m.value=j[1]||"",form.appendChild(m)}return null!=this.itemPull[this.idPrefix+id].href_target&&(form.target=this.itemPull[this.idPrefix+id].href_target),form.style.display="none",document.body.appendChild(form),form.submit(),void(null!=form&&(document.body.removeChild(form),form=null))}if("c"!=type.charAt(0)&&"d"!=type.charAt(1)&&"s"!=type.charAt(2)){if(this.checkEvent("onClick"))this.callEvent("onClick",[id,this.contextMenuZoneId,casState]);else if("d"==type.charAt(1)||"win"==this.menuMode&&"t"==type.charAt(2))return;this.context&&this._isContextMenuVisible()&&this.contextAutoHide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}},this._doOnTouchMenu=function(id){0==this.menuTouched&&(this.menuTouched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[id]))},this._searchMenuNode=function(node,menu){for(var m=new Array,q=0;q<menu.length;q++)if("object"==typeof menu[q]){5==menu[q].length&&"object"!=typeof menu[q][0]&&menu[q][0].replace(this.idPrefix,"")==node&&0==q&&(m=menu);var j=this._searchMenuNode(node,menu[q]);j.length>0&&(m=j)}return m},this._getMenuNodes=function(node){var m=new Array;for(var a in this.itemPull)this.itemPull[a].parent==node&&(m[m.length]=a);return m},this._genStr=function(w){for(var s="",z="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",q=0;w>q;q++)s+=z.charAt(Math.round(Math.random()*(z.length-1)));return s},this.getItemType=function(id){return id=this.idPrefix+id,null==this.itemPull[id]?null:this.itemPull[id].type},this.forEachItem=function(handler){for(var a in this.itemPull)handler(String(a).replace(this.idPrefix,""))},this._clearAndHide=function(){for(main_self.menuSelected=-1,main_self.menuLastClicked=-1;main_self._openedPolygons.length>0;)main_self._openedPolygons.pop();for(var q=0;q<main_self._selectedSubItems.length;q++){var id=main_self._selectedSubItems[q][0];null!=main_self.idPull[id]&&"enabled"==main_self.itemPull[id].state&&("sub_item_selected"==main_self.idPull[id].className&&(main_self.idPull[id].className="sub_item"),main_self.idPull[id].className=="dhtmlxMenu_"+main_self.skin+"_TopLevel_Item_Selected"&&(null!=main_self.itemPull[id].cssNormal?main_self.idPull[id].className=main_self.itemPull[id].cssNormal:main_self.idPull[id].className="dhtmlxMenu_"+main_self.skin+"_TopLevel_Item_Normal")),main_self._hidePolygon(id)}main_self.menuTouched=!1,main_self.context&&(main_self.contextHideAllMode?(main_self._hidePolygon(main_self.idPrefix+main_self.topId),main_self.zInd=main_self.zIndInit):main_self.zInd=main_self.zIndInit+main_self.zIndStep)},this._doOnLoad=function(){},this.loadXML=function(xmlFile,onLoadFunction){onLoadFunction&&(this._doOnLoad=function(){onLoadFunction()}),this.callEvent("onXLS",[]),this._xmlLoader.loadXML(xmlFile)},this.loadXMLString=function(xmlString,onLoadFunction){onLoadFunction&&(this._doOnLoad=function(){onLoadFunction()}),this._xmlLoader.loadXMLString(xmlString)},this._buildMenu=function(t,parentId){for(var u=0,q=0;q<t.childNodes.length;q++)if(t.childNodes[q].tagName==this.itemTagName){var r=t.childNodes[q],item={};item.id=this.idPrefix+(r.getAttribute("id")||this._genStr(24)),item.title=r.getAttribute("text")||"",item.imgen=r.getAttribute("img")||"",item.imgdis=r.getAttribute("imgdis")||"",item.tip="",item.hotkey="",null!=r.getAttribute("cssNormal")&&(item.cssNormal=r.getAttribute("cssNormal")),item.type=r.getAttribute("type")||"item","checkbox"==item.type&&(item.checked=null!=r.getAttribute("checked"),item.imgen="chbx_"+(item.checked?"1":"0"),item.imgdis=item.imgen),"radio"==item.type&&(item.checked=null!=r.getAttribute("checked"),item.imgen="rdbt_"+(item.checked?"1":"0"),item.imgdis=item.imgen,item.group=r.getAttribute("group")||this._genStr(24),null==this.radio[item.group]&&(this.radio[item.group]=new Array),this.radio[item.group][this.radio[item.group].length]=item.id),item.state=!(null==r.getAttribute("enabled")&&null==r.getAttribute("disabled")||"false"!=r.getAttribute("enabled")&&"true"!=r.getAttribute("disabled"))?"disabled":"enabled",item.parent=null!=parentId?parentId:this.idPrefix+this.topId,item.complex=this.dLoad?null!=r.getAttribute("complex"):this._buildMenu(r,item.id)>0,this.dLoad&&item.complex&&(item.loaded="no"),this.itemPull[item.id]=item;for(var w=0;w<r.childNodes.length;w++){var tagNm=r.childNodes[w].tagName;if(null!=tagNm&&(tagNm=tagNm.toLowerCase()),tagNm==this.userDataTagName){var d=r.childNodes[w];null!=d.getAttribute("name")&&(this.userData[item.id+"_"+d.getAttribute("name")]=null!=d.firstChild&&null!=d.firstChild.nodeValue?d.firstChild.nodeValue:"")}tagNm==this.itemTextTagName&&(item.title=r.childNodes[w].firstChild.nodeValue),tagNm==this.itemTipTagName&&(item.tip=r.childNodes[w].firstChild.nodeValue),tagNm==this.itemHotKeyTagName&&(item.hotkey=r.childNodes[w].firstChild.nodeValue),tagNm==this.itemHrefTagName&&"item"==item.type&&(item.href_link=r.childNodes[w].firstChild.nodeValue,null!=r.childNodes[w].getAttribute("target")&&(item.href_target=r.childNodes[w].getAttribute("target")))}u++}return u},this._xmlParser=function(){if(main_self.dLoad){var t=this.getXMLTopNode("menu");if(parentId=null!=t.getAttribute("parentId")?t.getAttribute("parentId"):null,null==parentId)main_self._buildMenu(t,null),main_self._initTopLevelMenu();else{if(main_self._buildMenu(t,main_self.idPrefix+parentId),main_self._addSubMenuPolygon(main_self.idPrefix+parentId,main_self.idPrefix+parentId),main_self.menuSelected==main_self.idPrefix+parentId){var pId=main_self.idPrefix+parentId,isTop=main_self.itemPull[main_self.idPrefix+parentId].parent==main_self.idPrefix+main_self.topId,level=isTop&&!main_self.context?main_self.dirTopLevel:main_self.dirSubLevel,isShow=!1;if(isTop&&main_self.menuModeTopLevelTimeout&&"web"==main_self.menuMode&&!main_self.context){var item=main_self.idPull[main_self.idPrefix+parentId];if(1==item._mouseOver){var delay=main_self.menuModeTopLevelTimeoutTime-((new Date).getTime()-item._dynLoadTM);delay>1&&(item._menuOpenTM=window.setTimeout(function(){main_self._showPolygon(pId,level)},delay),isShow=!0)}}isShow||main_self._showPolygon(pId,level)}main_self.itemPull[main_self.idPrefix+parentId].loaded="yes",1==main_self.loaderIcon&&main_self._updateLoaderIcon(main_self.idPrefix+parentId,!1)}this.destructor(),main_self.callEvent("onXLE",[])}else{var t=this.getXMLTopNode("menu");main_self._buildMenu(t,null),main_self.init(),main_self.callEvent("onXLE",[]),main_self._doOnLoad()}},this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window),this._showSubLevelItem=function(id,back){null!=document.getElementById("arrow_"+this.idPrefix+id)&&(document.getElementById("arrow_"+this.idPrefix+id).style.display=back?"none":""),null!=document.getElementById("image_"+this.idPrefix+id)&&(document.getElementById("image_"+this.idPrefix+id).style.display=back?"none":""),null!=document.getElementById(this.idPrefix+id)&&(document.getElementById(this.idPrefix+id).style.display=back?"":"none")},this._hideSubLevelItem=function(id){this._showSubLevelItem(id,!0)},this.idPrefix=this._genStr(12),this._bodyClick=function(e){e=e||event,2==e.button||_isOpera&&1==e.ctrlKey||(main_self.context?main_self.contextAutoHide&&(!_isOpera||main_self._isContextMenuVisible()&&_isOpera)&&main_self._hideContextMenu():main_self._clearAndHide&&main_self._clearAndHide())},this._bodyContext=function(e){e=e||event;var t=String((e.srcElement||e.target).className);if(-1==t.search("dhtmlxMenu")||-1==t.search("SubLevelArea")){for(var toHide=!0,testZone=e.target||e.srcElement;null!=testZone;)null!=testZone.id&&main_self.isContextZone(testZone.id)&&(toHide=!1),testZone==document.body&&(toHide=!1),testZone=testZone.parentNode;toHide&&main_self.hideContextMenu()}},"undefined"!=typeof window.addEventListener?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext)),this._UID=this._genStr(32),dhtmlxMenuObjectLiveInstances[this._UID]=this,dhtmlxEventable(this),this}function egwMenuImpl(_structure){this.dhtmlxmenu=new dhtmlXMenuObject,this.dhtmlxmenu.setSkin("egw"),this.dhtmlxmenu.renderAsContextMenu();var self=this;this.dhtmlxmenu.attachEvent("onClick",function(id){if(id){var elem=self.dhtmlxmenu.getUserData(id,"egw_menu");if(elem&&elem.onClick){elem.checkbox&&self.dhtmlxmenu.setContextMenuHideAllMode(!1);var res=elem.onClick(elem);if(elem.checkbox&&(res===!1||res===!0)){var checked=res;0!=elem.groupIndex?self.dhtmlxmenu.setRadioChecked(id,checked):self.dhtmlxmenu.setCheckboxState(id,checked)}}}}),this.dhtmlxmenu.attachEvent("onRadioClick",function(group,idChecked,idClicked,zoneId,casState){if(idClicked){var elem=self.dhtmlxmenu.getUserData(idClicked,"egw_menu");elem&&elem.set_checked(!0)}return!0}),this.dhtmlxmenu.attachEvent("onCheckboxClick",function(id,state,zoneId,casState){if(id){var elem=self.dhtmlxmenu.getUserData(id,"egw_menu");elem&&elem.set_checked(!state)}return!0}),this._translateStructure(_structure,this.dhtmlxmenu.topId,0)}!function(global,factory){"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return"function"===type||jQuery.isWindow(obj)?!1:1===obj.nodeType&&length?!0:"array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>=0!==not})}function sibling(cur,dir){do cur=cur[dir];while(cur&&1!==cur.nodeType);return cur}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function detach(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))}function completed(){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())}function dataAttr(elem,key,data){if(void 0===data&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=void 0}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||void 0!==data||"string"!=typeof name)return id||(id=isNode?elem[internalKey]=deletedIds.pop()||jQuery.guid++:internalKey),cache[id]||(cache[id]=isNode?{}:{toJSON:jQuery.noop}),"object"!=typeof name&&"function"!=typeof name||(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),void 0!==data&&(thisCache[jQuery.camelCase(name)]=data),"string"==typeof name?(ret=thisCache[name],null==ret&&(ret=thisCache[jQuery.camelCase(name)])):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){jQuery.isArray(name)?name=name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache?name=[name]:(name=jQuery.camelCase(name),name=name in thisCache?[name]:name.split(" ")),i=name.length;for(;i--;)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==strundefined?context.querySelectorAll(tag||"*"):void 0;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==jQuery.find.attr(elem,"type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}}function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement),doc=(iframe[0].contentWindow||iframe[0].contentDocument).document,doc.write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function addGetHookIf(conditionFn,hookFn){return{get:function(){var condition=conditionFn();if(null!=condition)return condition?void delete this.get:(this.get=hookFn).apply(this,arguments)}}}function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;length>index;index++)elem=elements[index],elem.style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;length>index;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){if(val=curCSS(elem,name,styles),(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function createFxNow(){return setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],display=jQuery.css(elem,"display"),checkDisplay="none"===display?jQuery._data(elem,"olddisplay")||defaultDisplay(elem.nodeName):display,"inline"===checkDisplay&&"none"===jQuery.css(elem,"float")&&(support.inlineBlockNeedsLayout&&"inline"!==defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block")),opts.overflow&&(style.overflow="hidden",support.shrinkWrapBlocks()||anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(jQuery.isEmptyObject(orig))"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display);else{dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=jQuery._data(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;length>index;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);length>index;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType.charAt(0)?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){conv===!0?conv=converters[conv2]:converters[conv2]!==!0&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(conv!==!0)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var deletedIds=[],slice=deletedIds.slice,concat=deletedIds.concat,push=deletedIds.push,indexOf=deletedIds.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},version="1.11.2",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?0>num?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(j>=0&&len>j?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:deletedIds.sort,splice:deletedIds.splice},jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!jQuery.isArray(obj)&&obj-parseFloat(obj)+1>=0},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},isPlainObject:function(obj){var key;if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(support.ownLast)for(key in obj)return hasOwn.call(obj,key);for(key in obj);return void 0===key||hasOwn.call(obj,key)},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){
window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;length>i&&(value=callback.apply(obj[i],args),value!==!1);i++);else for(i in obj)if(value=callback.apply(obj[i],args),value===!1)break}else if(isArray)for(;length>i&&(value=callback.call(obj[i],i,obj[i]),value!==!1);i++);else for(i in obj)if(value=callback.call(obj[i],i,obj[i]),value===!1)break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(indexOf)return indexOf.call(arr,elem,i);for(len=arr.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;len>j;)first[i++]=second[j++];if(len!==len)for(;void 0!==second[j];)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,invert){for(var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;length>i;i++)callbackInverse=!callback(elems[i],i),callbackInverse!==callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),null!=value&&ret.push(value);else for(i in elems)value=callback(elems[i],i,arg),null!=value&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;return"string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy):void 0},now:function(){return+new Date},support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],nodeType=context.nodeType,"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&documentIsHTML){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(elem=context.getElementById(m),!elem||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=1!==nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&"undefined"!=typeof context.getElementsByTagName&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";len>i;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if(outerCache=elem[expando]||(elem[expando]={}),(oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));return checkContext=null,ret}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;len>i;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1},setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,parent=doc.defaultView,parent&&parent!==parent.top&&(parent.addEventListener?parent.addEventListener("unload",unloadHandler,!1):parent.attachEvent&&parent.attachEvent("onunload",unloadHandler)),documentIsHTML=!isXML(doc),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(doc.getElementsByClassName),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if("undefined"!=typeof context.getElementById&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node="undefined"!=typeof elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return"undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){return documentIsHTML?context.getElementsByClassName(className):void 0},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\f]' msallowcapture=''><option selected=''></option></select>",div.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),div.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare?compare:(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||"undefined"!=typeof elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:operator?(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:"|="===operator?result===check||result.slice(0,check.length+1)===check+"-":!1):!0}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return diff-=last,diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)cached=matcherFromTokens(match[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0],!context)return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){return isXML?void 0:elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){return isXML||"input"!==elem.nodeName.toLowerCase()?void 0:elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;return isXML?void 0:elem[name]===!0?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;
jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;len>i;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;len>i;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,document=window.document,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector)return this;if("string"==typeof selector){if(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?"undefined"!=typeof rootjQuery.ready?rootjQuery.ready(selector):selector(jQuery):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(void 0===until||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}}),jQuery.fn.extend({has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;len>i;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;l>i;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),this.length>1&&(guaranteedUnique[name]||(ret=jQuery.unique(ret)),rparentsprev.test(name)&&(ret=ret.reverse())),this.pushStack(ret)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(firingLength>=index&&firingLength--,firingIndex>=index&&firingIndex--)}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=void 0,this},disabled:function(){return!list},lock:function(){return stack=void 0,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=args||[],args=[context,args.slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);length>i;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready")))}}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&!function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)};var i,strundefined="undefined";for(i in jQuery(support))break;support.ownLast="0"!==i,support.inlineBlockNeedsLayout=!1,jQuery(function(){var val,div,body,container;body=document.getElementsByTagName("body")[0],body&&body.style&&(div=document.createElement("div"),container=document.createElement("div"),container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),typeof div.style.zoom!==strundefined&&(div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",support.inlineBlockNeedsLayout=val=3===div.offsetWidth,val&&(body.style.zoom=1)),body.removeChild(container))}),function(){var div=document.createElement("div");if(null==support.deleteExpando){support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}}div=null}(),jQuery.acceptData=function(elem){var noData=jQuery.noData[(elem.nodeName+" ").toLowerCase()],nodeType=+elem.nodeType||1;return 1!==nodeType&&9!==nodeType?!1:!noData||noData!==!0&&elem.getAttribute("classid")===noData};var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(i=attrs.length;i--;)attrs[i]&&(name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name])));jQuery._data(elem,"parsedAttrs",!0)}return data}return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):arguments.length>1?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,key,jQuery.data(elem,key)):void 0},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;return elem?(type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]):void 0},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)tmp=jQuery._data(elements[i],type+"queueHooks"),tmp&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)},access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;length>i;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},rcheckableType=/^(?:checkbox|radio)$/i;!function(){var input=document.createElement("input"),div=document.createElement("div"),fragment=document.createDocumentFragment();if(div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",support.leadingWhitespace=3===div.firstChild.nodeType,support.tbody=!div.getElementsByTagName("tbody").length,support.htmlSerialize=!!div.getElementsByTagName("link").length,support.html5Clone="<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,input.type="checkbox",input.checked=!0,fragment.appendChild(input),support.appendChecked=input.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue,fragment.appendChild(div),div.innerHTML="<input type='radio' checked='checked' name='t'/>",support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,support.noCloneEvent=!0,div.attachEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).click()),null==support.deleteExpando){support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}}}(),function(){var i,eventName,div=document.createElement("div");for(i in{submit:!0,change:!0,focusin:!0})eventName="on"+i,(support[i+"Bubbles"]=eventName in window)||(div.setAttribute(eventName,"t"),support[i+"Bubbles"]=div.attributes[eventName].expando===!1);div=null}();var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return typeof jQuery===strundefined||e&&jQuery.event.triggered===e.type?void 0:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||special.trigger.apply(elem,data)!==!1)){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&handle.apply&&jQuery.acceptData(cur)&&(event.result=handle.apply(cur,data),event.result===!1&&event.preventDefault());if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||special._default.apply(eventPath.pop(),data)===!1)&&jQuery.acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue=[],args=slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.namespace_re&&!event.namespace_re.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),void 0!==ret&&(event.result=ret)===!1&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(cur.disabled!==!0||"click"!==event.type)){for(matches=[],i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector+" ",void 0===matches[sel]&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===safeActiveElement()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(typeof elem[name]===strundefined&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&src.returnValue===!1?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),void(this[jQuery.expando]=!0)):new jQuery.Event(src,props)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===target||jQuery.contains(target,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),support.submitBubbles||(jQuery.event.special.submit={setup:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:void 0;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"submitBubbles",!0))})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.remove(this,"._submit")}}),support.changeBubbles||(jQuery.event.special.change={setup:function(){return rformElems.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1):void jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"changeBubbles",!0))})},handle:function(event){var elem=event.target;return this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type?event.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix);attaches||doc.addEventListener(orig,handler,!0),jQuery._data(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix)-1;attaches?jQuery._data(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),jQuery._removeData(doc,fix))}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=void 0);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),fn===!1)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return selector!==!1&&"function"!=typeof selector||(fn=selector,selector=void 0),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){
jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];return elem?jQuery.event.trigger(type,data,elem,!0):void 0}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(support.noCloneEvent&&support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;l>i;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!support.tbody)for(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild,j=elem&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(elem))&&(id=elem[internalKey],data=id&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:typeof elem.removeAttribute!==strundefined?elem.removeAttribute(internalKey):elem[internalKey]=null,deletedIds.push(id))}}}),jQuery.fn.extend({text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):void 0;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(support.htmlSerialize||!rnoshimcache.test(value))&&(support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];return this.domManip(arguments,function(elem){arg=this.parentNode,jQuery.cleanData(getAll(this)),arg&&arg.replaceChild(elem,this)}),arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback){args=concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;l>i;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;hasScripts>i;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;last>=i;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var iframe,elemdisplay={};!function(){var shrinkWrapBlocksVal;support.shrinkWrapBlocks=function(){if(null!=shrinkWrapBlocksVal)return shrinkWrapBlocksVal;shrinkWrapBlocksVal=!1;var div,body,container;return body=document.getElementsByTagName("body")[0],body&&body.style?(div=document.createElement("div"),container=document.createElement("div"),container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),typeof div.style.zoom!==strundefined&&(div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",div.appendChild(document.createElement("div")).style.width="5px",shrinkWrapBlocksVal=3!==div.offsetWidth),body.removeChild(container),shrinkWrapBlocksVal):void 0}}();var getStyles,curCSS,rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),rposition=/^(top|right|bottom|left)$/;window.getComputedStyle?(getStyles=function(elem){return elem.ownerDocument.defaultView.opener?elem.ownerDocument.defaultView.getComputedStyle(elem,null):window.getComputedStyle(elem,null)},curCSS=function(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return computed=computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:void 0,computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0===ret?ret:ret+""}):document.documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,computed){var left,rs,rsLeft,ret,style=elem.style;return computed=computed||getStyles(elem),ret=computed?computed[name]:void 0,null==ret&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,rs=elem.runtimeStyle,rsLeft=rs&&rs.left,rsLeft&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),void 0===ret?ret:ret+""||"auto"}),function(){function computeStyleTests(){var div,body,container,contents;body=document.getElementsByTagName("body")[0],body&&body.style&&(div=document.createElement("div"),container=document.createElement("div"),container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",pixelPositionVal=boxSizingReliableVal=!1,reliableMarginRightVal=!0,window.getComputedStyle&&(pixelPositionVal="1%"!==(window.getComputedStyle(div,null)||{}).top,boxSizingReliableVal="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,contents=div.appendChild(document.createElement("div")),contents.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",contents.style.marginRight=contents.style.width="0",div.style.width="1px",reliableMarginRightVal=!parseFloat((window.getComputedStyle(contents,null)||{}).marginRight),div.removeChild(contents)),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",contents=div.getElementsByTagName("td"),contents[0].style.cssText="margin:0;border:0;padding:0;display:none",reliableHiddenOffsetsVal=0===contents[0].offsetHeight,reliableHiddenOffsetsVal&&(contents[0].style.display="",contents[1].style.display="none",reliableHiddenOffsetsVal=0===contents[0].offsetHeight),body.removeChild(container))}var div,style,a,pixelPositionVal,boxSizingReliableVal,reliableHiddenOffsetsVal,reliableMarginRightVal;div=document.createElement("div"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=div.getElementsByTagName("a")[0],style=a&&a.style,style&&(style.cssText="float:left;opacity:.5",support.opacity="0.5"===style.opacity,support.cssFloat=!!style.cssFloat,div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,support.boxSizing=""===style.boxSizing||""===style.MozBoxSizing||""===style.WebkitBoxSizing,jQuery.extend(support,{reliableHiddenOffsets:function(){return null==reliableHiddenOffsetsVal&&computeStyleTests(),reliableHiddenOffsetsVal},boxSizingReliable:function(){return null==boxSizingReliableVal&&computeStyleTests(),boxSizingReliableVal},pixelPosition:function(){return null==pixelPositionVal&&computeStyleTests(),pixelPositionVal},reliableMarginRight:function(){return null==reliableMarginRightVal&&computeStyleTests(),reliableMarginRightVal}}))}(),jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret};var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value)return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name];if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null!=value&&value===value&&("number"!==type||jQuery.cssNumber[origName]||(value+="px"),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),!(hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra)))))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),extra===!0||jQuery.isNumeric(num)?num||0:val):val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra):void 0},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,(value>=1||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){return computed?jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"]):void 0}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;len>i;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],parts=parts||[],start=+target||1;do scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit);while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null!=opt.queue&&opt.queue!==!0||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)})},finish:function(type){return type!==!1&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;length>index;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},function(){var input,div,select,a,opt;div=document.createElement("div"),div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=div.getElementsByTagName("a")[0],select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px",support.getSetAttribute="t"!==div.className,support.style=/top/.test(a.getAttribute("style")),support.hrefNormalized="/a"===a.getAttribute("href"),support.checkOn=!!input.value,support.optSelected=opt.selected,support.enctype=!!document.createElement("form").enctype,select.disabled=!0,support.optDisabled=!opt.disabled,input=document.createElement("input"),input.setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value}();var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0;max>i;i++)if(option=options[i],(option.selected||i===index)&&(support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)if(option=options[i],jQuery.inArray(jQuery.valHooks.option.get(option),values)>=0)try{option.selected=optionSet=!0}catch(_){option.scrollHeight}else option.selected=!1;return optionSet||(elem.selectedIndex=-1),options}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})});var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===strundefined?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),void 0===value?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?void 0:ret):null!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)?getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem[propName]=!1:elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}}}),boolHook={set:function(elem,value,name){return value===!1?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=getSetInput&&getSetAttribute||!ruseDefault.test(name)?function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle),ret}:function(elem,name,isXML){return isXML?void 0:elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}}),getSetInput&&getSetAttribute||(jQuery.attrHooks.value={set:function(elem,value,name){return jQuery.nodeName(elem,"input")?void(elem.defaultValue=value):nodeHook&&nodeHook.set(elem,value,name)}}),getSetAttribute||(nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name)?value:void 0}},attrHandle.id=attrHandle.name=attrHandle.coords=function(elem,name,isXML){var ret;return isXML?void 0:(ret=elem.getAttributeNode(name))&&""!==ret.value?ret.value:null},jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);return ret&&ret.specified?ret.value:void 0},set:nodeHook.set},jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,""===value?!1:value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]={set:function(elem,value){return""===value?(elem.setAttribute(name,"auto"),value):void 0}}})),support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||void 0},set:function(elem,value){return elem.style.cssText=value+""}});var rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i;
jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=void 0,delete this[name]}catch(e){}})}}),jQuery.extend({propFix:{for:"htmlFor",class:"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}}}),support.hrefNormalized||jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),support.enctype||(jQuery.propFix.enctype="encoding");var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),elem.className!==finalValue&&(elem.className=finalValue)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"",elem.className!==finalValue&&(elem.className=finalValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else type!==strundefined&&"boolean"!==type||(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now(),rquery=/\?/,rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;jQuery.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");var requireNonComma,depth=null,str=jQuery.trim(data+"");return str&&!jQuery.trim(str.replace(rvalidtokens,function(token,comma,open,close){return requireNonComma&&comma&&(depth=0),0===depth?token:(requireNonComma=open||comma,depth+=!close-!open,"")}))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)},jQuery.parseXML=function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{window.DOMParser?(tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=void 0}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&300>status||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),modified=jqXHR.getResponseHeader("etag"),modified&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,!status&&statusText||(statusText="error",0>status&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=void 0),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(2>state)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=jQuery.event&&s.global,fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),s.cache===!1&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!support.reliableHiddenOffsets()&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&createStandardXHR()||createActiveXHR()}:createStandardXHR;var xhrId=0,xhrCallbacks={},xhrSupported=jQuery.ajaxSettings.xhr();window.attachEvent&&window.attachEvent("onunload",function(){for(var key in xhrCallbacks)xhrCallbacks[key](void 0,!0)}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,xhrSupported=support.ajax=!!xhrSupported,xhrSupported&&jQuery.ajaxTransport(function(options){if(!options.crossDomain||support.cors){var callback;return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");for(i in headers)void 0!==headers[i]&&xhr.setRequestHeader(i,headers[i]+"");xhr.send(options.hasContent&&options.data||null),callback=function(_,isAbort){var status,statusText,responses;if(callback&&(isAbort||4===xhr.readyState))if(delete xhrCallbacks[id],callback=void 0,xhr.onreadystatechange=jQuery.noop,isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!options.isLocal||options.crossDomain?1223===status&&(status=204):status=responses.text?200:404}responses&&complete(status,statusText,responses,xhr.getAllResponseHeaders())},options.async?4===xhr.readyState?setTimeout(callback):xhr.onreadystatechange=xhrCallbacks[id]=callback:callback()},abort:function(){callback&&callback(void 0,!0)}}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script"),script.async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(void 0,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");return jsonProp||"jsonp"===s.dataTypes[0]?(callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):s.jsonp!==!1&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"):void 0}),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");return off>=0&&(selector=jQuery.trim(url.slice(off,url.length)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?(typeof elem.getBoundingClientRect!==strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box},position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);return void 0===val?win?prop in win?win[prop]:win.document.documentElement[method]:elem[method]:void(win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val)},method,val,arguments.length,null)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){return computed?(computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed):void 0})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$j=jQuery),jQuery}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function($){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,element.href&&mapName&&"map"===map.nodeName.toLowerCase()?(img=$("img[usemap='#"+mapName+"']")[0],!!img&&visible(img)):!1):(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}function datepicker_getZindex(elem){for(var position,value;elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0}function Datepicker(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.regional.en=$.extend(!0,{},this.regional[""]),this.regional["en-US"]=$.extend(!0,{},this.regional.en),this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(selector,"mouseover",datepicker_handleMouseover)}function datepicker_handleMouseover(){$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))}function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props)null==props[name]&&(target[name]=props[name]);return target}function spinner_modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments),this._refresh(),previous!==this.element.val()&&this._trigger("change")}}$.ui=$.ui||{},$.extend($.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent="absolute"===position,overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);return excludeStaticParent&&"static"===parent.css("position")?!1:overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return"fixed"!==position&&scrollParent.length?scrollParent:$(this[0].ownerDocument||document)},uniqueId:function(){var uuid=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&$(this).removeAttr("id")})}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return void 0===size?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=function(removeData){return function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)};
}($.fn.removeData)),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.fn.extend({focus:function(orig){return function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):orig.apply(this,arguments)}}($.fn.focus),disableSelection:function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(zIndex){if(void 0!==zIndex)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0}}),$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(set&&(allowDisconnected||instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType))for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;null!=(elem=elems[i]);i++)try{events=$._data(elem,"events"),events&&events.remove&&$(elem).triggerHandler("remove")}catch(e){}orig(elems)}}($.cleanData),$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];return name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){return this._createWidget?void(arguments.length&&this._createWidget(options,element)):new constructor(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){return $.isFunction(value)?void(proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}()):void(proxiedPrototype[prop]=value)}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor),constructor},$.widget.extend=function(target){for(var key,value,input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputLength>inputIndex;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&void 0!==value&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=widget_slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);return"instance"===options?(returnValue=instance,!1):instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args),methodValue!==instance&&void 0!==methodValue?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0):$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}):this.each(function(){var instance=$.data(this,fullName);instance?(instance.option(options||{}),instance._init&&instance._init()):$.data(this,fullName,new object(options,this))}),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=widget_uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},parts=key.split("."),key=parts.shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return void 0===curOption[key]?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return void 0===this.options[key]?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!value),value&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){return suppressDisabledCheck||instance.options.disabled!==!0&&!$(this).hasClass("ui-state-disabled")?("string"==typeof handler?instance[handler]:handler).apply(instance,arguments):void 0}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName),this.bindings=$(this.bindings.not(element).get()),this.focusable=$(this.focusable.not(element).get()),this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?options===!0||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;options=options||{},"number"==typeof options&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}});var mouseHandled=($.widget,!1);$(document).mouseup(function(){mouseHandled=!1});$.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){return!0===$.data(event.target,that.widgetName+".preventClickEvent")?($.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(!mouseHandled){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=1===event.which,elIsCancel="string"==typeof this.options.cancel&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;return btnIsLeft&&!elIsCancel&&this._mouseCapture(event)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(event)!==!1,!this._mouseStarted)?(event.preventDefault(),!0):(!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0)):!0}},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button)return this._mouseUp(event);if(!event.which)return this._mouseUp(event)}return(event.which||event.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted)},_mouseUp:function(event){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),mouseHandled=!1,!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}function getDimensions(elem){var raw=elem[0];return 9===raw.nodeType?{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}:$.isWindow(raw)?{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}:raw.preventDefault?{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}:{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}$.ui=$.ui||{};var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;$.position={scrollbarWidth:function(){if(void 0!==cachedScrollbarWidth)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];return $("body").append(div),w1=innerDiv.offsetWidth,div.css("overflow","scroll"),w2=innerDiv.offsetWidth,w1===w2&&(w2=div[0].clientWidth),div.remove(),cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX="scroll"===overflowX||"auto"===overflowX&&within.width<within.element[0].scrollWidth,hasOverflowY="scroll"===overflowY||"auto"===overflowY&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&9===withinElement[0].nodeType;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow||isDocument?withinElement.width():withinElement.outerWidth(),height:isWindow||isDocument?withinElement.height():withinElement.outerHeight()}}},$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};return dimensions=getDimensions(target),target[0].preventDefault&&(options.at="left top"),targetWidth=dimensions.width,targetHeight=dimensions.height,targetOffset=dimensions.offset,basePosition=$.extend({},targetOffset),$.each(["my","at"],function(){var horizontalOffset,verticalOffset,pos=(options[this]||"").split(" ");1===pos.length&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]),pos[0]=rhorizontal.test(pos[0])?pos[0]:"center",pos[1]=rvertical.test(pos[1])?pos[1]:"center",horizontalOffset=roffset.exec(pos[0]),verticalOffset=roffset.exec(pos[1]),offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0],options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]}),1===collision.length&&(collision[1]=collision[0]),"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());"right"===options.my[0]?position.left-=elemWidth:"center"===options.my[0]&&(position.left-=elemWidth/2),"bottom"===options.my[1]?position.top-=elemHeight:"center"===options.my[1]&&(position.top-=elemHeight/2),position.left+=myOffset[0],position.top+=myOffset[1],supportsOffsetFractions||(position.left=round(position.left),position.top=round(position.top)),collisionPosition={marginLeft:marginLeft,marginTop:marginTop},$.each(["left","top"],function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}),options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:0>right?"left":left>0?"right":"center",vertical:0>bottom?"top":top>0?"bottom":"middle"};elemWidth>targetWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center"),elemHeight>targetHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle"),max(abs(left),abs(right))>max(abs(top),abs(bottom))?feedback.important="horizontal":feedback.important="vertical",options.using.call(this,props,feedback)}),elem.offset($.extend(position,{using:using}))})},$.ui.position={fit:{left:function(position,data){var newOverRight,within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;data.collisionWidth>outerWidth?overLeft>0&&0>=overRight?(newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset,position.left+=overLeft-newOverRight):overRight>0&&0>=overLeft?position.left=withinOffset:overLeft>overRight?position.left=withinOffset+outerWidth-data.collisionWidth:position.left=withinOffset:overLeft>0?position.left+=overLeft:overRight>0?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var newOverBottom,within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;data.collisionHeight>outerHeight?overTop>0&&0>=overBottom?(newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset,position.top+=overTop-newOverBottom):overBottom>0&&0>=overTop?position.top=withinOffset:overTop>overBottom?position.top=withinOffset+outerHeight-data.collisionHeight:position.top=withinOffset:overTop>0?position.top+=overTop:overBottom>0?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var newOverRight,newOverLeft,within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];0>overLeft?(newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset,(0>newOverRight||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset)):overRight>0&&(newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft,(newOverLeft>0||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset))},top:function(position,data){var newOverTop,newOverBottom,within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top="top"===data.my[1],myOffset=top?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,offset=-2*data.offset[1];0>overTop?(newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset,position.top+myOffset+atOffset+offset>overTop&&(0>newOverBottom||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset)):overBottom>0&&(newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop,position.top+myOffset+atOffset+offset>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset))}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments),$.ui.position.fit.top.apply(this,arguments)}}},function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div),testElementParent=body||document.documentElement,testElementParent.insertBefore(testElement,testElementParent.firstChild),div.style.cssText="position: absolute; left: 10.7432222px;",offsetLeft=$(div).offset().left,supportsOffsetFractions=offsetLeft>10&&11>offsetLeft,testElement.innerHTML="",testElementParent.removeChild(testElement)}()}();$.ui.position,$.widget("ui.accordion",{version:"1.11.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var options=this.options;this.prevShow=this.prevHide=$(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),options.collapsible||options.active!==!1&&null!=options.active||(options.active=0),this._processPanels(),options.active<0&&(options.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():$()}},_createIcons:function(){var icons=this.options.icons;icons&&($("<span>").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var contents;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),contents=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&contents.css("height","")},_setOption:function(key,value){return"active"===key?void this._activate(value):("event"===key&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(value)),this._super(key,value),"collapsible"!==key||value||this.options.active!==!1||this._activate(0),"icons"===key&&(this._destroyIcons(),value&&this._createIcons()),void("disabled"===key&&(this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!value))))},_keydown:function(event){if(!event.altKey&&!event.ctrlKey){var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=!1;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1]}toFocus&&($(event.target).attr("tabIndex",-1),$(toFocus).attr("tabIndex",0),toFocus.focus(),event.preventDefault())}},_panelKeyDown:function(event){event.keyCode===$.ui.keyCode.UP&&event.ctrlKey&&$(event.currentTarget).prev().focus()},refresh:function(){var options=this.options;this._processPanels(),options.active===!1&&options.collapsible===!0||!this.headers.length?(options.active=!1,this.active=$()):options.active===!1?this._activate(0):this.active.length&&!$.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(options.active=!1,this.active=$()):this._activate(Math.max(0,options.active-1)):options.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var prevHeaders=this.headers,prevPanels=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),prevPanels&&(this._off(prevHeaders.not(this.headers)),this._off(prevPanels.not(this.panels)))},_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent();this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var header=$(this),headerId=header.uniqueId().attr("id"),panel=header.next(),panelId=panel.uniqueId().attr("id");header.attr("aria-controls",panelId),panel.attr("aria-labelledby",headerId)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(options.event),"fill"===heightStyle?(maxHeight=parent.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");"absolute"!==position&&"fixed"!==position&&(maxHeight-=elem.outerHeight(!0))}),this.headers.each(function(){maxHeight-=$(this).outerHeight(!0)}),this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):"auto"===heightStyle&&(maxHeight=0,this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).css("height","").height())}).height(maxHeight))},_activate:function(index){var active=this._findActive(index)[0];active!==this.active[0]&&(active=active||this.active[0],this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop}))},_findActive:function(selector){return"number"==typeof selector?this.headers.eq(selector):$()},_setupEvents:function(event){var events={keydown:"_keydown"};event&&$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,events),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(event){var options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault(),clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1||(options.active=collapsing?!1:this.headers.index(clicked),this.active=clickedIsActive?$():clicked,
this._toggle(eventData),active.removeClass("ui-accordion-header-active ui-state-active"),options.icons&&active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header),clickedIsActive||(clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),options.icons&&clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader),clicked.next().addClass("ui-accordion-content-active")))},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=toShow,this.prevHide=toHide,this.options.animate?this._animate(toShow,toHide,data):(toHide.hide(),toShow.show(),this._toggleComplete(data)),toHide.attr({"aria-hidden":"true"}),toHide.prev().attr("aria-selected","false"),toShow.length&&toHide.length?toHide.prev().attr({tabIndex:-1,"aria-expanded":"false"}):toShow.length&&this.headers.filter(function(){return 0===$(this).attr("tabIndex")}).attr("tabIndex",-1),toShow.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,down=toShow.length&&(!toHide.length||toShow.index()<toHide.index()),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data)};return"number"==typeof options&&(duration=options),"string"==typeof options&&(easing=options),easing=easing||options.easing||animate.easing,duration=duration||options.duration||animate.duration,toHide.length?toShow.length?(total=toShow.show().outerHeight(),toHide.animate(this.hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now)}}),void toShow.hide().animate(this.showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now),"height"!==fx.prop?adjust+=fx.now:"content"!==that.options.heightStyle&&(fx.now=Math.round(total-toHide.outerHeight()-adjust),adjust=0)}})):toHide.animate(this.hideProps,duration,easing,complete):toShow.animate(this.showProps,duration,easing,complete)},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),toHide.length&&(toHide.parent()[0].className=toHide.parent()[0].className),this._trigger("activate",null,data)}}),$.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(event){event.preventDefault()},"click .ui-menu-item":function(event){var target=$(event.target);!this.mouseHandled&&target.not(".ui-state-disabled").length&&(this.select(event),event.isPropagationStopped()||(this.mouseHandled=!0),target.has(".ui-menu").length?this.expand(event):!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(event){if(!this.previousFilter){var target=$(event.currentTarget);target.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(event,target)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.find(this.options.items).eq(0);keepActiveItem||this.focus(event,item)},blur:function(event){this._delay(function(){$.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(event)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(event){this._closeOnDocumentClick(event)&&this.collapseAll(event),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);elem.data("ui-menu-submenu-carat")&&elem.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(event){var match,prev,character,skip,preventDefault=!0;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=!1,prev=this.previousFilter||"",character=String.fromCharCode(event.keyCode),skip=!1,clearTimeout(this.filterTimer),character===prev?skip=!0:character=prev+character,match=this._filterMenuItems(character),match=skip&&-1!==match.index(this.active.next())?this.active.nextAll(".ui-menu-item"):match,match.length||(character=String.fromCharCode(event.keyCode),match=this._filterMenuItems(character)),match.length?(this.focus(event,match),this.previousFilter=character,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}preventDefault&&event.preventDefault()},_activate:function(event){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(event):this.select(event))},refresh:function(){var menus,items,that=this,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.parent(),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",!0);item.attr("aria-haspopup","true").prepend(submenuCarat),menu.attr("aria-labelledby",item.attr("id"))}),menus=submenus.add(this.element),items=menus.find(this.options.items),items.not(".ui-menu-item").each(function(){var item=$(this);that._isDivider(item)&&item.addClass("ui-widget-content ui-menu-divider")}),items.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),items.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!$.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(key,value){"icons"===key&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu),"disabled"===key&&this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value),this._super(key,value)},focus:function(event,item){var nested,focused;this.blur(event,event&&"focus"===event.type),this._scrollIntoView(item),this.active=item.first(),focused=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",focused.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),event&&"keydown"===event.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),nested=item.children(".ui-menu"),nested.length&&event&&/^mouse/.test(event.type)&&this._startOpening(nested),this.activeMenu=item.parent(),this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;this._hasScroll()&&(borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0,paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0,offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop,scroll=this.activeMenu.scrollTop(),elementHeight=this.activeMenu.height(),itemHeight=item.outerHeight(),0>offset?this.activeMenu.scrollTop(scroll+offset):offset+itemHeight>elementHeight&&this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight))},blur:function(event,fromFocus){fromFocus||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",event,{item:this.active}))},_startOpening:function(submenu){clearTimeout(this.timer),"true"===submenu.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(submenu)},this.delay))},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true"),submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer),this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));currentMenu.length||(currentMenu=this.element),this._close(currentMenu),this.blur(event),this.activeMenu=currentMenu},this.delay)},_close:function(startMenu){startMenu||(startMenu=this.active?this.active.parent():this.element),startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(event){return!$(event.target).closest(".ui-menu").length},_isDivider:function(item){return!/[^\-\u2014\u2013\s]/.test(item.text())},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);newItem&&newItem.length&&(this._close(),this.focus(event,newItem))},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();newItem&&newItem.length&&(this._open(newItem.parent()),this._delay(function(){this.focus(event,newItem)}))},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(direction,filter,event){var next;this.active&&(next="first"===direction||"last"===direction?this.active["first"===direction?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[direction+"All"](".ui-menu-item").eq(0)),next&&next.length&&this.active||(next=this.activeMenu.find(this.options.items)[filter]()),this.focus(event,next)},nextPage:function(event){var item,base,height;return this.active?void(this.isLastItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return item=$(this),item.offset().top-base-height<0}),this.focus(event,item)):this.focus(event,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(event)},previousPage:function(event){var item,base,height;return this.active?void(this.isFirstItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return item=$(this),item.offset().top-base+height>0}),this.focus(event,item)):this.focus(event,this.activeMenu.find(this.options.items).first()))):void this.next(event)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(event,!0),this._trigger("select",event,ui)},_filterMenuItems:function(character){var escapedCharacter=character.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),regex=new RegExp("^"+escapedCharacter,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return regex.test($.trim($(this).text()))})}});$.widget("ui.autocomplete",{version:"1.11.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea="textarea"===nodeName,isInput="input"===nodeName;this.isMultiLine=isTextarea?!0:isInput?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[isTextarea||isInput?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly"))return suppressKeyPress=!0,suppressInput=!0,void(suppressKeyPressRepeat=!0);suppressKeyPress=!1,suppressInput=!1,suppressKeyPressRepeat=!1;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=!0,this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=!0,this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=!0,this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=!0,this._keyEvent("next",event);break;case keyCode.ENTER:this.menu.active&&(suppressKeyPress=!0,event.preventDefault(),this.menu.select(event));break;case keyCode.TAB:this.menu.active&&this.menu.select(event);break;case keyCode.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(event),event.preventDefault());break;default:suppressKeyPressRepeat=!0,this._searchTimeout(event)}},keypress:function(event){if(suppressKeyPress)return suppressKeyPress=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||event.preventDefault());if(!suppressKeyPressRepeat){var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event)}}},input:function(event){return suppressInput?(suppressInput=!1,void event.preventDefault()):void this._searchTimeout(event)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(event){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(event),void this._change(event))}}),this._initSource(),this.menu=$("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(event){event.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var menuElement=this.menu.element[0];$(event.target).closest(".ui-menu-item").length||this._delay(function(){var that=this;this.document.one("mousedown",function(event){event.target===that.element[0]||event.target===menuElement||$.contains(menuElement,event.target)||that.close()})})},menufocus:function(event,ui){var label,item;return this.isNewMenu&&(this.isNewMenu=!1,event.originalEvent&&/^mouse/.test(event.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent)})):(item=ui.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",event,{item:item})&&event.originalEvent&&/^key/.test(event.originalEvent.type)&&this._value(item.value),label=ui.item.attr("aria-label")||item.value,void(label&&$.trim(label).length&&(this.liveRegion.children().hide(),$("<div>").text(label).appendTo(this.liveRegion))))},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=previous,this._delay(function(){this.previous=previous,this.selectedItem=item})),!1!==this._trigger("select",event,{item:item})&&this._value(item.value),this.term=this._value(),this.close(event),this.selectedItem=item}}),this.liveRegion=$("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(key,value){this._super(key,value),"source"===key&&this._initSource(),"appendTo"===key&&this.menu.element.appendTo(this._appendTo()),"disabled"===key&&value&&this.xhr&&this.xhr.abort()},_appendTo:function(){var element=this.options.appendTo;return element&&(element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0)),element&&element[0]||(element=this.element.closest(".ui-front")),element.length||(element=this.document[0].body),element},_initSource:function(){var array,url,that=this;$.isArray(this.options.source)?(array=this.options.source,this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term))}):"string"==typeof this.options.source?(url=this.options.source,this.source=function(request,response){that.xhr&&that.xhr.abort(),that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data)},error:function(){response([])}})}):this.source=this.options.source},_searchTimeout:function(event){clearTimeout(this.searching),this.searching=this._delay(function(){var equalValues=this.term===this._value(),menuVisible=this.menu.element.is(":visible"),modifierKey=event.altKey||event.ctrlKey||event.metaKey||event.shiftKey;equalValues&&(!equalValues||menuVisible||modifierKey)||(this.selectedItem=null,this.search(null,event))},this.options.delay)},search:function(value,event){return value=null!=value?value:this._value(),this.term=this._value(),value.length<this.options.minLength?this.close(event):this._trigger("search",event)!==!1?this._search(value):void 0},_search:function(value){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:value},this._response())},_response:function(){var index=++this.requestIndex;return $.proxy(function(content){index===this.requestIndex&&this.__response(content),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(content){content&&(content=this._normalize(content)),this._trigger("response",null,{content:content}),!this.options.disabled&&content&&content.length&&!this.cancelSearch?(this._suggest(content),this._trigger("open")):this._close()},close:function(event){this.cancelSearch=!0,this._close(event)},_close:function(event){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",event))},_change:function(event){this.previous!==this._value()&&this._trigger("change",event,{item:this.selectedItem})},_normalize:function(items){return items.length&&items[0].label&&items[0].value?items:$.map(items,function(item){return"string"==typeof item?{label:item,value:item}:$.extend({},item,{label:item.label||item.value,value:item.value||item.label})})},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items),this.isNewMenu=!0,this.menu.refresh(),ul.show(),this._resizeMenu(),ul.position($.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item)})},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item)},_renderItem:function(ul,item){return $("<li>").text(item.label).appendTo(ul)},_move:function(direction,event){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[direction](event):void this.search(null,event)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(keyEvent,event){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(keyEvent,event),event.preventDefault())}}),$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value)})}}),$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(content){var message;this._superApply(arguments),this.options.disabled||this.cancelSearch||(message=content&&content.length?this.options.messages.results(content.length):this.options.messages.noResults,this.liveRegion.children().hide(),$("<div>").text(message).appendTo(this.liveRegion))}});var lastActive,baseClasses=($.ui.autocomplete,"ui-button ui-widget ui-state-default ui-corner-all"),typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var form=$(this);setTimeout(function(){form.find(":ui-button").button("refresh")},1)},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);return name&&(name=name.replace(/'/g,"\\'"),radios=form?$(form).find("[name='"+name+"'][type=radio]"):$("[name='"+name+"'][type=radio]",radio.ownerDocument).filter(function(){return!this.form})),radios};$.widget("ui.button",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton="checkbox"===this.type||"radio"===this.type,activeClass=toggleButton?"":"ui-state-active";null===options.label&&(options.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){options.disabled||this===lastActive&&$(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){options.disabled||$(this).removeClass(activeClass)}).bind("click"+this.eventNamespace,function(event){options.disabled&&(event.preventDefault(),event.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),toggleButton&&this.element.bind("change"+this.eventNamespace,function(){that.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return options.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled)return!1;$(this).addClass("ui-state-active"),that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return options.disabled?!1:($(this).addClass("ui-state-active"),lastActive=this,void that.document.one("mouseup",function(){lastActive=null}))}).bind("mouseup"+this.eventNamespace,function(){return options.disabled?!1:void $(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(event){return options.disabled?!1:void(event.keyCode!==$.ui.keyCode.SPACE&&event.keyCode!==$.ui.keyCode.ENTER||$(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(event){event.keyCode===$.ui.keyCode.SPACE&&$(this).click()})),this._setOption("disabled",options.disabled),this._resetButton()},_determineButtonType:function(){var ancestor,labelSelector,checked;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(ancestor=this.element.parents().last(),labelSelector="label[for='"+this.element.attr("id")+"']",this.buttonElement=ancestor.find(labelSelector),this.buttonElement.length||(ancestor=ancestor.length?ancestor.siblings():this.element.siblings(),this.buttonElement=ancestor.filter(labelSelector),this.buttonElement.length||(this.buttonElement=ancestor.find(labelSelector))),this.element.addClass("ui-helper-hidden-accessible"),checked=this.element.is(":checked"),checked&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",checked)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(baseClasses+" ui-state-active "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(key,value){return this._super(key,value),"disabled"===key?(this.widget().toggleClass("ui-state-disabled",!!value),this.element.prop("disabled",!!value),void(value&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")))):void this._resetButton()},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");isDisabled!==this.options.disabled&&this._setOption("disabled",isDisabled),"radio"===this.type?radioGroup(this.element[0]).each(function(){$(this).is(":checked")?$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];icons.primary||icons.secondary?(this.options.text&&buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":icons.primary?"-primary":"-secondary")),icons.primary&&buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>"),icons.secondary&&buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>"),this.options.text||(buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||buttonElement.attr("title",$.trim(buttonText)))):buttonClasses.push("ui-button-text-only"),buttonElement.addClass(buttonClasses.join(" "))}}),$.widget("ui.buttonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(key,value){"disabled"===key&&this.buttons.button("option",key,value),this._super(key,value)},refresh:function(){var rtl="rtl"===this.element.css("direction"),allButtons=this.element.find(this.options.items),existingButtons=allButtons.filter(":ui-button");allButtons.not(":ui-button").button(),existingButtons.button("refresh"),this.buttons=allButtons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});$.ui.button;$.extend($.ui,{datepicker:{version:"1.11.2"}});var datepicker_instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){return datepicker_extendRemove(this._defaults,settings||{}),this},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase(),inline="div"===nodeName||"span"===nodeName,target.id||(this.uuid+=1,target.id="dp"+this.uuid),inst=this._newInst($(target),inline),inst.settings=$.extend({},settings||{}),"input"===nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:inline?datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]),inst.trigger=$([]),input.hasClass(this.markerClassName)||(this._attachments(input,inst),input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(inst),$.data(target,"datepicker",inst),inst.settings.disabled&&this._disableDatepicker(target))},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");inst.append&&inst.append.remove(),appendText&&(inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>"),input[isRTL?"before":"after"](inst.append)),
input.unbind("focus",this._showDatepicker),inst.trigger&&inst.trigger.remove(),showOn=this._get(inst,"showOn"),"focus"!==showOn&&"both"!==showOn||input.focus(this._showDatepicker),"button"!==showOn&&"both"!==showOn||(buttonText=this._get(inst,"buttonText"),buttonImage=this._get(inst,"buttonImage"),inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(buttonImage?$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText}):buttonText)),input[isRTL?"before":"after"](inst.trigger),inst.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(input[0])):$.datepicker._showDatepicker(input[0]),!1}))},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,11,20),dateFormat=this._get(inst,"dateFormat");dateFormat.match(/[DM]/)&&(findMax=function(names){for(max=0,maxI=0,i=0;i<names.length;i++)names[i].length>max&&(max=names[i].length,maxI=i);return maxI},date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))),date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())),inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);divSpan.hasClass(this.markerClassName)||(divSpan.addClass(this.markerClassName).append(inst.dpDiv),$.data(target,"datepicker",inst),this._setDate(inst,this._getDefaultDate(inst),!0),this._updateDatepicker(inst),this._updateAlternate(inst),inst.settings.disabled&&this._disableDatepicker(target),inst.dpDiv.css("display","block"))},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;return inst||(this.uuid+=1,id="dp"+this.uuid,this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),inst=this._dialogInst=this._newInst(this._dialogInput,!1),inst.settings={},$.data(this._dialogInput[0],"datepicker",inst)),datepicker_extendRemove(inst.settings,settings||{}),date=date&&date.constructor===Date?this._formatDate(inst,date):date,this._dialogInput.val(date),this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null,this._pos||(browserWidth=document.documentElement.clientWidth,browserHeight=document.documentElement.clientHeight,scrollX=document.documentElement.scrollLeft||document.body.scrollLeft,scrollY=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),inst.settings.onSelect=onSelect,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],"datepicker",inst),this},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),$.removeData(target,"datepicker"),"input"===nodeName?(inst.append.remove(),inst.trigger.remove(),$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==nodeName&&"span"!==nodeName||$target.removeClass(this.markerClassName).empty())},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),"input"===nodeName?(target.disabled=!1,inst.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==nodeName&&"span"!==nodeName||(inline=$target.children("."+this._inlineClass),inline.children().removeClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value}))},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");$target.hasClass(this.markerClassName)&&(nodeName=target.nodeName.toLowerCase(),"input"===nodeName?(target.disabled=!0,inst.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==nodeName&&"span"!==nodeName||(inline=$target.children("."+this._inlineClass),inline.children().addClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value}),this._disabledInputs[this._disabledInputs.length]=target)},_isDisabledDatepicker:function(target){if(!target)return!1;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]===target)return!0;return!1},_getInst:function(target){try{return $.data(target,"datepicker")}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);return 2===arguments.length&&"string"==typeof name?"defaults"===name?$.extend({},$.datepicker._defaults):inst?"all"===name?$.extend({},inst.settings):this._get(inst,name):null:(settings=name||{},"string"==typeof name&&(settings={},settings[name]=value),void(inst&&(this._curInst===inst&&this._hideDatepicker(),date=this._getDateDatepicker(target,!0),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),datepicker_extendRemove(inst.settings,settings),null!==minDate&&void 0!==settings.dateFormat&&void 0===settings.minDate&&(inst.settings.minDate=this._formatDate(inst,minDate)),null!==maxDate&&void 0!==settings.dateFormat&&void 0===settings.maxDate&&(inst.settings.maxDate=this._formatDate(inst,maxDate)),"disabled"in settings&&(settings.disabled?this._disableDatepicker(target):this._enableDatepicker(target)),this._attachments($(target),inst),this._autoSize(inst),this._setDate(inst,date),this._updateAlternate(inst),this._updateDatepicker(inst))))},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);inst&&this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);inst&&(this._setDate(inst,date),this._updateDatepicker(inst),this._updateAlternate(inst))},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);return inst&&!inst.inline&&this._setDateFromField(inst,noDefault),inst?this._getDate(inst):null},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=!0,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");if(inst._keyEvent=!0,$.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker(),handled=!1;break;case 13:return sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv),sel[0]&&$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]),onSelect=$.datepicker._get(inst,"onSelect"),onSelect?(dateStr=$.datepicker._formatDate(inst),onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])):$.datepicker._hideDatepicker(),!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:(event.ctrlKey||event.metaKey)&&$.datepicker._clearDate(event.target),handled=event.ctrlKey||event.metaKey;break;case 36:(event.ctrlKey||event.metaKey)&&$.datepicker._gotoToday(event.target),handled=event.ctrlKey||event.metaKey;break;case 37:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?1:-1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 38:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,-7,"D"),handled=event.ctrlKey||event.metaKey;break;case 39:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?-1:1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 40:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,7,"D"),handled=event.ctrlKey||event.metaKey;break;default:handled=!1}else 36===event.keyCode&&event.ctrlKey?$.datepicker._showDatepicker(this):handled=!1;handled&&(event.preventDefault(),event.stopPropagation())},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);return $.datepicker._get(inst,"constrainInput")?(chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),chr=String.fromCharCode(null==event.charCode?event.keyCode:event.charCode),event.ctrlKey||event.metaKey||" ">chr||!chars||chars.indexOf(chr)>-1):void 0},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal)try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst)),date&&($.datepicker._setDateFromField(inst),$.datepicker._updateAlternate(inst),$.datepicker._updateDatepicker(inst))}catch(err){}return!0},_showDatepicker:function(input){if(input=input.target||input,"input"!==input.nodeName.toLowerCase()&&(input=$("input",input.parentNode)[0]),!$.datepicker._isDisabledDatepicker(input)&&$.datepicker._lastInput!==input){var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input),$.datepicker._curInst&&$.datepicker._curInst!==inst&&($.datepicker._curInst.dpDiv.stop(!0,!0),inst&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0])),beforeShow=$.datepicker._get(inst,"beforeShow"),beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{},beforeShowSettings!==!1&&(datepicker_extendRemove(inst.settings,beforeShowSettings),inst.lastVal=null,$.datepicker._lastInput=input,$.datepicker._setDateFromField(inst),$.datepicker._inDialog&&(input.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(input),$.datepicker._pos[1]+=input.offsetHeight),isFixed=!1,$(input).parents().each(function(){return isFixed|="fixed"===$(this).css("position"),!isFixed}),offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]},$.datepicker._pos=null,inst.dpDiv.empty(),inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(inst),offset=$.datepicker._checkOffset(inst,offset,isFixed),inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"}),inst.inline||(showAnim=$.datepicker._get(inst,"showAnim"),duration=$.datepicker._get(inst,"duration"),inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects.effect[showAnim]?inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration):inst.dpDiv[showAnim||"show"](showAnim?duration:null),$.datepicker._shouldFocusInput(inst)&&inst.input.focus(),$.datepicker._curInst=inst))}},_updateDatepicker:function(inst){this.maxRows=4,datepicker_instActive=inst,inst.dpDiv.empty().append(this._generateHTML(inst)),this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");activeCell.length>0&&datepicker_handleMouseover.apply(activeCell.get(0)),inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),cols>1&&inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em"),inst.dpDiv[(1!==numMonths[0]||1!==numMonths[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)&&inst.input.focus(),inst.yearshtml&&(origyearshtml=inst.yearshtml,setTimeout(function(){origyearshtml===inst.yearshtml&&inst.yearshtml&&inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml),origyearshtml=inst.yearshtml=null},0))},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus")},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());return offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0,offset.left-=isFixed&&offset.left===inst.input.offset().left?$(document).scrollLeft():0,offset.top-=isFixed&&offset.top===inst.input.offset().top+inputHeight?$(document).scrollTop():0,offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0),offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0),offset},_findPos:function(obj){for(var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");obj&&("hidden"===obj.type||1!==obj.nodeType||$.expr.filters.hidden(obj));)obj=obj[isRTL?"previousSibling":"nextSibling"];return position=$(obj).offset(),[position.left,position.top]},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;!inst||input&&inst!==$.data(input,"datepicker")||this._datepickerShowing&&(showAnim=this._get(inst,"showAnim"),duration=this._get(inst,"duration"),postProcess=function(){$.datepicker._tidyDialog(inst)},$.effects&&($.effects.effect[showAnim]||$.effects[showAnim])?inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess):inst.dpDiv["slideDown"===showAnim?"slideUp":"fadeIn"===showAnim?"fadeOut":"hide"](showAnim?duration:null,postProcess),showAnim||postProcess(),this._datepickerShowing=!1,onClose=this._get(inst,"onClose"),onClose&&onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if($.datepicker._curInst){var $target=$(event.target),inst=$.datepicker._getInst($target[0]);($target[0].id===$.datepicker._mainDivId||0!==$target.parents("#"+$.datepicker._mainDivId).length||$target.hasClass($.datepicker.markerClassName)||$target.closest("."+$.datepicker._triggerClass).length||!$.datepicker._datepickerShowing||$.datepicker._inDialog&&$.blockUI)&&(!$target.hasClass($.datepicker.markerClassName)||$.datepicker._curInst===inst)||$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);this._isDisabledDatepicker(target[0])||(this._adjustInstDate(inst,offset+("M"===period?this._get(inst,"showCurrentAtPos"):0),period),this._updateDatepicker(inst))},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);this._get(inst,"gotoCurrent")&&inst.currentDay?(inst.selectedDay=inst.currentDay,inst.drawMonth=inst.selectedMonth=inst.currentMonth,inst.drawYear=inst.selectedYear=inst.currentYear):(date=new Date,inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear()),this._notifyChange(inst),this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+("M"===period?"Month":"Year")]=inst["draw"+("M"===period?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10),this._notifyChange(inst),this._adjustDate(target)},_selectDay:function(id,month,year,td){var inst,target=$(id);$(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])||(inst=this._getInst(target[0]),inst.selectedDay=inst.currentDay=$("a",td).html(),inst.selectedMonth=inst.currentMonth=month,inst.selectedYear=inst.currentYear=year,this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear)))},_clearDate:function(id){var target=$(id);this._selectDate(target,"")},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=null!=dateStr?dateStr:this._formatDate(inst),inst.input&&inst.input.val(dateStr),this._updateAlternate(inst),onSelect=this._get(inst,"onSelect"),onSelect?onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]):inst.input&&inst.input.trigger("change"),inst.inline?this._updateDatepicker(inst):(this._hideDatepicker(),this._lastInput=inst.input[0],"object"!=typeof inst.input[0]&&inst.input.focus(),this._lastInput=null)},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");altField&&(altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat"),date=this._getDate(inst),dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst)),$(altField).each(function(){$(this).val(dateStr)}))},noWeekends:function(date){var day=date.getDay();return[day>0&&6>day,""]},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());return checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7)),time=checkDate.getTime(),checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1},parseDate:function(format,value,settings){if(null==format||null==value)throw"Invalid arguments";if(value="object"==typeof value?value.toString():value+"",""===value)return null;var iFormat,dim,extra,date,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff="string"!=typeof shortYearCutoffTemp?shortYearCutoffTemp:(new Date).getFullYear()%100+parseInt(shortYearCutoffTemp,10),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches},getNumber=function(match){var isDoubled=lookAhead(match),size="@"===match?14:"!"===match?20:"y"===match&&isDoubled?4:"o"===match?3:2,minSize="y"===match?size:1,digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+iValue;return iValue+=num[0].length,parseInt(num[0],10)},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if($.each(names,function(i,pair){var name=pair[1];return value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()?(index=pair[0],iValue+=name.length,!1):void 0}),-1!==index)return index+1;throw"Unknown name at position "+iValue},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?checkLiteral():literal=!1;else switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@")),year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/1e4),year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"'":lookAhead("'")?checkLiteral():literal=!0;break;default:checkLiteral()}if(iValue<value.length&&(extra=value.substr(iValue),!/^\s+/.test(extra)))throw"Extra/unparsed characters found in date: "+extra;if(-1===year?year=(new Date).getFullYear():100>year&&(year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(shortYearCutoff>=year?0:-100)),doy>-1)for(month=1,day=doy;;){if(dim=this._getDaysInMonth(year,month-1),dim>=day)break;month++,day-=dim}if(date=this._daylightSavingAdjust(new Date(year,month-1,day)),date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day)throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(format,date,settings){if(!date)return"";var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))for(;num.length<len;)num="0"+num;return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=!1;if(date)for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?output+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/864e5),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case"@":output+=date.getTime();break;case"!":output+=1e4*date.getTime()+this._ticksTo1970;break;case"'":lookAhead("'")?output+="'":literal=!0;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){var iFormat,chars="",literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;return matches&&iFormat++,matches};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)"'"!==format.charAt(iFormat)||lookAhead("'")?chars+=format.charAt(iFormat):literal=!1;else switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":lookAhead("'")?chars+="'":literal=!0;break;default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,name){return void 0!==inst.settings[name]?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()!==inst.lastVal){var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){dates=noDefault?"":dates}inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),inst.currentDay=dates?date.getDate():0,inst.currentMonth=dates?date.getMonth():0,inst.currentYear=dates?date.getFullYear():0,this._adjustInstDate(inst)}},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date;return date.setDate(date.getDate()+offset),date},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}for(var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);matches;){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=7*parseInt(matches[1],10);break;case"m":case"M":month+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month))}matches=pattern.exec(offset)}return new Date(year,month,day)},newDate=null==date||""===date?defaultDate:"string"==typeof date?offsetString(date):"number"==typeof date?isNaN(date)?defaultDate:offsetNumeric(date):new Date(date.getTime());return newDate=newDate&&"Invalid Date"===newDate.toString()?defaultDate:newDate,newDate&&(newDate.setHours(0),newDate.setMinutes(0),newDate.setSeconds(0),newDate.setMilliseconds(0)),this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){return date?(date.setHours(date.getHours()>12?date.getHours()+2:0),date):null},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate(),inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth(),inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear(),origMonth===inst.selectedMonth&&origYear===inst.selectedYear||noChange||this._notifyChange(inst),this._adjustInstDate(inst),inst.input&&inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){var startDate=!inst.currentYear||inst.input&&""===inst.input.val()?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M")},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){$.datepicker._hideDatepicker()},today:function(){$.datepicker._gotoToday(id)},selectDay:function(){return $.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return $.datepicker._selectMonthYear(id,this,"M"),!1},selectYear:function(){return $.datepicker._selectMonthYear(id,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=1!==numMonths[0]||1!==numMonths[1],currentDate=this._daylightSavingAdjust(inst.currentDay?new Date(inst.currentYear,inst.currentMonth,inst.currentDay):new Date(9999,9,9)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(0>drawMonth&&(drawMonth+=12,drawYear--),maxDate)for(maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate())),maxDraw=minDate&&minDate>maxDraw?minDate:maxDraw;this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw;)drawMonth--,0>drawMonth&&(drawMonth=11,drawYear--);for(inst.drawMonth=drawMonth,inst.drawYear=drawYear,prevText=this._get(inst,"prevText"),prevText=navigationAsDateFormat?this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)):prevText,prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>",nextText=this._get(inst,"nextText"),nextText=navigationAsDateFormat?this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)):nextText,next=this._canAdjustMonth(inst,1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>",currentText=this._get(inst,"currentText"),gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today,currentText=navigationAsDateFormat?this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)):currentText,controls=inst.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>",buttonPanel=showButtonPanel?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"",firstDay=parseInt(this._get(inst,"firstDay"),10),firstDay=isNaN(firstDay)?0:firstDay,showWeek=this._get(inst,"showWeek"),dayNames=this._get(inst,"dayNames"),
dayNamesMin=this._get(inst,"dayNamesMin"),monthNames=this._get(inst,"monthNames"),monthNamesShort=this._get(inst,"monthNamesShort"),beforeShowDay=this._get(inst,"beforeShowDay"),showOtherMonths=this._get(inst,"showOtherMonths"),selectOtherMonths=this._get(inst,"selectOtherMonths"),defaultDate=this._getDefaultDate(inst),html="",row=0;row<numMonths[0];row++){for(group="",this.maxRows=4,col=0;col<numMonths[1];col++){if(selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay)),cornerClass=" ui-corner-all",calender="",isMultiMonth){if(calender+="<div class='ui-datepicker-group",numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first",cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last",cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle",cornerClass=""}calender+="'>"}for(calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&0===row?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&0===row?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead><tr>",thead=showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"",dow=0;7>dow;dow++)day=(dow+firstDay)%7,thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";for(calender+=thead+"</tr></thead><tbody>",daysInMonth=this._getDaysInMonth(drawYear,drawMonth),drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth&&(inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)),leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,curRows=Math.ceil((leadDays+daysInMonth)/7),numRows=isMultiMonth&&this.maxRows>curRows?this.maxRows:curRows,this.maxRows=numRows,printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays)),dRow=0;numRows>dRow;dRow++){for(calender+="<tr>",tbody=showWeek?"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>":"",dow=0;7>dow;dow++)daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[!0,""],otherMonth=printDate.getMonth()!==drawMonth,unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&minDate>printDate||maxDate&&printDate>maxDate,tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+(otherMonth&&!showOtherMonths||!daySettings[2]?"":" title='"+daySettings[2].replace(/'/g,"&#39;")+"'")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>")+"</td>",printDate.setDate(printDate.getDate()+1),printDate=this._daylightSavingAdjust(printDate);calender+=tbody+"</tr>"}drawMonth++,drawMonth>11&&(drawMonth=0,drawYear++),calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col===numMonths[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),group+=calender}html+=group}return html+=buttonPanel,inst._keyEvent=!1,html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth)monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";else{for(inMinYear=minDate&&minDate.getFullYear()===drawYear,inMaxYear=maxDate&&maxDate.getFullYear()===drawYear,monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",month=0;12>month;month++)(!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())&&(monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>");monthHtml+="</select>"}if(showMonthAfterYear||(html+=monthHtml+(!secondary&&changeMonth&&changeYear?"":"&#xa0;")),!inst.yearshtml)if(inst.yearshtml="",secondary||!changeYear)html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";else{for(years=this._get(inst,"yearRange").split(":"),thisYear=(new Date).getFullYear(),determineYear=function(value){var year=value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year},year=determineYear(years[0]),endYear=Math.max(year,determineYear(years[1]||"")),year=minDate?Math.max(year,minDate.getFullYear()):year,endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear,inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";endYear>=year;year++)inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>";inst.yearshtml+="</select>",html+=inst.yearshtml,inst.yearshtml=null}return html+=this._get(inst,"yearSuffix"),showMonthAfterYear&&(html+=(!secondary&&changeMonth&&changeYear?"":"&#xa0;")+monthHtml),html+="</div>"},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+("Y"===period?offset:0),month=inst.drawMonth+("M"===period?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+("D"===period?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),"M"!==period&&"Y"!==period||this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&minDate>date?minDate:date;return maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");onChange&&onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return null==numMonths?[1,1]:"number"==typeof numMonths?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(0>offset?offset:numMonths[0]*numMonths[1]),1));return 0>offset&&date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth())),this._isInRange(inst,date)},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");return years&&(yearSplit=years.split(":"),currentYear=(new Date).getFullYear(),minYear=parseInt(yearSplit[0],10),maxYear=parseInt(yearSplit[1],10),yearSplit[0].match(/[+\-].*/)&&(minYear+=currentYear),yearSplit[1].match(/[+\-].*/)&&(maxYear+=currentYear)),(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear)},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");return shortYearCutoff="string"!=typeof shortYearCutoff?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10),{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){day||(inst.currentDay=inst.selectedDay,inst.currentMonth=inst.selectedMonth,inst.currentYear=inst.selectedYear);var date=day?"object"==typeof day?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}}),$.fn.datepicker=function(options){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick),$.datepicker.initialized=!0),0===$("#"+$.datepicker._mainDivId).length&&$("body").append($.datepicker.dpDiv);var otherArgs=Array.prototype.slice.call(arguments,1);return"string"!=typeof options||"isDisabled"!==options&&"getDate"!==options&&"widget"!==options?"option"===options&&2===arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs)):this.each(function(){"string"==typeof options?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)}):$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.11.2";$.datepicker;$.widget("ui.draggable",$.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(key,value){this._super(key,value),"handle"===key&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(event){var o=this.options;return this._blurActiveElement(event),this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(event),this.handle?(this._blockFrames(o.iframeFix===!0?"iframe":o.iframeFix),!0):!1)},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(event){var document=this.document[0];if(this.handleElement.is(event.target))try{document.activeElement&&"body"!==document.activeElement.nodeName.toLowerCase()&&$(document.activeElement).blur()}catch(error){}},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===$(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(event),this.originalPosition=this.position=this._generatePosition(event,!1),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this._normalizeRightBottom(),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top}},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(event,!0),this.positionAbs=this._convertPositionTo("absolute"),!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp({}),!1;this.position=ui.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var that=this,dropped=!1;return $.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!dropped||"valid"===this.options.revert&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)?$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){that._trigger("stop",event)!==!1&&that._clear()}):this._trigger("stop",event)!==!1&&this._clear(),!1},_mouseUp:function(event){return this._unblockFrames(),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),this.handleElement.is(event.target)&&this.element.focus(),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),helperIsFunction&&helper[0]===this.element[0]&&this._setPositionRelative(),helper[0]===this.element[0]||/(fixed|absolute)/.test(helper.css("position"))||helper.css("position","absolute"),helper},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_isRootNode:function(element){return/(html|body)/i.test(element.tagName)||element===this.document[0]},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(scrollIsRootNode?0:this.scrollParent.scrollTop()),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(scrollIsRootNode?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),c=$(o.containment),ce=c[0],void(ce&&(isUserScrollable=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top)*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)*mod}},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;return scrollIsRootNode&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),constrainPosition&&(this.containment&&(this.relativeContainer?(co=this.relativeContainer.offset(),containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]):containment=this.containment,event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)),o.grid&&(top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left),"y"===o.axis&&(pageX=this.originalPageX),"x"===o.axis&&(pageY=this.originalPageY)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui,this],!0),/^(drag|start|stop)/.test(type)&&(this.positionAbs=this._convertPositionTo("absolute"),ui.offset=this.positionAbs),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[],$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");sortable&&!sortable.options.disabled&&(draggable.sortables.push(sortable),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=!1,$.each(draggable.sortables,function(){var sortable=this;sortable.isOver?(sortable.isOver=0,draggable.cancelHelperRemoval=!0,sortable.cancelHelperRemoval=!1,sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")},sortable._mouseStop(event),sortable.options.helper=sortable.options._helper):(sortable.cancelHelperRemoval=!0,sortable._trigger("deactivate",event,uiSortable))})},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=!1,sortable=this;sortable.positionAbs=draggable.positionAbs,sortable.helperProportions=draggable.helperProportions,sortable.offset.click=draggable.offset.click,sortable._intersectsWith(sortable.containerCache)&&(innermostIntersecting=!0,$.each(draggable.sortables,function(){return this.positionAbs=draggable.positionAbs,this.helperProportions=draggable.helperProportions,this.offset.click=draggable.offset.click,this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])&&(innermostIntersecting=!1),innermostIntersecting})),innermostIntersecting?(sortable.isOver||(sortable.isOver=1,sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",!0),sortable.options._helper=sortable.options.helper,sortable.options.helper=function(){return ui.helper[0]},event.target=sortable.currentItem[0],sortable._mouseCapture(event,!0),sortable._mouseStart(event,!0,!0),sortable.offset.click.top=draggable.offset.click.top,sortable.offset.click.left=draggable.offset.click.left,sortable.offset.parent.left-=draggable.offset.parent.left-sortable.offset.parent.left,sortable.offset.parent.top-=draggable.offset.parent.top-sortable.offset.parent.top,draggable._trigger("toSortable",event),draggable.dropped=sortable.element,$.each(draggable.sortables,function(){this.refreshPositions()}),draggable.currentItem=draggable.element,sortable.fromOutside=draggable),sortable.currentItem&&(sortable._mouseDrag(event),ui.position=sortable.position)):sortable.isOver&&(sortable.isOver=0,sortable.cancelHelperRemoval=!0,sortable.options._revert=sortable.options.revert,sortable.options.revert=!1,sortable._trigger("out",event,sortable._uiHash(sortable)),sortable._mouseStop(event,!0),sortable.options.revert=sortable.options._revert,sortable.options.helper=sortable.options._helper,sortable.placeholder&&sortable.placeholder.remove(),draggable._refreshOffsets(event),ui.position=draggable._generatePosition(event,!0),draggable._trigger("fromSortable",event),draggable.dropped=!1,$.each(draggable.sortables,function(){this.refreshPositions()}))})}}),$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(event,ui,instance){var o=instance.options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui,instance){var o=instance.options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(event,ui,i){var o=i.options,scrolled=!1,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];scrollParent!==document&&"HTML"!==scrollParent.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+scrollParent.offsetHeight-event.pageY<o.scrollSensitivity?scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+scrollParent.offsetWidth-event.pageX<o.scrollSensitivity?scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[],$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--)l=inst.snapElements[i].left-inst.margins.left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top-inst.margins.top,b=t+inst.snapElements[i].height,l-d>x2||x1>r+d||t-d>y2||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)?(inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1):("inner"!==o.snapMode&&(ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left)),first=ts||bs||ls||rs,"outer"!==o.snapMode&&(ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d,ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left)),!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first)}}),$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});group.length&&(min=parseInt($(group[0]).css("zIndex"),10)||0,$(group).each(function(i){$(this).css("zIndex",min+i)}),this.css("zIndex",min+group.length))}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui,instance){var o=instance.options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}});$.ui.draggable;$.widget("ui.resizable",$.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(value){return parseInt(value,10)||0;
},_isNumber:function(value){return!isNaN(parseInt(value,10))},_hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0?!0:(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;if(this.element.addClass("ui-resizable"),$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||($(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)handle=$.trim(n[i]),hname="ui-resizable-"+handle,axis=$("<div class='ui-resizable-handle "+hname+"'></div>"),axis.css({zIndex:o.zIndex}),"se"===handle&&axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[handle]=".ui-resizable-"+handle,this.element.append(axis);this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=this.element.children(this.handles[i]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(axis=$(this.handles[i],this.element),padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth(),padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),target.css(padPos,padWrapper),this._proportionallyResize()),$(this.handles[i]).length},this._renderAxis(this.element),this._handles=$(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){that.resizing||(this.className&&(axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),that.axis=axis&&axis[1]?axis[1]:"se")}),o.autoHide&&(this._handles.hide(),$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||($(this).removeClass("ui-resizable-autohide"),that._handles.show())}).mouseleave(function(){o.disabled||that.resizing||($(this).addClass("ui-resizable-autohide"),that._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(_destroy(this.element),wrapper=this.element,this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper),wrapper.remove()),this.originalElement.css("resize",this.originalResizeStyle),_destroy(this.originalElement),this},_mouseCapture:function(event){var i,handle,capture=!1;for(i in this.handles)handle=$(this.handles[i])[0],(handle===event.target||$.contains(handle,event.target))&&(capture=!0);return!this.options.disabled&&capture},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,el=this.element;return this.resizing=!0,this._renderProxy(),curleft=this._num(this.helper.css("left")),curtop=this._num(this.helper.css("top")),o.containment&&(curleft+=$(o.containment).scrollLeft()||0,curtop+=$(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:curleft,top:curtop},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()},this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()},this.originalPosition={left:curleft,top:curtop},this.originalMousePosition={left:event.pageX,top:event.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,cursor=$(".ui-resizable-"+this.axis).css("cursor"),$("body").css("cursor","auto"===cursor?this.axis+"-resize":cursor),el.addClass("ui-resizable-resizing"),this._propagate("start",event),!0},_mouseDrag:function(event){var data,props,smp=this.originalMousePosition,a=this.axis,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];return this._updatePrevProperties(),trigger?(data=trigger.apply(this,[event,dx,dy]),this._updateVirtualBoundaries(event.shiftKey),(this._aspectRatio||event.shiftKey)&&(data=this._updateRatio(data,event)),data=this._respectSize(data,event),this._updateCache(data),this._propagate("resize",event),props=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),$.isEmptyObject(props)||(this._updatePrevProperties(),this._trigger("resize",event,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(event){this.resizing=!1;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;return this._helper&&(pr=this._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&this._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null,o.animate||this.element.css($.extend(s,{top:top,left:left})),that.helper.height(that.size.height),that.helper.width(that.size.width),this._helper&&!o.animate&&this._proportionallyResize()),$("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",event),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var props={};return this.position.top!==this.prevPosition.top&&(props.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(props.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(props.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(props.height=this.size.height+"px"),this.helper.css(props),props},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||forceAspectRatio)&&(pMinWidth=b.minHeight*this.aspectRatio,pMinHeight=b.minWidth/this.aspectRatio,pMaxWidth=b.maxHeight*this.aspectRatio,pMaxHeight=b.maxWidth/this.aspectRatio,pMinWidth>b.minWidth&&(b.minWidth=pMinWidth),pMinHeight>b.minHeight&&(b.minHeight=pMinHeight),pMaxWidth<b.maxWidth&&(b.maxWidth=pMaxWidth),pMaxHeight<b.maxHeight&&(b.maxHeight=pMaxHeight)),this._vBoundaries=b},_updateCache:function(data){this.offset=this.helper.offset(),this._isNumber(data.left)&&(this.position.left=data.left),this._isNumber(data.top)&&(this.position.top=data.top),this._isNumber(data.height)&&(this.size.height=data.height),this._isNumber(data.width)&&(this.size.width=data.width)},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;return this._isNumber(data.height)?data.width=data.height*this.aspectRatio:this._isNumber(data.width)&&(data.height=data.width/this.aspectRatio),"sw"===a&&(data.left=cpos.left+(csize.width-data.width),data.top=null),"nw"===a&&(data.top=cpos.top+(csize.height-data.height),data.left=cpos.left+(csize.width-data.width)),data},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=this._isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=this._isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=this._isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=this._isNumber(data.height)&&o.minHeight&&o.minHeight>data.height,dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);return isminw&&(data.width=o.minWidth),isminh&&(data.height=o.minHeight),ismaxw&&(data.width=o.maxWidth),ismaxh&&(data.height=o.maxHeight),isminw&&cw&&(data.left=dw-o.minWidth),ismaxw&&cw&&(data.left=dw-o.maxWidth),isminh&&ch&&(data.top=dh-o.minHeight),ismaxh&&ch&&(data.top=dh-o.maxHeight),data.width||data.height||data.left||!data.top?data.width||data.height||data.top||!data.left||(data.left=null):data.top=null,data},_getPaddingPlusBorderDimensions:function(element){for(var i=0,widths=[],borders=[element.css("borderTopWidth"),element.css("borderRightWidth"),element.css("borderBottomWidth"),element.css("borderLeftWidth")],paddings=[element.css("paddingTop"),element.css("paddingRight"),element.css("paddingBottom"),element.css("paddingLeft")];4>i;i++)widths[i]=parseInt(borders[i],10)||0,widths[i]+=parseInt(paddings[i],10)||0;return{height:widths[0]+widths[2],width:widths[1]+widths[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var prel,i=0,element=this.helper||this.element;i<this._proportionallyResizeElements.length;i++)prel=this._proportionallyResizeElements[i],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(prel)),prel.css({height:element.height()-this.outerDimensions.height||0,width:element.width()-this.outerDimensions.width||0})},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset(),this._helper?(this.helper=this.helper||$("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(event,dx){return{width:this.originalSize.width+dx}},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]),"resize"!==n&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).resizable("instance"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&that._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};pr&&pr.length&&$(pr[0]).css({width:data.width,height:data.height}),that._updateCache(data),that._propagate("resize",event)}})}}),$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).resizable("instance"),o=that.options,el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;ce&&(that.containerElement=$(ce),/document/.test(oc)||oc===document?(that.containerOffset={left:0,top:0},that.containerPosition={left:0,top:0},that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}):(element=$(ce),p=[],$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=that._num(element.css("padding"+name))}),that.containerOffset=element.offset(),that.containerPosition=element.position(),that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]},co=that.containerOffset,ch=that.containerSize.height,cw=that.containerSize.width,width=that._hasScroll(ce,"left")?ce.scrollWidth:cw,height=that._hasScroll(ce)?ce.scrollHeight:ch,that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}))},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement,continueResize=!0;ce[0]!==document&&/static/.test(ce.css("position"))&&(cop=co),cp.left<(that._helper?co.left:0)&&(that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left),pRatio&&(that.size.height=that.size.width/that.aspectRatio,continueResize=!1),that.position.left=o.helper?co.left:0),cp.top<(that._helper?co.top:0)&&(that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top),pRatio&&(that.size.width=that.size.height*that.aspectRatio,continueResize=!1),that.position.top=that._helper?co.top:0),isParent=that.containerElement.get(0)===that.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position")),isParent&&isOffsetRelative?(that.offset.left=that.parentData.left+that.position.left,that.offset.top=that.parentData.top+that.position.top):(that.offset.left=that.element.offset().left,that.offset.top=that.element.offset().top),woset=Math.abs(that.sizeDiff.width+(that._helper?that.offset.left-cop.left:that.offset.left-co.left)),hoset=Math.abs(that.sizeDiff.height+(that._helper?that.offset.top-cop.top:that.offset.top-co.top)),woset+that.size.width>=that.parentData.width&&(that.size.width=that.parentData.width-woset,pRatio&&(that.size.height=that.size.width/that.aspectRatio,continueResize=!1)),hoset+that.size.height>=that.parentData.height&&(that.size.height=that.parentData.height-hoset,pRatio&&(that.size.width=that.size.height*that.aspectRatio,continueResize=!1)),continueResize||(that.position.left=that.prevPosition.left,that.position.top=that.prevPosition.top,that.size.width=that.prevSize.width,that.size.height=that.prevSize.height)},stop:function(){var that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;that._helper&&!o.animate&&/relative/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h}),that._helper&&!o.animate&&/static/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}}),$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).resizable("instance"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})};"object"!=typeof o.alsoResize||o.alsoResize.parentNode?_store(o.alsoResize):o.alsoResize.length?(o.alsoResize=o.alsoResize[0],_store(o.alsoResize)):$.each(o.alsoResize,function(exp){_store(exp)})},resize:function(event,ui){var that=$(this).resizable("instance"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);sum&&sum>=0&&(style[prop]=sum||null)}),el.css(style)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?_alsoResize(o.alsoResize):$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c)})},stop:function(){$(this).removeData("resizable-alsoresize")}}),$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).resizable("instance"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone(),that.ghost.css({opacity:.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof o.ghost?o.ghost:""),that.ghost.appendTo(that.helper)},resize:function(){var that=$(this).resizable("instance");that.ghost&&that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(){var that=$(this).resizable("instance");that.ghost&&that.helper&&that.helper.get(0).removeChild(that.ghost.get(0))}}),$.ui.plugin.add("resizable","grid",{resize:function(){var outerDimensions,that=$(this).resizable("instance"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid="number"==typeof o.grid?[o.grid,o.grid]:o.grid,gridX=grid[0]||1,gridY=grid[1]||1,ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&o.maxWidth<newWidth,isMaxHeight=o.maxHeight&&o.maxHeight<newHeight,isMinWidth=o.minWidth&&o.minWidth>newWidth,isMinHeight=o.minHeight&&o.minHeight>newHeight;o.grid=grid,isMinWidth&&(newWidth+=gridX),isMinHeight&&(newHeight+=gridY),isMaxWidth&&(newWidth-=gridX),isMaxHeight&&(newHeight-=gridY),/^(se|s|e)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight):/^(ne)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.top=op.top-oy):/^(sw)$/.test(a)?(that.size.width=newWidth,that.size.height=newHeight,that.position.left=op.left-ox):((0>=newHeight-gridY||0>=newWidth-gridX)&&(outerDimensions=that._getPaddingPlusBorderDimensions(this)),newHeight-gridY>0?(that.size.height=newHeight,that.position.top=op.top-oy):(newHeight=gridY-outerDimensions.height,that.size.height=newHeight,that.position.top=op.top+os.height-newHeight),newWidth-gridX>0?(that.size.width=newWidth,that.position.left=op.left-ox):(newWidth=gridY-outerDimensions.height,that.size.width=newWidth,that.position.left=op.left+os.width-newWidth))}});$.ui.resizable,$.widget("ui.dialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;0>topOffset&&$(this).css("top",pos.top-topOffset)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&$.fn.draggable&&this._makeDraggable(),this.options.resizable&&$.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var element=this.options.appendTo;return element&&(element.jquery||element.nodeType)?$(element):this.document.find(element||"body").eq(0)},_destroy:function(){var next,originalPosition=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),next=originalPosition.parent.children().eq(originalPosition.index),next.length&&next[0]!==this.element[0]?next.before(this.element):originalPosition.parent.append(this.element)},widget:function(){return this.uiDialog},disable:$.noop,enable:$.noop,close:function(event){var activeElement,that=this;if(this._isOpen&&this._trigger("beforeClose",event)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{activeElement=this.document[0].activeElement,activeElement&&"body"!==activeElement.nodeName.toLowerCase()&&$(activeElement).blur()}catch(error){}this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(event,silent){var moved=!1,zIndicies=this.uiDialog.siblings(".ui-front:visible").map(function(){return+$(this).css("z-index")}).get(),zIndexMax=Math.max.apply(null,zIndicies);return zIndexMax>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",zIndexMax+1),moved=!0),moved&&!silent&&this._trigger("focus",event),moved},open:function(){var that=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=$(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){that._focusTabbable(),that._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var hasFocus=this._focusedElement;hasFocus||(hasFocus=this.element.find("[autofocus]")),hasFocus.length||(hasFocus=this.element.find(":tabbable")),hasFocus.length||(hasFocus=this.uiDialogButtonPane.find(":tabbable")),hasFocus.length||(hasFocus=this.uiDialogTitlebarClose.filter(":tabbable")),hasFocus.length||(hasFocus=this.uiDialog),hasFocus.eq(0).focus()},_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);isActive||this._focusTabbable()}event.preventDefault(),checkFocus.call(this),this._delay(checkFocus)},_createWrapper:function(){this.uiDialog=$("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE)return event.preventDefault(),void this.close(event);if(event.keyCode===$.ui.keyCode.TAB&&!event.isDefaultPrevented()){var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");event.target!==last[0]&&event.target!==this.uiDialog[0]||event.shiftKey?event.target!==first[0]&&event.target!==this.uiDialog[0]||!event.shiftKey||(this._delay(function(){last.focus()}),event.preventDefault()):(this._delay(function(){first.focus()}),event.preventDefault())}},mousedown:function(event){this._moveToTop(event)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(event){$(event.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=$("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault(),this.close(event)}}),uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(uiDialogTitle),this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")})},_title:function(title){this.options.title||title.html("&#160;"),title.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=$("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var that=this,buttons=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),$.isEmptyObject(buttons)||$.isArray(buttons)&&!buttons.length?void this.uiDialog.removeClass("ui-dialog-buttons"):($.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props,props=$.extend({type:"button"},props),click=props.click,props.click=function(){click.apply(that.element[0],arguments)},buttonOptions={icons:props.icons,text:props.showText},delete props.icons,delete props.showText,$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function filteredUi(ui){return{position:ui.position,offset:ui.offset}}var that=this,options=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging"),that._blockFrames(),that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){var left=ui.offset.left-that.document.scrollLeft(),top=ui.offset.top-that.document.scrollTop();options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" top"+(top>=0?"+":"")+top,of:that.window},$(this).removeClass("ui-dialog-dragging"),that._unblockFrames(),that._trigger("dragStop",event,filteredUi(ui))}})},_makeResizable:function(){function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles="string"==typeof handles?handles:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing"),that._blockFrames(),that._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){var offset=that.uiDialog.offset(),left=offset.left-that.document.scrollLeft(),top=offset.top-that.document.scrollTop();options.height=that.uiDialog.height(),options.width=that.uiDialog.width(),options.position={my:"left top",at:"left"+(left>=0?"+":"")+left+" top"+(top>=0?"+":"")+top,of:that.window},$(this).removeClass("ui-dialog-resizing"),that._unblockFrames(),that._trigger("resizeStop",event,filteredUi(ui))}}).css("position",position)},_trackFocus:function(){this._on(this.widget(),{focusin:function(event){this._makeFocusTarget(),this._focusedElement=$(event.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var instances=this._trackingInstances(),exists=$.inArray(this,instances);-1!==exists&&instances.splice(exists,1)},_trackingInstances:function(){var instances=this.document.data("ui-dialog-instances");return instances||(instances=[],this.document.data("ui-dialog-instances",instances)),instances},_minHeight:function(){var options=this.options;return"auto"===options.height?options.minHeight:Math.min(options.minHeight,options.height)},_position:function(){var isVisible=this.uiDialog.is(":visible");isVisible||this.uiDialog.show(),this.uiDialog.position(this.options.position),isVisible||this.uiDialog.hide()},_setOptions:function(options){var that=this,resize=!1,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value),key in that.sizeRelatedOptions&&(resize=!0),key in that.resizableRelatedOptions&&(resizableOptions[key]=value)}),resize&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",resizableOptions)},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;"dialogClass"===key&&uiDialog.removeClass(this.options.dialogClass).addClass(value),"disabled"!==key&&(this._super(key,value),"appendTo"===key&&this.uiDialog.appendTo(this._appendTo()),"buttons"===key&&this._createButtons(),"closeText"===key&&this.uiDialogTitlebarClose.button({label:""+value}),"draggable"===key&&(isDraggable=uiDialog.is(":data(ui-draggable)"),isDraggable&&!value&&uiDialog.draggable("destroy"),!isDraggable&&value&&this._makeDraggable()),"position"===key&&this._position(),"resizable"===key&&(isResizable=uiDialog.is(":data(ui-resizable)"),
isResizable&&!value&&uiDialog.resizable("destroy"),isResizable&&"string"==typeof value&&uiDialog.resizable("option","handles",value),isResizable||value===!1||this._makeResizable()),"title"===key&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),options.minWidth>options.width&&(options.width=options.minWidth),nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight(),minContentHeight=Math.max(0,options.minHeight-nonContentHeight),maxContentHeight="number"==typeof options.maxHeight?Math.max(0,options.maxHeight-nonContentHeight):"none","auto"===options.height?this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"}):this.element.height(Math.max(0,options.height-nonContentHeight)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var iframe=$(this);return $("<div>").css({position:"absolute",width:iframe.outerWidth(),height:iframe.outerHeight()}).appendTo(iframe.parent()).offset(iframe.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(event){return $(event.target).closest(".ui-dialog").length?!0:!!$(event.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var isOpening=!0;this._delay(function(){isOpening=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(event){isOpening||this._allowInteraction(event)||(event.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var overlays=this.document.data("ui-dialog-overlays")-1;overlays?this.document.data("ui-dialog-overlays",overlays):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}});$.widget("ui.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=!1,this.isout=!0,this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)},this.proportions=function(){return arguments.length?void(proportions=arguments[0]):proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(o.scope),o.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(scope){$.ui.ddmanager.droppables[scope]=$.ui.ddmanager.droppables[scope]||[],$.ui.ddmanager.droppables[scope].push(this)},_splice:function(drop){for(var i=0;i<drop.length;i++)drop[i]===this&&drop.splice(i,1)},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(key,value){if("accept"===key)this.accept=$.isFunction(value)?value:function(d){return d.is(value)};else if("scope"===key){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop),this._addToManager(value)}this._super(key,value)},_activate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),draggable&&this._trigger("deactivate",event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",event,this.ui(draggable)))},_out:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",event,this.ui(draggable)))},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=!1;return draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$(this).droppable("instance");return inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance,event)?(childrenIntersection=!0,!1):void 0}),childrenIntersection?!1:this.accept.call(this.element[0],draggable.currentItem||draggable.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",event,this.ui(draggable)),this.element):!1):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}}),$.ui.intersect=function(){function isOverAxis(x,reference,size){return x>=reference&&reference+size>x}return function(draggable,droppable,toleranceMode,event){if(!droppable.offset)return!1;var x1=(draggable.positionAbs||draggable.position.absolute).left+draggable.margins.left,y1=(draggable.positionAbs||draggable.position.absolute).top+draggable.margins.top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return x1>=l&&r>=x2&&y1>=t&&b>=y2;case"intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;case"pointer":return isOverAxis(event.pageY,t,droppable.proportions().height)&&isOverAxis(event.pageX,l,droppable.proportions().width);case"touch":return(y1>=t&&b>=y1||y2>=t&&b>=y2||t>y1&&y2>b)&&(x1>=l&&r>=x1||x2>=l&&r>=x2||l>x1&&x2>r);default:return!1}}}(),$.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++)if(!(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))){for(j=0;j<list.length;j++)if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop}m[i].visible="none"!==m[i].element.css("display"),m[i].visible&&("mousedown"===type&&m[i]._activate.call(m[i],event),m[i].offset=m[i].element.offset(),m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight}))}},drop:function(draggable,event){var dropped=!1;return $.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance,event)&&(dropped=this._drop.call(this,event)||dropped),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,event)))}),dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){draggable.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(draggable,event),$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance,event),c=!intersects&&this.isover?"isout":intersects&&!this.isover?"isover":null;c&&(this.options.greedy&&(scope=this.options.scope,parent=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===scope}),parent.length&&(parentInstance=$(parent[0]).droppable("instance"),parentInstance.greedyChild="isover"===c)),parentInstance&&"isover"===c&&(parentInstance.isover=!1,parentInstance.isout=!0,parentInstance._out.call(parentInstance,event)),this[c]=!0,this["isout"===c?"isover":"isout"]=!1,this["isover"===c?"_over":"_out"].call(this,event),parentInstance&&"isout"===c&&(parentInstance.isout=!1,parentInstance.isover=!0,parentInstance._over.call(parentInstance,event)))}})},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable"),draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)}};var dataSpace=($.ui.droppable,"ui-effects-"),jQuery=$;$.effects={effect:{}},function(jQuery,undefined){function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};return null==value?allowEmpty||!prop.def?null:prop.def:(value=type.floor?~~value:parseFloat(value),isNaN(value)?prop.def:type.mod?(value+type.mod)%type.mod:0>value?0:type.max<value?type.max:value)}function stringParse(string){var inst=color(),rgba=inst._rgba=[];return string=string.toLowerCase(),each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";return values?(parsed=inst[spaceName](values),inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache],rgba=inst._rgba=parsed._rgba,!1):void 0}),rgba.length?("0,0,0,0"===rgba.join()&&jQuery.extend(rgba,colors.transparent),inst):colors[string]}function hue2rgb(p,q,h){return h=(h+1)%1,1>6*h?p+(q-p)*h*6:1>2*h?q:2>3*h?p+(q-p)*(2/3-h)*6:p}var colors,stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]]}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha)},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},support=color.support={},supportElem=jQuery("<p>")[0],each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)",support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1,each(spaces,function(spaceName,space){space.cache="_"+spaceName,space.props.alpha={idx:3,type:"percent",def:1}}),color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined)return this._rgba=[null,null,null,null],this;(red.jquery||red.nodeType)&&(red=jQuery(red).css(green),green=undefined);var inst=this,type=jQuery.type(red),rgba=this._rgba=[];return green!==undefined&&(red=[red,green,blue,alpha],type="array"),"string"===type?this.parse(stringParse(red)||colors._default):"array"===type?(each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop)}),this):"object"===type?(red instanceof color?each(spaces,function(spaceName,space){red[space.cache]&&(inst[space.cache]=red[space.cache].slice())}):each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if("alpha"===key||null==red[key])return;inst[cache]=space.to(inst._rgba)}inst[cache][prop.idx]=clamp(red[key],prop,!0)}),inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0&&(inst[cache][3]=1,space.from&&(inst._rgba=space.from(inst[cache])))}),this):void 0},is:function(compare){var is=color(compare),same=!0,inst=this;return each(spaces,function(_,space){var localCache,isCache=is[space.cache];return isCache&&(localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[],each(space.props,function(_,prop){return null!=isCache[prop.idx]?same=isCache[prop.idx]===localCache[prop.idx]:void 0})),same}),same},_space:function(){var used=[],inst=this;return each(spaces,function(spaceName,space){inst[space.cache]&&used.push(spaceName)}),used.pop()},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=0===this.alpha()?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();return end=end[space.cache],each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};null!==endValue&&(null===startValue?result[index]=endValue:(type.mod&&(endValue-startValue>type.mod/2?startValue+=type.mod:startValue-endValue>type.mod/2&&(startValue-=type.mod)),result[index]=clamp((endValue-startValue)*distance+startValue,prop)))}),this[spaceName](result)},blend:function(opaque){if(1===this._rgba[3])return this;var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v}))},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return null==v?i>2?1:0:v});return 1===rgba[3]&&(rgba.pop(),prefix="rgb("),prefix+rgba.join()+")"},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){return null==v&&(v=i>2?1:0),i&&3>i&&(v=Math.round(100*v)+"%"),v});return 1===hsla[3]&&(hsla.pop(),prefix="hsl("),prefix+hsla.join()+")"},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();return includeAlpha&&rgba.push(~~(255*alpha)),"#"+jQuery.map(rgba,function(v){return v=(v||0).toString(16),1===v.length?"0"+v:v}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),color.fn.parse.prototype=color.fn,spaces.hsla.to=function(rgba){if(null==rgba[0]||null==rgba[1]||null==rgba[2])return[null,null,null,rgba[3]];var h,s,r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=.5*add;return h=min===max?0:r===max?60*(g-b)/diff+360:g===max?60*(b-r)/diff+120:60*(r-g)/diff+240,s=0===diff?0:.5>=l?diff/add:diff/(2-add),[Math.round(h)%360,s,l,null==a?1:a]},spaces.hsla.from=function(hsla){if(null==hsla[0]||null==hsla[1]||null==hsla[2])return[null,null,null,hsla[3]];var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=.5>=l?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(255*hue2rgb(p,q,h+1/3)),Math.round(255*hue2rgb(p,q,h)),Math.round(255*hue2rgb(p,q,h-1/3)),a]},each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]&&(this[cache]=to(this._rgba)),value===undefined)return this[cache].slice();var ret,type=jQuery.type(value),arr="array"===type||"object"===type?value:arguments,local=this[cache].slice();return each(props,function(key,prop){var val=arr["object"===type?key:prop.idx];null==val&&(val=local[prop.idx]),local[prop.idx]=clamp(val,prop)}),from?(ret=color(from(local)),ret[cache]=local,ret):color(local)},each(props,function(key,prop){color.fn[key]||(color.fn[key]=function(value){var match,vtype=jQuery.type(value),fn="alpha"===key?this._hsla?"hsla":"rgba":spaceName,local=this[fn](),cur=local[prop.idx];return"undefined"===vtype?cur:("function"===vtype&&(value=value.call(this,cur),vtype=jQuery.type(value)),null==value&&prop.empty?this:("string"===vtype&&(match=rplusequals.exec(value),match&&(value=cur+parseFloat(match[2])*("+"===match[1]?1:-1))),local[prop.idx]=value,this[fn](local)))})})}),color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if("transparent"!==value&&("string"!==jQuery.type(value)||(parsed=stringParse(value)))){if(value=color(parsed||value),!support.rgba&&1!==value._rgba[3]){for(curElem="backgroundColor"===hook?elem.parentNode:elem;(""===backgroundColor||"transparent"===backgroundColor)&&curElem&&curElem.style;)try{backgroundColor=jQuery.css(curElem,"backgroundColor"),curElem=curElem.parentNode}catch(e){}value=value.blend(backgroundColor&&"transparent"!==backgroundColor?backgroundColor:"_default")}value=value.toRgbaString()}try{elem.style[hook]=value}catch(e){}}},jQuery.fx.step[hook]=function(fx){fx.colorInit||(fx.start=color(fx.elem,hook),fx.end=color(fx.end),fx.colorInit=!0),jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos))}})},color.hook(stepHooks),jQuery.cssHooks.borderColor={expand:function(value){var expanded={};return each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value}),expanded}},colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]])for(len=style.length;len--;)key=style[len],"string"==typeof style[key]&&(styles[$.camelCase(key)]=style[key]);else for(key in style)"string"==typeof style[key]&&(styles[key]=style[key]);return styles}function styleDifference(oldStyle,newStyle){var name,value,diff={};for(name in newStyle)value=newStyle[name],oldStyle[name]!==value&&(shorthandStyles[name]||!$.fx.step[name]&&isNaN(parseFloat(value))||(diff[name]=value));return diff}var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){("none"!==fx.end&&!fx.setAttr||1===fx.pos&&!fx.setAttr)&&(jQuery.style(fx.elem,prop,fx.end),fx.setAttr=!0)}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var applyClassChange,animated=$(this),baseClass=animated.attr("class")||"",allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)}}),applyClassChange=function(){$.each(classAnimationActions,function(i,action){value[action]&&animated[action+"Class"](value[action])})},applyClassChange(),allAnimations=allAnimations.map(function(){return this.end=getElementStyles(this.el[0]),this.diff=styleDifference(this.start,this.end),this}),animated.attr("class",baseClass),allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:!1,complete:function(){dfd.resolve(styleInfo)}});return this.el.animate(this.diff,opts),dfd.promise()}),$.when.apply($,allAnimations.get()).done(function(){applyClassChange(),$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"")})}),o.complete.call(animated[0])})})},$.fn.extend({addClass:function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments)}}($.fn.addClass),removeClass:function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments)}}($.fn.removeClass),toggleClass:function(orig){return function(classNames,force,speed,easing,callback){return"boolean"==typeof force||void 0===force?speed?$.effects.animateClass.call(this,force?{add:classNames}:{remove:classNames},speed,easing,callback):orig.apply(this,arguments):$.effects.animateClass.call(this,{toggle:classNames},force,speed,easing)}}($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback)}})}(),function(){function _normalizeArguments(effect,options,speed,callback){return $.isPlainObject(effect)&&(options=effect,effect=effect.effect),effect={effect:effect},null==options&&(options={}),$.isFunction(options)&&(callback=options,speed=null,options={}),("number"==typeof options||$.fx.speeds[options])&&(callback=speed,speed=options,options={}),$.isFunction(speed)&&(callback=speed,speed=null),options&&$.extend(effect,options),speed=speed||options.duration,effect.duration=$.fx.off?0:"number"==typeof speed?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default,effect.complete=callback||options.complete,effect}function standardAnimationOption(option){return!option||"number"==typeof option||$.fx.speeds[option]?!0:"string"!=typeof option||$.effects.effect[option]?$.isFunction(option)?!0:"object"==typeof option&&!option.effect:!0}$.extend($.effects,{version:"1.11.2",save:function(element,set){for(var i=0;i<set.length;i++)null!==set[i]&&element.data(dataSpace+set[i],element[0].style[set[i]])},restore:function(element,set){var val,i;for(i=0;i<set.length;i++)null!==set[i]&&(val=element.data(dataSpace+set[i]),void 0===val&&(val=""),element.css(set[i],val))},setMode:function(el,mode){return"toggle"===mode&&(mode=el.is(":hidden")?"show":"hide"),mode},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height}switch(origin[1]){case"left":x=0;break;case"center":x=.5;break;case"right":x=1;break;default:x=origin[1]/original.width}return{x:x,y:y}},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper"))return element.parent();var props={width:element.outerWidth(!0),height:element.outerHeight(!0),float:element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id}catch(e){active=document.body}return element.wrap(wrapper),(element[0]===active||$.contains(element[0],active))&&$(active).focus(),wrapper=element.parent(),"static"===element.css("position")?(wrapper.css({position:"relative"}),element.css({position:"relative"})):($.extend(props,{position:element.css("position"),zIndex:element.css("z-index")}),$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos),isNaN(parseInt(props[pos],10))&&(props[pos]="auto")}),element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),element.css(size),wrapper.css(props).show()},removeWrapper:function(element){var active=document.activeElement;return element.parent().is(".ui-effects-wrapper")&&(element.parent().replaceWith(element),(element[0]===active||$.contains(element[0],active))&&$(active).focus()),element},setTransition:function(element,list,factor,value){return value=value||{},$.each(list,function(i,x){var unit=element.cssUnit(x);unit[0]>0&&(value[x]=unit[0]*factor+unit[1])}),value}}),$.fn.extend({effect:function(){function run(next){function done(){$.isFunction(complete)&&complete.call(elem[0]),$.isFunction(next)&&next()}var elem=$(this),complete=args.complete,mode=args.mode;(elem.is(":hidden")?"hide"===mode:"show"===mode)?(elem[mode](),done()):effectMethod.call(elem[0],args,done)}var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect];return $.fx.off||!effectMethod?mode?this[mode](args.duration,args.complete):this.each(function(){args.complete&&args.complete.call(this)}):queue===!1?this.each(run):this.queue(queue||"fx",run)},show:function(orig){return function(option){if(standardAnimationOption(option))return orig.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="show",this.effect.call(this,args)}}($.fn.show),hide:function(orig){return function(option){if(standardAnimationOption(option))return orig.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="hide",this.effect.call(this,args)}}($.fn.hide),toggle:function(orig){return function(option){if(standardAnimationOption(option)||"boolean"==typeof option)return orig.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="toggle",this.effect.call(this,args)}}($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];return $.each(["em","px","%","pt"],function(i,unit){style.indexOf(unit)>0&&(val=[parseFloat(style),unit])}),val}})}(),function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2)}}),$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2)},Circ:function(p){return 1-Math.sqrt(1-p*p)},Elastic:function(p){return 0===p||1===p?p:-Math.pow(2,8*(p-1))*Math.sin((80*(p-1)-7.5)*Math.PI/15)},Back:function(p){return p*p*(3*p-2)},Bounce:function(p){for(var pow2,bounce=4;p<((pow2=Math.pow(2,--bounce))-1)/11;);return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((3*pow2-2)/22-p,2)}}),$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn,$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p)},$.easing["easeInOut"+name]=function(p){return.5>p?easeIn(2*p)/2:1-easeIn(-2*p+2)/2}})}();$.effects,$.effects.effect.blind=function(o,done){var wrapper,distance,margin,el=$(this),rvertical=/up|down|vertical/,rpositivemotion=/up|left|vertical|horizontal/,props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),direction=o.direction||"up",vertical=rvertical.test(direction),ref=vertical?"height":"width",ref2=vertical?"top":"left",motion=rpositivemotion.test(direction),animation={},show="show"===mode;el.parent().is(".ui-effects-wrapper")?$.effects.save(el.parent(),props):$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),distance=wrapper[ref](),margin=parseFloat(wrapper.css(ref2))||0,animation[ref]=show?distance:0,motion||(el.css(vertical?"bottom":"right",0).css(vertical?"top":"left","auto").css({position:"absolute"}),animation[ref2]=show?margin:distance+margin),show&&(wrapper.css(ref,0),motion||wrapper.css(ref2,margin+distance)),wrapper.animate(animation,{duration:o.duration,easing:o.easing,queue:!1,complete:function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})},$.effects.effect.bounce=function(o,done){var i,upAnim,downAnim,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),hide="hide"===mode,show="show"===mode,direction=o.direction||"up",distance=o.distance,times=o.times||5,anims=2*times+(show||hide?1:0),speed=o.duration/anims,easing=o.easing,ref="up"===direction||"down"===direction?"top":"left",motion="up"===direction||"left"===direction,queue=el.queue(),queuelen=queue.length;for((show||hide)&&props.push("opacity"),$.effects.save(el,props),el.show(),$.effects.createWrapper(el),distance||(distance=el["top"===ref?"outerHeight":"outerWidth"]()/3),show&&(downAnim={opacity:1},downAnim[ref]=0,el.css("opacity",0).css(ref,motion?2*-distance:2*distance).animate(downAnim,speed,easing)),hide&&(distance/=Math.pow(2,times-1)),downAnim={},downAnim[ref]=0,i=0;times>i;i++)upAnim={},upAnim[ref]=(motion?"-=":"+=")+distance,el.animate(upAnim,speed,easing).animate(downAnim,speed,easing),distance=hide?2*distance:distance/2;hide&&(upAnim={opacity:0},upAnim[ref]=(motion?"-=":"+=")+distance,el.animate(upAnim,speed,easing)),el.queue(function(){hide&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),el.dequeue()},$.effects.effect.clip=function(o,done){var wrapper,animate,distance,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,direction=o.direction||"vertical",vert="vertical"===direction,size=vert?"height":"width",position=vert?"top":"left",animation={};$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),animate="IMG"===el[0].tagName?wrapper:el,distance=animate[size](),show&&(animate.css(size,0),animate.css(position,distance/2)),animation[size]=show?distance:0,animation[position]=show?0:distance/2,animate.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){show||el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})},$.effects.effect.drop=function(o,done){var distance,el=$(this),props=["position","top","bottom","left","right","opacity","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,direction=o.direction||"left",ref="up"===direction||"down"===direction?"top":"left",motion="up"===direction||"left"===direction?"pos":"neg",animation={opacity:show?1:0};$.effects.save(el,props),el.show(),$.effects.createWrapper(el),distance=o.distance||el["top"===ref?"outerHeight":"outerWidth"](!0)/2,show&&el.css("opacity",0).css(ref,"pos"===motion?-distance:distance),animation[ref]=(show?"pos"===motion?"+=":"-=":"pos"===motion?"-=":"+=")+distance,el.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})},$.effects.effect.explode=function(o,done){function childComplete(){pieces.push(this),pieces.length===rows*cells&&animComplete()}function animComplete(){el.css({visibility:"visible"}),$(pieces).remove(),show||el.hide(),done()}var i,j,left,top,mx,my,rows=o.pieces?Math.round(Math.sqrt(o.pieces)):3,cells=rows,el=$(this),mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,offset=el.show().css("visibility","hidden").offset(),width=Math.ceil(el.outerWidth()/cells),height=Math.ceil(el.outerHeight()/rows),pieces=[];for(i=0;rows>i;i++)for(top=offset.top+i*height,
my=i-(rows-1)/2,j=0;cells>j;j++)left=offset.left+j*width,mx=j-(cells-1)/2,el.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*width,top:-i*height}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width,height:height,left:left+(show?mx*width:0),top:top+(show?my*height:0),opacity:show?0:1}).animate({left:left+(show?0:mx*width),top:top+(show?0:my*height),opacity:show?1:0},o.duration||500,o.easing,childComplete)},$.effects.effect.fade=function(o,done){var el=$(this),mode=$.effects.setMode(el,o.mode||"toggle");el.animate({opacity:mode},{queue:!1,duration:o.duration,easing:o.easing,complete:done})},$.effects.effect.fold=function(o,done){var wrapper,distance,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show="show"===mode,hide="hide"===mode,size=o.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!o.horizFirst,widthFirst=show!==horizFirst,ref=widthFirst?["width","height"]:["height","width"],duration=o.duration/2,animation1={},animation2={};$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()],percent&&(size=parseInt(percent[1],10)/100*distance[hide?0:1]),show&&wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0}),animation1[ref[0]]=show?distance[0]:size,animation2[ref[1]]=show?distance[1]:0,wrapper.animate(animation1,duration,o.easing).animate(animation2,duration,o.easing,function(){hide&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()})},$.effects.effect.highlight=function(o,done){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};"hide"===mode&&(animation.opacity=0),$.effects.save(elem,props),elem.show().css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){"hide"===mode&&elem.hide(),$.effects.restore(elem,props),done()}})},$.effects.effect.size=function(o,done){var original,baseline,factor,el=$(this),props0=["position","top","bottom","left","right","width","height","overflow","opacity"],props1=["position","top","bottom","left","right","overflow","opacity"],props2=["width","height","overflow"],cProps=["fontSize"],vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],mode=$.effects.setMode(el,o.mode||"effect"),restore=o.restore||"effect"!==mode,scale=o.scale||"both",origin=o.origin||["middle","center"],position=el.css("position"),props=restore?props0:props1,zero={height:0,width:0,outerHeight:0,outerWidth:0};"show"===mode&&el.show(),original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},"toggle"===o.mode&&"show"===mode?(el.from=o.to||zero,el.to=o.from||original):(el.from=o.from||("show"===mode?zero:original),el.to=o.to||("hide"===mode?zero:original)),factor={from:{y:el.from.height/original.height,x:el.from.width/original.width},to:{y:el.to.height/original.height,x:el.to.width/original.width}},"box"!==scale&&"both"!==scale||(factor.from.y!==factor.to.y&&(props=props.concat(vProps),el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from),el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to)),factor.from.x!==factor.to.x&&(props=props.concat(hProps),el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from),el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to))),"content"!==scale&&"both"!==scale||factor.from.y!==factor.to.y&&(props=props.concat(cProps).concat(props2),el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from),el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to)),$.effects.save(el,props),el.show(),$.effects.createWrapper(el),el.css("overflow","hidden").css(el.from),origin&&(baseline=$.effects.getBaseline(origin,original),el.from.top=(original.outerHeight-el.outerHeight())*baseline.y,el.from.left=(original.outerWidth-el.outerWidth())*baseline.x,el.to.top=(original.outerHeight-el.to.outerHeight)*baseline.y,el.to.left=(original.outerWidth-el.to.outerWidth)*baseline.x),el.css(el.from),"content"!==scale&&"both"!==scale||(vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps),hProps=hProps.concat(["marginLeft","marginRight"]),props2=props0.concat(vProps).concat(hProps),el.find("*[width]").each(function(){var child=$(this),c_original={height:child.height(),width:child.width(),outerHeight:child.outerHeight(),outerWidth:child.outerWidth()};restore&&$.effects.save(child,props2),child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x,outerHeight:c_original.outerHeight*factor.from.y,outerWidth:c_original.outerWidth*factor.from.x},child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x,outerHeight:c_original.height*factor.to.y,outerWidth:c_original.width*factor.to.x},factor.from.y!==factor.to.y&&(child.from=$.effects.setTransition(child,vProps,factor.from.y,child.from),child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to)),factor.from.x!==factor.to.x&&(child.from=$.effects.setTransition(child,hProps,factor.from.x,child.from),child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to)),child.css(child.from),child.animate(child.to,o.duration,o.easing,function(){restore&&$.effects.restore(child,props2)})})),el.animate(el.to,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){0===el.to.opacity&&el.css("opacity",el.from.opacity),"hide"===mode&&el.hide(),$.effects.restore(el,props),restore||("static"===position?el.css({position:"relative",top:el.to.top,left:el.to.left}):$.each(["top","left"],function(idx,pos){el.css(pos,function(_,str){var val=parseInt(str,10),toRef=idx?el.to.left:el.to.top;return"auto"===str?toRef+"px":val+toRef+"px"})})),$.effects.removeWrapper(el),done()}})},$.effects.effect.scale=function(o,done){var el=$(this),options=$.extend(!0,{},o),mode=$.effects.setMode(el,o.mode||"effect"),percent=parseInt(o.percent,10)||(0===parseInt(o.percent,10)?0:"hide"===mode?0:100),direction=o.direction||"both",origin=o.origin,original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},factor={y:"horizontal"!==direction?percent/100:1,x:"vertical"!==direction?percent/100:1};options.effect="size",options.queue=!1,options.complete=done,"effect"!==mode&&(options.origin=origin||["middle","center"],options.restore=!0),options.from=o.from||("show"===mode?{height:0,width:0,outerHeight:0,outerWidth:0}:original),options.to={height:original.height*factor.y,width:original.width*factor.x,outerHeight:original.outerHeight*factor.y,outerWidth:original.outerWidth*factor.x},options.fade&&("show"===mode&&(options.from.opacity=0,options.to.opacity=1),"hide"===mode&&(options.from.opacity=1,options.to.opacity=0)),el.effect(options)},$.effects.effect.puff=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"hide"),hide="hide"===mode,percent=parseInt(o.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width(),outerHeight:elem.outerHeight(),outerWidth:elem.outerWidth()};$.extend(o,{effect:"scale",queue:!1,fade:!0,mode:mode,complete:done,percent:hide?percent:100,from:hide?original:{height:original.height*factor,width:original.width*factor,outerHeight:original.outerHeight*factor,outerWidth:original.outerWidth*factor}}),elem.effect(o)},$.effects.effect.pulsate=function(o,done){var i,elem=$(this),mode=$.effects.setMode(elem,o.mode||"show"),show="show"===mode,hide="hide"===mode,showhide=show||"hide"===mode,anims=2*(o.times||5)+(showhide?1:0),duration=o.duration/anims,animateTo=0,queue=elem.queue(),queuelen=queue.length;for(!show&&elem.is(":visible")||(elem.css("opacity",0).show(),animateTo=1),i=1;anims>i;i++)elem.animate({opacity:animateTo},duration,o.easing),animateTo=1-animateTo;elem.animate({opacity:animateTo},duration,o.easing),elem.queue(function(){hide&&elem.hide(),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),elem.dequeue()},$.effects.effect.shake=function(o,done){var i,el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),direction=o.direction||"left",distance=o.distance||20,times=o.times||3,anims=2*times+1,speed=Math.round(o.duration/anims),ref="up"===direction||"down"===direction?"top":"left",positiveMotion="up"===direction||"left"===direction,animation={},animation1={},animation2={},queue=el.queue(),queuelen=queue.length;for($.effects.save(el,props),el.show(),$.effects.createWrapper(el),animation[ref]=(positiveMotion?"-=":"+=")+distance,animation1[ref]=(positiveMotion?"+=":"-=")+2*distance,animation2[ref]=(positiveMotion?"-=":"+=")+2*distance,el.animate(animation,speed,o.easing),i=1;times>i;i++)el.animate(animation1,speed,o.easing).animate(animation2,speed,o.easing);el.animate(animation1,speed,o.easing).animate(animation,speed/2,o.easing).queue(function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),el.dequeue()},$.effects.effect.slide=function(o,done){var distance,el=$(this),props=["position","top","bottom","left","right","width","height"],mode=$.effects.setMode(el,o.mode||"show"),show="show"===mode,direction=o.direction||"left",ref="up"===direction||"down"===direction?"top":"left",positiveMotion="up"===direction||"left"===direction,animation={};$.effects.save(el,props),el.show(),distance=o.distance||el["top"===ref?"outerHeight":"outerWidth"](!0),$.effects.createWrapper(el).css({overflow:"hidden"}),show&&el.css(ref,positiveMotion?isNaN(distance)?"-"+distance:-distance:distance),animation[ref]=(show?positiveMotion?"+=":"-=":positiveMotion?"-=":"+=")+distance,el.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){"hide"===mode&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})},$.effects.effect.transfer=function(o,done){var elem=$(this),target=$(o.to),targetFixed="fixed"===target.css("position"),body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(o.className).css({top:startPosition.top-fixTop,left:startPosition.left-fixLeft,height:elem.innerHeight(),width:elem.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,o.duration,o.easing,function(){transfer.remove(),done()})},$.widget("ui.progressbar",{version:"1.11.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(newValue){return void 0===newValue?this.options.value:(this.options.value=this._constrainedValue(newValue),void this._refreshValue())},_constrainedValue:function(newValue){return void 0===newValue&&(newValue=this.options.value),this.indeterminate=newValue===!1,"number"!=typeof newValue&&(newValue=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,newValue))},_setOptions:function(options){var value=options.value;delete options.value,this._super(options),this.options.value=this._constrainedValue(value),this._refreshValue()},_setOption:function(key,value){"max"===key&&(value=Math.max(this.min,value)),"disabled"===key&&this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value),this._super(key,value)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=$("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==value&&(this.oldValue=value,this._trigger("change")),value===this.options.max&&this._trigger("complete")}}),$.widget("ui.selectable",$.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var selectees,that=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){selectees=$(that.options.filter,that.element[0]),selectees.addClass("ui-selectee"),selectees.each(function(){var $this=$(this),pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:!1,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=selectees.addClass("ui-selectee"),this._mouseInit(),this.helper=$("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY],this.options.disabled||(this.selectees=$(options.filter,this.element[0]),this._trigger("start",event),$(options.appendTo).append(this.helper),this.helper.css({left:event.pageX,top:event.pageY,width:0,height:0}),options.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=!0,event.metaKey||event.ctrlKey||(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element}))}),$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");return selectee?(doSelect=!event.metaKey&&!event.ctrlKey||!selectee.$element.hasClass("ui-selected"),selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting"),selectee.unselecting=!doSelect,selectee.selecting=doSelect,selectee.selected=doSelect,doSelect?that._trigger("selecting",event,{selecting:selectee.element}):that._trigger("unselecting",event,{unselecting:selectee.element}),!1):void 0}))},_mouseDrag:function(event){if(this.dragged=!0,!this.options.disabled){var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;return x1>x2&&(tmp=x2,x2=x1,x1=tmp),y1>y2&&(tmp=y2,y2=y1,y1=tmp),this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1}),this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=!1;selectee&&selectee.element!==that.element[0]&&("touch"===options.tolerance?hit=!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1):"fit"===options.tolerance&&(hit=selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2),hit?(selectee.selected&&(selectee.$element.removeClass("ui-selected"),selectee.selected=!1),selectee.unselecting&&(selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1),selectee.selecting||(selectee.$element.addClass("ui-selecting"),selectee.selecting=!0,that._trigger("selecting",event,{selecting:selectee.element}))):(selectee.selecting&&((event.metaKey||event.ctrlKey)&&selectee.startselected?(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.$element.addClass("ui-selected"),selectee.selected=!0):(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.startselected&&(selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0),that._trigger("unselecting",event,{unselecting:selectee.element}))),selectee.selected&&(event.metaKey||event.ctrlKey||selectee.startselected||(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element})))))}),!1}},_mouseStop:function(event){var that=this;return this.dragged=!1,$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1,selectee.startselected=!1,that._trigger("unselected",event,{unselected:selectee.element})}),$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected"),selectee.selecting=!1,selectee.selected=!0,selectee.startselected=!0,that._trigger("selected",event,{selected:selectee.element})}),this._trigger("stop",event),this.helper.remove(),!1}}),$.widget("ui.selectmenu",{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var selectmenuId=this.element.uniqueId().attr("id");this.ids={element:selectmenuId,button:selectmenuId+"-button",menu:selectmenuId+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var that=this,tabindex=this.element.attr("tabindex");this.label=$("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(event){this.button.focus(),event.preventDefault()}}),this.element.hide(),this.button=$("<span>",{class:"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:tabindex||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),$("<span>",{class:"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=$("<span>",{class:"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){that.menuItems||that._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var that=this;this.menu=$("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=$("<div>",{class:"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(event,ui){event.preventDefault(),that._setSelection(),that._select(ui.item.data("ui-selectmenu-item"),event)},focus:function(event,ui){var item=ui.item.data("ui-selectmenu-item");null!=that.focusIndex&&item.index!==that.focusIndex&&(that._trigger("focus",event,{item:item}),that.isOpen||that._select(item,event)),that.focusIndex=item.index,that.button.attr("aria-activedescendant",that.menuItems.eq(item.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var item,options=this.element.find("option");options.length&&(this._parseOptions(options),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),item=this._getSelectedItem(),this.menuInstance.focus(null,item),this._setAria(item.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(event){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",event))},_position:function(){this.menuWrap.position($.extend({of:this.button},this.options.position))},close:function(event){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",event))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(ul,items){var that=this,currentOptgroup="";$.each(items,function(index,item){item.optgroup!==currentOptgroup&&($("<li>",{class:"ui-selectmenu-optgroup ui-menu-divider"+(item.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:item.optgroup}).appendTo(ul),currentOptgroup=item.optgroup),that._renderItemData(ul,item)})},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-selectmenu-item",item)},_renderItem:function(ul,item){var li=$("<li>");return item.disabled&&li.addClass("ui-state-disabled"),this._setText(li,item.label),li.appendTo(ul)},_setText:function(element,value){value?element.text(value):element.html("&#160;")},_move:function(direction,event){var item,next,filter=".ui-menu-item";this.isOpen?item=this.menuItems.eq(this.focusIndex):(item=this.menuItems.eq(this.element[0].selectedIndex),filter+=":not(.ui-state-disabled)"),next="first"===direction||"last"===direction?item["first"===direction?"prevAll":"nextAll"](filter).eq(-1):item[direction+"All"](filter).eq(0),next.length&&this.menuInstance.focus(event,next)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(event){this[this.isOpen?"close":"open"](event)},_setSelection:function(){var selection;this.range&&(window.getSelection?(selection=window.getSelection(),selection.removeAllRanges(),selection.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(event){this.isOpen&&($(event.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(event))}},_buttonEvents:{mousedown:function(){var selection;window.getSelection?(selection=window.getSelection(),selection.rangeCount&&(this.range=selection.getRangeAt(0))):this.range=document.selection.createRange()},click:function(event){this._setSelection(),this._toggle(event)},keydown:function(event){var preventDefault=!0;switch(event.keyCode){case $.ui.keyCode.TAB:case $.ui.keyCode.ESCAPE:this.close(event),preventDefault=!1;break;case $.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(event);break;case $.ui.keyCode.UP:event.altKey?this._toggle(event):this._move("prev",event);break;case $.ui.keyCode.DOWN:event.altKey?this._toggle(event):this._move("next",event);break;case $.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(event):this._toggle(event);break;case $.ui.keyCode.LEFT:this._move("prev",event);break;case $.ui.keyCode.RIGHT:this._move("next",event);break;case $.ui.keyCode.HOME:case $.ui.keyCode.PAGE_UP:this._move("first",event);break;case $.ui.keyCode.END:case $.ui.keyCode.PAGE_DOWN:this._move("last",event);break;default:this.menu.trigger(event),preventDefault=!1}preventDefault&&event.preventDefault()}},_selectFocusedItem:function(event){var item=this.menuItems.eq(this.focusIndex);item.hasClass("ui-state-disabled")||this._select(item.data("ui-selectmenu-item"),event)},_select:function(item,event){var oldIndex=this.element[0].selectedIndex;this.element[0].selectedIndex=item.index,this._setText(this.buttonText,item.label),this._setAria(item),this._trigger("select",event,{item:item}),item.index!==oldIndex&&this._trigger("change",event,{item:item}),this.close(event)},_setAria:function(item){var id=this.menuItems.eq(item.index).attr("id");this.button.attr({"aria-labelledby":id,"aria-activedescendant":id}),this.menu.attr("aria-activedescendant",id)},_setOption:function(key,value){"icons"===key&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(value.button),this._super(key,value),"appendTo"===key&&this.menuWrap.appendTo(this._appendTo()),"disabled"===key&&(this.menuInstance.option("disabled",value),this.button.toggleClass("ui-state-disabled",value).attr("aria-disabled",value),this.element.prop("disabled",value),value?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===key&&this._resizeButton()},_appendTo:function(){var element=this.options.appendTo;return element&&(element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0)),element&&element[0]||(element=this.element.closest(".ui-front")),element.length||(element=this.document[0].body),element},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var width=this.options.width;width||(width=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(width)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(options){var data=[];options.each(function(index,item){var option=$(item),optgroup=option.parent("optgroup");data.push({element:option,index:index,value:option.attr("value"),label:option.text(),optgroup:optgroup.attr("label")||"",disabled:optgroup.prop("disabled")||option.prop("disabled")})}),this.items=data},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),$.widget("ui.slider",$.ui.mouse,{version:"1.11.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",handles=[];for(handleCount=options.values&&options.values.length||1,existingHandles.length>handleCount&&(existingHandles.slice(handleCount).remove(),existingHandles=existingHandles.slice(0,handleCount)),i=existingHandles.length;handleCount>i;i++)handles.push(handle);this.handles=existingHandles.add($(handles.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(i){$(this).data("ui-slider-handle-index",i)})},_createRange:function(){var options=this.options,classes="";options.range?(options.range===!0&&(options.values?options.values.length&&2!==options.values.length?options.values=[options.values[0],options.values[0]]:$.isArray(options.values)&&(options.values=options.values.slice(0)):options.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=$("<div></div>").appendTo(this.element),classes="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(classes+("min"===options.range||"max"===options.range?" ui-slider-range-"+options.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;return o.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position),distance=this._valueMax()-this._valueMin()+1,this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));(distance>thisDistance||distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min))&&(distance=thisDistance,closestHandle=$(this),index=i)}),allowed=this._start(event,index),allowed===!1?!1:(this._mouseSliding=!0,this._handleIndex=index,closestHandle.addClass("ui-state-active").focus(),offset=closestHandle.offset(),mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(event,index,normValue),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);return this._slide(event,this._handleIndex,normValue),!1},_mouseStop:function(event){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(event,this._handleIndex),this._change(event,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;return"horizontal"===this.orientation?(pixelTotal=this.elementSize.width,pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(pixelTotal=this.elementSize.height,pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),percentMouse=pixelMouse/pixelTotal,percentMouse>1&&(percentMouse=1),0>percentMouse&&(percentMouse=0),"vertical"===this.orientation&&(percentMouse=1-percentMouse),valueTotal=this._valueMax()-this._valueMin(),
valueMouse=this._valueMin()+percentMouse*valueTotal,this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};return this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;this.options.values&&this.options.values.length?(otherVal=this.values(index?0:1),2===this.options.values.length&&this.options.range===!0&&(0===index&&newVal>otherVal||1===index&&otherVal>newVal)&&(newVal=otherVal),newVal!==this.values(index)&&(newValues=this.values(),newValues[index]=newVal,allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues}),otherVal=this.values(index?0:1),allowed!==!1&&this.values(index,newVal))):newVal!==this.value()&&(allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal}),allowed!==!1&&this.value(newVal))},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._lastChangedValue=index,this._trigger("change",event,uiHash)}},value:function(newValue){return arguments.length?(this.options.value=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,0)):this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1)return this.options.values[index]=this._trimAlignValue(newValue),this._refreshValue(),void this._change(null,index);if(!arguments.length)return this._values();if(!$.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(index):this.value();for(vals=this.options.values,newValues=arguments[0],i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(newValues[i]),this._change(null,i);this._refreshValue()},_setOption:function(key,value){var i,valsLength=0;switch("range"===key&&this.options.range===!0&&("min"===value?(this.options.value=this._values(0),this.options.values=null):"max"===value&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),$.isArray(this.options.values)&&(valsLength=this.options.values.length),"disabled"===key&&this.element.toggleClass("ui-state-disabled",!!value),this._super(key,value),key){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===value?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;valsLength>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var val=this.options.value;return val=this._trimAlignValue(val)},_values:function(index){var val,vals,i;if(arguments.length)return val=this.options.values[index],val=this._trimAlignValue(val);if(this.options.values&&this.options.values.length){for(vals=this.options.values.slice(),i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals}return[]},_trimAlignValue:function(val){if(val<=this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;return 2*Math.abs(valModStep)>=step&&(alignValue+=valModStep>0?step:-step),parseFloat(alignValue.toFixed(5))},_calculateNewMax:function(){var remainder=(this.options.max-this._valueMin())%this.options.step;this.max=this.options.max-remainder},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=this._animateOff?!1:o.animate,_set={};this.options.values&&this.options.values.length?this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100,_set["horizontal"===that.orientation?"left":"bottom"]=valPercent+"%",$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate),that.options.range===!0&&("horizontal"===that.orientation?(0===i&&that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate),1===i&&that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate})):(0===i&&that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate),1===i&&that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate}))),lastValPercent=valPercent}):(value=this.value(),valueMin=this._valueMin(),valueMax=this._valueMax(),valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0,_set["horizontal"===this.orientation?"left":"bottom"]=valPercent+"%",this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate),"min"===oRange&&"horizontal"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate),"max"===oRange&&"horizontal"===this.orientation&&this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:!1,duration:o.animate}),"min"===oRange&&"vertical"===this.orientation&&this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate),"max"===oRange&&"vertical"===this.orientation&&this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(event.preventDefault(),!this._keySliding&&(this._keySliding=!0,$(event.target).addClass("ui-state-active"),allowed=this._start(event,index),allowed===!1))return}switch(step=this.options.step,curVal=newVal=this.options.values&&this.options.values.length?this.values(index):this.value(),event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax())return;newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin())return;newVal=this._trimAlignValue(curVal-step)}this._slide(event,index,newVal)},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(event,index),this._change(event,index),$(event.target).removeClass("ui-state-active"))}}}),$.widget("ui.sortable",$.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return x>=reference&&reference+size>x},_isFloating:function(item){return/left|right/.test(item.css("float"))||/inline|table-cell/.test(item.css("display"))},_create:function(){var o=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===o.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(key,value){this._super(key,value),"handle"===key&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),$.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=!1,that=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(event),$(event.target).parents().each(function(){return $.data(this,that.widgetName+"-item")===that?(currentItem=$(this),!1):void 0}),$.data(event.target,that.widgetName+"-item")===that&&(currentItem=$(event.target)),currentItem&&(!this.options.handle||overrideHandle||($(this.options.handle,currentItem).find("*").addBack().each(function(){this===event.target&&(validHandle=!0)}),validHandle))?(this.currentItem=currentItem,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(event),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(body=this.document.find("body"),this.storedCursor=body.css("cursor"),body.css("cursor",o.cursor),this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",event,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));return $.ui.ddmanager&&($.ui.ddmanager.current=this),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(event),!0},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=!1;for(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed)),event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item),intersection&&item.instance===this.currentContainer&&itemElement!==this.currentItem[0]&&this.placeholder[1===intersection?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&("semi-dynamic"===this.options.type?!$.contains(this.element[0],itemElement):!0)){if(this.direction=1===intersection?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}return this._contactContainers(event),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(event,noPropagation){if(event){if($.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,event),this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};axis&&"x"!==axis||(animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),axis&&"y"!==axis||(animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,this._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,this._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];return o=o||{},$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);res&&str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))}),!str.length&&o.key&&str.push(o.key+"="),str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];return o=o||{},items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")}),ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight="x"===this.options.axis||y1+dyClick>t&&b>y1+dyClick,isOverElementWidth="y"===this.options.axis||x1+dxClick>l&&r>x1+dxClick,isOverElement=isOverElementHeight&&isOverElementWidth;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]?isOverElement:l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return isOverElement?this.floating?horizontalDirection&&"right"===horizontalDirection||"down"===verticalDirection?2:1:verticalDirection&&("down"===verticalDirection?2:1):!1},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return this.floating&&horizontalDirection?"right"===horizontalDirection&&isOverRightHalf||"left"===horizontalDirection&&!isOverRightHalf:verticalDirection&&("down"===verticalDirection&&isOverBottomHalf||"up"===verticalDirection&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return 0!==delta&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return 0!==delta&&(delta>0?"right":"left")},refresh:function(event){return this._refreshItems(event),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){function addItems(){items.push(this)}var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);for(queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=queries.length-1;i>=0;i--)queries[i][0].each(addItems);return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return!1;return!0})},_refreshItems:function(event){this.items=[],this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=connectWith.length-1;i>=0;i--)for(cur=$(connectWith[i]),j=cur.length-1;j>=0;j--)inst=$.data(cur[j],this.widgetFullName),inst&&inst!==this&&!inst.options.disabled&&(queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]),this.containers.push(inst));for(i=queries.length-1;i>=0;i--)for(targetData=queries[i][1],_queries=queries[i][0],j=0,queriesLength=_queries.length;queriesLength>j;j++)item=$(_queries[j]),item.data(this.widgetName+"-item",targetData),items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})},refreshPositions:function(fast){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,item,t,p;for(i=this.items.length-1;i>=0;i--)item=this.items[i],item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]||(t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item,fast||(item.width=t.outerWidth(),item.height=t.outerHeight()),p=t.offset(),item.left=p.left,item.top=p.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)p=this.containers[i].element.offset(),this.containers[i].containerCache.left=p.left,this.containers[i].containerCache.top=p.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(that){that=that||this;var className,o=that.options;o.placeholder&&o.placeholder.constructor!==String||(className=o.placeholder,o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===nodeName?that.currentItem.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(element)}):"img"===nodeName&&element.attr("src",that.currentItem.attr("src")),className||element.css("visibility","hidden"),element},update:function(container,p){className&&!o.forcePlaceholderSize||(p.height()||p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10)))}}),that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem)),that.currentItem.after(that.placeholder),o.placeholder.update(that,that.placeholder)},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--)if(!$.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i],innermostIndex=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",event,this._uiHash(this)),this.containers[i].containerCache.over=0);if(innermostContainer)if(1===this.containers.length)this.containers[innermostIndex].containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1);else{for(dist=1e4,itemWithLeastDistance=null,floating=innermostContainer.floating||this._isFloating(this.currentItem),posProperty=floating?"left":"top",sizeProperty=floating?"width":"height",axis=floating?"clientX":"clientY",j=this.items.length-1;j>=0;j--)$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])&&this.items[j].item[0]!==this.currentItem[0]&&(cur=this.items[j].item.offset()[posProperty],nearBottom=!1,event[axis]-cur>this.items[j][sizeProperty]/2&&(nearBottom=!0),Math.abs(event[axis]-cur)<dist&&(dist=Math.abs(event[axis]-cur),itemWithLeastDistance=this.items[j],this.direction=nearBottom?"up":"down"));if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[innermostIndex])return void(this.currentContainer.containerCache.over||(this.containers[innermostIndex]._trigger("over",event,this._uiHash()),this.currentContainer.containerCache.over=1));itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,!0):this._rearrange(event,null,this.containers[innermostIndex].element,!0),this._trigger("change",event,this._uiHash()),this.containers[innermostIndex]._trigger("change",event,this._uiHash(this)),this.currentContainer=this.containers[innermostIndex],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return helper.parents("body").length||$("parent"!==o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]),helper[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),helper[0].style.width&&!o.forceHelperSize||helper.width(this.currentItem.width()),helper[0].style.height&&!o.forceHelperSize||helper.height(this.currentItem.height()),helper},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&$.ui.ie)&&(po={top:0,left:0}),{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var ce,co,over,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,($("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(ce=$(o.containment)[0],co=$(o.containment).offset(),over="hidden"!==$(ce).css("overflow"),this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod="absolute"===d?1:-1,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(event.pageX-this.offset.click.left<this.containment[0]&&(pageX=this.containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<this.containment[1]&&(pageY=this.containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>this.containment[2]&&(pageX=this.containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>this.containment[3]&&(pageY=this.containment[3]+this.offset.click.top)),o.grid&&(top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1],pageY=this.containment?top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top,left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0],pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left)),{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())
}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){counter===this.counter&&this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance))}}this.reverting=!1;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!noPropagation&&delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||noPropagation||delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())}),this!==this.currentContainer&&(noPropagation||(delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())}),delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer)),delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)noPropagation||delayedTriggers.push(delayEvent("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(delayedTriggers.push(delayEvent("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,noPropagation||this._trigger("beforeStop",event,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!noPropagation){for(i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){$.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}}),$.widget("ui.spinner",{version:"1.11.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var options={},element=this.element;return $.each(["min","max","step"],function(i,option){var value=element.attr(option);void 0!==value&&value.length&&(options[option]=value)}),options},_events:{keydown:function(event){this._start(event)&&this._keydown(event)&&event.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(event){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",event)))},mousewheel:function(event,delta){if(delta){if(!this.spinning&&!this._start(event))return!1;this._spin((delta>0?1:-1)*this.options.step,event),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(event)},100),event.preventDefault()}},"mousedown .ui-spinner-button":function(event){function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;isActive||(this.element.focus(),this.previous=previous,this._delay(function(){this.previous=previous}))}var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),event.preventDefault(),checkFocus.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,checkFocus.call(this)}),this._start(event)!==!1&&this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){return $(event.currentTarget).hasClass("ui-state-active")?this._start(event)===!1?!1:void this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*uiSpinner.height())&&uiSpinner.height()>0&&uiSpinner.height(uiSpinner.height()),this.options.disabled&&this.disable()},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:return this._repeat(null,1,event),!0;case keyCode.DOWN:return this._repeat(null,-1,event),!0;case keyCode.PAGE_UP:return this._repeat(null,options.page,event),!0;case keyCode.PAGE_DOWN:return this._repeat(null,-options.page,event),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(event){return this.spinning||this._trigger("start",event)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(i,steps,event){i=i||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,steps,event)},i),this._spin(steps*this.options.step,event)},_spin:function(step,event){var value=this.value()||0;this.counter||(this.counter=1),value=this._adjustValue(value+step*this._increment(this.counter)),this.spinning&&this._trigger("spin",event,{value:value})===!1||(this._value(value),this.counter++)},_increment:function(i){var incremental=this.options.incremental;return incremental?$.isFunction(incremental)?incremental(i):Math.floor(i*i*i/5e4-i*i/500+17*i/200+1):1},_precision:function(){var precision=this._precisionOf(this.options.step);return null!==this.options.min&&(precision=Math.max(precision,this._precisionOf(this.options.min))),precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return-1===decimal?0:str.length-decimal-1},_adjustValue:function(value){var base,aboveMin,options=this.options;return base=null!==options.min?options.min:0,aboveMin=value-base,aboveMin=Math.round(aboveMin/options.step)*options.step,value=base+aboveMin,value=parseFloat(value.toFixed(this._precision())),null!==options.max&&value>options.max?options.max:null!==options.min&&value<options.min?options.min:value},_stop:function(event){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",event))},_setOption:function(key,value){if("culture"===key||"numberFormat"===key){var prevValue=this._parse(this.element.val());return this.options[key]=value,void this.element.val(this._format(prevValue))}"max"!==key&&"min"!==key&&"step"!==key||"string"==typeof value&&(value=this._parse(value)),"icons"===key&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(value.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(value.down)),this._super(key,value),"disabled"===key&&(this.widget().toggleClass("ui-state-disabled",!!value),this.element.prop("disabled",!!value),this.buttons.button(value?"disable":"enable"))},_setOptions:spinner_modifier(function(options){this._super(options)}),_parse:function(val){return"string"==typeof val&&""!==val&&(val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val),""===val||isNaN(val)?null:val},_format:function(value){return""===value?"":window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var value=this.value();return null===value?!1:value===this._adjustValue(value)},_value:function(value,allowAny){var parsed;""!==value&&(parsed=this._parse(value),null!==parsed&&(allowAny||(parsed=this._adjustValue(parsed)),value=this._format(parsed))),this.element.val(value),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:spinner_modifier(function(steps){this._stepUp(steps)}),_stepUp:function(steps){this._start()&&(this._spin((steps||1)*this.options.step),this._stop())},stepDown:spinner_modifier(function(steps){this._stepDown(steps)}),_stepDown:function(steps){this._start()&&(this._spin((steps||1)*-this.options.step),this._stop())},pageUp:spinner_modifier(function(pages){this._stepUp((pages||1)*this.options.page)}),pageDown:spinner_modifier(function(pages){this._stepDown((pages||1)*this.options.page)}),value:function(newVal){return arguments.length?void spinner_modifier(this._value).call(this,newVal):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),$.widget("ui.tabs",{version:"1.11.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var rhash=/#.*$/;return function(anchor){var anchorUrl,locationUrl;anchor=anchor.cloneNode(!1),anchorUrl=anchor.href.replace(rhash,""),locationUrl=location.href.replace(rhash,"");try{anchorUrl=decodeURIComponent(anchorUrl)}catch(error){}try{locationUrl=decodeURIComponent(locationUrl)}catch(error){}return anchor.hash.length>1&&anchorUrl===locationUrl}}(),_create:function(){var that=this,options=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible),this._processTabs(),options.active=this._initialActive(),$.isArray(options.disabled)&&(options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(options.active):this.active=$(),this._refresh(),this.active.length&&this.load(options.active)},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);return null===active&&(locationHash&&this.tabs.each(function(i,tab){return $(tab).attr("aria-controls")===locationHash?(active=i,!1):void 0}),null===active&&(active=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==active&&-1!==active||(active=this.tabs.length?0:!1)),active!==!1&&(active=this.tabs.index(this.tabs.eq(active)),-1===active&&(active=collapsible?!1:0)),!collapsible&&active===!1&&this.anchors.length&&(active=0),active},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):$()}},_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=!0;if(!this._handlePageNav(event)){switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=!1,selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:return event.preventDefault(),clearTimeout(this.activating),void this._activate(selectedIndex);case $.ui.keyCode.ENTER:return event.preventDefault(),clearTimeout(this.activating),void this._activate(selectedIndex===this.options.active?!1:selectedIndex);default:return}event.preventDefault(),clearTimeout(this.activating),selectedIndex=this._focusNextTab(selectedIndex,goingForward),event.ctrlKey||(focusedTab.attr("aria-selected","false"),this.tabs.eq(selectedIndex).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",selectedIndex)},this.delay))}},_panelKeydown:function(event){this._handlePageNav(event)||event.ctrlKey&&event.keyCode===$.ui.keyCode.UP&&(event.preventDefault(),this.active.focus())},_handlePageNav:function(event){return event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(index,goingForward){function constrain(){return index>lastTabIndex&&(index=0),0>index&&(index=lastTabIndex),index}for(var lastTabIndex=this.tabs.length-1;-1!==$.inArray(constrain(),this.options.disabled);)index=goingForward?index+1:index-1;return index},_focusNextTab:function(index,goingForward){return index=this._findNextTab(index,goingForward),this.tabs.eq(index).focus(),index},_setOption:function(key,value){return"active"===key?void this._activate(value):"disabled"===key?void this._setupDisabled(value):(this._super(key,value),"collapsible"===key&&(this.element.toggleClass("ui-tabs-collapsible",value),value||this.options.active!==!1||this._activate(0)),"event"===key&&this._setupEvents(value),void("heightStyle"===key&&this._setupHeightStyle(value)))},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab)}),this._processTabs(),options.active!==!1&&this.anchors.length?this.active.length&&!$.contains(this.tablist[0],this.active[0])?this.tabs.length===options.disabled.length?(options.active=!1,this.active=$()):this._activate(this._findNextTab(Math.max(0,options.active-1),!1)):options.active=this.tabs.index(this.active):(options.active=!1,this.active=$()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var that=this,prevTabs=this.tabs,prevAnchors=this.anchors,prevPanels=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(event){$(this).is(".ui-state-disabled")&&event.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){$(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return $("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=$(),this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");that._isLocal(anchor)?(selector=anchor.hash,panelId=selector.substring(1),panel=that.element.find(that._sanitizeSelector(selector))):(panelId=tab.attr("aria-controls")||$({}).uniqueId()[0].id,selector="#"+panelId,panel=that.element.find(selector),panel.length||(panel=that._createPanel(panelId),panel.insertAfter(that.panels[i-1]||that.tablist)),panel.attr("aria-live","polite")),panel.length&&(that.panels=that.panels.add(panel)),originalAriaControls&&tab.data("ui-tabs-aria-controls",originalAriaControls),tab.attr({"aria-controls":panelId,"aria-labelledby":anchorId}),panel.attr("aria-labelledby",anchorId)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),prevTabs&&(this._off(prevTabs.not(this.tabs)),this._off(prevAnchors.not(this.anchors)),this._off(prevPanels.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(disabled){$.isArray(disabled)&&(disabled.length?disabled.length===this.anchors.length&&(disabled=!0):disabled=!1);for(var li,i=0;li=this.tabs[i];i++)disabled===!0||-1!==$.inArray(i,disabled)?$(li).addClass("ui-state-disabled").attr("aria-disabled","true"):$(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=disabled},_setupEvents:function(event){var events={};event&&$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(event){event.preventDefault()}}),this._on(this.anchors,events),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();"fill"===heightStyle?(maxHeight=parent.height(),maxHeight-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");"absolute"!==position&&"fixed"!==position&&(maxHeight-=elem.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(!0)}),this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):"auto"===heightStyle&&(maxHeight=0,this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight))},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=active.length?this._getPanelForTab(active):$(),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault(),tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1||(options.active=collapsing?!1:this.tabs.index(tab),this.active=clickedIsActive?$():tab,this.xhr&&this.xhr.abort(),toHide.length||toShow.length||$.error("jQuery UI Tabs: Mismatching fragment identifier."),toShow.length&&this.load(this.tabs.index(tab),event),this._toggle(event,eventData))},_toggle:function(event,eventData){function complete(){that.running=!1,that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),toShow.length&&that.options.show?that._show(toShow,that.options.show,complete):(toShow.show(),complete())}var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=!0,toHide.length&&this.options.hide?this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),show()}):(eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),toHide.hide(),show()),toHide.attr("aria-hidden","true"),eventData.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),toShow.length&&toHide.length?eventData.oldTab.attr("tabIndex",-1):toShow.length&&this.tabs.filter(function(){return 0===$(this).attr("tabIndex")}).attr("tabIndex",-1),toShow.attr("aria-hidden","false"),eventData.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(index){var anchor,active=this._findActive(index);active[0]!==this.active[0]&&(active.length||(active=this.active),anchor=active.find(".ui-tabs-anchor")[0],this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop}))},_findActive:function(index){return index===!1?$():this.tabs.eq(index)},_getIndex:function(index){return"string"==typeof index&&(index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"))),index},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){$.data(this,"ui-tabs-destroy")?$(this).remove():$(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");prev?li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls"):li.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(index){var disabled=this.options.disabled;disabled!==!1&&(void 0===index?disabled=!1:(index=this._getIndex(index),disabled=$.isArray(disabled)?$.map(disabled,function(num){return num!==index?num:null}):$.map(this.tabs,function(li,num){return num!==index?num:null})),this._setupDisabled(disabled))},disable:function(index){var disabled=this.options.disabled;if(disabled!==!0){if(void 0===index)disabled=!0;else{if(index=this._getIndex(index),-1!==$.inArray(index,disabled))return;disabled=$.isArray(disabled)?$.merge([index],disabled).sort():[index]}this._setupDisabled(disabled)}},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};this._isLocal(anchor[0])||(this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData)),this.xhr&&"canceled"!==this.xhr.statusText&&(tab.addClass("ui-tabs-loading"),panel.attr("aria-busy","true"),this.xhr.success(function(response){setTimeout(function(){panel.html(response),that._trigger("load",event,eventData)},1)}).complete(function(jqXHR,status){setTimeout(function(){"abort"===status&&that.panels.stop(!1,!0),tab.removeClass("ui-tabs-loading"),panel.removeAttr("aria-busy"),jqXHR===that.xhr&&delete that.xhr},1)})))},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData))}}},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id))}}),$.widget("ui.tooltip",{version:"1.11.2",options:{content:function(){var title=$(this).attr("title")||"";return $("<a>").text(title).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id),elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")))},_removeDescribedBy:function(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);-1!==index&&describedby.splice(index,1),elem.removeData("ui-tooltip-id"),describedby=$.trim(describedby.join(" ")),describedby?elem.attr("aria-describedby",describedby):elem.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=$("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(key,value){var that=this;return"disabled"===key?(this[value?"_disable":"_enable"](),void(this.options[key]=value)):(this._super(key,value),void("content"===key&&$.each(this.tooltips,function(id,tooltipData){that._updateContent(tooltipData.element)})))},_disable:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur");event.target=event.currentTarget=tooltipData.element[0],that.close(event,!0)}),this.element.find(this.options.items).addBack().each(function(){var element=$(this);element.is("[title]")&&element.data("ui-tooltip-title",element.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var element=$(this);element.data("ui-tooltip-title")&&element.attr("title",element.data("ui-tooltip-title"))})},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);target.length&&!target.data("ui-tooltip-id")&&(target.attr("title")&&target.data("ui-tooltip-title",target.attr("title")),target.data("ui-tooltip-open",!0),event&&"mouseover"===event.type&&target.parents().each(function(){var blurEvent,parent=$(this);parent.data("ui-tooltip-open")&&(blurEvent=$.Event("blur"),blurEvent.target=blurEvent.currentTarget=this,that.close(blurEvent,!0)),parent.attr("title")&&(parent.uniqueId(),that.parents[this.id]={element:this,title:parent.attr("title")},parent.attr("title",""))}),this._updateContent(target,event))},_updateContent:function(target,event){var content,contentOption=this.options.content,that=this,eventType=event?event.type:null;return"string"==typeof contentOption?this._open(event,target,contentOption):(content=contentOption.call(target[0],function(response){target.data("ui-tooltip-open")&&that._delay(function(){event&&(event.type=eventType),this._open(event,target,response)})}),void(content&&this._open(event,target,content)))},_open:function(event,target,content){function position(event){positionOption.of=event,tooltip.is(":hidden")||tooltip.position(positionOption)}var tooltipData,tooltip,events,delayedShow,a11yContent,positionOption=$.extend({},this.options.position);if(content){if(tooltipData=this._find(target))return void tooltipData.tooltip.find(".ui-tooltip-content").html(content);target.is("[title]")&&(event&&"mouseover"===event.type?target.attr("title",""):target.removeAttr("title")),tooltipData=this._tooltip(target),tooltip=tooltipData.tooltip,this._addDescribedBy(target,tooltip.attr("id")),tooltip.find(".ui-tooltip-content").html(content),this.liveRegion.children().hide(),content.clone?(a11yContent=content.clone(),a11yContent.removeAttr("id").find("[id]").removeAttr("id")):a11yContent=content,$("<div>").html(a11yContent).appendTo(this.liveRegion),this.options.track&&event&&/^mouse/.test(event.type)?(this._on(this.document,{mousemove:position}),position(event)):tooltip.position($.extend({of:target},this.options.position)),tooltip.hide(),this._show(tooltip,this.options.show),this.options.show&&this.options.show.delay&&(delayedShow=this.delayedShow=setInterval(function(){tooltip.is(":visible")&&(position(positionOption.of),clearInterval(delayedShow))},$.fx.interval)),this._trigger("open",event,{tooltip:tooltip}),events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0],this.close(fakeEvent,!0)}}},target[0]!==this.element[0]&&(events.remove=function(){this._removeTooltip(tooltip)}),event&&"mouseover"!==event.type||(events.mouseleave="close"),event&&"focusin"!==event.type||(events.focusout="close"),this._on(!0,target,events)}},close:function(event){var tooltip,that=this,target=$(event?event.currentTarget:this.element),tooltipData=this._find(target);tooltipData&&(tooltip=tooltipData.tooltip,tooltipData.closing||(clearInterval(this.delayedShow),target.data("ui-tooltip-title")&&!target.attr("title")&&target.attr("title",target.data("ui-tooltip-title")),this._removeDescribedBy(target),tooltipData.hiding=!0,tooltip.stop(!0),this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this))}),target.removeData("ui-tooltip-open"),this._off(target,"mouseleave focusout keyup"),target[0]!==this.element[0]&&this._off(target,"remove"),this._off(this.document,"mousemove"),event&&"mouseleave"===event.type&&$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title),delete that.parents[id]}),tooltipData.closing=!0,this._trigger("close",event,{tooltip:tooltip}),tooltipData.hiding||(tooltipData.closing=!1)))},_tooltip:function(element){var tooltip=$("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),id=tooltip.uniqueId().attr("id");return $("<div>").addClass("ui-tooltip-content").appendTo(tooltip),tooltip.appendTo(this.document[0].body),this.tooltips[id]={element:element,tooltip:tooltip}},_find:function(target){var id=target.data("ui-tooltip-id");return id?this.tooltips[id]:null},_removeTooltip:function(tooltip){tooltip.remove(),delete this.tooltips[tooltip.attr("id")]},_destroy:function(){var that=this;$.each(this.tooltips,function(id,tooltipData){var event=$.Event("blur"),element=tooltipData.element;event.target=event.currentTarget=element[0],that.close(event,!0),$("#"+id).remove(),element.data("ui-tooltip-title")&&(element.attr("title")||element.attr("title",element.data("ui-tooltip-title")),element.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),document.all?(-1!=navigator.userAgent.toLowerCase().indexOf("msie 5")?is_ie5=!0:is_ie5=!1,is_ie=!0,is_moz1_6=!1,is_mozilla=!1,is_ns4=!1):document.getElementById?(navigator.userAgent.toLowerCase().match("mozilla.*rv[:]1.6.*gecko")?is_moz1_6=!0:is_moz1_6=!1,is_ie=!1,is_ie5=!1,is_mozilla=!0,is_ns4=!1):document.layers&&(is_ie=!1,is_ie5=!1,is_moz1_6=!1,is_mozilla=!1,is_ns4=!0),"undefined"==typeof window.console&&(window.console={log:function(){},warn:function(){},error:function(){},
info:function(){}}),egw_seperateJavaScript=function(_html){for(var html=_html.html,in_pos=html.search(/<script/im),out_pos=html.search(/<\/script>/im);in_pos>-1&&out_pos>-1;){var js_str=html.substring(in_pos,out_pos+9);_html.js+=js_str,html=html.substring(0,in_pos)+html.substring(out_pos+9);var in_pos=html.search(/<script/im),out_pos=html.search(/<\/script>/im)}_html.html=html},window.egw_getFramework=function(){return"undefined"!=typeof window.framework?framework:"undefined"!=typeof window.parent.egw_getFramework&&window!=window.parent?window.parent.egw_getFramework():null},window.register_app_refresh=function(appname,refresh_func){var framework=window.egw_getFramework();null!=framework&&"function"==typeof framework.register_app_refresh?framework.register_app_refresh(appname,refresh_func):("function"!=typeof window.app_refresh&&(window.app_refresh=function(_msg,appname,_id,_type){window.app_refresh.registry[appname]&&window.app_refresh.registry[appname].call(this,_msg,appname,_id,_type)},window.app_refresh.registry={},window.app_refresh.registered=function(appname){return"function"==typeof window.app_refresh.registry[appname]}),window.app_refresh.registry[appname]=refresh_func)},$j(function(){$j(document).on("click",".uiaccountselection_trigger",function(){var selectBox=document.getElementById(this.id.replace(/(_multiple|_popup)$/,""));if(selectBox){var link=selectBox.getAttribute("data-popup-link");selectBox.multiple||this.id.match(/_popup$/)?window.open(link,"uiaccountsel","width=600,height=420,toolbar=no,scrollbars=yes,resizable=yes"):(selectBox.size=4,selectBox.multiple=!0,""==selectBox.options[0].value&&(selectBox.options[0]=null),$j(selectBox).hasClass("groupmembers")||$j(selectBox).hasClass("selectbox")?(this.style.display="none",selectBox.style.width="100%"):(this.src=egw.image("search"),this.title=egw.lang("Search accounts")))}}),$j(document).on("change","select.uiaccountselection",function(e){if("popup"==this.value){var link=this.getAttribute("data-popup-link");window.open(link,"uiaccountsel","width=600,height=420,toolbar=no,scrollbars=yes,resizable=yes"),e.preventDefault()}})});var egw_json_files={};$j(document).ready(function(){$j("script, link").each(function(){var file=!1;$j(this).attr("src")?file=$j(this).attr("src"):$j(this).attr("href")&&(file=$j(this).attr("href")),file&&(egw_json_files[file]=!0)})});var _egw_json_plugins=[];egw_json_request.prototype.setAppObject=function(_app){this.app=_app},egw_json_request.prototype._assembleAjaxUrl=function(_menuaction){var webserver_url=egw_topWindow().egw_webserverUrl;if("undefined"==typeof webserver_url)throw"Internal JS error, top window not found, webserver url could not be retrieved.";return webserver_url+"/json.php?menuaction="+_menuaction},egw_json_request.prototype.sendRequest=function(_async,_callback,_sender){egw.debug("warn","egw_json_request is deprecated\nUse egw.json(menuaction, parameters [,callback, context, async, sender]).sendRequest() instead."),this.sender=_sender,"undefined"!=typeof _callback&&(this.callback=_callback);var is_async=!0;"undefined"!=typeof _async&&(is_async=_async);var request_obj={json_data:egw.jsonEncode({request:{parameters:this.parameters}})};this.request=$j.ajax({url:this.url,async:is_async,context:this,data:request_obj,dataType:"json",type:"POST",success:this.handleResponse,error:function(_xmlhttp,_err){window.console.error("Ajax request to "+this.url+" failed: "+_err)}})},egw_json_request.prototype.abort=function(){this.request.abort()},egw_json_request.prototype.alertFunc=function(_message,_details){alert(_message),_details&&_egw_json_debug_log(_message,_details)},egw_json_request.prototype.jsonError=function(_msg,_e){var msg="EGW JSON Error: "+_msg;_egw_json_debug_log(msg,_e),this.alertHandler(msg)},egw_json_request.prototype.handleResponse=function(data,textStatus,XMLHttpRequest){if(this.handleResponseDone=!1,data&&data.response){var hasResponse=!1;if(egw&&egw().includeJS){for(var js_files=[],i=data.response.length-1;i>0;--i){var res=data.response[i];"js"==res.type&&"string"==typeof res.data&&(js_files.unshift(res.data),this.loadedJSFiles[res.data]=!1,data.response.splice(i,1))}js_files.length>0&&egw().includeJS(js_files,function(){for(var i=0;i<js_files.length;i++)this.loadedJSFiles[js_files[i]]=!0;this.checkLoadFinish()},this)}for(var i=0;i<data.response.length;i++)try{var res=data.response[i];switch(data.response[i].type){case"alert":if("undefined"==typeof res.data.message||"undefined"==typeof res.data.details)throw"Invalid parameters";this.alertHandler(res.data.message,res.data.details),hasResponse=!0;break;case"assign":if("undefined"==typeof res.data.id||"undefined"==typeof res.data.key||"undefined"==typeof res.data.value)throw"Invalid parameters";var obj=document.getElementById(res.data.id);obj&&(obj[res.data.key]=res.data.value,"innerHTML"==res.data.key&&egw_insertJS(res.data.value),hasResponse=!0);break;case"data":this.callback&&(this.callback.call(this.sender,res.data),hasResponse=!0);break;case"script":if("string"!=typeof res.data)throw"Invalid parameters";try{var func=new Function(res.data);func.call(window)}catch(e){e.code=res.data,_egw_json_debug_log(e)}hasResponse=!0;break;case"apply":if("string"==typeof res.data.func&&"function"==typeof window[res.data.func]){try{window[res.data.func].apply(window,res.data.parms)}catch(e){_egw_json_debug_log(e,{Function:res.data.func,Parameters:res.data.parms})}hasResponse=!0}else{if("string"!=typeof res.data.func||"app."!=res.data.func.substr(0,4)||!window.app)throw"Invalid parameters";var parts=res.data.func.split(".");if(3==parts.length&&"undefined"==typeof window.app[parts[1]]&&"function"==typeof window.app.classes[parts[1]]&&(window.app[parts[1]]=new window.app.classes[parts[1]]),3==parts.length&&"object"==typeof window.app[parts[1]]&&"function"==typeof window.app[parts[1]][parts[2]])try{this.context=window.app[parts[1]][parts[2]].apply(window.app[parts[1]],res.data.parms)}catch(e){_egw_json_debug_log(e,{Function:res.data.func,Parameters:res.data.parms})}hasResponse=!0}break;case"jquery":if("string"!=typeof res.data.select||"string"!=typeof res.data.func)throw"Invalid parameters";try{var jQueryObject=$j(res.data.select,this.context);jQueryObject[res.data.func].apply(jQueryObject,res.data.parms)}catch(e){_egw_json_debug_log(e,{Function:res.data.func,Parameters:res.data.parms})}hasResponse=!0;break;case"redirect":if("string"!=typeof res.data.url||"boolean"!=typeof res.data.global||"string"!=typeof res.data.app)throw"Invalid parameters";res.data.global|=res.data.url.indexOf("?cd=10")>0,res.data.global?egw_topWindow().location.href=res.data.url:egw_appWindowOpen(res.data.app,res.data.url),hasResponse=!0;break;case"css":if("string"!=typeof res.data)throw"Invalid parameters";if(!egw_json_files[res.data]){egw_json_files[res.data]=!0;var headID=document.getElementsByTagName("head")[0],cssnode=document.createElement("link");cssnode.type="text/css",cssnode.rel="stylesheet",cssnode.href=res.data,headID.appendChild(cssnode)}hasResponse=!0;break;case"js":if("string"!=typeof res.data)throw"Invalid parameters";if(!egw_json_files[res.data]){egw_json_files[res.data]=!0;var headID=document.getElementsByTagName("head")[0],scriptnode=document.createElement("script");scriptnode.type="text/javascript",scriptnode.src=res.data,scriptnode._originalSrc=res.data,headID.appendChild(scriptnode),this.loadedJSFiles[res.data]=!1,"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log("Requested JS file '%s' from server",res.data);var self=this;scriptnode.onload=function(e){var file=e.target._originalSrc;"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log("Retrieved JS file '%s' from server",file),self.loadedJSFiles[file]=!0,self.checkLoadFinish()},"undefined"!=typeof scriptnode.readyState&&("complete"!=scriptnode.readyState&&"loaded"!=scriptnode.readyState?scriptnode.onreadystatechange=function(){var node=window.event.srcElement;if("complete"==node.readyState||"loaded"==node.readyState){var file=node._originalSrc;"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log("Retrieved JS file '%s' from server",[file]),self.loadedJSFiles[file]=!0,self.checkLoadFinish()}}:this.loadedJSFiles[res.data]=!0)}hasResponse=!0;break;case"error":if("string"!=typeof res.data)throw"Invalid parameters";this.jsonError(res.data),hasResponse=!0}hasResponse|=_egw_json_plugin_handle(data.response[i].type,res,this.context)}catch(e){this.jsonError("Internal JSON handler error",e)}!hasResponse&&this.callback&&data.response[i]&&this.callback.call(this.sender,data.response[i].data),this.handleResponseDone=!0,this.checkLoadFinish()}},egw_json_request.prototype.checkLoadFinish=function(){var complete=!0;for(var key in this.loadedJSFiles)complete=complete&&this.loadedJSFiles[key];complete&&this.onLoadFinish&&this.handleResponseDone&&this.onLoadFinish.call(this.sender)},_xajax_doXMLHTTP=function(_async,_menuaction,_arguments){egw.debug("warn","Function %s is deprecated",arguments.callee.name);for(var paramarray=new Array,i=1;i<_arguments.length;i++)paramarray[paramarray.length]=_arguments[i];var request=new egw_json_request(_menuaction,paramarray);return request.sendRequest(_async),request},xajax_doXMLHTTP=function(_menuaction){return _xajax_doXMLHTTP(!0,_menuaction,arguments)},xajax_doXMLHTTPsync=function(_menuaction){return _xajax_doXMLHTTP(!1,_menuaction,arguments)},window.xajax={getFormValues:function(_form){return egw_json_getFormValues(_form)}},function(){"use strict";function cloneObject(_obj){var result={};for(var key in _obj)result[key]=_obj[key];return result}function mergeObjects(_to,_from){for(var key in _from)_to[key]=_from[key]}function deleteWhere(_arr,_cond){for(var i=_arr.length-1;i>=0;i--)_cond(_arr[i])&&_arr.splice(i,1)}function getAppModules(_egw,_modules,_moduleInstances,_app){if("undefined"==typeof _moduleInstances.app[_app]){var modInsts={};_moduleInstances.app[_app]=modInsts;for(var key in _modules){var mod=_modules[key];mod.flags===_egw.MODULE_APP_LOCAL&&"undefined"==typeof modInsts[key]&&(modInsts[key]=mod.code.call(_egw,_app,window))}}return _moduleInstances.app[_app]}function getExistingWndModules(_moduleInstances,_window){for(var i=0;i<_moduleInstances.wnd.length;i++)if(_moduleInstances.wnd[i].window===_window)return _moduleInstances.wnd[i].modules;return null}function getWndModules(_egw,_modules,_moduleInstances,_instances,_window){var mods=getExistingWndModules(_moduleInstances,_window);if(mods)return mods;mods={},_moduleInstances.wnd.push({window:_window,modules:mods});var fnct=function(){cleanupEgwInstances(_instances,_moduleInstances,function(_w){return _w.window===_window})};_window.attachEvent?_window.attachEvent("onbeforeunload",fnct):_window.addEventListener("beforeunload",fnct,!1);for(var key in _modules){var mod=_modules[key];mod.flags===_egw.MODULE_WND_LOCAL&&"undefined"==typeof mods[key]&&(mods[key]=mod.code.call(_egw,null,_window))}return mods}function createEgwInstance(_egw,_modules,_moduleInstances,_list,_instances,_app,_window){var instance=cloneObject(_egw);if(_window=_window?_window:null,_app=_app?_app:null,instance.appName=_app,instance.window=_window,_list.push({instance:instance,window:_window,app:_app}),_app){var appModules=getAppModules(_egw,_modules,_moduleInstances,_app);for(var key in appModules)mergeObjects(instance,appModules[key])}if(_window){var wndModules=getWndModules(_egw,_modules,_moduleInstances,_instances,_window);for(var key in wndModules)mergeObjects(instance,wndModules[key])}return instance}function getEgwInstance(_egw,_modules,_moduleInstances,_instances,_app,_window){var hash=_app?_app:"~global~";if(_window=_window?_window:null,"undefined"==typeof _instances[hash])return _instances[hash]=[],createEgwInstance(_egw,_modules,_moduleInstances,_instances[hash],_instances,_app,_window);for(var i=0;i<_instances[hash].length;i++)if(_instances[hash][i].window===_window)return _instances[hash][i].instance;return createEgwInstance(_egw,_modules,_moduleInstances,_instances[hash],_instances,_app,_window)}function cleanupEgwInstances(_instances,_moduleInstances,_cond){for(var key in _instances)deleteWhere(_instances[key],_cond),0===_instances[key].length&&delete _instances[key];deleteWhere(_moduleInstances.wnd,_cond)}function mergeGlobalModule(_module,_code,_instances,_moduleInstances){var globalExtension=_code.call(egw,null,window);_moduleInstances.glo[_module]=globalExtension;for(var key in _instances)for(var i=0;i<_instances[key].length;i++)mergeObjects(_instances[key][i].instance,globalExtension)}function mergeAppLocalModule(_module,_code,_instances,_moduleInstances){var globalExtension=_code.call(egw,null,window);_moduleInstances.glo[_module]=globalExtension;for(var i=0;i<_instances["~global~"].length;i++)mergeObjects(_instances["~global~"][i].instance,globalExtension);for(var key in _moduleInstances.app){var appExtension=_code.call(egw,key,window);_moduleInstances.app[key][_module]=appExtension;for(var i=0;i<_instances[key].length;i++)mergeObjects(_instances[key][i].instance,appExtension)}}function mergeWndLocalModule(_module,_code,_instances,_moduleInstances){for(var i=0;i<_moduleInstances.wnd.length;i++){var wnd=_moduleInstances.wnd[i].window,wndExtension=_code.call(egw,null,wnd);_moduleInstances.wnd[i].modules[_module]=wndExtension;for(var key in _instances)for(var j=0;j<_instances[key].length;j++)_instances[key][j].window===wnd&&mergeObjects(_instances[key][j].instance,wndExtension)}}if("undefined"!=typeof window.egw&&window.egw.prefsOnly){var prefs=window.egw;delete prefs.prefsOnly;var modules={},moduleInstances={app:{},wnd:[],glo:{}},instances={};window.setInterval(function(){cleanupEgwInstances(instances,moduleInstances,function(w){try{return w.window&&w.window.closed}catch(e){return!0}})},1e4);var egw=function(){var _app=null,_window=window;switch(arguments.length){case 0:return instances["~global~"][0].instance;case 1:"string"==typeof arguments[0]?_app=arguments[0]:"object"==typeof arguments[0]&&(_window=arguments[0]);break;case 2:_app=arguments[0],_window=arguments[1];break;default:throw"Invalid count of parameters"}return getEgwInstance(egw,modules,moduleInstances,instances,_app,_window)},globalEgw={MODULE_GLOBAL:0,MODULE_APP_LOCAL:1,MODULE_WND_LOCAL:2,appName:null,window:window,getAppName:function(){return this.appName?this.appName:"etemplate"},extend:function(_module,_flags,_code){if("undefined"==typeof modules[_module])switch(modules[_module]={code:_code,flags:_flags,name:_module},_flags){case egw.MODULE_GLOBAL:mergeGlobalModule(_module,_code,instances,moduleInstances);break;case egw.MODULE_APP_LOCAL:mergeAppLocalModule(_module,_code,instances,moduleInstances);break;case egw.MODULE_WND_LOCAL:mergeWndLocalModule(_module,_code,instances,moduleInstances)}},module:function(_module,_for){if("undefined"!=typeof modules[_module]){if(!_for)return moduleInstances.glo[_module];if("string"==typeof _for&&"undefined"!=typeof moduleInstances.app[_for]){var mods=moduleInstances.app[_for];if("undefined"==typeof mods[_module]){var mod=modules[_module];mods[_module]=mod.code.call(this,_app,window)}return mods[_module]}if("object"==typeof _for){var mods=getExistingWndModules(moduleInstances,_for);if(null!=mods&&"undefined"!=typeof mods[_module])return mods[_module];if(null==mods&&(mods={}),"undefined"==typeof mods[_module]){var mod=modules[_module];mods[_module]=mod.code.call(this,null,_for)}return mods[_module]}}return null},constant:function(_module,_name,_value,_window){for(var i=0;i<moduleInstances.wnd.length;i++)_window&&_window!==moduleInstances.wnd[i].window||(moduleInstances.wnd[i].modules[_module][_name]=_value);for(var key in instances)for(var i=0;i<instances[key].length;i++)_window&&_window!==instances[key][i].window||(instances[key][i].instance[_name]=_value)},dumpModules:function(){return modules},dumpInstances:function(){return{instances:instances,moduleInstances:moduleInstances}}};mergeObjects(egw,globalEgw),mergeObjects(egw,prefs),moduleInstances.wnd.push({window:window,modules:[]}),instances["~global~"]=[{window:window,instance:egw,app:null}],this.egw=egw}}.call(window),egw.extend("debug",egw.MODULE_GLOBAL,function(_app,_wnd){"use strict";function log_on_client(_level,_args,_stack){if(!window.localStorage)return!1;switch(_level){case"warn":if(2>LOCAL_LOG_LEVEL)return null;case"info":if(3>LOCAL_LOG_LEVEL)return null;case"log":if(4>LOCAL_LOG_LEVEL)return null;default:if(!LOCAL_LOG_LEVEL)return null}var data={time:(new Date).getTime(),level:_level,args:_args};if("navigation"!=_level)if(_stack)data.stack=_stack;else try{throw new Error}catch(error){data.stack=error.stack}"undefined"==typeof window.localStorage[LASTLOG]&&(window.localStorage[LASTLOG]=0),window.localStorage[LASTLOG]>MAX_LOGS&&clear_client_log();try{window.localStorage[LOG_PREFIX+window.localStorage[LASTLOG]]=JSON.stringify(data),window.localStorage[LASTLOG]=(1+parseInt(window.localStorage[LASTLOG]))%MAX_LOGS}catch(e){switch(e.name){case"QuotaExceededError":case"NS_ERROR_DOM_QUOTA_REACHED":clear_client_log();break;default:for(var i=0;i<data.args.length;++i)try{JSON.stringify(data.args[i])}catch(e){if(data.args[i]instanceof Class){data.args[i]=jQuery.extend({},data.args[i]),delete data.args[i]._parent,delete data.args[i]._children;try{JSON.stringify(data.args[i]);continue}catch(e){}}data.args[i]="** removed, circular reference **"}}try{window.localStorage[LOG_PREFIX+window.localStorage[LASTLOG]]=JSON.stringify(data),window.localStorage[LASTLOG]=(1+parseInt(window.localStorage[LASTLOG]))%MAX_LOGS}catch(e){}}}function get_client_log(){var logs=[];if(window.localStorage&&"undefined"!=typeof window.localStorage[LASTLOG])for(var lastlog=parseInt(window.localStorage[LASTLOG]),i=lastlog;lastlog+MAX_LOGS>i;++i){var log=window.localStorage[LOG_PREFIX+i%MAX_LOGS];if("undefined"!=typeof log)try{logs.push(JSON.parse(log))}catch(e){}}return logs}function clear_client_log(){if(jQuery("#topmenu_info_error").remove(),!window.localStorage)return!1;var max=MAX_LOGS;window.localStorage[LASTLOG]>MAX_LOGS&&(max=1e3);for(var i=0;max>i;++i)"undefined"!=typeof window.localStorage[LOG_PREFIX+i]&&delete window.localStorage[LOG_PREFIX+i];return delete window.localStorage[LASTLOG],!0}function format_message(log){var row=document.createElement("tr");row.setAttribute("class",log.level);var timestamp=row.insertCell(-1);timestamp.appendChild(document.createTextNode(new Date(log.time))),timestamp.setAttribute("class","timestamp");var level=row.insertCell(-1);level.appendChild(document.createTextNode(log.level)),level.setAttribute("class","level");for(var message=row.insertCell(-1),i=0;i<log.args.length;i++){var arg=document.createElement("p");arg.appendChild(document.createTextNode("string"==typeof log.args[i]?log.args[i]:JSON.stringify(log.args[i]))),message.appendChild(arg)}var stack=row.insertCell(-1);return stack.appendChild(document.createTextNode(log.stack||"")),stack.setAttribute("class","stack"),row}function raise_error(){var icon=jQuery("#topmenu_info_error");if(!icon.length){var icon=jQuery(egw(_wnd).image_element(egw.image("dialog_error")));icon.addClass("topmenu_info_item").attr("id","topmenu_info_error"),icon.on("click",egw(_wnd).show_log),jQuery("#egw_fw_topmenu_info_items,#topmenu_info").append(icon)}}var DEBUGLEVEL=3,LOCAL_LOG_LEVEL=0,MAX_LOGS=200,LASTLOG="lastLog",LOG_PREFIX="log_";return LOCAL_LOG_LEVEL&&jQuery(_wnd).on("error",function(e){var event="object"==typeof e.originalEvent?e.originalEvent:e;if(navigator.userAgent.match(/Trident/i)&&"undefined"==typeof event.name&&"[object ErrorEvent]"==Object.prototype.toString.call(event)&&1==event.lineno&&-1!=event.filename.indexOf("/index.php"))return!1;if(log_on_client("error",[event.message],"undefined"!=typeof event.stack?event.stack:null),raise_error(),"object"==typeof event.error)throw event.error;throw event.message}),{debug_level:function(){return DEBUGLEVEL},debug:function(_level){if("undefined"!=typeof _wnd.console){for(var args=[],i=1;i<arguments.length;i++)args.push(arguments[i]);if(DEBUGLEVEL>=5&&"undefined"!=typeof(new Error).stack){var stack=(new Error).stack;args.push(stack)}"log"==_level&&DEBUGLEVEL>=4&&"function"==typeof _wnd.console.log&&_wnd.console.log.apply(_wnd.console,args),"info"==_level&&DEBUGLEVEL>=3&&"function"==typeof _wnd.console.info&&_wnd.console.info.apply(_wnd.console,args),"warn"==_level&&DEBUGLEVEL>=2&&"function"==typeof _wnd.console.warn&&_wnd.console.warn.apply(_wnd.console,args),"error"==_level&&DEBUGLEVEL>=1&&"function"==typeof _wnd.console.error&&_wnd.console.error.apply(_wnd.console,args)}LOCAL_LOG_LEVEL&&"error"==_level&&raise_error(args),"undefined"!=typeof stack&&args.pop(),log_on_client(_level,args)},show_log:function(){for(var table=document.createElement("table"),body=document.createElement("tbody"),client_log=get_client_log(),i=0;i<client_log.length;i++)body.appendChild(format_message(client_log[i]));table.appendChild(body);var wrapper=document.createElement("div");if(wrapper.setAttribute("class","client_error_log"),wrapper.appendChild(table),window.jQuery&&window.jQuery.ui.dialog){var $wrapper=$j(wrapper);$j("tr",$wrapper).addClass("hidden").on("click",function(){$j(this).toggleClass("hidden",{}),$j(this).find(".stack").children().toggleClass("ui-icon ui-icon-circle-plus")}),$j("td",$wrapper).wrapInner("<div/>").filter(".stack").children().addClass("ui-icon ui-icon-circle-plus"),$wrapper.dialog({title:egw.lang("Error log"),buttons:[{text:egw.lang("OK"),click:function(){$j(this).dialog("close")}},{text:egw.lang("clear"),click:function(){clear_client_log(),$j(this).empty()}}],width:800,height:400}),$wrapper[0].scrollTop=$wrapper[0].scrollHeight}_wnd.console&&_wnd.console.log(get_client_log())}}}),egw.extend("preferences",egw.MODULE_GLOBAL,function(){"use strict";var prefs={};return{set_preferences:function(_data,_app,_need_clone){"undefined"==typeof _app?prefs=_need_clone?jQuery.extend(!0,{},_data):_data:prefs[_app]=jQuery.extend(!0,{},_data)},preference:function(_name,_app,_callback,_context){if("undefined"==typeof _app&&(_app="common"),"undefined"==typeof prefs[_app]){var request=this.json("home.egw_framework.ajax_get_preference.template",[_app],_callback,_context);if(request.sendRequest("function"==typeof _callback,"GET"),"undefined"==typeof prefs[_app]&&(prefs[_app]={}),"function"==typeof _callback)return!1}return"*"==_name?"object"==typeof prefs[_app]?jQuery.extend({},prefs[_app]):prefs[_app]:"object"==typeof prefs[_app][_name]&&null!==prefs[_app][_name]?jQuery.extend({},prefs[_app][_name]):prefs[_app][_name]},set_preference:function(_app,_name,_val,_callback){"undefined"!=typeof prefs[_app]&&prefs[_app][_name]===_val||(this.jsonq("home.egw_framework.ajax_set_preference.template",[_app,_name,_val],_callback),"undefined"!=typeof prefs[_app]&&(void 0===_val||""===_val||null===_val?delete prefs[_app][_name]:prefs[_app][_name]=_val))},show_preferences:function(name,apps){var current_app=this.app_name(),query={current_app:current_app};if($j.isArray(apps)&&-1==$j.inArray(current_app,apps)&&"prefs"!=name&&"acl"!=name||!$j.isArray(apps)&&("undefined"==typeof apps[current_app]||!apps[current_app]))egw_message(egw.lang("Not supported by current application!"),"warning");else{var url="/index.php";switch(name){case"prefs":query.menuaction="preferences.preferences_settings.index",-1!=$j.inArray(current_app,apps)&&(query.appname=current_app),egw.open_link(egw.link(url,query),"_blank","900x450");break;case"acl":query.menuaction="preferences.preferences_acl.index",-1!=$j.inArray(current_app,apps)&&(query.acl_app=current_app),egw.open_link(egw.link(url,query),"_blank","900x450");break;case"cats":if("object"==typeof apps[current_app])for(var key in apps[current_app])query[key]=encodeURIComponent(apps[current_app][key]);else query.menuaction="preferences.preferences_categories_ui.index",query.cats_app=current_app;egw.link_handler(egw.link(url,query),current_app)}}}}}),egw.extend("utils",egw.MODULE_GLOBAL,function(){"use strict";function json_escape_string(input){for(var len=input.length,res="",i=0;len>i;i++)switch(input.charAt(i)){case'"':res+='\\"';break;case"\n":res+="\\n";break;case"\r":res+="\\r";break;case"\\":res+="\\\\";break;case"/":res+="\\/";break;case"\b":res+="\\b";break;case"\f":res+="\\f";break;case"	":res+="\\t";break;default:res+=input.charAt(i)}return res}function json_encode_simple(input){switch(input.constructor){case String:return'"'+json_escape_string(input)+'"';case Number:return input.toString();case Boolean:return input?"true":"false";default:return null}}function json_encode(input){if(null==input||!input&&0==input.length)return"null";var simple_res=json_encode_simple(input);if(null!=simple_res)return simple_res;switch(input.constructor){case Array:var buf=[];for(var k in input)isNaN(k)||buf.push(json_encode(input[k]));return"["+buf.join(",")+"]";case Object:var buf=[];for(var k in input)buf.push(json_encode_simple(k)+":"+json_encode(input[k]));return"{"+buf.join(",")+"}";default:switch(typeof input){case"array":var buf=[];for(var k in input)isNaN(k)||buf.push(json_encode(input[k]));return"["+buf.join(",")+"]";case"object":var buf=[];for(var k in input)buf.push(json_encode_simple(k)+":"+json_encode(input[k]));return"{"+buf.join(",")+"}"}return"null"}}var uid_counter=0,utils={ajaxUrl:function(_menuaction){return this.webserverUrl+"/json.php?menuaction="+_menuaction},elemWindow:function(_elem){var res=_elem.ownerDocument.parentNode||_elem.ownerDocument.defaultView;return res},uid:function(){return(uid_counter++).toString(16)},decodePath:function(_path){return decodeURIComponent(_path)},encodePath:function(_path){for(var components=_path.split("/"),n=0;n<components.length;n++)components[n]=this.encodePathComponent(components[n]);return components.join("/")},encodePathComponent:function(_comp){return _comp.replace(/#/g,"%23").replace(/\?/g,"%3F").replace(/\//g,"")},getHiddenDimensions:function(element,boolOuter){var $item=$j(element),props={position:"absolute",visibility:"hidden",display:"block"},dim={w:0,h:0,left:0,top:0},$hiddenParents=$item.parents().andSelf().not(":visible"),oldProps=[];return $hiddenParents.each(function(){var old={};for(var name in props)old[name]=this.style[name];$j(this).show(),oldProps.push(old)}),dim.w=boolOuter===!0?$item.outerWidth():$item.width(),dim.h=boolOuter===!0?$item.outerHeight():$item.height(),dim.top=$item.offset().top,dim.left=$item.offset().left,$hiddenParents.each(function(i){var old=oldProps[i];for(var name in props)this.style[name]=old[name]}),dim},storeWindow:function(appname,popup){if(popup.name&&!(["_blank"].indexOf(popup.name)>=0)){var _target_app=appname||this.appName||egw_appName||"common",open_windows=JSON.parse(this.getSessionItem(_target_app,"windows"))||{};open_windows[popup.name]=Date.now(),this.setSessionItem(_target_app,"windows",JSON.stringify(open_windows))}},getOpenWindows:function(appname,regex){var open_windows=JSON.parse(this.getSessionItem(appname,"windows"))||{};if("undefined"==typeof regex)return open_windows;var list=[],now=Date.now();for(var i in open_windows)now-open_windows[i]>5e3?egw.windowClosed(appname,i):i.match(regex)&&list.push(i);return list},windowClosed:function(appname,closed){var closed_name="string"==typeof closed?closed:closed.name,closed_window="string"==typeof closed?null:closed;window.setTimeout(function(){if(null==closed_window||closed_window.closed){var open_windows=JSON.parse(egw().getSessionItem(appname,"windows"))||{};delete open_windows[closed_name],egw.setSessionItem(appname,"windows",JSON.stringify(open_windows))}},100)}};return"undefined"!=typeof window.JSON&&"undefined"!=typeof window.JSON.stringify?utils.jsonEncode=JSON.stringify:utils.jsonEncode=json_encode,utils}),egw.extend("ready",egw.MODULE_WND_LOCAL,function(_app,_wnd){"use strict";function doReadyWaitFor(){if(!isReady){var uid=egw.uid();return readyPending[uid]=!0,readyPendingCnt++,readyProgressChange(),uid}return this.debug("warning","ready has already been called!"),null}function doReadyDone(_token){"undefined"!=typeof readyPending[_token]&&(delete readyPending[_token],readyPendingCnt--,readyDoneCnt++,readyProgressChange(),testCallReady())}function readyProgressChange(){for(var i=0;i<registeredProgress.length;i++)registeredProgress[i].callback.call(registeredProgress[i].context,readyDoneCnt,readyPendingCnt);egw.debug("log","Ready events, processed %s/%s",readyDoneCnt,readyPendingCnt+readyDoneCnt)}function readyEventHandler(){doReadyDone("readyEvent")}function testCallReady(){if(1>=readyPendingCnt&&!isReady){if(1===readyPendingCnt&&!readyPending.readyEvent)return;for(var isReady=0===readyPendingCnt,i=registeredCallbacks.length-1;i>=0;i--)(registeredCallbacks[i].before||0===readyPendingCnt)&&(registeredCallbacks[i].callback.call(registeredCallbacks[i].context),registeredCallbacks.splice(i,1))}}var egw=this,registeredCallbacks=[],registeredProgress=[],readyPending={readyEvent:!0},readyPendingCnt=1,readyDoneCnt=0,isReady=!1;return _wnd.document.addEventListener?(_wnd.document.addEventListener("DOMContentLoaded",readyEventHandler,!1),_wnd.addEventListener("load",readyEventHandler,!1)):_wnd.document.attachEvent&&(_wnd.document.attachEvent("onreadystatechange",readyEventHandler),_wnd.attachEvent("onload",readyEventHandler)),{readyWaitFor:function(){return doReadyWaitFor()},readyDone:function(_token){doReadyDone(_token)},ready:function(_callback,_context,_beforeDOMContentLoaded){isReady?setTimeout(function(){_callback.call(_context)},1):registeredCallbacks.push({callback:_callback,context:_context?_context:null,before:!!_beforeDOMContentLoaded})},readyProgress:function(_callback,_context){isReady?this.debug("warning","ready has already been called!"):registeredProgress.unshift({callback:_callback,context:_context?_context:null})},isReady:function(){return isReady}}}),egw.extend("files",egw.MODULE_WND_LOCAL,function(_app,_wnd){"use strict";function removeTS(_src){return _src.replace(/\?[0-9]+&?/,"?").replace(/\?$/,"")}function files_from_bundles(_srcs){var files=[];"string"==typeof _srcs&&(_srcs=[_srcs]);for(var n=0;n<_srcs.length;++n){var file=_srcs[n];files.push(file.replace(min_js_regexp,".js"));var contains=file.match(bundle2files_regexp);if(contains&&contains.length>1)for(var i,bundle=contains[1].split(",");i<bundle.length;++i)files.push(bundle[i].replace(min_js_regexp,".js"))}return files}function strip_egw_url(_urls){var egw_url=egw.webserverUrl;"/"!=egw_url.charAt(egw_url.length-1)&&(egw_url+="/");for(var i=0;i<_urls.length;++i){var file=_urls[i],need_full_url="/"==egw_url[0]&&"http"==file.substr(0,4)?window.location.protocol+"//"+window.location.host:"",parts=file.split(need_full_url+egw_url);parts.length>1&&(parts.shift(),_urls[i]=parts.join(need_full_url+egw_url))}return _urls}for(var egw=this,bundle2files_regexp=/phpgwapi\/inc\/min\/\?b=[^&]+&f=([^&]+)/,min_js_regexp=/\.min\.js$/,files=[],tags=jQuery("script",_wnd.document),i=0;i<tags.length;++i)files.push(removeTS(tags[i].src));tags=jQuery('link[type="text/css"]',_wnd.document);for(var i=0;i<tags.length;++i)files.push(removeTS(tags[i].href));return files=strip_egw_url(files),files=files_from_bundles(files),{includeJS:function(_jsFiles,_callback,_context,_prefix){if("string"==typeof _jsFiles&&(_jsFiles=[_jsFiles]),_prefix)for(var i=0;i<_jsFiles.length;++i)"/"==_jsFiles[i].charAt(0)&&(_jsFiles[i]=_jsFiles[i].substr(1));else _jsFiles=strip_egw_url(_jsFiles),_prefix=egw.webserverUrl;"/"!=_prefix.charAt(_prefix.length-1)&&(_prefix+="/");for(var i=0;i<_jsFiles.length;++i){var file=_jsFiles[i];this.included(file,!0)&&(_jsFiles.splice(i,1),i--)}return _jsFiles.length?void(egw_LAB||$LAB.setOptions({AlwaysPreserveOrder:!0,BasePath:_prefix})).script(_jsFiles).wait(function(){_callback.call(_context)}):void egw_LAB.wait(function(){_callback.call(_context)})},included:function(_file,_add_if_not){var file=removeTS(_file).replace(min_js_regexp,".js"),not_inc=-1==files.indexOf(file);return not_inc&&_add_if_not&&(files=files.concat(files_from_bundles(file))),!not_inc},includeCSS:function(_cssFiles){"string"==typeof _cssFiles&&(_cssFiles=[_cssFiles]),
_cssFiles=strip_egw_url(_cssFiles);for(var n=0;n<_cssFiles.length;++n){var file=_cssFiles[n];if(!this.included(file,!0)){var cssnode=_wnd.document.createElement("link");cssnode.type="text/css",cssnode.rel="stylesheet",cssnode.href=egw.webserverUrl+"/"+file;var head=_wnd.document.getElementsByTagName("head")[0];head.appendChild(cssnode)}}}}}),egw.extend("lang",egw.MODULE_GLOBAL,function(){"use strict";var lang_arr={};return{set_lang_arr:function(_app,_messages,_need_clone){jQuery.isArray(_messages)||(lang_arr[_app]=_need_clone?jQuery.extend({},_messages):_messages)},lang:function(_msg,_arg1){if(null===_msg)return"";if("string"!=typeof _msg&&_msg)return egw().debug("warn","Cannot translate an object",_msg),_msg;var translation=_msg;_msg=_msg.toLowerCase();for(var apps=this.lang_order||["custom",this.getAppName(),"etemplate","common"],i=0;i<apps.length;++i)if("undefined"!=typeof lang_arr[apps[i]]&&"undefined"!=typeof lang_arr[apps[i]][_msg]){translation=lang_arr[apps[i]][_msg];break}if(1==arguments.length)return translation;if(2==arguments.length)return translation.replace("%1",arguments[1]);translation=translation.replace(/%([0-9]+)/g,"|%$1|");for(var i=1;i<arguments.length;++i)translation=translation.replace("|%"+i+"|",arguments[i]);return translation},langRequireApp:function(_window,_appname,_callback,_context){var lang=egw.preference("lang"),langs=[{app:"common",lang:lang}];_appname&&"eGroupWare"!=_appname&&langs.push({app:_appname,lang:lang}),langs.push({app:"custom",lang:"en"}),egw.langRequire(_window,langs,_callback,_context)},langRequire:function(_window,_apps,_callback,_context){for(var ready=this.module("ready",_window),files=this.module("files",this.window),jss=[],apps=[],i=0;i<_apps.length;i++)"undefined"==typeof lang_arr[_apps[i].app]&&jss.push(this.webserverUrl+"/phpgwapi/lang.php?app="+_apps[i].app+"&lang="+_apps[i].lang+"&etag="+(_apps[i].etag||this.config("max_lang_time"))),apps.push(_apps[i].app);if(this!==egw&&apps.length>0&&(this.lang_order=apps.reverse()),jss.length>0)if("function"==typeof _callback)files.includeJS(jss,_callback,_context||null);else{var token=ready.readyWaitFor();files.includeJS(jss,function(){ready.readyDone(token)},this)}else"function"==typeof _callback&&_callback.call(_context||null)}}}),egw.extend("links",egw.MODULE_GLOBAL,function(){"use strict";var link_registry=void 0,title_cache={},title_queue={},title_uid=null;return{link_get_registry:function(_app,_name){if("object"!=typeof link_registry)return alert("egw.open() link registry is NOT defined!"),!1;if("undefined"==typeof link_registry[_app])return!1;var reg=link_registry[_app];if("undefined"==typeof reg[_name])switch(_name){case"name":reg.name=_app;break;case"icon":var app_data=this.app(_app);"undefined"!=typeof app_data&&"undefined"!=typeof app_data.icon&&null!=app_data.icon?reg.icon=("undefined"!=typeof app_data.icon_app?app_data.icon_app:_app)+"/"+app_data.icon:reg.icon=_app+"/navbar"}return reg&&"undefined"==typeof _name?reg:"undefined"==typeof reg[_name]?!1:reg[_name]},get_mime_info:function(_type){var wildcard_mime;for(var app in link_registry){var reg=link_registry[app];if("undefined"!=typeof reg.mime)for(var mime in reg.mime){if(mime==_type)return reg.mime[_type];"/"==mime[0]&&_type.match(new RegExp(mime.substring(1,mime.length-1),"i"))&&(wildcard_mime=reg.mime[mime])}}return wildcard_mime?wildcard_mime:null},mime_open:function(_path,_type){var path;"object"==typeof _path?(path="undefined"==typeof _path.path?"/apps/"+_path.app2+"/"+_path.id2+"/"+_path.id:_path.path,"string"==typeof _path.type&&(_type=_path.type)):"/"!=_path[0]||(path=_path);var mime_info=this.get_mime_info(_type);if(mime_info){var data={};for(var attr in mime_info)switch(attr){case"mime_url":data[mime_info.mime_url]="vfs://default"+path;break;case"mime_data":break;case"mime_type":data[mime_info.mime_type]=_type;break;case"mime_id":data[mime_info.mime_id]=path;break;default:data[attr]=mime_info[attr]}"undefined"==typeof mime_info.mime_url&&(data.url="object"==typeof _path&&_path.download_url?_path.download_url:"/webdav.php"+path)}else var data="object"==typeof _path&&_path.download_url?_path.download_url:"/webdav.php"+path;return data},link_app_list:function(_must_support){var apps=[];for(var type in link_registry){var reg=link_registry[type];if("undefined"==typeof _must_support||!_must_support||"undefined"!=typeof reg[_must_support]){var app_sub=type.split("-");this.app(app_sub[0])&&apps.push({type:type,label:this.lang(this.link_get_registry(type,"name"))})}}apps=apps.sort(function(_a,_b){var al=_a.label.toUpperCase(),bl=_b.label.toUpperCase();return al==bl?0:al>bl?1:-1});for(var sorted={},i=0;i<apps.length;++i)sorted[apps[i].type]=apps[i].label;return sorted},set_link_registry:function(_registry,_app,_need_clone){"undefined"==typeof _app?link_registry=_need_clone?jQuery.extend(!0,{},_registry):_registry:link_registry[_app]=_need_clone?jQuery.extend(!0,{},_registry):_registry},link:function(_url,_extravars){if("http"==_url.substr(0,4)&&_url.indexOf("://")<=5);else{if("/"!=_url[0]){alert("egw.link('"+_url+"') called with url starting NOT with a slash!");var app=window.egw_appName;"login"!=app&&"logout"!=app&&(_url=app+"/"+_url)}this.webserverUrl&&"/"!=this.webserverUrl&&0!=_url.indexOf(this.webserverUrl+"/")&&(_url=this.webserverUrl+_url)}var vars={},url_othervars=_url.split("?",2);_url=url_othervars[0];var othervars=url_othervars[1];if(_extravars&&"object"==typeof _extravars?($j.extend(vars,_extravars),_extravars=othervars):(_extravars||(_extravars=""),othervars&&(_extravars+=(_extravars?"&":"")+othervars)),_extravars){_extravars=_extravars.split("&");for(var i=0;i<_extravars.length;++i){var name_val=_extravars[i].split("=",2),name=name_val[0],val=name_val[1]||"";-1!=val.indexOf("%26")&&(val=val.replace(/%26/g,"&")),name.lastIndexOf("[]")==name.length-2?(name=name.substr(0,name.length-2),"undefined"==typeof vars[name]&&(vars[name]=[]),vars[name].push(val)):vars[name]=val}}var query=[],ajax=vars.ajax||!1;delete vars.ajax;for(var name in vars){var val=vars[name]||"";if("object"==typeof val)for(var i=0;i<val.length;++i)query.push(name+"[]="+encodeURIComponent(val[i]));else query.push(name+"="+encodeURIComponent(val))}return ajax&&query.push("ajax="+encodeURIComponent(ajax)),query.length?_url+"?"+query.join("&"):_url},link_title:function(_app,_id,_callback,_context,_force_reload){return"undefined"!=typeof title_cache[_app]&&"undefined"!=typeof title_cache[_app][_id]&&_force_reload!==!0?("function"==typeof _callback&&_callback.call(_context,title_cache[_app][_id]),title_cache[_app][_id]):"function"!=typeof _callback?null:("undefined"==typeof title_queue[_app]&&(title_queue[_app]={}),"undefined"==typeof title_queue[_app][_id]&&(title_queue[_app][_id]=[]),title_queue[_app][_id].push({callback:_callback,context:_context}),void(null==title_uid&&(title_uid=this.jsonq(_app+".etemplate_widget_link.ajax_link_titles.etemplate",[{}],this.link_title_callback,this,this.link_title_before_send))))},link_title_before_send:function(_params){for(var app in title_queue)for(var id in title_queue[app])"undefined"==typeof _params[0][app]&&(_params[0][app]=[]),_params[0][app].push(id);title_uid=null},link_title_callback:function(_response){if("object"!=typeof _response)throw"Wrong parameter for egw.link_title_callback!";for(var app in _response){"object"!=typeof title_cache[app]&&(title_cache[app]={});for(var id in _response[app]){var title=_response[app][id];if(title_cache[app][id]=title,"undefined"!=typeof title_queue[app]&&"undefined"!=typeof title_queue[app][id]){for(var i=0;i<title_queue[app][id].length;++i){var callback=title_queue[app][id][i];callback.callback.call(callback.context,title)}delete title_queue[app][id]}}}},link_quick_add:function(_parent){if(!document.getElementById("quick_add_selectbox")){var select=jQuery(document.createElement("select")).attr("id","quick_add_selectbox");jQuery("string"==typeof _parent?"#"+_parent:_parent).append(select);var self=this;select.change(function(){this.value&&self.open("",this.value,"add",{},void 0,this.value,!0),this.value=""}),this.langRequire(window,[{app:"common",lang:this.preference("lang")}],function(){select.append(jQuery(document.createElement("option")).attr("value","").text(self.lang("Add")+" ..."));var apps=self.link_app_list("add");for(var app in apps){var option=jQuery(document.createElement("option")).attr("value",app).text(self.lang(self.link_get_registry(app,"entry")||apps[app]));select.append(option)}})}}}}),egw.extend("open",egw.MODULE_WND_LOCAL,function(_egw,_wnd){"use strict";function mailto(uri){for(var index,match=[],mailto=uri.match(/^mailto:([^?]+)/)||[],hashes=uri.slice(uri.indexOf("?")+1).split("&"),i=0;i<hashes.length;i++)index=hashes[i].split("="),match.push(index[0]),match[index[0]]=index[1];var popup,content={to:mailto[1]||[],cc:match.cc||[],bcc:match.bcc||[]},compose=egw.getOpenWindows("mail",/(^compose_)||(^mail.compose)/);if(uri=uri.replace(/</g,"&lt;").replace(/>/g,"&gt;"),0==compose.length)if(uri.length>2083){popup=egw.open("","mail","add","","compose__","mail");var $tmpForm=jQuery(document.createElement("form")).appendTo("body"),$tmpInput=jQuery(document.createElement("input")).attr({name:"preset[mailto]",type:"text",value:uri}),$tmpSubmitInput=jQuery(document.createElement("input")).attr({type:"submit"});$tmpForm.attr({target:popup.name,action:"index.php?menuaction=mail.mail_compose.compose",method:"post"}).append($tmpInput).append($tmpSubmitInput),$tmpForm.submit(),$tmpForm.remove()}else egw.open("","mail","add",{"preset[mailto]":uri},"compose__","mail");if(1==compose.length)try{popup=egw.open_link("",compose[0],"100x100","mail"),popup.app.mail.setCompose(compose[0],content)}catch(e){egw.debug("warn",e.message),popup.close(),egw.windowClosed("mail",popup),window.setTimeout(function(){egw.open_link(uri),console.debug("Trying again with ",uri)},500)}else if(compose.length>1){for(var prompt=$j(document.createElement("ul")),i=0;i<compose.length;i++){var w=window.open("",compose[i],"100x100");if(!w.closed){w.blur();var title=w.document.title||egw.lang("compose");$j("<li data-window = '"+compose[i]+"'>"+title+"</li>").click(function(){var w=egw.open_link("",$j(this).attr("data-window"),"100x100","mail");w.app.mail.setCompose(w.name,content),prompt.dialog("close")}).appendTo(prompt)}}_wnd.setTimeout(function(){this.focus()},200);var _buttons={};_buttons[egw.lang("cancel")]=function(){$j(this).dialog("close")},prompt.dialog({buttons:_buttons})}}return{open:function(id_data,app,type,extra,target,target_app,_check_popup_blocker){egw.debug("navigation","egw.open(id_data=%o, app=%s, type=%s, extra=%o, target=%s, target_app=%s)",id_data,app,type,extra,target,target_app);var id;if("undefined"==typeof target&&(target="_blank"),app)"file"!=app&&(id=id_data,id_data={id:id,app:app,extra:extra});else if("object"!=typeof id_data){var app_id=id_data.split(":",2);app=app_id[0],id=app_id[1]}else app=id_data.app,id=id_data.id,"undefined"!=typeof id_data.type&&(type=id_data.type);var url,popup,params;if("file"==app)url=this.mime_open(id_data),"object"==typeof url&&("undefined"!=typeof url.mime_popup&&(popup=url.mime_popup,delete url.mime_popup),"undefined"!=typeof url.mime_target&&(target=url.mime_target,delete url.mime_target),"string"==typeof url.url?url=url.url:(params=url,url="/index.php"));else{var app_registry=this.link_get_registry(app);if(!app||!app_registry)return void alert('egw.open() app "'+app+'" NOT defined in link registry!');if("undefined"==typeof type&&(type="edit"),"edit"==type&&"undefined"==typeof app_registry.edit&&(type="view"),"undefined"==typeof app_registry[type])return void alert('egw.open() type "'+type+'" is NOT defined in link registry for app "'+app+'"!');if(url="/index.php",params=jQuery.extend({},app_registry[type]),"view"==type||"edit"==type)params[app_registry[type+"_id"]]=id;else if("add"==type&&id){var app_id=id.split(":",2);params[app_registry.add_app]=app_id[0],params[app_registry.add_id]=app_id[1]}"string"==typeof extra?url+="?"+extra:"object"==typeof extra&&$j.extend(params,extra),popup=app_registry[type+"_popup"]}return this.open_link(this.link(url,params),target,popup,target_app,_check_popup_blocker)},open_link:function(_link,_target,_popup,_target_app,_check_popup_blocker,_mime_type){if(egw.debug("log","egw.open_link(_link=%s, _target=%s, _popup=%s, _target_app=%s)",_link,_target,_popup,_target_app),!_check_popup_blocker||!this._check_popupBlocker(_link,_target,_popup,_target_app)){var url=_link;if(0==url.indexOf("javascript:"))return void eval(url.substr(11));if(0==url.indexOf("mailto:"))return mailto(url);-1==url.indexOf("/")&&url.split(".").length>=3&&0!=url.indexOf("mailto:")&&0!=url.indexOf("/index.php")&&-1==url.indexOf("://")&&(url="/index.php?menuaction="+url),"/"==url[0]&&this.webserverUrl&&"/"!=this.webserverUrl&&0!=url.indexOf(this.webserverUrl+"/")&&(url=this.webserverUrl+url);var mime_info=_mime_type?this.get_mime_info(_mime_type):void 0;if(mime_info&&(mime_info.mime_url||mime_info.mime_data)){var data={};for(var attr in mime_info)switch(attr){case"mime_popup":_popup=mime_info.mime_popup;break;case"mime_target":_target=mime_info.mime_target;break;case"mime_type":data[mime_info.mime_type]=_mime_type;break;case"mime_data":data[mime_info[attr]]=_link;break;case"mime_url":data[mime_info[attr]]=url;break;default:data[attr]=mime_info[attr]}url=egw.link("/index.php",data)}else mime_info&&(mime_info.mime_popup&&(_popup=mime_info.mime_popup),mime_info.mime_target&&(_target=mime_info.mime_target));if(_popup){var w_h=_popup.split("x"),popup_window=this.openPopup(url,w_h[0],w_h[1],_target||"_blank",_target_app,!0);return egw().storeWindow(_target_app,popup_window),popup_window}return"undefined"==typeof _target||"_self"==_target||"undefined"!=typeof this.link_app_list()[_target]?("_self"==_target&&(_target=void 0),this.link_handler(url,_target)):("_browser"==_target&&(_target=egwIsMobile()?"_self":"_blank"),_wnd.open(url,_target))}},openPopup:function(_url,_width,_height,_windowName,_app,_returnID,_status,_skip_framework){if(egw.debug("navigation","openPopup(%s, %s, %s, %o, %s, %s)",_url,_windowName,_width,_height,_status,_app),"availHeight"==_height&&(_height=this.availHeight()),!_skip_framework&&_wnd.framework)return _wnd.framework.openPopup(_url,_width,_height,_windowName,_app,_returnID,_status,_wnd);"undefined"==typeof _app&&(_app=!1),"undefined"==typeof _returnID&&(_returnID=!1);var $wnd=jQuery(_wnd.top),positionLeft=$wnd.outerWidth()/2-_width/2+_wnd.screenX,positionTop=$wnd.outerHeight()/2-_height/2+_wnd.screenY;navigator.userAgent.match(/msie/i)&&(_windowName=_windowName?_windowName.replace(/[^a-zA-Z0-9_]+/,""):"_blank");var windowID=_wnd.open(_url,_windowName||"_blank","width="+_width+",height="+_height+",screenX="+positionLeft+",left="+positionLeft+",screenY="+positionTop+",top="+positionTop+",location=no,menubar=no,directories=no,toolbar=no,scrollbars=yes,resizable=yes,status="+_status);return windowID&&(windowID.egw=_wnd.egw),_returnID!==!1?windowID:void 0},availHeight:function(){return screen.availHeight<screen.height?navigator.userAgent.match(/windows/gi)?screen.availHeight-100:screen.availHeight:screen.height-100},link_handler:function(_url,_target){"admin"!==_target||_url.match(/menuaction=admin\.admin_ui\.index/)||(_url=_url.replace(/menuaction=([^&]+)/,"menuaction=admin.admin_ui.index&load=$1")),_wnd.framework?_wnd.framework.linkHandler(_url,_target):_wnd.location.href=_url},close:function(){_wnd.framework&&"function"==typeof _wnd.framework.popup_close?_wnd.framework.popup_close(_wnd):_wnd.close()},_check_popupBlocker:function(_link,_target,_popup,_target_app){var popup=window.open("","","top="+screen.height/2+",left="+screen.width/2+",width=1,height=1,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no,dependent=yes");return popup&&"undefined"!=popup&&null!=popup?(popup.close(),!1):(et2_dialog.show_dialog(function(){window.egw.open_link(_link,_target,_popup,_target_app)},egw.lang("The browser popup blocker is on. Please click on OK button to see the pop-up.\n\nIf you would like to not see this message for the next time, allow your browser pop-up blocker to open popups from %1",window.location.hostname),"Popup Blocker Warning",{},et2_dialog.BUTTONS_OK,et2_dialog.WARNING_MESSAGE),!0)}}}),egw.extend("user",egw.MODULE_GLOBAL,function(){"use strict";var userData={apps:{}},accountStore={},accountData={};return{set_user:function(_data,_need_clone){userData=_need_clone?jQuery.extend(!0,{},_data):_data},user:function(_field){return userData[_field]},app:function(_app,_name){return"undefined"==typeof _name||"undefined"==typeof userData.apps[_app]?userData.apps[_app]:userData.apps[_app][_name]},accounts:function(type){"undefined"==typeof type&&(type="accounts");var list=[];return jQuery.isEmptyObject(accountStore)&&egw.json("home.egw_framework.ajax_user_list.template",[],function(data){accountStore=jQuery.extend(!0,{},data||{})}).sendRequest(),list="both"==type?list.concat(accountStore.accounts,accountStore.groups):list.concat(accountStore[type])},accountData:function(_account_ids,_field,_resolve_groups,_callback,_context){_field||(_field="account_email"),jQuery.isArray(_account_ids)||(_account_ids=[_account_ids]);for(var data={},i=0;i<_account_ids.length;++i){var account_id=_account_ids[i];if(account_id==userData.account_id)data[account_id]=userData[_field];else if("undefined"!=typeof accountData[account_id]&&"undefined"!=typeof accountData[account_id][_field]&&(!_resolve_groups||account_id>0))data[account_id]=accountData[account_id][_field];else{if(!("undefined"!=typeof accountData[account_id]&&"undefined"!=typeof accountData[account_id][_field]&&_resolve_groups&&0>account_id))continue;for(var id in accountData[account_id][_field])data[id]=accountData[account_id][_field][id]}_account_ids.splice(i--,1)}_account_ids.length?egw.json("home.egw_framework.ajax_account_data.template",[_account_ids,_field,_resolve_groups],function(_data){for(var account_id in _data)"undefined"==typeof accountData[account_id]&&(accountData[account_id]={}),data[account_id]=accountData[account_id][_field]=_data[account_id];if(_resolve_groups&&1===_account_ids.length&&_account_ids[0]<0){var group_id=_account_ids[0];"undefined"==typeof accountData[group_id]&&(accountData[group_id]={}),accountData[group_id][_field]=_data}_callback.call(_context,data)}).sendRequest():_callback.call(_context,data)},invalidate_account:function(_id,_type){if(_id?delete accountData[_id]:accountData={},!jQuery.isEmptyObject(accountStore))switch(_type){case"delete":case"edit":case"update":if(_id){for(var store=0>_id?accountStore.groups:accountStore.accounts,i=0;i<store.length;++i)if(store&&"undefined"!=typeof store[i]&&_id==store[i].value){"delete"==_type?delete store[i]:this.link_title("home-accounts",_id,function(_label){if(store[i].label=_label,0>_id)for(var j=0;j<accountStore.owngroups.length;++j)if(_id==accountStore.owngroups[j].value){accountStore.owngroups[j].label=_label;break}},this,!0);break}break}default:accountStore={}}}}}),egw.extend("config",egw.MODULE_GLOBAL,function(){"use strict";var configs={};return{config:function(_name,_app){return"undefined"==typeof _app&&(_app="phpgwapi"),"undefined"==typeof configs[_app]?null:configs[_app][_name]},set_configs:function(_configs,_need_clone){configs=_need_clone?jQuery.extend(!0,{},_configs):_configs}}}),egw.extend("images",egw.MODULE_GLOBAL,function(){"use strict";var images={},mime_alias_map={"text/vcard":"text/x-vcard","text/comma-separated-values":"text/csv","text/rtf":"application/rtf","text/xml":"application/xml","text/x-diff":"text/diff","application/x-jar":"application/java-archive","application/x-javascript":"application/javascript","application/x-troff":"text/troff","application/x-egroupware-etemplate":"application/xml"};return{set_images:function(_images,_need_clone){images=_need_clone?jQuery.extend(!0,{},_images):_images},image:function(_name,_app){var tries={};if("undefined"==typeof _app&&(_app=this.getAppName(),_name.indexOf("/")>0)){var split=_name.split("/",2);"dhtmlxtree"!==split[0]&&"egw_action"!==split[0]&&(_app=split[0],_name=split[1])}if(tries.vfs=_name,"undefined"!=typeof images.vfs&&"undefined"!=typeof images.vfs[_name])return this.webserverUrl+images.vfs[_name];if(tries[_app+("phpgwapi"==_app?" (current app)":"")]=_name,"undefined"!=typeof images[_app]&&"undefined"!=typeof images[_app][_name])return this.webserverUrl+images[_app][_name];if(tries.phpgwapi=_name,"undefined"!=typeof images.phpgwapi&&"undefined"!=typeof images.phpgwapi[_name])return this.webserverUrl+images.phpgwapi[_name];var matches=_name.match(/\.(png|gif|jpg)$/i);return matches?this.image(_name.replace(/.(png|gif|jpg)$/i,""),_app):(null!=matches&&(tries[_app+" (matched)"]=matches),egw.debug("log",'egw.image("'+_name+'", "'+_app+'") image NOT found!  Tried ',tries),null)},mime_icon:function(_mime,_path,_size,_mtime){"undefined"==typeof _size&&(_size=128),_mime||(_mime="unknown"),"httpd/unix-directory"==_mime&&(_mime="directory");var type=_mime.toLowerCase().split("/"),image="egw"==type[0]?this.image("navbar",type[1]):void 0;if(image);else if("string"==typeof _path&&("image"==type[0]&&type[1].match(/^(png|jpe?g|gif|bmp)$/)||"application"==type[0]&&(0===type[1].indexOf("vnd.oasis.opendocument.")||"pdf"==type[1]||0===type[1].indexOf("vnd.openxmlformats-officedocument.")))){var params={path:_path,thsize:this.config("link_list_thumbnail")||64};_mtime&&(params.mtime=_mtime),image=this.link("/etemplate/thumbnail.php",params)}else"image"==type[0]&&"svg+xml"==type[1]?image=this.webserverUrl+"/webdav.php"+_path:"undefined"!=typeof type[1]&&((image=this.image("mime"+_size+"_"+type[0]+"_"+type[1],"etemplate"))||"undefined"!=typeof mime_alias_map[_mime]&&(image=this.mime_icon(mime_alias_map[_mime],_path,_size,_mtime)))||(image=this.image("mime"+_size+"_"+type[0],"etemplate"))||(image=this.image("mime"+_size+"_unknown","etemplate"));return image},image_element:function(_url,_alt){var icon;return icon=document.createElement("img"),_url&&(icon.src=_url),_alt&&(icon.alt=_alt),icon}}}),egw.extend("jsonq",egw.MODULE_GLOBAL,function(){"use strict";function jsonq_callback(_data){if("object"!=typeof _data)throw"jsonq_callback called with NO object as parameter!";if("undefined"==typeof _data.type){var json=egw.json("none");for(var uid in _data)if("undefined"!=typeof jsonq_queue[uid]){var job=jsonq_queue[uid],response=_data[uid];json.callback=job.callback,json.sender=job.sender,json.handleResponse({response:response}),delete jsonq_queue[uid]}else console.log("jsonq_callback received response for not existing queue uid="+uid+"!"),console.log(_data[uid]);jsonq_timer&&"object"!=typeof jsonq_queue["u"+(jsonq_uid-1)]&&(window.clearInterval(jsonq_timer),jsonq_timer=null)}}function jsonq_send(){if(jsonq_uid>0&&"object"==typeof jsonq_queue["u"+(jsonq_uid-1)]){var jobs_to_send={},something_to_send=!1;for(var uid in jsonq_queue){var job=jsonq_queue[uid];"send"!=job.menuaction&&("function"==typeof job.callbeforesend&&job.callbeforesend.call(job.sender,job.parameters),jobs_to_send[uid]={menuaction:job.menuaction,parameters:job.parameters},job.menuaction="send",job.parameters=null,something_to_send=!0)}if(something_to_send){var request=egw.json("home.queue",jobs_to_send,jsonq_callback,this);request.sendRequest(!0)}}}var jsonq_queue={},jsonq_uid=0,jsonq_timer=null;return{jsonq:function(_menuaction,_parameters,_callback,_sender,_callbeforesend){var uid="u"+jsonq_uid++;if(jsonq_queue[uid]={menuaction:_menuaction,parameters:_parameters?[].concat(_parameters):[],callback:_callback,sender:_sender,callbeforesend:_callbeforesend},null==jsonq_timer){var self=this;jsonq_timer=window.setInterval(function(){jsonq_send.call(self)},100)}return uid}}}),egw.extend("json",egw.MODULE_WND_LOCAL,function(_app,_wnd){"use strict";function json_request(_menuaction,_parameters,_callback,_context,_async,_sender,_egw){this.url=_egw.ajaxUrl(_menuaction),this.parameters=_parameters?[].concat(_parameters):[],this.async=_async?_async:!1,this.callback=_callback?_callback:null,this.context=_context?_context:null,this.sender=_sender?_sender:null,this.egw=_egw,this.request=null,this.onLoadFinish=null,this.jsFiles=0,this.jsCount=0,this.alertHandler=function(_message,_details){alert(_message),_details&&_egw.debug("info",_message,_details)}}var plugins={};"undefined"==typeof egw._global_json_handlers&&(egw._global_json_handlers={});var global_plugins=egw._global_json_handlers;json_request.prototype.sendRequest=function(async,method){"undefined"!=typeof async&&(this.async=async);var request_obj={json_data:this.egw.jsonEncode({request:{parameters:this.parameters}})};return this.request=(this.egw.window?this.egw.window.$j:$j).ajax({url:this.url,async:this.async,context:this,data:request_obj,dataType:"json",type:method||"POST",success:this.handleResponse,error:function(_xmlhttp,_err){"abort"!==_err&&(this.egw.message.call(this.egw,this.egw.lang("Ajax request failed")+": "+_xmlhttp.statusText+" ("+_xmlhttp.status+")\n\n"+this.egw.lang("Server error log should contain more information about the problem.")+"\n"+this.egw.lang("Trying it again will usually not help!")+"\n\nURL: "+this.url+"\n"+(_xmlhttp.getAllResponseHeaders()?_xmlhttp.getAllResponseHeaders().match(/^Date:.*$/m)[0]:"")),this.egw.debug("error","Ajax request to",this.url," failed: ",_err,_xmlhttp.status,_xmlhttp.statusText))}}),this.request},json_request.prototype.handleResponse=function(data){if(data&&"undefined"!=typeof data.response){for(var js_files=[],i=data.response.length-1;i>0;--i){var res=data.response[i];"js"==res.type&&"string"==typeof res.data&&(js_files.unshift(res.data),data.response.splice(i,1))}if(js_files.length>0){var start_time=(new Date).getTime();return void this.egw.includeJS(js_files,function(){var end_time=(new Date).getTime();this.handleResponse(data);var gen_time_div=$j("#divGenTime_"+this.egw.appname);gen_time_div.length||(gen_time_div=$j(".pageGenTime")),gen_time_div.append('<span class="asyncIncludeTime">'+egw.lang("async includes took %1s",(end_time-start_time)/1e3)+"</span>")},this)}for(var only_data=data.response.length>0,i=0;i<data.response.length;i++){var res=data.response[i];"string"==typeof res.type&&"data"!=res.type&&(only_data=!1);for(var handlers=[plugins,global_plugins],handler_idx=0;handler_idx<handlers.length;handler_idx++){var handler_level=handlers[handler_idx];if("undefined"!=typeof handler_level[res.type])for(var j=0;j<handler_level[res.type].length;j++)try{var plugin=handler_level[res.type][j];plugin.callback.call(plugin.context?plugin.context:this.context,res.type,res,this)}catch(e){var msg=e.message?e.message:e+"",stack=e.stack?"\n-- Stack trace --\n"+e.stack:"";this.egw.debug("error",'Exception "'+msg+'" while handling JSON response from '+this.url+" ["+JSON.stringify(this.parameters)+'] type "'+res.type+'", plugin',plugin,"response",res,stack)}}}null==this.callback||only_data||this.callback.call(this.context,res)}this.request=null};var json={json:function(_menuaction,_parameters,_callback,_context,_async,_sender){return new json_request(_menuaction,_parameters,_callback,_context,_async,_sender,this)},registerJSONPlugin:function(_callback,_context,_type,_global){"undefined"==typeof _type&&(_type="global"),"undefined"==typeof _global&&(_global=!1);var scoped=_global?global_plugins:plugins;"undefined"==typeof scoped[_type]&&(scoped[_type]=[]),scoped[_type].push({callback:_callback,context:_context})},unregisterJSONPlugin:function(_callback,_context,_type,_global){"undefined"==typeof _type&&(_type="global"),"undefined"==typeof _global&&(_global=!1);var scoped=_global?global_plugins:plugins;if("undefined"!=typeof scoped[_type])for(var i=0;i<scoped[_type].length;i++)if(scoped[_type][i].callback==_callback&&scoped[_type][i].context==_context){scoped[_type].slice(i,1);break}}};return json.registerJSONPlugin(function(type,res,req){if("undefined"!=typeof res.data.message&&"undefined"!=typeof res.data.details)return req.alertHandler(res.data.message,res.data.details),!0;throw"Invalid parameters"},null,"alert"),json.registerJSONPlugin(function(type,res,req){if("undefined"!=typeof res.data.id&&"undefined"!=typeof res.data.key&&"undefined"!=typeof res.data.value){var obj=_wnd.document.getElementById(res.data.id);return obj?(obj[res.data.key]=res.data.value,"innerHTML"==res.data.key&&egw_insertJS(res.data.value),!0):!1}throw"Invalid parameters"},null,"assign"),json.registerJSONPlugin(function(type,res,req){return req.callback?(req.callback.call(req.sender,res.data),!0):void 0},null,"data"),json.registerJSONPlugin(function(type,res,req){if("string"==typeof res.data){try{var func=new Function(res.data);func.call(req.egw?req.egw.window:window)}catch(e){req.egw.debug("error","Error while executing script: ",res.data,e)}return!0}throw"Invalid parameters"},null,"script"),json.registerJSONPlugin(function(type,res,req){if("string"==typeof res.data.func){for(var parts=res.data.func.split("."),func=parts.pop(),parent=req.egw.window,i=0;i<parts.length;++i)"undefined"!=typeof parent[parts[i]]?parent=parent[parts[i]]:1==i&&"app"==parts[0]&&"function"==typeof req.egw.window.app.classes[parts[1]]&&(parent=parent[parts[1]]=new req.egw.window.app.classes[parts[1]]);if("function"==typeof parent[func]){try{parent[func].apply(parent,res.data.parms)}catch(e){req.egw.debug("error",e.message," in function",res.data.func,"Parameters",res.data.parms)}return!0}throw'"'+res.data.func+'" is not a callable function (type is '+typeof parent[func]+")"}throw"Invalid parameters"},null,"apply"),json.registerJSONPlugin(function(type,res,req){if("string"==typeof res.data.select&&"string"==typeof res.data.func){try{var jQueryObject=$j(res.data.select,req.context);jQueryObject[res.data.func].apply(jQueryObject,res.data.parms)}catch(e){req.egw.debug("error","Function",res.data.func,"Parameters",res.data.parms)}return!0}throw"Invalid parameters"},_wnd,"jquery"),json.registerJSONPlugin(function(type,res,req){if("string"==typeof res.data.url&&"boolean"==typeof res.data.global)return res.data.global|=res.data.url.indexOf("?cd=10")>0,res.data.global?egw_topWindow().location.href=res.data.url:this&&this.DOMContainer&&this.DOMContainer.ownerDocument.defaultView!=window&&egw(this.DOMContainer.ownerDocument.defaultView).is_popup()?this.DOMContainer.ownerDocument.location.href=res.data.url:egw_appWindowOpen(res.data.app,res.data.url),!0;throw"Invalid parameters"},null,"redirect"),json.registerJSONPlugin(function(type,res,req){if("string"==typeof res.data)return req.egw.includeCSS(res.data),!0;throw"Invalid parameters"},null,"css"),json.registerJSONPlugin(function(type,res,req){if("string"==typeof res.data)return req.jsCount++,req.egw.includeJS(res.data,function(){req.jsFiles++,req.jsFiles==req.jsCount&&req.onLoadFinish&&req.onLoadFinish.call(req.sender)}),!0;throw"Invalid parameters"},null,"js"),json.registerJSONPlugin(function(type,res,req){if("string"==typeof res.data){for(;_wnd.document.childNodes.length>0;)_wnd.document.removeChild(_wnd.document.childNodes[0]);return _wnd.document.write(res.data),_wnd.document.close(),!0}throw"Invalid parameters"},null,"html"),json}),egw.extend("store",egw.MODULE_GLOBAL,function(_app,_wnd){"use strict";function mapKey(application,key){return application+"-"+key}return{getSessionItem:function(application,key){return key=mapKey(application,key),_wnd.sessionStorage.getItem(key)},setSessionItem:function(application,key,value){return key=mapKey(application,key),_wnd.sessionStorage.setItem(key,value)},removeSessionItem:function(application,key){return key=uniqueKey(application,key),_wnd.sessionStorage.removeItem(key)},setLocalStorageItem:function(application,item,value){return item=mapKey(application,item),localStorage.setItem(item,value)},getLocalStorageItem:function(application,item){return item=mapKey(application,item),localStorage.getItem(item)},removeLocalStorageItem:function(application,item){return item=mapKey(application,item),localStorage.removeItem(item)}}}),egw.extend("tooltip",egw.MODULE_WND_LOCAL,function(_app,_wnd){
"use strict";function hide(){null!=tooltip_div&&(tooltip_div.remove(),tooltip_div=null)}function show(){if(tooltip_div&&"undefined"!=typeof x&&"undefined"!=typeof y){var cursor_rect={left:x-8,top:y-8,right:x+8,bottom:y+8},window_width=$j(_wnd.document).width(),window_height=$j(_wnd.document).height(),space_left={left:cursor_rect.left,top:cursor_rect.top,right:window_width-cursor_rect.right,bottom:window_height-cursor_rect.bottom},tooltip_width=tooltip_div.width();tooltip_width>300&&(tooltip_width=300);var tooltip_height=tooltip_div.height();space_left.right<tooltip_width?tooltip_div.css("left",Math.max(0,cursor_rect.left-tooltip_width)):space_left.left>=tooltip_width?tooltip_div.css("left",cursor_rect.right):(tooltip_div.css("left",cursor_rect.right),tooltip_div.css("max-width",space_left.right)),space_left.bottom<tooltip_height?tooltip_div.css("top",cursor_rect.top-tooltip_height):space_left.top>=tooltip_height?tooltip_div.css("top",cursor_rect.bottom):(tooltip_div.css("top",cursor_rect.bottom),tooltip_div.css("max-height",space_left.bottom)),tooltip_div.fadeIn(100)}}function prepare(_html){hide(),tooltip_div=$j(_wnd.document.createElement("div")),tooltip_div.hide(),tooltip_div.append(_html),tooltip_div.addClass("egw_tooltip"),$j(_wnd.document.body).append(tooltip_div),tooltip_div.mouseenter(function(){hide()})}function showTooltipTimeout(){null!=current_elem&&(show_delta+=time_delta,show_delay>show_delta?_wnd.setTimeout(showTooltipTimeout,time_delta):(show_delta=0,show()))}var tooltip_div=null,current_elem=null,time_delta=100,show_delta=0,show_delay=200,x=0,y=0;return{tooltipBind:function(_elem,_html){""!=_html&&(_elem.bind("mouseenter.tooltip",function(e){return _elem!=current_elem&&(prepare(_html),current_elem=_elem,show_delta=0,x=e.clientX,y=e.clientY,_wnd.setTimeout(showTooltipTimeout,time_delta)),!1}),_elem.bind("mouseleave.tooltip",function(){current_elem=null,show_delta=0,tooltip_div&&tooltip_div.fadeOut(100)}),_elem.bind("mousemove.tooltip",function(e){var dx=x-e.clientX,dy=y-e.clientY,movedist=Math.sqrt(dx*dx+dy*dy);movedist>2&&(show_delta=0),x=e.clientX,y=e.clientY}))},tooltipUnbind:function(_elem){current_elem==_elem&&(hide(),current_elem=null),_elem.unbind(".tooltip")}}}),egw.extend("css",egw.MODULE_WND_LOCAL,function(_app,_wnd){"use strict";var sheet,selectors={},selectorCount=0;return{css:function(_selector,_rule){var index=sheet?Math.min(selectorCount,sheet.cssRules.length):0;if(!sheet||!sheet.ownerNode||sheet.ownerNode.ownerDocument!==_wnd.document){var style=_wnd.document.createElement("style");_wnd.document.getElementsByTagName("head")[0].appendChild(style),sheet=style.sheet?style.sheet:style.styleSheet,selectorCount=0,selectors={}}"undefined"!=typeof selectors[_selector]?(index=selectors[_selector],index<sheet.cssRules.length&&("undefined"!=typeof sheet.removeRule?sheet.removeRule(index):sheet.deleteRule(index)),delete selectors[_selector],_rule||selectorCount--):selectorCount++,_rule&&("undefined"!=typeof sheet.addRule?sheet.addRule(_selector,_rule,index):sheet.insertRule(_selector+"{"+_rule+"}",index),selectors[_selector]=index)}}}),function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"@@version"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(settings){return extendRemove(this._defaults,settings||{}),this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(input,dp_inst){return $.isFunction(tp_inst._defaults.evnts.beforeShow)?tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst):void 0},onChangeMonthYear:function(year,month,dp_inst){tp_inst._updateDateTime(dp_inst),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)},onClose:function(dateText,dp_inst){tp_inst.timeDefined===!0&&""!==$input.val()&&tp_inst._updateDateTime(dp_inst),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}};for(i in overrides)overrides.hasOwnProperty(i)&&(fns[i]=opts[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"===tp_inst._defaults.controlType&&"undefined"==typeof $.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&"object"!=typeof timezoneList[0])for(;tzl>tzi;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,tp_inst._defaults.altField&&(tp_inst.$altInput=$(tp_inst._defaults.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),0!==tp_inst._defaults.minDate&&0!==tp_inst._defaults.minDateTime||(tp_inst._defaults.minDate=new Date),0!==tp_inst._defaults.maxDate&&0!==tp_inst._defaults.maxDateTime||(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(dp_inst){var currDT=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(currDT),this._limitMinMaxDateTime(dp_inst,!1),this._injectTimePicker()},_parseTime:function(timeString,withDate){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,"dateFormat");try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj)return!1;$.extend(this,parseRes.timeObj)}catch(err){return $.timepicker.log("Error parsing the date/time string: "+err+"\ndate/time string = "+timeString+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+dp_dateFormat),!1}return!0}var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,this._defaults);return timeObj?($.extend(this,timeObj),!0):!1},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem="",uitem="",show=null,max={},gridSize={},size=null,i=0,l=0;if(0===$dp.find("div.ui-timepicker-div").length&&o.showTimepicker){var noDisplay=' style="display:none;"',html='<div class="ui-timepicker-div'+(o.isRTL?" ui-timepicker-rtl":"")+'"><dl><dt class="ui_tpicker_time_label"'+(o.showTime?"":noDisplay)+">"+o.timeText+'</dt><dd class="ui_tpicker_time"'+(o.showTime?"":noDisplay)+"></dd>";for(i=0,l=this.units.length;l>i;i++){if(litem=this.units[i],uitem=litem.substr(0,1).toUpperCase()+litem.substr(1),show=null!==o["show"+uitem]?o["show"+uitem]:this.support[litem],max[litem]=parseInt(o[litem+"Max"]-(o[litem+"Max"]-o[litem+"Min"])%o["step"+uitem],10),gridSize[litem]=0,html+='<dt class="ui_tpicker_'+litem+'_label"'+(show?"":noDisplay)+">"+o[litem+"Text"]+'</dt><dd class="ui_tpicker_'+litem+'"><div class="ui_tpicker_'+litem+'_slider"'+(show?"":noDisplay)+"></div>",show&&o[litem+"Grid"]>0){if(html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"===litem)for(var h=o[litem+"Min"];h<=max[litem];h+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:h},o);html+='<td data-for="'+litem+'">'+tmph+"</td>"}else for(var m=o[litem+"Min"];m<=max[litem];m+=parseInt(o[litem+"Grid"],10))gridSize[litem]++,html+='<td data-for="'+litem+'">'+(10>m?"0":"")+m+"</td>";html+="</tr></table></div>"}html+="</dd>"}var showTz=null!==o.showTimezone?o.showTimezone:this.support.timezone;html+='<dt class="ui_tpicker_timezone_label"'+(showTz?"":noDisplay)+">"+o.timezoneText+"</dt>",html+='<dd class="ui_tpicker_timezone" '+(showTz?"":noDisplay)+"></dd>",html+="</dl></div>";var $tp=$(html);for(o.timeOnly===!0&&($tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+o.timeOnlyTitle+"</div></div>"),$dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),i=0,l=tp_inst.units.length;l>i;i++)litem=tp_inst.units[i],uitem=litem.substr(0,1).toUpperCase()+litem.substr(1),show=null!==o["show"+uitem]?o["show"+uitem]:this.support[litem],tp_inst[litem+"_slider"]=tp_inst.control.create(tp_inst,$tp.find(".ui_tpicker_"+litem+"_slider"),litem,tp_inst[litem],o[litem+"Min"],max[litem],o["step"+uitem]),show&&o[litem+"Grid"]>0&&(size=100*gridSize[litem]*o[litem+"Grid"]/(max[litem]-o[litem+"Min"]),$tp.find(".ui_tpicker_"+litem+" table").css({width:size+"%",marginLeft:o.isRTL?"0":size/(-2*gridSize[litem])+"%",marginRight:o.isRTL?size/(-2*gridSize[litem])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/gi),f=$t.data("for");"hour"===f&&(-1!==ap.indexOf("p")&&12>n?n+=12:-1!==ap.indexOf("a")&&12===n&&(n=0)),tp_inst.control.value(tp_inst,tp_inst[f+"_slider"],litem,n),tp_inst._onTimeChange(),tp_inst._onSelectHandler()}).css({cursor:"pointer",width:100/gridSize[litem]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=$tp.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("<option />").val("object"==typeof val?val.value:val).text("object"==typeof val?val.label:val)})),"undefined"!=typeof this.timezone&&null!==this.timezone&&""!==this.timezone){var local_timezone=-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset();local_timezone===this.timezone?selectLocalTimezone(tp_inst):this.timezone_select.val(this.timezone)}else"undefined"!=typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(o.timezone):selectLocalTimezone(tp_inst);this.timezone_select.change(function(){tp_inst._onTimeChange(),tp_inst._onSelectHandler()});var $buttonPanel=$dp.find(".ui-datepicker-buttonpane");if($buttonPanel.length?$buttonPanel.before($tp):$dp.append($tp),this.$timeObj=$tp.find(".ui_tpicker_time"),null!==this.inst){var timeDefined=this.timeDefined;this._onTimeChange(),this.timeDefined=timeDefined}if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl,setTimeout(function(){if(0===$tp.find(".ui-slider-access").length){$tp.find(".ui-slider:visible").sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find(".ui-slider-access:eq(0)").outerWidth(!0);sliderAccessWidth&&$tp.find("table:visible").each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?"marginRight":"marginLeft").toString().replace("%",""),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=oldMarginLeft*newWidth/oldWidth+"%",css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?"marginRight":"marginLeft"]=newMarginLeft,$g.css(css)})}},10)}tp_inst._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(dp_inst,"minDateTime")&&void 0!==$.datepicker._get(dp_inst,"minDateTime")&&dp_date){var minDateTime=$.datepicker._get(dp_inst,"minDateTime"),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);null!==this.hourMinOriginal&&null!==this.minuteMinOriginal&&null!==this.secondMinOriginal&&null!==this.millisecMinOriginal&&null!==this.microsecMinOriginal||(this.hourMinOriginal=o.hourMin,this.minuteMinOriginal=o.minuteMin,this.secondMinOriginal=o.secondMin,this.millisecMinOriginal=o.millisecMin,this.microsecMinOriginal=o.microsecMin),dp_inst.settings.timeOnly||minDateTimeDate.getTime()===dp_date.getTime()?(this._defaults.hourMin=minDateTime.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=minDateTime.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=minDateTime.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=minDateTime.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=minDateTime.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(dp_inst,"maxDateTime")&&void 0!==$.datepicker._get(dp_inst,"maxDateTime")&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,"maxDateTime"),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);null!==this.hourMaxOriginal&&null!==this.minuteMaxOriginal&&null!==this.secondMaxOriginal&&null!==this.millisecMaxOriginal||(this.hourMaxOriginal=o.hourMax,this.minuteMaxOriginal=o.minuteMax,this.secondMaxOriginal=o.secondMax,this.millisecMaxOriginal=o.millisecMax,this.microsecMaxOriginal=o.microsecMax),dp_inst.settings.timeOnly||maxDateTimeDate.getTime()===dp_date.getTime()?(this._defaults.hourMax=maxDateTime.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=maxDateTime.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=maxDateTime.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=maxDateTime.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=maxDateTime.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(void 0!==adjustSliders&&adjustSliders===!0){var hourMax=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),minMax=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),secMax=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),millisecMax=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),microsecMax=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:hourMax}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:minMax}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:secMax}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:millisecMax}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:microsecMax}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){if(this._defaults.showTimepicker){var hour=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):!1,minute=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,second=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,millisec=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):!1,microsec=this.microsec_slider?this.control.value(this,this.microsec_slider,"microsec"):!1,timezone=this.timezone_select?this.timezone_select.val():!1,o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;"object"==typeof hour&&(hour=!1),"object"==typeof minute&&(minute=!1),"object"==typeof second&&(second=!1),"object"==typeof millisec&&(millisec=!1),"object"==typeof microsec&&(microsec=!1),"object"==typeof timezone&&(timezone=!1),hour!==!1&&(hour=parseInt(hour,10)),minute!==!1&&(minute=parseInt(minute,10)),second!==!1&&(second=parseInt(second,10)),millisec!==!1&&(millisec=parseInt(millisec,10)),microsec!==!1&&(microsec=parseInt(microsec,10)),timezone!==!1&&(timezone=timezone.toString());var ampm=o[12>hour?"amNames":"pmNames"][0],hasChanged=hour!==parseInt(this.hour,10)||minute!==parseInt(this.minute,10)||second!==parseInt(this.second,10)||millisec!==parseInt(this.millisec,10)||microsec!==parseInt(this.microsec,10)||this.ampm.length>0&&12>hour!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&timezone!==this.timezone.toString();hasChanged&&(hour!==!1&&(this.hour=hour),minute!==!1&&(this.minute=minute),second!==!1&&(this.second=second),millisec!==!1&&(this.millisec=millisec),microsec!==!1&&(this.microsec=microsec),timezone!==!1&&(this.timezone=timezone),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=ampm),this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o),this.$timeObj&&(pickerTimeFormat===o.timeFormat?this.$timeObj.text(this.formattedTime+pickerTimeSuffix):this.$timeObj.text($.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix)),this.timeDefined=!0,hasChanged&&(this._updateDateTime(),this.$input.focus())}},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect,inputEl=this.$input?this.$input[0]:null;onSelect&&inputEl&&onSelect.apply(inputEl,[this.formattedDateTime,this])},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dtTmp=dp_inst.currentYear>0?new Date(dp_inst.currentYear,dp_inst.currentMonth,dp_inst.currentDay):new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay),dt=$.datepicker._daylightSavingAdjust(dtTmp),dateFmt=$.datepicker._get(dp_inst,"dateFormat"),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=null!==dt&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,null===dt?new Date:dt,formatCfg);var formattedDateTime=this.formattedDate;if(""===dp_inst.lastVal&&(dp_inst.currentYear=dp_inst.selectedYear,dp_inst.currentMonth=dp_inst.selectedMonth,dp_inst.currentDay=dp_inst.selectedDay),this._defaults.timeOnly===!0?formattedDateTime=this.formattedTime:this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||timeAvailable)&&(formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=formattedDateTime,this._defaults.showTimepicker)if(this.$altInput&&this._defaults.timeOnly===!1&&this._defaults.altFieldTimeOnly===!0)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime="",altSeparator=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(altFormattedDateTime=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===dt?new Date:dt,formatCfg):this.formattedDate,altFormattedDateTime&&(altFormattedDateTime+=altSeparator)),altFormattedDateTime+=this._defaults.altTimeFormat?$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix:this.formattedTime+altTimeSuffix,this.$altInput.val(altFormattedDateTime)}else this.$input.val(formattedDateTime);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&tp_inst._defaults.timeOnly&&inst.input.val()!==inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop("slide",null).slider({orientation:"horizontal",value:rtl?-1*val:val,min:rtl?-1*max:min,max:rtl?-1*min:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?-1*ui.value:ui.value),tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if("string"==typeof opts)return"min"===opts||"max"===opts?void 0!==val?obj.slider(opts,-1*val):Math.abs(obj.slider(opts)):obj.slider(opts);var min=opts.min,max=opts.max;return opts.min=opts.max=null,void 0!==min&&(opts.max=-1*min),void 0!==max&&(opts.min=-1*max),obj.slider(opts)}return"string"==typeof opts&&void 0!==val?obj.slider(opts,val):obj.slider(opts)},value:function(tp_inst,obj,unit,val){return tp_inst._defaults.isRTL?void 0!==val?obj.slider("value",-1*val):Math.abs(obj.slider("value")):void 0!==val?obj.slider("value",val):obj.slider("value")}},select:{create:function(tp_inst,obj,unit,val,min,max,step){for(var sel='<select class="ui-timepicker-select" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',format=tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat,i=min;max>=i;i+=step)sel+='<option value="'+i+'"'+(i===val?" selected":"")+">",sel+="hour"===unit?$.datepicker.formatTime($.trim(format.replace(/[^ht ]/gi,"")),{hour:i},tp_inst._defaults):"millisec"===unit||"microsec"===unit||i>=10?i:"0"+i.toString(),sel+="</option>";return sel+="</select>",obj.children("select").remove(),$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange(),tp_inst._onSelectHandler()}),obj},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children("select");if("string"==typeof opts){if(void 0===val)return $t.data(opts);o[opts]=val}else o=opts;return tp_inst.control.create(tp_inst,obj,$t.data("unit"),$t.val(),o.min||$t.data("min"),o.max||$t.data("max"),o.step||$t.data("step"))},value:function(tp_inst,obj,unit,val){var $t=obj.children("select");return void 0!==val?$t.val(val):$t.val()}}}}),$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);return"object"==typeof o&&(tmp_args[0]=$.extend(o,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){o=o||{};var tmp_args=arguments;return"string"==typeof o?"getDate"===o?$.fn.datepicker.apply($(this[0]),tmp_args):this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)}):this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}}),$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec),parseRes.date.setMicroseconds(t.microsec)}return parseRes.date},$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),strictParse=(-1!==timeFormat.replace(/\'.*?\'/g,"").indexOf("Z"),function(f,s,o){var treg,getPatternAmpm=function(amNames,pmNames){var markers=[];return amNames&&$.merge(markers,amNames),pmNames&&$.merge(markers,pmNames),markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+markers.join("|")+")?"},getFormatPositions=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(finds)for(var i=0;i<finds.length;i++)-1===orders[finds[i].toString().charAt(0)]&&(orders[finds[i].toString().charAt(0)]=i+1);return orders},regstr="^"+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){var ml=match.length;switch(match.charAt(0).toLowerCase()){case"h":return 1===ml?"(\\d?\\d)":"(\\d{"+ml+"})";case"m":return 1===ml?"(\\d?\\d)":"(\\d{"+ml+"})";case"s":return 1===ml?"(\\d?\\d)":"(\\d{"+ml+"})";case"l":return"(\\d?\\d?\\d)";case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return getPatternAmpm(o.amNames,o.pmNames);default:return"("+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+")?"}}).replace(/\s/g,"\\s?")+o.timeSuffix+"$",order=getFormatPositions(f),ampm="";treg=s.match(new RegExp(regstr,"i"));var resTime={hour:0,minute:0,second:0,millisec:0,microsec:0};return treg?(-1!==order.t&&(void 0===treg[order.t]||0===treg[order.t].length?(ampm="",resTime.ampm=""):(ampm=-1!==$.inArray(treg[order.t].toUpperCase(),o.amNames)?"AM":"PM",resTime.ampm=o["AM"===ampm?"amNames":"pmNames"][0])),-1!==order.h&&("AM"===ampm&&"12"===treg[order.h]?resTime.hour=0:"PM"===ampm&&"12"!==treg[order.h]?resTime.hour=parseInt(treg[order.h],10)+12:resTime.hour=Number(treg[order.h])),-1!==order.m&&(resTime.minute=Number(treg[order.m])),-1!==order.s&&(resTime.second=Number(treg[order.s])),-1!==order.l&&(resTime.millisec=Number(treg[order.l])),-1!==order.c&&(resTime.microsec=Number(treg[order.c])),-1!==order.z&&void 0!==treg[order.z]&&(resTime.timezone=$.timepicker.timezoneOffsetNumber(treg[order.z])),
resTime):!1}),looseParse=function(f,s,o){try{var d=new Date("2012-01-01 "+s);if(isNaN(d.getTime())&&(d=new Date("2012-01-01T"+s),isNaN(d.getTime())&&(d=new Date("01/01/2012 "+s),isNaN(d.getTime()))))throw"Unable to parse time with native Date: "+s;return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:-1*d.getTimezoneOffset()}}catch(err){try{return strictParse(f,s,o)}catch(err2){$.timepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}return!1};return"function"==typeof o.parse?o.parse(timeFormat,timeString,o):"loose"===o.parse?looseParse(timeFormat,timeString,o):strictParse(timeFormat,timeString,o)},$.datepicker.formatTime=function(format,time,options){options=options||{},options=$.extend({},$.timepicker._defaults,options),time=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);return hour>11&&(ampmName=options.pmNames[0]),tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){switch(match){case"HH":return("0"+hour).slice(-2);case"H":return hour;case"hh":return("0"+convert24to12(hour)).slice(-2);case"h":return convert24to12(hour);case"mm":return("0"+time.minute).slice(-2);case"m":return time.minute;case"ss":return("0"+time.second).slice(-2);case"s":return time.second;case"l":return("00"+time.millisec).slice(-3);case"c":return("00"+time.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(null===time.timezone?options.timezone:time.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===time.timezone?options.timezone:time.timezone,!0);case"T":return ampmName.charAt(0).toUpperCase();case"TT":return ampmName.toUpperCase();case"t":return ampmName.charAt(0).toLowerCase();case"tt":return ampmName.toLowerCase();default:return match.replace(/'/g,"")}})},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,"timepicker");tp_inst?(tp_inst._limitMinMaxDateTime(inst,!0),inst.inline=inst.stay_open=!0,this._base_selectDate(id,dateStr),inst.inline=inst.stay_open=!1,this._notifyChange(inst),this._updateDatepicker(inst)):this._base_selectDate(id,dateStr)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!==inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input||"boolean"==typeof inst.stay_open&&inst.stay_open!==!1)){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,"timepicker");tp_inst&&tp_inst._addTimePicker(inst)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&$.datepicker._get(inst,"constrainInput")){var ampm=tp_inst.support.ampm,tz=null!==tp_inst._defaults.showTimezone?tp_inst._defaults.showTimezone:tp_inst.support.timezone,dateChars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,ampm?"APM":"").replace(/Tt/g,ampm?"AaPpMm":"").replace(/tT/g,ampm?"AaPpMm":"").replace(/T/g,ampm?"AP":"").replace(/tt/g,ampm?"apm":"").replace(/t/g,ampm?"ap":"")+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tz?tp_inst._defaults.timezoneList.join(""):"")+tp_inst._defaults.amNames.join("")+tp_inst._defaults.pmNames.join("")+dateChars,chr=String.fromCharCode(void 0===event.charCode?event.keyCode:event.charCode);return event.ctrlKey||" ">chr||!dateChars||datetimeChars.indexOf(chr)>-1}return $.datepicker._base_doKeyPress(event)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){var date=(tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat,this._getDate(inst)),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime="",altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=null!==tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix,tp_inst._defaults.timeOnly||tp_inst._defaults.altFieldTimeOnly||null===date||(altFormattedDateTime=tp_inst._defaults.altFormat?$.datepicker.formatDate(tp_inst._defaults.altFormat,date,formatCfg)+altSeparator+altFormattedDateTime:tp_inst.formattedDate+altSeparator+altFormattedDateTime),$(altField).val(altFormattedDateTime)}}else $.datepicker._base_updateAlternate(inst)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&tp_inst._defaults.timeOnly&&inst.input.val()!==inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}return $.datepicker._base_doKeyUp(event)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv;this._base_gotoToday(id);var tp_inst=this._get(inst,"timepicker");selectLocalTimezone(tp_inst);var now=new Date;this._setTime(inst,now),$(".ui-datepicker-today",$dp).click()},$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate"),tp_inst&&(inst.settings.showTimepicker=!1,tp_inst._defaults.showTimepicker=!1,tp_inst._updateDateTime(inst))}},$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate"),tp_inst&&(inst.settings.showTimepicker=!0,tp_inst._defaults.showTimepicker=!0,tp_inst._addTimePicker(inst),tp_inst._updateDateTime(inst))}},$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour,tp_inst.minute=date?date.getMinutes():defaults.minute,tp_inst.second=date?date.getSeconds():defaults.second,tp_inst.millisec=date?date.getMilliseconds():defaults.millisec,tp_inst.microsec=date?date.getMicroseconds():defaults.microsec,tp_inst._limitMinMaxDateTime(inst,!0),tp_inst._onTimeChange(),tp_inst._updateDateTime(inst)}},$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){this._setDateFromField(inst);var tp_date;date&&("string"==typeof date?(tp_inst._parseTime(date,withDate),tp_date=new Date,tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec),tp_date.setMicroseconds(tp_inst.microsec)):(tp_date=new Date(date.getTime()),tp_date.setMicroseconds(date.getMicroseconds())),"Invalid Date"===tp_date.toString()&&(tp_date=void 0),this._setTime(inst,tp_date))}}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(target,date){var inst=this._getInst(target);if(inst){"string"==typeof date&&(date=new Date(date),date.getTime()||$.timepicker.log("Error creating Date object from string."));var tp_date,tp_inst=this._get(inst,"timepicker");date instanceof Date?(tp_date=new Date(date.getTime()),tp_date.setMicroseconds(date.getMicroseconds())):tp_date=date,tp_inst&&tp_date&&(tp_inst.support.timezone||null!==tp_inst._defaults.timezone||(tp_inst.timezone=-1*tp_date.getTimezoneOffset()),date=$.timepicker.timezoneAdjust(date,tp_inst.timezone),tp_date=$.timepicker.timezoneAdjust(tp_date,tp_inst.timezone)),this._updateDatepicker(inst),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(target,tp_date,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){void 0===inst.lastVal&&this._setDateFromField(inst,noDefault);var date=this._getDate(inst);return date&&tp_inst._parseTime($(target).val(),tp_inst.timeOnly)&&(date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec),date.setMicroseconds(tp_inst.microsec),null!=tp_inst.timezone&&(tp_inst.support.timezone||null!==tp_inst._defaults.timezone||(tp_inst.timezone=-1*date.getTimezoneOffset()),date=$.timepicker.timezoneAdjust(date,tp_inst.timezone))),date}return this._base_getDateDatepicker(target,noDefault)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){if(!(err.indexOf(":")>=0))throw err;date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(":")-2)),settings),$.timepicker.log("Error parsing the date string: "+err+"\ndate string = "+value+"\ndate format = "+format)}return date},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,"timepicker");return tp_inst?(tp_inst._updateDateTime(inst),tp_inst.$input.val()):this._base_formatDate(inst)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(target,name,value){var name_clone,inst=this._getInst(target);if(!inst)return null;var tp_inst=this._get(inst,"timepicker");if(tp_inst){var prop,min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={};if("string"==typeof name){if("minDate"===name||"minDateTime"===name)min=value;else if("maxDate"===name||"maxDateTime"===name)max=value;else if("onSelect"===name)onselect=value;else if(overrides.hasOwnProperty(name)){if("undefined"==typeof value)return overrides[name];fns[name]=value,name_clone={}}}else if("object"==typeof name){name.minDate?min=name.minDate:name.minDateTime?min=name.minDateTime:name.maxDate?max=name.maxDate:name.maxDateTime&&(max=name.maxDateTime);for(prop in overrides)overrides.hasOwnProperty(prop)&&name[prop]&&(fns[prop]=name[prop])}for(prop in fns)fns.hasOwnProperty(prop)&&(overrides[prop]=fns[prop],name_clone||(name_clone=$.extend({},name)),delete name_clone[prop]);if(name_clone&&isEmptyObject(name_clone))return;min?(min=0===min?new Date:new Date(min),tp_inst._defaults.minDate=min,tp_inst._defaults.minDateTime=min):max?(max=0===max?new Date:new Date(max),tp_inst._defaults.maxDate=max,tp_inst._defaults.maxDateTime=max):onselect&&(tp_inst._defaults.onSelect=onselect)}return void 0===value?this._base_optionDatepicker.call($.datepicker,target,name):this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;for(prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0},extendRemove=function(target,props){$.extend(target,props);for(var name in props)null!==props[name]&&void 0!==props[name]||(target[name]=props[name]);return target},detectSupport=function(timeFormat){var tf=timeFormat.replace(/'.*?'/g,"").toLowerCase(),isIn=function(f,t){return-1!==f.indexOf(t)};return{hour:isIn(tf,"h"),minute:isIn(tf,"m"),second:isIn(tf,"s"),millisec:isIn(tf,"l"),microsec:isIn(tf,"c"),timezone:isIn(tf,"z"),ampm:isIn(tf,"t")&&isIn(timeFormat,"h"),iso8601:isIn(timeFormat,"Z")}},convert24to12=function(hour){return hour%=12,0===hour&&(hour=12),String(hour)},computeEffectiveSetting=function(settings,property){return settings&&settings[property]?settings[property]:$.timepicker._defaults[property]},splitDateTime=function(dateTimeString,timeSettings){var separator=computeEffectiveSetting(timeSettings,"separator"),format=computeEffectiveSetting(timeSettings,"timeFormat"),timeParts=format.split(separator),timePartsLen=timeParts.length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;return allPartsLen>1?{dateString:allParts.splice(0,allPartsLen-timePartsLen).join(separator),timeString:allParts.splice(0,timePartsLen).join(separator)}:{dateString:dateTimeString,timeString:""}},parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,parts,parsedTime;if(parts=splitDateTime(dateTimeString,timeSettings),date=$.datepicker._base_parseDate(dateFormat,parts.dateString,dateSettings),""===parts.timeString)return{date:date};if(parsedTime=$.datepicker.parseTime(timeFormat,parts.timeString,timeSettings),!parsedTime)throw"Wrong time format";return{date:date,timeObj:parsedTime}},selectLocalTimezone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){var now=date||new Date;tp_inst.timezone_select.val(-now.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(tzMinutes,iso8601){if(isNaN(tzMinutes)||tzMinutes>840||-720>tzMinutes)return tzMinutes;var off=tzMinutes,minutes=off%60,hours=(off-minutes)/60,iso=iso8601?":":"",tz=(off>=0?"+":"-")+("0"+Math.abs(hours)).slice(-2)+iso+("0"+Math.abs(minutes)).slice(-2);return"+00:00"===tz?"Z":tz},$.timepicker.timezoneOffsetNumber=function(tzString){var normalized=tzString.toString().replace(":","");return"Z"===normalized.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(normalized)?("-"===normalized.substr(0,1)?-1:1)*(60*parseInt(normalized.substr(1,2),10)+parseInt(normalized.substr(3,2),10)):tzString},$.timepicker.timezoneAdjust=function(date,toTimezone){var toTz=$.timepicker.timezoneOffsetNumber(toTimezone);return isNaN(toTz)||date.setMinutes(date.getMinutes()+-date.getTimezoneOffset()-toTz),date},$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange("timepicker",startTime,endTime,options)},$.timepicker.datetimeRange=function(startTime,endTime,options){$.timepicker.handleRange("datetimepicker",startTime,endTime,options)},$.timepicker.dateRange=function(startTime,endTime,options){$.timepicker.handleRange("datepicker",startTime,endTime,options)},$.timepicker.handleRange=function(method,startTime,endTime,options){function checkDates(changed,other){var startdt=startTime[method]("getDate"),enddt=endTime[method]("getDate"),changeddt=changed[method]("getDate");if(null!==startdt){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval),maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval),options.minInterval>0&&minDate>enddt?endTime[method]("setDate",minDate):options.maxInterval>0&&enddt>maxDate?endTime[method]("setDate",maxDate):startdt>enddt&&other[method]("setDate",changeddt)}}function selected(changed,other,option){if(changed.val()){var date=changed[method].call(changed,"getDate");null!==date&&options.minInterval>0&&("minDate"===option&&date.setMilliseconds(date.getMilliseconds()+options.minInterval),"maxDate"===option&&date.setMilliseconds(date.getMilliseconds()-options.minInterval)),date.getTime&&other[method].call(other,"option",option,date)}}return options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options),$.fn[method].call(startTime,$.extend({onClose:function(dateText,inst){checkDates($(this),endTime)},onSelect:function(selectedDateTime){selected($(this),endTime,"minDate")}},options,options.start)),$.fn[method].call(endTime,$.extend({onClose:function(dateText,inst){checkDates($(this),startTime)},onSelect:function(selectedDateTime){selected($(this),startTime,"maxDate")}},options,options.end)),checkDates(startTime,endTime),selected(startTime,endTime,"minDate"),selected(endTime,startTime,"maxDate"),$([startTime.get(0),endTime.get(0)])},$.timepicker.log=function(err){window.console&&window.console.log(err)},$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal},Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(m){return this.setMilliseconds(this.getMilliseconds()+Math.floor(m/1e3)),this.microseconds=m%1e3,this}),$.timepicker.version="@@version"}}(jQuery),egw.extend("calendar",egw.MODULE_WND_LOCAL,function(_app,_wnd){"use strict";function calendarPreferences(_egw){var dateformat=dateTimeFormat(_egw.preference("dateformat")),first_day={Monday:1,Sunday:0,Saturday:6},first_day_pref=_egw.preference("weekdaystarts","calendar");return{dateFormat:dateformat,firstDay:first_day_pref?first_day[first_day_pref]:0}}function dateTimeFormat(_php_format){return _php_format.replace("Y","yy").replace("d","dd").replace("m","mm").replace("M","M").replace("H","hh").replace("i","mm").replace("s","ss")}function timePreferences(_egw){return{timeFormat:12==egw.preference("timeformat")?"h:mmtt":"HH:mm",ampm:"12"==egw.preference("timeformat"),hourGrid:4,minuteGrid:10}}function setupCalendar(_egw,_input,_time,_callback,_context){calendar_translated||(_egw.css(".et2_date input.hasDatepicker:enabled:hover","background-image: url("+egw().image("datepopup")+")"),translateCalendar(),calendar_translated=!0),timepicker_translated||(translateTimepicker(),timepicker_translated=!0);var prefs=calendarPreferences(_egw),params={dateFormat:prefs.dateFormat,firstDay:prefs.firstDay,autoSize:!0,showButtonPanel:!0,showOtherMonths:!0,selectOtherMonths:!0,showWeek:!0,changeMonth:!0,changeYear:!0};_time?(params=jQuery.extend(params,timePreferences(_egw)),_wnd.jQuery(_input).datetimepicker(params)):_wnd.jQuery(_input).datepicker(params)}function setupTime(_egw,_input){timepicker_translated||(translateTimepicker(),timepicker_translated=!0),_wnd.jQuery(_input).timepicker(timePreferences(_egw))}function translateCalendar(){var translate_fields={nextText:!1,currentText:!1,prevText:!1,closeText:!1,dayNames:!1,dayNamesShort:3,dayNamesMin:2,monthNames:!1,monthNamesShort:3},regional={},full=[];for(var i in translate_fields){var trans=_wnd.jQuery.datepicker._defaults[i];if("string"==typeof trans)trans=egw().lang(trans);else{for(var key in trans)translate_fields[i]===!1?trans[key]=egw().lang(trans[key]):"indexOf"!=key&&(trans[key]=full[key].substr(0,translate_fields[i]));translate_fields[i]===!1&&(full=trans)}regional[i]=trans}_wnd.jQuery.datepicker.setDefaults(regional)}function translateTimepicker(){var translate_fields={timeOnlyTitle:!1,timeText:!1,hourText:!1,minuteText:!1,currentText:!1,closeText:!1},regional={};for(var i in translate_fields){var trans=_wnd.jQuery.timepicker._defaults[i];"string"==typeof trans&&(trans=egw().lang(trans)),regional[i]=trans}_wnd.jQuery.timepicker.setDefaults(regional)}var calendar_translated=!1,timepicker_translated=!1;return{calendar:function(_input,_time,_callback,_context){setupCalendar(this,_input,_time,_callback,_context)},time:function(_input,_callback,_context){setupTime(this,_input,_callback,_context)},dateTimeFormat:function(_php_format){return dateTimeFormat(_php_format)},week_start:function(date){var d=new Date(date),day=d.getUTCDay(),diff=0;switch(egw.preference("weekdaystarts","calendar")){case"Saturday":diff=6===day?0:0===day?-1:-(day+1);break;case"Monday":diff=0===day?-6:1-day;break;case"Sunday":default:diff=-day}return d.setUTCDate(d.getUTCDate()+diff),d}}}),egw.extend("data",egw.MODULE_APP_LOCAL,function(_app,_wnd){"use strict";function UID(_uid,_prefix){return _prefix=_prefix?_prefix:_app,_prefix+"::"+_uid}function _clearCache(_prefix){for(var indexes=[],i=0;i<window.localStorage.length;i++){var key=window.localStorage.key(i);if(0==key.indexOf(CACHE_KEY_PREFIX+_prefix)){var cached=JSON.parse(window.localStorage.getItem(key));cached.lastModification?indexes.push({key:key,lastModification:cached.lastModification}):window.localStorage.removeItem(key)}else if(0==key.indexOf(_prefix)){var cached=JSON.parse(window.localStorage.getItem(key));cached.timestamp?indexes.push({key:key,lastModification:cached.timestamp}):window.localStorage.removeItem(key)}}return _prefix&&0==indexes.length?_clearCache(""):indexes.length>0?(indexes.sort(function(a,b){return a.lastModification<b.lastModification?1:a.lastModification>b.lastModification?-1:0}),window.localStorage.removeItem(indexes.pop().key),1):indexes.length}function parseServerResponse(_result,_callback,_context,_execId,_widgetId){if((!_result||"undefined"==typeof _result.type)&&(_result&&"undefined"!=typeof _result.order&&"undefined"!=typeof _result.data||egw.debug("error","Invalid result for 'dataFetch'"),_result.lastModification&&(lastModification=_result.lastModification),_result.order&&_result.data)){if(!(_result.order.length&&_result.order[0]&&_result.order[0].indexOf&&0==_result.order[0].indexOf(_context.prefix)))for(var i=0;i<_result.order.length;i++)_result.order[i]=UID(_result.order[i],_context.prefix);for(var key in _result.data){var uid=UID(key,"object"==typeof _context&&null!=_context?_context.prefix:"");null===_result.data[key]&&("undefined"==typeof _context.refresh||_context.refresh&&!jQuery.inArray(key,_context.refresh))?egw.dataDeleteUID(uid):egw.dataStoreUID(uid,_result.data[key])}if(0==_result.order.length&&"object"==typeof _context&&_context.refresh)for(var i=0;i<_context.refresh.length;i++){var uid=UID(_context.refresh[i],_context.prefix);egw.dataStoreUID(uid,null),egw.dataDeleteUID(uid)}if(window.localStorage&&_context.prefix&&cacheCallback[_context.prefix]&&!_context.no_cache)for(var i=0;i<cacheCallback[_context.prefix].length;i++){var cc=cacheCallback[_context.prefix][i],cache_key=cc.callback.call(cc.context,_context);if(cache_key){cache_key=CACHE_KEY_PREFIX+_context.prefix+"::"+cache_key;try{for(var key in _result.data){var uid=UID(key,"object"==typeof _context&&null!=_context?_context.prefix:"");egw.dataUnregisterUID(uid,null,cache_key),egw.dataRegisterUID(uid,function(data,_uid){if(null==data){var cached=JSON.parse(window.localStorage[this])||!1;cached&&cached.order&&cached.order.indexOf(_uid)>=0&&(cached.order.splice(cached.order.indexOf(_uid),1),cached.total&&cached.total--,window.localStorage[this]=JSON.stringify(cached)),window.localStorage.removeItem(_uid)}else window.localStorage[_uid]=JSON.stringify({timestamp:(new Date).getTime(),data:data})},cache_key,_execId,_widgetId)}_result.data={},window.localStorage.setItem(cache_key,JSON.stringify(_result))}catch(e){if("QuotaExceededError"==e.name||"NS_ERROR_DOM_QUOTA_REACHED"==e.name){var count=_clearCache(_context.prefix);egw.debug("info","localStorage full, removed "+count+" stored datasets")}else egw.debug("warning","Tried to cache some data.  It did not work.",cache_key,e)}}}_callback&&_callback.call(_context,{order:_result.order,total:parseInt(_result.total),readonlys:_result.readonlys,rows:_result.rows,lastModification:lastModification})}}var KNOWN_UID_LIMIT=200,CACHE_LIFETIME=29,CACHE_KEY_PREFIX="cached_fetch_",lastModification=null,cacheCallback={};return{dataFetch:function(_execId,_queriedRange,_filters,_widgetId,_callback,_context,_knownUids){var lm=lastModification;"undefined"!=typeof _context.lastModification&&(lm=_context.lastModification),_queriedRange.no_data?lm=0xffffffffffff:_queriedRange.only_data&&(lm=0),"undefined"!=typeof _queriedRange.refresh&&("string"==typeof _queriedRange.refresh?_context.refresh=[_queriedRange.refresh]:_context.refresh=_queriedRange.refresh);var knownUids=_knownUids?_knownUids:egw.dataKnownUIDs(_context.prefix?_context.prefix:_app);if(knownUids>KNOWN_UID_LIMIT&&knownUids.slice("undefined"!=typeof _queriedRange.start?_queriedRange.start:0,KNOWN_UID_LIMIT),window.localStorage&&_context.prefix&&cacheCallback[_context.prefix])for(var i=0;i<cacheCallback[_context.prefix].length;i++){var cc=cacheCallback[_context.prefix][i],cache_key=cc.callback.call(cc.context,_context);if(cache_key){cache_key=CACHE_KEY_PREFIX+_context.prefix+"::"+cache_key;var cached=window.localStorage.getItem(cache_key);if(cached){cached=JSON.parse(cached);var needs_update=!0;cached.lastModification&&Date.now()/1e3-cached.lastModification<CACHE_LIFETIME&&(needs_update=!1),egw.debug("log","Data cached query from "+new Date(1e3*cached.lastModification)+": "+cache_key+"("+(needs_update?"will be":"will not be")+" updated)\nprocessing...");var no_cache=_context.no_cache;if(_context.no_cache=!0,parseServerResponse(cached,_callback,_context,_execId,_widgetId),_context.no_cache=no_cache,cc.notification&&cc.notification.call(cc.context,needs_update),!needs_update)return}}}_context.filters=jQuery.extend({},_filters);var request=egw.json(_app+".etemplate_widget_nextmatch.ajax_get_rows.etemplate",[_execId,_queriedRange,_filters,_widgetId,knownUids,lm],function(result){parseServerResponse(result,_callback,_context,_execId,_widgetId)},this,!0);request.sendRequest()},dataCacheRegister:function(prefix,callback_function,notice_function,context){"undefined"==typeof cacheCallback[prefix]&&(cacheCallback[prefix]=[]),cacheCallback[prefix].push({callback:callback_function,notification:notice_function||!1,context:context||null})},dataCacheUnregister:function(prefix,callback){if("undefined"!=typeof callback)for(var i=0;i<cacheCallback[prefix].length;i++)if(cacheCallback[prefix][i].callback==callback)return void cacheCallback[prefix].splice(i,1);cacheCallback[prefix]=[]}}}),egw.extend("data_storage",egw.MODULE_GLOBAL,function(_app,_wnd){var localStorage={},registeredCallbacks={};egw.registerJSONPlugin(function(type,res,req){return"undefined"!=typeof res.data.uid&&"undefined"!=typeof res.data.data?(this.dataStoreUID(res.data.uid,res.data.data),!0):void 0},egw,"data",!0);var queue={},MAX_AGE=3e5,CLEANUP_INTERVAL=3e4;return _wnd.setInterval(function(){var time=(new Date).getTime();for(var uid in localStorage)time-localStorage[uid].timestamp>MAX_AGE&&"undefined"==typeof registeredCallbacks[uid]&&(egw.dataUnregisterUID(uid),delete localStorage[uid])},CLEANUP_INTERVAL),{dataRegisterUID:function(_uid,_callback,_context,_execId,_widgetId){if("undefined"==typeof registeredCallbacks[_uid]&&(registeredCallbacks[_uid]=[]),registeredCallbacks[_uid].push({callback:_callback,context:_context?_context:null,execId:_execId,widgetId:_widgetId}),"undefined"!=typeof localStorage[_uid])localStorage[_uid].timestamp=(new Date).getTime(),_callback.call(_context,localStorage[_uid].data,_uid);else if(window.localStorage&&window.localStorage[_uid])localStorage[_uid]=JSON.parse(window.localStorage[_uid]),_callback.call(_context,localStorage[_uid].data,_uid);else if(_execId&&_widgetId){var hash=_execId.substring(0,50);if("undefined"==typeof queue[hash]){var self=this;queue[hash]={uids:[],timer:null},queue[hash].timer=window.setTimeout(function(){self.dataFetch(_execId,{start:0,num_rows:0,only_data:!0,refresh:queue[hash].uids},[],_widgetId,null,_context,null),delete queue[hash]},100)}var parts=_uid.split("::");parts.shift(),queue[hash].uids.push(parts.join("::"))}else this.debug("log","Data for uid "+_uid+" not available.")},dataUnregisterUID:function(_uid,_callback,_context){if(_callback=_callback?_callback:null,_context=_context?_context:null,"undefined"!=typeof registeredCallbacks[_uid]){for(var i=registeredCallbacks[_uid].length-1;i>=0;i--)_callback&&registeredCallbacks[_uid][i].callback!==_callback||_context&&registeredCallbacks[_uid][i].context!==_context||registeredCallbacks[_uid].splice(i,1);0===registeredCallbacks[_uid].length&&delete registeredCallbacks[_uid]}},dataHasUID:function(_uid){return"undefined"!=typeof localStorage[_uid]},dataGetUIDdata:function(_uid){return localStorage[_uid]},dataKnownUIDs:function(_prefix){var result=[];for(var key in localStorage){var parts=key.split("::");parts.shift()===_prefix&&localStorage[key].data&&result.push(parts.join("::"))}return result},dataStoreUID:function(_uid,_data){var timestamp=(new Date).getTime();if(localStorage[_uid]={timestamp:timestamp,data:_data},"undefined"!=typeof registeredCallbacks[_uid])for(var i=registeredCallbacks[_uid].length-1;i>=0;i--)try{registeredCallbacks[_uid][i].callback.call(registeredCallbacks[_uid][i].context,_data,_uid)}catch(e){registeredCallbacks[_uid].splice(i,1)}},dataDeleteUID:function(_uid){"undefined"!=typeof localStorage[_uid]&&(delete localStorage[_uid],this.dataUnregisterUID(_uid))},dataRefreshUID:function(_uid){if("undefined"==typeof localStorage[_uid])return!1;if("undefined"!=typeof registeredCallbacks[_uid]&&registeredCallbacks[_uid].length>0){var _execId=registeredCallbacks[_uid][0].execId,nextmatchId=registeredCallbacks[_uid][0].widgetId,uid=_uid.split("::"),context={prefix:uid.shift()};uid=uid.join("::");for(var filters={},i=0;i<registeredCallbacks[_uid].length;i++){var callback=registeredCallbacks[_uid][i];if("object"==typeof callback.context&&"object"==typeof callback.context.self&&"object"==typeof callback.context.self._filters){filters=callback.context.self._filters;break}}return this.dataFetch(_execId,{refresh:uid},filters,nextmatchId,!1,context,[uid]),!0}return!1},dataSearchUIDs:function(_uid){var matches={},f=function(_uid){if("undefined"==typeof matches[_uid]&&(matches[_uid]=[]),"undefined"!=typeof registeredCallbacks[_uid])for(var n=0;n<registeredCallbacks[_uid].length;++n){var callback=registeredCallbacks[_uid][n];"undefined"!=typeof callback.context&&"undefined"!=typeof callback.context.self&&"undefined"!=typeof callback.context.self._widget&&matches[_uid].push(callback.context.self._widget)}};if("object"==typeof _uid&&"RegExp"==_uid.constructor.name)for(var uid in localStorage)_uid.test(uid)&&f(uid);else"undefined"!=typeof localStorage[_uid]&&f(_uid);return matches},dataRefreshUIDs:function(_uid,_type){var uids=this.dataSearchUIDs(_uid),widgets=[],uids4widget=[];for(var uid in uids)for(var n=0;n<uids[uid].length;++n){var widget=uids[uid][n],idx=widgets.indexOf(widget);-1==idx&&(widgets.push(widget),idx=widgets.length-1);var nm_uid=uid.replace(RegExp("^"+widget.controller.dataStorePrefix+"::"),"");"undefined"==typeof uids4widget[idx]?uids4widget[idx]=[nm_uid]:uids4widget[idx].push(nm_uid)}for(var w=0;w<widgets.length;++w)widgets[w].refresh(uids4widget[w],_type);return widgets}}}),jQuery(function(){"use strict";function button_log(buttonId){if("clear_log"!=buttonId){var ajax=new egw_json_request("home.egw_tail.ajax_delete",[filename,"empty_log"==buttonId]);ajax.sendRequest(!0)}$j("#log").text("")}function refresh_log(){var ajax=new egw_json_request("home.egw_tail.ajax_chunk",[filename,log_tail_start]);ajax.sendRequest(!0,function(_data){if(_data.length){log_tail_start=_data.next;var log=$j("#log").append(_data.content.replace(/</g,"&lt;"));log.animate({scrollTop:log.prop("scrollHeight")-log.height()+20},500)}_data.size===!1?$j("#download_log").hide():$j("#download_log").show().attr("title",this.egw.lang("Size")+_data.size),_data.writable===!1?($j("#purge_log").hide(),$j("#empty_log").hide()):($j("#purge_log").show(),$j("#empty_log").show()),window.setTimeout(refresh_log,_data.length?200:2e3)})}function resize_log(){$j("#log").width(egw_getWindowInnerWidth()-20).height(egw_getWindowInnerHeight()-33)}var log_tail_start=0,filename=$j('pre[id^="log"]');"undefined"!=typeof filename&&filename.length>0&&(filename=filename.attr("data-filename")),jQuery('input[id^="clear_log"]').on("click",function(){button_log(this.getAttribute("id"))}),jQuery('input[id^="purge_log"]').on("click",function(){button_log(this.getAttribute("id"))}),jQuery('input[id^="empty_log"]').on("click",function(){button_log(this.getAttribute("id"))}),egw_LAB.wait(function(){$j(document).ready(function(){"undefined"!=typeof filename&&filename.length>0&&(resize_log(),refresh_log())}),$j(window).resize(resize_log)})}),function(){"use strict";function addInterfaceFunctions(prototype,interfaces){var ifaces="undefined"==typeof prototype._ifacefuncs?[]:prototype._ifacefuncs;
prototype._ifacefuncs=[];for(var i=0;i<interfaces.length;i++){var iface=interfaces[i];if(!(iface instanceof Interface))throw"Interfaces must be instance of Interface!";for(var key in iface)prototype._ifacefuncs.push(key)}for(var i=0;i<ifaces.length;i++)prototype._ifacefuncs.push(ifaces[i])}function addAttributeFunctions(prototype,_super){function _copyMerge(_new,_old){var result={};if("undefined"!=typeof _new)for(var key in _new)result[key]=_new[key];for(var key in _old)"undefined"==typeof result[key]&&(result[key]=_old[key]);return result}var attributes={};for(var key in prototype.attributes)attributes[key]=_copyMerge({},prototype.attributes[key]);for(var key in _super.attributes){var _old=_super.attributes[key];attributes[key]=_copyMerge(attributes[key],_old)}prototype._validate_attributes&&prototype._validate_attributes(attributes),prototype.attributes=attributes}function classExtend(interfaces,prop){function Class(){if(!initializing){for(var i=0;i<this._ifacefuncs.length;i++){var func=this._ifacefuncs[i];if("function"!=typeof this[func])throw"Trying to create abstract object, interface function '"+func+"' not implemented."}if(getMem_freeMem_trace){this.__OBJ_UID="obj_"+egw.uid();var className=this.className();tracedObjects[this.__OBJ_UID]={created:(new Date).getTime(),class:className},egw.debug("log","*"+this.__OBJ_UID+" ("+className+")")}this.init&&this.init.apply(this,arguments)}}"undefined"==typeof prop&&(prop=interfaces,interfaces=[]),interfaces instanceof Array||(interfaces=[interfaces]),"undefined"==typeof prop.attributes&&(prop.attributes={});var _super=this.prototype;initializing=!0;var prototype=new this;initializing=!1;for(var name in prop)"function"==typeof prop[name]&&"function"==typeof _super[name]&&fnTest.test(prop[name])?prototype[name]=function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);return this._super=tmp,ret}}(name,prop[name]):prototype[name]=prop[name];return addInterfaceFunctions(prototype,interfaces),addAttributeFunctions(prototype,_super),Class.prototype=prototype,Class.prototype.constructor=Class,Class.extend=classExtend,Class}var initializing=!1,getMem_freeMem_trace=!1,tracedObjects={},fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Interface=function(fncts){for(var key in fncts)this[key]=fncts[key]},this.Class=function(){},Class.extend=classExtend,Class.prototype.attributes={},Class.prototype._ifacefuncs=[],Class.prototype.free=function(){this.destroy&&this.destroy(),getMem_freeMem_trace&&(delete tracedObjects[this.__OBJ_UID],egw.debug("log","-"+this.__OBJ_UID));for(var key in this)delete this[key];this.free=function(){}},getMem_freeMem_trace&&(Class.prototype.showTrace=function(){console.log(tracedObjects)},Class.prototype.className=function(){for(var key in window)if("et2"==key.substr(0,3)&&this.constructor==window[key])return key;return"?"}),Class.prototype.implements=function(_iface){for(var key in _iface)if(this._ifacefuncs.indexOf(key)<0)return!1;return!0},Class.prototype.instanceOf=function(_obj){return _obj instanceof Interface?this.implements(_obj):this instanceof _obj}}.call(window),egw.extend("message",egw.MODULE_WND_LOCAL,function(_app,_wnd){"use strict";function html_entity_decode(_str){return _str&&-1!=_str.indexOf("&")?jQuery("<span>"+_str+"</span>").text():_str}var message_timer,error_reg_exp,a_href_reg=/<a href="([^"]+)">([^<]+)<\/a>/gim,new_line_reg=/<\/?(p|br)\s*\/?>\n?/gi;return this.registerJSONPlugin(function(type,res,req){if("string"==typeof res.data)return egw.message(res.data,"error"),!0;throw"Invalid parameters"},null,"error"),{message:function(_msg,_type,_discard){var jQuery=_wnd.jQuery;if(_msg&&!_type&&("undefined"==typeof error_reg_exp&&(error_reg_exp=new RegExp("(error|"+egw.lang("error")+")","i")),_type=_msg.match(error_reg_exp)?"error":"success"),!this.is_popup()&&_wnd!==_wnd.top)return void egw(_wnd.top).message(_msg,_type);message_timer&&(_wnd.clearTimeout(message_timer),message_timer=null);var parent=jQuery("div#divAppboxHeader");if(parent.length&&!parent.hasClass("onlyPrint")||(parent=jQuery("body")),jQuery("div#egw_message").remove(),_msg){_msg=_msg.replace(new_line_reg,"\n");var msg_div=jQuery(_wnd.document.createElement("div")).attr("id","egw_message").text(_msg).addClass(_type+"_message").click(function(){if("info"==_type&&_discard&&msg_chkbox&&msg_chkbox.is(":checked")){var discarded=egw.getLocalStorageItem(egw.app_name(),"discardedMsgs");isDiscarded(_msg)||(discarded?jQuery.isArray(JSON.parse(discarded))&&discarded.push(_msg):discarded=[_msg],egw.setLocalStorageItem(egw.app_name(),"discardedMsgs",JSON.stringify(discarded)))}$j(this).remove()}).css("position","absolute");if(_discard&&"info"===_type){var isDiscarded=function(_msg){var discarded=JSON.parse(egw.getLocalStorageItem(egw.app_name(),"discardedMsgs"));if(jQuery.isArray(discarded))for(var i=0;i<discarded.length;i++)if(discarded[i]===_msg)return!0;return!1},msg_discard=jQuery(_wnd.document.createElement("div")).addClass("discard"),msg_chkbox=jQuery(_wnd.document.createElement("input")).attr({type:"checkbox",name:"msgChkbox"}).click(function(e){e.stopImmediatePropagation()}).appendTo(msg_discard);if(jQuery(_wnd.document.createElement("label")).text(egw.lang("Don't show this again")).css({"font-weight":"bold"}).attr({for:"msgChkbox"}).appendTo(msg_discard),isDiscarded(_msg))return;msg_div.append(msg_discard)}parent.prepend(msg_div);var matches=a_href_reg.exec(_msg);if(matches){var parts=_msg.split(matches[0]),href=html_entity_decode(matches[1]);msg_div.text(parts[0]),msg_div.append(jQuery(_wnd.document.createElement("a")).attr({href:href,target:0!=href.indexOf(egw.webserverUrl)?"_blank":"_self"}).text(matches[2])),msg_div.append(jQuery(_wnd.document.createElement("span")).text(parts[1]))}msg_div.css("right",(jQuery(_wnd).innerWidth()-msg_div.width())/2+"px"),"success"==_type&&(message_timer=_wnd.setTimeout(function(){jQuery("div#egw_message").remove()},5e3))}},is_popup:function(){var popup=!1;try{_wnd.opener&&_wnd.opener!=_wnd&&"function"==typeof _wnd.opener.top.egw&&(popup=!0)}catch(e){}return popup},app_name:function(){return!this.is_popup()&&_wnd.framework&&_wnd.framework.activeApp?_wnd.framework.activeApp.appName:_wnd.egw_appName},app_header:function(_header,_app){if(!this.is_popup()&&_wnd.framework&&_wnd.framework.setWebsiteTitle){var app=_app||this.app_name(),title=_wnd.document.title.replace(/[.*]$/,"["+_header+"]");return void _wnd.framework.setWebsiteTitle.call(_wnd.framework,app,title,_header)}_wnd.jQuery("div#divAppboxHeader").text(_header),_wnd.document.title=_wnd.document.title.replace(/[.*]$/,"["+_header+"]")},loading_prompt:function(_id,_stat,_msg,_node,_mode){var $container="",id="egw-loadin-prompt_"+_id||"egw-loading-prompt_1",mode=_mode||"spinner";if(_stat){var $node=jQuery(_node)||jQuery("body"),$container=jQuery(document.createElement("div")).attr("id",id).addClass("egw-loading-prompt-container ui-front");jQuery(document.createElement("span")).addClass("egw-loading-prompt-"+mode+"-msg").text(_msg).appendTo($container),jQuery(document.createElement("div")).addClass("egw-loading-prompt-"+mode+"-animator").appendTo($container);return $container.insertBefore($node),$container}return $container=jQuery("#"+id),$container.length>0&&$container.remove(),null},refresh:function(_msg,_app,_id,_type,_targetapp,_replace,_with,_msg_type,_links){this.debug("log","egw_refresh(%s, %s, %s, %o, %s, %s)",_msg,_app,_id,_type,_targetapp,_replace,_with,_msg_type,_links);var win="undefined"!=typeof _targetapp?_wnd.egw_appWindow(_targetapp):_wnd;this.message(_msg,_msg_type),"undefined"==typeof _links&&(_links=[]);var no_regular_refresh=!1;for(var app in _wnd.egw.window.app){var app_obj=_wnd.egw.window.app[app];"function"==typeof app_obj.observer&&app_obj.observer(_msg,_app,_id,_type,_msg_type,_links)===!1&&app===_app&&(no_regular_refresh=!0)}if(!no_regular_refresh&&(!win.framework||!win.framework.refresh||(win=win.framework.refresh(_msg,_app,_id,_type,_targetapp,_replace,_with,_msg_type)))){if("function"==typeof win.app_refresh&&"undefined"==typeof win.app_refresh.registered||"undefined"!=typeof win.app_refresh&&win.app_refresh.registered(_app))return void win.app_refresh(_msg,_app,_id,_type);if("undefined"!=typeof win.etemplate2&&win.etemplate2.app_refresh){var refresh_done=win.etemplate2.app_refresh(_msg,_app,_id,_type);if((_targetapp||this.app_name())!=_app&&(refresh_done=win.etemplate2.app_refresh(_msg,_targetapp||this.app_name())||refresh_done),refresh_done)return}var href=win.location.href;"undefined"!=typeof _replace&&(href=href.replace("string"==typeof _replace?new RegExp(_replace):_replace,"undefined"!=typeof _with&&null!=_with?_with:"")),-1!=href.indexOf("msg=")?href=href.replace(/msg=[^&]*/,"msg="+encodeURIComponent(_msg)):_msg&&(href+=(-1!=href.indexOf("?")?"&":"?")+"msg="+encodeURIComponent(_msg)),win.location.href=href}}}}),function(){"use strict";function lib$es6$promise$utils$$objectOrFunction(x){return"function"==typeof x||"object"==typeof x&&null!==x}function lib$es6$promise$utils$$isFunction(x){return"function"==typeof x}function lib$es6$promise$utils$$isMaybeThenable(x){return"object"==typeof x&&null!==x}function lib$es6$promise$asap$$setScheduler(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn}function lib$es6$promise$asap$$setAsap(asapFn){lib$es6$promise$asap$$asap=asapFn}function lib$es6$promise$asap$$useNextTick(){return function(){process.nextTick(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useVertxTimer(){return function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useMutationObserver(){var iterations=0,observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush),node=document.createTextNode("");return observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}}function lib$es6$promise$asap$$useMessageChannel(){var channel=new MessageChannel;return channel.port1.onmessage=lib$es6$promise$asap$$flush,function(){channel.port2.postMessage(0)}}function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1)}}function lib$es6$promise$asap$$flush(){for(var i=0;lib$es6$promise$asap$$len>i;i+=2){var callback=lib$es6$promise$asap$$queue[i],arg=lib$es6$promise$asap$$queue[i+1];callback(arg),lib$es6$promise$asap$$queue[i]=void 0,lib$es6$promise$asap$$queue[i+1]=void 0}lib$es6$promise$asap$$len=0}function lib$es6$promise$asap$$attemptVertx(){try{var r=require,vertx=r("vertx");return lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext,lib$es6$promise$asap$$useVertxTimer()}catch(e){return lib$es6$promise$asap$$useSetTimeout()}}function lib$es6$promise$$internal$$noop(){}function lib$es6$promise$$internal$$selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function lib$es6$promise$$internal$$cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function lib$es6$promise$$internal$$getThen(promise){try{return promise.then}catch(error){return lib$es6$promise$$internal$$GET_THEN_ERROR.error=error,lib$es6$promise$$internal$$GET_THEN_ERROR}}function lib$es6$promise$$internal$$tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function lib$es6$promise$$internal$$handleForeignThenable(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=!1,error=lib$es6$promise$$internal$$tryThen(then,thenable,function(value){sealed||(sealed=!0,thenable!==value?lib$es6$promise$$internal$$resolve(promise,value):lib$es6$promise$$internal$$fulfill(promise,value))},function(reason){sealed||(sealed=!0,lib$es6$promise$$internal$$reject(promise,reason))},"Settle: "+(promise._label||" unknown promise"));!sealed&&error&&(sealed=!0,lib$es6$promise$$internal$$reject(promise,error))},promise)}function lib$es6$promise$$internal$$handleOwnThenable(promise,thenable){thenable._state===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,thenable._result):thenable._state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,thenable._result):lib$es6$promise$$internal$$subscribe(thenable,void 0,function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable){if(maybeThenable.constructor===promise.constructor)lib$es6$promise$$internal$$handleOwnThenable(promise,maybeThenable);else{var then=lib$es6$promise$$internal$$getThen(maybeThenable);then===lib$es6$promise$$internal$$GET_THEN_ERROR?lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error):void 0===then?lib$es6$promise$$internal$$fulfill(promise,maybeThenable):lib$es6$promise$utils$$isFunction(then)?lib$es6$promise$$internal$$handleForeignThenable(promise,maybeThenable,then):lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}}function lib$es6$promise$$internal$$resolve(promise,value){promise===value?lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$selfFulfillment()):lib$es6$promise$utils$$objectOrFunction(value)?lib$es6$promise$$internal$$handleMaybeThenable(promise,value):lib$es6$promise$$internal$$fulfill(promise,value)}function lib$es6$promise$$internal$$publishRejection(promise){promise._onerror&&promise._onerror(promise._result),lib$es6$promise$$internal$$publish(promise)}function lib$es6$promise$$internal$$fulfill(promise,value){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._result=value,promise._state=lib$es6$promise$$internal$$FULFILLED,0!==promise._subscribers.length&&lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,promise))}function lib$es6$promise$$internal$$reject(promise,reason){promise._state===lib$es6$promise$$internal$$PENDING&&(promise._state=lib$es6$promise$$internal$$REJECTED,promise._result=reason,lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection,promise))}function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers,length=subscribers.length;parent._onerror=null,subscribers[length]=child,subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment,subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection,0===length&&parent._state&&lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent)}function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child,callback,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function lib$es6$promise$$internal$$ErrorObject(){this.error=null}function lib$es6$promise$$internal$$tryCatch(callback,detail){try{return callback(detail)}catch(e){return lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e,lib$es6$promise$$internal$$TRY_CATCH_ERROR}}function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var value,error,succeeded,failed,hasCallback=lib$es6$promise$utils$$isFunction(callback);if(hasCallback){if(value=lib$es6$promise$$internal$$tryCatch(callback,detail),value===lib$es6$promise$$internal$$TRY_CATCH_ERROR?(failed=!0,error=value.error,value=null):succeeded=!0,promise===value)return void lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$cannotReturnOwn())}else value=detail,succeeded=!0;promise._state!==lib$es6$promise$$internal$$PENDING||(hasCallback&&succeeded?lib$es6$promise$$internal$$resolve(promise,value):failed?lib$es6$promise$$internal$$reject(promise,error):settled===lib$es6$promise$$internal$$FULFILLED?lib$es6$promise$$internal$$fulfill(promise,value):settled===lib$es6$promise$$internal$$REJECTED&&lib$es6$promise$$internal$$reject(promise,value))}function lib$es6$promise$$internal$$initializePromise(promise,resolver){try{resolver(function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}catch(e){lib$es6$promise$$internal$$reject(promise,e)}}function lib$es6$promise$enumerator$$Enumerator(Constructor,input){var enumerator=this;enumerator._instanceConstructor=Constructor,enumerator.promise=new Constructor(lib$es6$promise$$internal$$noop),enumerator._validateInput(input)?(enumerator._input=input,enumerator.length=input.length,enumerator._remaining=input.length,enumerator._init(),0===enumerator.length?lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result):(enumerator.length=enumerator.length||0,enumerator._enumerate(),0===enumerator._remaining&&lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result))):lib$es6$promise$$internal$$reject(enumerator.promise,enumerator._validationError())}function lib$es6$promise$promise$all$$all(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise}function lib$es6$promise$promise$race$$race(entries){function onFulfillment(value){lib$es6$promise$$internal$$resolve(promise,value)}function onRejection(reason){lib$es6$promise$$internal$$reject(promise,reason)}var Constructor=this,promise=new Constructor(lib$es6$promise$$internal$$noop);if(!lib$es6$promise$utils$$isArray(entries))return lib$es6$promise$$internal$$reject(promise,new TypeError("You must pass an array to race.")),promise;for(var length=entries.length,i=0;promise._state===lib$es6$promise$$internal$$PENDING&&length>i;i++)lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]),void 0,onFulfillment,onRejection);return promise}function lib$es6$promise$promise$resolve$$resolve(object){var Constructor=this;if(object&&"object"==typeof object&&object.constructor===Constructor)return object;var promise=new Constructor(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$resolve(promise,object),promise}function lib$es6$promise$promise$reject$$reject(reason){var Constructor=this,promise=new Constructor(lib$es6$promise$$internal$$noop);return lib$es6$promise$$internal$$reject(promise,reason),promise}function lib$es6$promise$promise$$needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function lib$es6$promise$promise$$needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function lib$es6$promise$promise$$Promise(resolver){this._id=lib$es6$promise$promise$$counter++,this._state=void 0,this._result=void 0,this._subscribers=[],lib$es6$promise$$internal$$noop!==resolver&&(lib$es6$promise$utils$$isFunction(resolver)||lib$es6$promise$promise$$needsResolver(),this instanceof lib$es6$promise$promise$$Promise||lib$es6$promise$promise$$needsNew(),lib$es6$promise$$internal$$initializePromise(this,resolver))}function lib$es6$promise$polyfill$$polyfill(){var local;if("undefined"!=typeof global)local=global;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;P&&"[object Promise]"===Object.prototype.toString.call(P.resolve())&&!P.cast||(local.Promise=lib$es6$promise$promise$$default)}var lib$es6$promise$utils$$_isArray;lib$es6$promise$utils$$_isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)};var lib$es6$promise$asap$$vertxNext,lib$es6$promise$asap$$customSchedulerFn,lib$es6$promise$asap$$scheduleFlush,lib$es6$promise$utils$$isArray=lib$es6$promise$utils$$_isArray,lib$es6$promise$asap$$len=0,lib$es6$promise$asap$$asap=({}.toString,function(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback,lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg,lib$es6$promise$asap$$len+=2,2===lib$es6$promise$asap$$len&&(lib$es6$promise$asap$$customSchedulerFn?lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush):lib$es6$promise$asap$$scheduleFlush())}),lib$es6$promise$asap$$browserWindow="undefined"!=typeof window?window:void 0,lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{},lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver,lib$es6$promise$asap$$isNode="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),lib$es6$promise$asap$$isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,lib$es6$promise$asap$$queue=new Array(1e3);lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$isNode?lib$es6$promise$asap$$useNextTick():lib$es6$promise$asap$$BrowserMutationObserver?lib$es6$promise$asap$$useMutationObserver():lib$es6$promise$asap$$isWorker?lib$es6$promise$asap$$useMessageChannel():void 0===lib$es6$promise$asap$$browserWindow&&"function"==typeof require?lib$es6$promise$asap$$attemptVertx():lib$es6$promise$asap$$useSetTimeout();var lib$es6$promise$$internal$$PENDING=void 0,lib$es6$promise$$internal$$FULFILLED=1,lib$es6$promise$$internal$$REJECTED=2,lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject,lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject;lib$es6$promise$enumerator$$Enumerator.prototype._validateInput=function(input){return lib$es6$promise$utils$$isArray(input)},lib$es6$promise$enumerator$$Enumerator.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},lib$es6$promise$enumerator$$Enumerator.prototype._init=function(){this._result=new Array(this.length)};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){for(var enumerator=this,length=enumerator.length,promise=enumerator.promise,input=enumerator._input,i=0;promise._state===lib$es6$promise$$internal$$PENDING&&length>i;i++)enumerator._eachEntry(input[i],i)},lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var enumerator=this,c=enumerator._instanceConstructor;lib$es6$promise$utils$$isMaybeThenable(entry)?entry.constructor===c&&entry._state!==lib$es6$promise$$internal$$PENDING?(entry._onerror=null,enumerator._settledAt(entry._state,i,entry._result)):enumerator._willSettleAt(c.resolve(entry),i):(enumerator._remaining--,enumerator._result[i]=entry)},lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var enumerator=this,promise=enumerator.promise;promise._state===lib$es6$promise$$internal$$PENDING&&(enumerator._remaining--,state===lib$es6$promise$$internal$$REJECTED?lib$es6$promise$$internal$$reject(promise,value):enumerator._result[i]=value),0===enumerator._remaining&&lib$es6$promise$$internal$$fulfill(promise,enumerator._result)},lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,void 0,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value)},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason)})};var lib$es6$promise$promise$all$$default=lib$es6$promise$promise$all$$all,lib$es6$promise$promise$race$$default=lib$es6$promise$promise$race$$race,lib$es6$promise$promise$resolve$$default=lib$es6$promise$promise$resolve$$resolve,lib$es6$promise$promise$reject$$default=lib$es6$promise$promise$reject$$reject,lib$es6$promise$promise$$counter=0,lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;lib$es6$promise$promise$$Promise.all=lib$es6$promise$promise$all$$default,lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default,lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default,lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default,lib$es6$promise$promise$$Promise._setScheduler=lib$es6$promise$asap$$setScheduler,lib$es6$promise$promise$$Promise._setAsap=lib$es6$promise$asap$$setAsap,lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap,lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:function(onFulfillment,onRejection){var parent=this,state=parent._state;if(state===lib$es6$promise$$internal$$FULFILLED&&!onFulfillment||state===lib$es6$promise$$internal$$REJECTED&&!onRejection)return this;var child=new this.constructor(lib$es6$promise$$internal$$noop),result=parent._result;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,result)})}else lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection);return child},catch:function(onRejection){return this.then(null,onRejection)}};var lib$es6$promise$polyfill$$default=lib$es6$promise$polyfill$$polyfill,lib$es6$promise$umd$$ES6Promise={Promise:lib$es6$promise$promise$$default,polyfill:lib$es6$promise$polyfill$$default};"function"==typeof define&&define.amd?define(function(){return lib$es6$promise$umd$$ES6Promise}):"undefined"!=typeof module&&module.exports?module.exports=lib$es6$promise$umd$$ES6Promise:"undefined"!=typeof this&&(this.ES6Promise=lib$es6$promise$umd$$ES6Promise),lib$es6$promise$polyfill$$default()}.call(this),window.app={classes:{}};var AppJS=function(){"use strict";return Class.extend({appname:"",et2:null,egw:null,init:function(){if(window.app[this.appname]=this,this.egw=egw(this.appname,window),!this.egw.is_popup()){var sidebox=jQuery("#favorite_sidebox_"+this.appname);if(0==sidebox.length&&null!=egw_getFramework()){var egw_fw=egw_getFramework();sidebox=$j("#favorite_sidebox_"+this.appname,egw_fw.sidemenuDiv)}window.top.app[this.appname]!==this&&window.top.app[this.appname]?window.top.app[this.appname]._init_sidebox(sidebox):this._init_sidebox(sidebox)}},destroy:function(){delete this.et2,this.sidebox&&this.sidebox.off(),delete this.sidebox,delete window.app[this.appname]},et2_ready:function(et2,name){null!==this.et2&&egw.debug("log","Changed et2 object"),this.et2=et2.widgetContainer,this._fix_iFrameScrolling(),this.egw&&this.egw.is_popup()&&this._set_Window_title(),this.highlight_favorite()},observer:function(_msg,_app,_id,_type,_msg_type,_links){},open:function(_action,_senders){var id_app=_senders[0].id.split("::");egw.open(id_app[1],this.appname)},action:function(_action,_elems){var select_all=_action.getManager().getActionById("select_all"),confirm_msg=(_elems.length>1||select_all&&select_all.checked)&&"undefined"!=typeof _action.data.confirm_multiple?_action.data.confirm_multiple:_action.data.confirm;if("undefined"!=typeof confirm_msg){var that=this,action_id=_action.id;et2_dialog.show_dialog(function(button_id,value){button_id!=et2_dialog.NO_BUTTON&&that._do_action(action_id,_elems)},confirm_msg,egw.lang("Confirmation required"),et2_dialog.BUTTONS_YES_NO,et2_dialog.QUESTION_MESSAGE)}else if("function"==typeof this._do_action)this._do_action(_action.id,_elems);else{for(var nm=null,action=_action;null==nm&&null!=action.parent;)action.data.nextmatch&&(nm=action.data.nextmatch),action=action.parent;if(null!=nm){var value={};value[nm.options.settings.action_var]=_action.id,nm.set_value(value),nm.getInstanceManager().submit()}}},setState:function(state,template){if("string"==typeof state&&(-1==state.indexOf("{")&&"null"!=state||(state=JSON.parse(state))),"object"!=typeof state)return void egw.debug("error","Unable to set state to %o, needs to be an object",state);if(null==state&&(state={}),state.state&&state.state.id&&state.state.app)return egw.open(state.state,void 0,void 0,{},"_self");for(var nextmatched=!1,et2=template?etemplate2.getByTemplate(template):etemplate2.getByApplication(this.appname),i=0;i<et2.length;i++)if(et2[i].widgetContainer.iterateOver(function(_widget){state.state&&state.state.search&&(state.state.search=unescape(state.state.search)),state.state&&state.state.sort&&state.state.sort.id&&_widget.sortBy(state.state.sort.id,state.state.sort.asc,!1),state.state&&state.state.selectcols&&_widget.set_columns(jQuery.extend([],state.state.selectcols)),_widget.applyFilters(state.state||state.filter||{}),nextmatched=!0},this,et2_nextmatch),nextmatched)return!1;var safe_name=jQuery.isEmptyObject(state)||jQuery.isEmptyObject(state.state||state.filter)?"blank":state.name.replace(/[^A-Za-z0-9-_]/g,"_"),url="/"+this.appname+"/index.php";return egw.link_get_registry(this.appname,"list")?url=egw.link("/index.php",jQuery.extend({favorite:safe_name},egw.link_get_registry(this.appname,"list"))):egw.app(this.appname).index&&(url=egw.link("/index.php","menuaction="+egw.app(this.appname).index+"&favorite="+safe_name)),egw.open_link(url,void 0,void 0,this.appname),!1},getState:function(){for(var state={},et2=etemplate2.getByApplication(this.appname),i=0;i<et2.length;i++)et2[i].widgetContainer.iterateOver(function(_widget){state=_widget.getValue()},this,et2_nextmatch);return state},viewEntry:function(_action,_senders){var id=_senders[0].id,id_app="",content={},self=this;id&&(id_app=id.split("::"),content=egw.dataGetUIDdata(id),content.data&&(content=content.data));var destroy=function(){self.viewContainer.remove(),delete self.viewTemplate,delete self.viewContainer};this.viewContainer=jQuery(document.createElement("div")).addClass("et2_mobile_view").css({"z-index":102,width:"100%",height:"100%",background:"white",display:"block",position:"fixed",top:0,left:0,bottom:0,right:0,overflow:"auto",padding:"60px 0 10px 0"}).attr("id","popupMainDiv").appendTo("body");jQuery(document.createElement("span")).addClass("egw_fw_mobile_popup_close loaded").click(function(){destroy()}).appendTo(this.viewContainer),jQuery(document.createElement("span")).addClass("mobile-view-editBtn").click(function(){egw.open(id_app[1],self.appname)}).text(egw.lang("Edit")).appendTo(this.viewContainer);this.viewTemplate=jQuery(document.createElement("div")).attr("id",this.appname+"-view").addClass("et2_mobile-view-container").appendTo(this.viewContainer);var templateName=_action.data.mobileViewTemplate||"edit.xet",etemplate=new etemplate2(this.viewTemplate[0],!1),template=egw.webserverUrl+"/"+this.appname+"/templates/mobile/"+templateName+"?1",data={content:content,readonlys:{__ALL__:!0,link_to:!1},currentapp:id_app[0]};template.indexOf(".xet")>0?etemplate.load("",template,data,function(){}):etemplate.load(template,"",data)},_init_sidebox:function(sidebox){if(!this.egw.is_popup()){var egw_fw=egw_getFramework(),tutorial=$j("#egw_tutorial_"+this.appname+"_sidebox",egw_fw?egw_fw.sidemenuDiv:document);tutorial.length&&!this.tutorial_initialised&&(this.egwTutorial_init(tutorial[0]),this.tutorial_initialised=!0)}if(sidebox.length){var self=this;this.sidebox&&this.sidebox.off(),this.sidebox=sidebox,sidebox.off().on("click.sidebox","div.ui-icon-trash",this,this.delete_favorite).on("click.sidebox","li[data-id]",this,function(event){var li=$j(this);li.siblings().removeClass("ui-state-highlight"),"blank"!==li.attr("data-id")&&window.setTimeout(function(){li.addClass("ui-state-highlight")},50);var state={},pref=egw.preference("favorite_"+this.dataset.id,self.appname);return pref&&jQuery.extend(!0,state,pref),"add"!=this.dataset.id?(event.stopImmediatePropagation(),self.setState.call(self,state),!1):void 0}).addClass("ui-helper-clearfix"),jQuery("ul","#favorite_sidebox_"+this.appname).sortable({items:'li:not([data-id$="add"])',placeholder:"ui-fav-sortable-placeholder",delay:250,helper:function(event,item){item.attr("data-appname",self.appname);var h_parent=item.parent().parent().clone();return h_parent.find("li").not('[data-id="'+item.attr("data-id")+'"]').remove(),h_parent.appendTo("body"),
h_parent},refreshPositions:!0,update:function(event,ui){var favSortedList=jQuery(this).sortable("toArray",{attribute:"data-id"});self.egw.set_preference(self.appname,"fav_sort_pref",favSortedList),self._refresh_fav_nm()}});var egw_fw=egw_getFramework();return egw_fw&&egw_fw.applications[this.appname]&&egw_fw.applications[this.appname].browser&&egw_fw.applications[this.appname].browser.baseDiv&&$j(egw_fw.applications[this.appname].browser.baseDiv).off(".sidebox").on("change.sidebox",function(){self.highlight_favorite()}),!0}return!1},add_favorite:function(state){"undefined"==typeof this.favorite_popup&&this._create_favorite_popup(),this.favorite_popup.state=jQuery.extend({},this.getState(),state||{}),this.favorite_popup.state=jQuery.extend(!0,{},this.favorite_popup.state);var filter_list=[],add_to_popup=function(arr){filter_list.push("<ul>"),jQuery.each(arr,function(index,filter){filter_list.push("<li id='index'><span class='filter_id'>"+index+"</span>"+("object"!=typeof filter?"<span class='filter_value'>"+filter+"</span>":"")),"object"==typeof filter&&null!=filter&&add_to_popup(filter),filter_list.push("</li>")}),filter_list.push("</ul>")};return add_to_popup(this.favorite_popup.state),$j("#"+this.appname+"_favorites_popup_state",this.favorite_popup).replaceWith($j(filter_list.join("")).attr("id",this.appname+"_favorites_popup_state")),$j("#"+this.appname+"_favorites_popup_state",this.favorite_popup).hide().siblings(".ui-icon-circle-plus").removeClass("ui-icon-circle-minus"),this.favorite_popup.dialog("open"),console.log(this),!1},_refresh_fav_nm:function(){var self=this;if(!etemplate2||!etemplate2.getByApplication)throw new Error("_refresh_fav_nm():Either et2 is  not ready/ not there yet. Make sure that etemplate2 is ready before call this method.");for(var et2=etemplate2.getByApplication(self.appname),i=0;i<et2.length;i++)et2[i].widgetContainer.iterateOver(function(_widget){_widget.stored_filters=_widget.load_favorites(self.appname),_widget.init_filters(_widget)},self,et2_favorites)},_create_favorite_popup:function(){var self=this,favorite_prefix="favorite_";this.favorite_popup&&this.favorite_popup.group&&(this.favorite_popup.group.free(),delete this.favorite_popup),this.favorite_popup=$j('<div id="'+this.dom_id+'_nm_favorites_popup" title="'+egw().lang("New favorite")+'">			<form>			<label for="name">'+this.egw.lang("name")+'</label><input type="text" name="name" id="name"/>			<div id="'+this.appname+'_favorites_popup_admin"/>			<span>'+this.egw.lang("Details")+'</span><span style="float:left;" class="ui-icon ui-icon-circle-plus ui-button" />			<ul id="'+this.appname+'_favorites_popup_state"/>			</form>			</div>').appendTo(this.et2&&"calendar"!=this.appname?this.et2.getDOMNode():$j("body")),$j(".ui-icon-circle-plus",this.favorite_popup).prev().andSelf().click(function(){$j("#"+self.appname+"_favorites_popup_state",self.favorite_popup).slideToggle().siblings(".ui-icon-circle-plus").toggleClass("ui-icon-circle-minus")});var apps=egw().user("apps"),is_admin="undefined"!=typeof apps.admin;is_admin&&(this.favorite_popup.group=et2_createWidget("select-account",{id:"favorite[group]",account_type:"groups",empty_label:"Groups",no_lang:!0,parent_node:this.appname+"_favorites_popup_admin"},this.et2&&"calendar"!=this.appname?this.et2:null),this.favorite_popup.group.loadingFinished());var buttons={};return buttons.save={text:this.egw.lang("save"),default:!0,click:function(){var name=$j("#name",this);if(name.val()){name.val(name.val().replace(/(<([^>]+)>)/gi,""));var safe_name=name.val().replace(/[^A-Za-z0-9-_]/g,"_"),favorite={name:name.val(),group:"undefined"!=typeof self.favorite_popup.group&&self.favorite_popup.group.get_value()?self.favorite_popup.group.get_value():!1,state:self.favorite_popup.state},favorite_pref=favorite_prefix+safe_name;if("undefined"!=typeof self.favorite_popup.group&&""!=self.favorite_popup.group.getValue()?(self.egw.jsonq(self.appname+".egw_framework.ajax_set_favorite.template",[self.appname,name.val(),"add",self.favorite_popup.group.get_value(),self.favorite_popup.state]),self.favorite_popup.group.set_value("")):self.egw.set_preference(self.appname,favorite_pref,favorite),self.sidebox){$j('[data-id="'+safe_name+'"]',self.sidebox).remove();var html="<li data-id='"+safe_name+"' data-group='"+favorite.group+"' class='ui-menu-item' role='menuitem'>\n",href="javascript:app."+self.appname+".setState("+JSON.stringify(favorite)+");";html+="<a href='"+href+"' class='ui-corner-all' tabindex='-1'>",html+="<div class='sideboxstar'></div>"+favorite.name,html+="<div class='ui-icon ui-icon-trash' title='"+egw.lang("Delete")+"'/>",html+="</a></li>\n",$j(html).insertBefore($j("li",self.sidebox).last()),self._init_sidebox(self.sidebox)}self._refresh_fav_nm()}delete self.favorite_popup.state,name.val(""),$j("#filters",self.favorite_popup).empty(),$j(this).dialog("close")}},buttons[this.egw.lang("cancel")]=function(){"undefined"!=typeof self.favorite_popup.group&&self.favorite_popup.group.set_value&&self.favorite_popup.group.set_value(null),$j(this).dialog("close")},this.favorite_popup.dialog({autoOpen:!1,modal:!0,buttons:buttons,close:function(){}}),this.favorite_popup.off("keydown").on("keydown",jQuery.proxy(function(e){var tagName=e.target.tagName.toLowerCase();return tagName="input"===tagName&&"button"===e.target.type?"button":tagName,e.keyCode==jQuery.ui.keyCode.ENTER&&"textarea"!==tagName&&"select"!==tagName&&"button"!==tagName?(e.preventDefault(),$j("button[default]",this.favorite_popup.parent()).trigger("click"),!1):void 0},this)),!1},delete_favorite:function(event){event.stopImmediatePropagation();var app=event.data,id=$j(this).parentsUntil("li").parent().attr("data-id"),group=$j(this).parentsUntil("li").parent().attr("data-group")||"",line=$j('li[data-id="'+id+'"]',app.sidebox),name=line.first().text(),trash=this;line.addClass("loading");var do_delete=function(button_id){if(button_id!=et2_dialog.YES_BUTTON)return void line.removeClass("loading");$j(trash).hide();var request=egw.json(app.appname+".egw_framework.ajax_set_favorite.template",[app.appname,id,"delete",group,""],function(result){result.type||(result&&"boolean"==typeof result?(line.slideUp("slow",function(){}),app._refresh_fav_nm()):line.removeClass("loading").addClass("ui-state-error"))},$j(trash).parentsUntil("li").parent(),!0,$j(trash).parentsUntil("li").parent());request.sendRequest(!0)};return et2_dialog.show_dialog(do_delete,egw.lang("Delete")+" "+name+"?","Delete",et2_dialog.YES_NO,et2_dialog.QUESTION_MESSAGE),!1},highlight_favorite:function(){if(this.sidebox){var state=this.getState(),best_match=!1,best_count=0,self=this;$j("li[data-id]",this.sidebox).removeClass("ui-state-highlight"),$j("li[data-id]",this.sidebox).each(function(i,href){var favorite={};if(this.dataset.id&&egw.preference("favorite_"+this.dataset.id,self.appname)&&(favorite=egw.preference("favorite_"+this.dataset.id,self.appname)),favorite&&!jQuery.isEmptyObject(favorite)){var match_count=0;for(var state_key in state)if("undefined"==typeof favorite.state||"undefined"==typeof state[state_key]||"undefined"==typeof favorite.state[state_key]||state[state_key]!=favorite.state[state_key]&&(state[state_key]||favorite.state[state_key])){if("undefined"!=typeof state[state_key]&&state[state_key]&&"object"==typeof state[state_key]&&"undefined"!=typeof favorite.state&&"undefined"!=typeof favorite.state[state_key]&&favorite.state[state_key]&&"object"==typeof favorite.state[state_key]){if(("undefined"!=typeof state[state_key].length||"undefined"!=typeof state[state_key].length)&&(state[state_key].length||Object.keys(state[state_key]).length)!=(favorite.state[state_key].length||Object.keys(favorite.state[state_key]).length)){if(!(0!==state[state_key].length&&0!==Object.keys(state[state_key]).length||0!=favorite.state[state_key].length&&0!==Object.keys(favorite.state[state_key]).length))continue;return}for(var sub_key in state[state_key])if(state[state_key][sub_key]==favorite.state[state_key][sub_key]||!state[state_key][sub_key]&&!favorite.state[state_key][sub_key])match_count++;else if(state[state_key][sub_key]&&favorite.state[state_key][sub_key]&&"object"==typeof state[state_key][sub_key]&&"object"==typeof favorite.state[state_key][sub_key])JSON.stringify(state[state_key][sub_key])===JSON.stringify(favorite.state[state_key][sub_key])&&match_count++;else if(state[state_key][sub_key]&&state[state_key][sub_key]!=favorite.state[state_key][sub_key])return}else if("selectcols"==state_key);else if("undefined"!=typeof state[state_key]&&"undefined"!=typeof favorite.state&&"undefined"!=typeof favorite.state[state_key]&&state[state_key]!=favorite.state[state_key])return}else match_count++;match_count>best_count&&(best_match=this.dataset.id,best_count=match_count)}}),best_match&&$j('li[data-id="'+best_match+'"]',this.sidebox).addClass("ui-state-highlight")}},_fix_iFrameScrolling:function(){/iPhone|iPod|iPad/.test(navigator.userAgent)&&jQuery("iframe").on({load:function(){for(var body=this.contentWindow.document.body,div=jQuery(document.createElement("div")).css({height:jQuery(this.parentNode).height(),width:jQuery(this.parentNode).width(),overflow:"scroll"});body.firstChild;)div.append(body.firstChild);jQuery(body).append(div)}})},_set_Window_title:function(){var title=this.getWindowTitle();title&&(document.title=this.et2._inst.uniqueId+": "+title)},getWindowTitle:function(){var titleWidget=this.et2.getWidgetById("title");return titleWidget?titleWidget.options.value:this.et2._inst.uniqueId},handle_dropped_mail:function(_action,_selected,_target){var ids=_target.id.split("::");if(2==ids.length&&"mail"!=ids[0]){for(var vfs_path="/apps/"+ids[0]+"/"+ids[1],mail_ids=[],i=0;i<_selected.length;i++)mail_ids.push(_selected[i].id);mail_ids.length&&(egw.message(egw.lang("Please wait...")),this.egw.json("filemanager.filemanager_ui.ajax_action",["mail",mail_ids,vfs_path],function(data){egw.refresh(data.msg||"",ids[0],ids[1],"update")}).sendRequest(!0))}},egwTutorialGetData:function(){var self=this;return new Promise(function(_resolve,_reject){var resolve=_resolve;self.egw.json("home.home_tutorial_ui.ajax_data",[self.egw.app_name()],function(_data){resolve(_data)}).sendRequest()})},egwTutorial_init:function(div){var etemplate=new etemplate2(div,!1),template=egw.webserverUrl+"/etemplate/templates/default/egw_tutorial.xet?1";this.egwTutorialGetData().then(function(_data){var lang=egw.preference("lang"),content={content:{list:[]}};if(_data&&_data[egw.app_name()]&&(_data[egw.app_name()][lang]||(lang="en"),"undefined"!=typeof _data[egw.app_name()][lang]&&_data[egw.app_name()][lang].length>0)){for(var i=0;i<_data[egw.app_name()][lang].length;i++){var tuid=egw.app_name()+"-"+lang+"-"+i;_data[egw.app_name()][lang][i].onclick="app."+egw.app_name()+'.egwTutorialPopup("'+tuid+'")'}content.content.list=_data[egw.app_name()][lang],template.indexOf(".xet")>0?etemplate.load("",template,content,function(){}):etemplate.load(template,"",content)}},function(_err){console.log(_err)})},egwTutorialPopup:function(_tuid){var url=egw.link("/index.php","menuaction=home.home_tutorial_ui.popup&tuid="+_tuid);egw.open_link(url,"_blank","960x580")},mailvelopeAvailable:function(_callback){var self=this,callback=jQuery.proxy(_callback,this);"undefined"!=typeof mailvelope?this.mailvelopeOpenKeyring().then(callback):jQuery(window).on("mailvelope",function(){self.mailvelopeOpenKeyring().then(callback)})},mailvelopeSyncHandlerObj:{uploadSync:function(_uploadObj){return new Promise(function(_resolve,_reject){})},downloadSync:function(_downloadObj){return new Promise(function(_resolve,_reject){})},backup:function(_backup){return new Promise(function(_resolve,_reject){jQuery.ajax({method:"PUT",url:egw.webserverUrl+"/webdav.php/home/"+egw.user("account_lid")+"/.PK_PGP",contentType:"application/json",data:JSON.stringify(_backup),success:function(){_resolve(_backup)},error:function(_err){_reject(_err)}})})},restore:function(){return new Promise(function(_resolve,_reject){var resolve=_resolve,reject=_reject;jQuery.ajax({url:egw.webserverUrl+"/webdav.php/home/"+egw.user("account_lid")+"/.PK_PGP",method:"GET",success:function(_backup){resolve(JSON.parse(_backup)),egw.message("Your key has been restored successfully.")},error:function(_err){reject(_err)}})})}},_mailvelopeBackupFileOperator:function(_url,_cmd,_successCallback,_errorCallback,_data){var ajaxObj={url:_url||egw.webserverUrl+"/webdav.php/home/"+egw.user("account_lid")+"/.PK_PGP",method:_cmd,success:_successCallback,error:_errorCallback};switch(_cmd){case"PUT":jQuery.extend({},ajaxObj,{data:JSON.stringify(_data),contentType:"application/json"});break;case"GET":jQuery.extend({},ajaxObj,{dataType:"json"});break;case"DELETE":}jQuery.ajax(ajaxObj)},mailvelopeCreateBackupDialog:function(_selector,_initSetup){var self=this,selector=_selector||"body",initSetup=_initSetup;return jQuery('iframe[src^="chrome-extension"],iframe[src^="about:blank?mvelo"]').remove(),new Promise(function(_resolve,_reject){var resolve=_resolve,reject=_reject;mailvelope.getKeyring("egroupware").then(function(_keyring){_keyring.addSyncHandler(self.mailvelopeSyncHandlerObj);var options={initialSetup:initSetup};_keyring.createKeyBackupContainer(selector,options).then(function(_popupId){var $backup_selector=jQuery('iframe[src^="chrome-extension"],iframe[src^="about:blank?mvelo"]');$backup_selector.css({position:"absolute","z-index":1}),resolve(_popupId)},function(_err){reject(_err)})},function(_err){reject(_err)})})},mailvelopeDeleteBackup:function(){var self=this;et2_dialog.show_dialog(function(_button_id){_button_id==et2_dialog.YES_BUTTON&&self._mailvelopeBackupFileOperator(void 0,"DELETE",function(){self.egw.message(self.egw.lang("The backup key has been deleted."))},function(_err){self.egw.message(self.egw.lang("Was not able to delete the backup key because %1",_err))})},self.egw.lang("Are you sure, you would like to delete the backup key?"),self.egw.lang("Delete backup key"),{},et2_dialog.BUTTONS_YES_CANCEL,et2_dialog.QUESTION_MESSAGE,void 0,self.egw)},mailvelopeCreateRestoreDialog:function(_selector,_restorePassword){var self=this,restorePassword=_restorePassword,selector=_selector||"body";return jQuery('iframe[src^="chrome-extension"],iframe[src^="about:blank?mvelo"]').remove(),new Promise(function(_resolve,_reject){var resolve=_resolve,reject=_reject;mailvelope.getKeyring("egroupware").then(function(_keyring){_keyring.addSyncHandler(self.mailvelopeSyncHandlerObj);var options={restorePassword:restorePassword};_keyring.restoreBackupContainer(selector,options).then(function(_restoreId){var $restore_selector=jQuery('iframe[src^="chrome-extension"],iframe[src^="about:blank?mvelo"]');$restore_selector.css({position:"absolute","z-index":1}),resolve(_restoreId)},function(_err){reject(_err)})},function(_err){reject(_err)})})},mailvelopeCreateBackupRestoreDialog:function(){var self=this,appname=egw.app_name(),menu=[{},{label:"Restore key",image:"lock",onclick:"app."+appname+".mailvelopeCreateRestoreDialog('#_mvelo')"},{label:"Restore password",image:"password",onclick:"app."+appname+".mailvelopeCreateRestoreDialog('#_mvelo', true)"},{label:"Delete backup",image:"delete",onclick:"app."+appname+".mailvelopeDeleteBackup"},{label:"Backup Key",image:"save",onclick:"app."+appname+".mailvelopeCreateBackupDialog('#_mvelo', false)"}],dialog=function(_content,_callback){return et2_createWidget("dialog",{callback:function(_button_id,_value){"function"==typeof _callback&&_callback.call(this,_button_id,_value.value)},title:egw.lang("Backup/Restore"),buttons:[{button_id:"close",text:"Close",id:"dialog[close]",image:"cancelled",default:!0}],value:{content:{menu:_content}},template:egw.webserverUrl+"/etemplate/templates/default/pgp_backup_restore.xet",class:"pgp_backup_restore",modal:!0})};"undefined"!=typeof mailvelope?mailvelope.getKeyring("egroupware").then(function(_keyring){self._mailvelopeBackupFileOperator(void 0,"GET",function(_data){dialog(menu)},function(){menu.splice(3,1),menu[3].onclick="app."+appname+".mailvelopeCreateBackupDialog('#_mvelo', true)",dialog(menu)})},function(){mailvelope.createKeyring("egroupware").then(function(){dialog(menu)})}):this.mailvelopeInstallationOffer()},mailvelopeInstallationOffer:function(){var buttons=[{text:"Install",id:"install",image:"check",default:!0},{text:"Close",id:"close",image:"cancelled"}],dialog=function(_content,_callback){return et2_createWidget("dialog",{callback:function(_button_id,_value){"function"==typeof _callback&&_callback.call(this,_button_id,_value.value)},title:egw.lang("PGP Encryption Installation"),buttons:buttons,dialog_type:"info",value:{content:_content},template:egw.webserverUrl+"/etemplate/templates/default/pgp_installation.xet",class:"pgp_installation",modal:!0})},content=[{},{domain:this.egw.lang('Add your domain as "%1" in options to list of email providers and enable API.',"*."+this._mailvelopeDomain()),video:"test",control:"true"}];dialog(content,function(_button){"install"==_button&&("undefined"!=typeof chrome?window.open("https://chrome.google.com/webstore/detail/mailvelope/kajibbejlbohfaggdiogboambcijhkke"):"undefined"!=typeof InstallTrigger&&InstallTrigger.enabled()&&InstallTrigger.install({mailvelope:"https://download.mailvelope.com/releases/latest/mailvelope.firefox.xpi"},function(_url,_status){return 0==_status?void et2_dialog.alert(lang("Mailvelope addon installation succeded. Now you may configure the options.")):void et2_dialog.alert(lang("Mailvelope addon installation faild! Please try agian."))}))})},begin_pgp_message:"-----BEGIN PGP MESSAGE-----",end_pgp_message:"-----END PGP MESSAGE-----",mailvelope_keyring:void 0,mailvelope_iframe_selector:'iframe[src^="chrome-extension"],iframe[src^="about:blank?mvelo"]',mailvelopeOpenKeyring:function(){var self=this;return new Promise(function(_resolve,_reject){self.mailvelope_keyring&&_resolve(self.mailvelope_keyring);var resolve=_resolve,reject=_reject;mailvelope.getKeyring("egroupware").then(function(_keyring){self.mailvelope_keyring=_keyring,resolve(_keyring)},function(_err){mailvelope.createKeyring("egroupware").then(function(_keyring){self.mailvelope_keyring=_keyring;var mvelo_settings_selector=self.mailvelope_iframe_selector.split(",").map(function(_val){return"body>"+_val}).join(",");mailvelope.createSettingsContainer("body",_keyring,{email:self.egw.user("account_email"),fullName:self.egw.user("account_fullname")}).then(function(){jQuery(mvelo_settings_selector).css({position:"absolute",top:0}),jQuery('<button class="et2_button et2_button_text" id="mailvelope_close_settings">'+self.egw.lang("Close")+"</button>").css({position:"absolute",top:8,right:8,"z-index":2}).click(function(){self.mailvelope_keyring.exportOwnPublicKey(self.egw.user("account_email")).then(function(_pubKey){self.mailvelopeCreateBackupDialog().then(function(_popupId){jQuery('iframe[src^="chrome-extension"],iframe[src^="about:blank?mvelo"]').css({position:"absolute","z-index":1})},function(_err){egw.message(_err)}),jQuery(mvelo_settings_selector).each(function(index,item){item.src.match(/keyBackupDialog.html/,"ig")||item.remove()}),jQuery("button#mailvelope_close_settings").remove();var buttons=[{button_id:2,text:"Yes",id:"dialog[yes]",image:"check",default:!0},{button_id:3,text:"No",id:"dialog[no]",image:"cancelled"}];egw.user("apps").admin&&(buttons.unshift({button_id:5,text:"Yes and allow non-admin users to do that too (recommended)",id:"dialog[yes_allow]",image:"check",default:!0}),delete buttons[1].default),et2_dialog.show_dialog(function(_button_id){if(_button_id!=et2_dialog.NO_BUTTON){var keys={};keys[self.egw.user("account_id")]=_pubKey,self.egw.json("addressbook.addressbook_bo.ajax_set_pgp_keys",[keys,_button_id!=et2_dialog.YES_BUTTON?!0:void 0]).sendRequest().then(function(_data){self.egw.message(_data.response[0].data)})}},self.egw.lang("It is recommended to store your public key in addressbook, so other users can write you encrypted mails."),self.egw.lang("Store your public key in Addressbook?"),{},buttons,et2_dialog.QUESTION_MESSAGE,void 0,self.egw)},function(_err){self.egw.message(_err.message+"\n\n"+self.egw.lang("You will NOT be able to send or receive encrypted mails before completing that step!"),"error")})}).appendTo("body")}),resolve(_keyring)},function(_err){reject(_err)})})})},_mailvelopeDomain:function(){var parts=document.location.hostname.split(".");return parts.length>1&&parts.shift(),parts.join(".")},mailvelopeGetCheckRecipients:function(_recipients){var rfc822_preg=/<([^'" <>]+)>$/,recipients=_recipients.map(function(_recipient){var matches=_recipient.match(rfc822_preg);return matches?matches[1].toLowerCase():_recipient.toLowerCase()}),self=this;return new Promise(function(_resolve,_reject){var resolve=_resolve,reject=_reject;self.mailvelopeOpenKeyring().then(function(_keyring){var keyring=_keyring;_keyring.validKeyForAddress(recipients).then(function(_status){var no_key=[];for(var email in _status)_status[email]||no_key.push(email);no_key.length?self.egw.json("addressbook.addressbook_bo.ajax_get_pgp_keys",[no_key]).sendRequest().then(function(_data){var data=_data.response[0].data,promises=[];for(var email in data)promises.push(keyring.importPublicKey(data[email]).then(function(_result){"IMPORTED"==_result&&no_key.splice(no_key.indexOf(email),1)}));Promise.all(promises).then(function(){no_key.length?reject(new Error(self.egw.lang("No key for recipient:")+" "+no_key.join(", "))):resolve(recipients)})}):resolve(recipients)})},function(_err){reject(_err)})})}})}.call(this);dhtmlx=function(a){for(var b in a)dhtmlx[b]=a[b];return dhtmlx},dhtmlx.extend_api=function(a,b,c){var d=window[a];d&&(window[a]=function(a){if(a&&"object"==typeof a&&!a.tagName){var f,c=d.apply(this,b._init?b._init(a):arguments);for(f in dhtmlx)b[f]&&this[b[f]](dhtmlx[f]);for(f in a)b[f]?this[b[f]](a[f]):0==f.indexOf("on")&&this.attachEvent(f,a[f])}else c=d.apply(this,arguments);return b._patch&&b._patch(this),c||this},window[a].prototype=d.prototype,c&&dhtmlXHeir(window[a].prototype,c))},dhtmlxAjax={get:function(a,b){var c=new dtmlXMLLoaderObject(!0);return c.async=arguments.length<3,c.waitCall=b,c.loadXML(a),c},post:function(a,b,c){var d=new dtmlXMLLoaderObject(!0);return d.async=arguments.length<4,d.waitCall=c,d.loadXML(a,!0,b),d},getSync:function(a){return this.get(a,null,!0)},postSync:function(a,b){return this.post(a,b,null,!0)}},dtmlXMLLoaderObject.count=0,dtmlXMLLoaderObject.prototype.waitLoadFunction=function(a){var b=!0;return this.check=function(){!a||null==a.onloadAction||a.xmlDoc.readyState&&4!=a.xmlDoc.readyState||!b||(b=!1,dtmlXMLLoaderObject.count++,"function"==typeof a.onloadAction&&a.onloadAction(a.mainObject,null,null,null,a),a.waitCall&&(a.waitCall.call(this,a),a.waitCall=null))}},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(a,b){if(this.xmlDoc.responseXML){var c=this.xmlDoc.responseXML.getElementsByTagName(a);0==c.length&&-1!=a.indexOf(":")&&(c=this.xmlDoc.responseXML.getElementsByTagName(a.split(":")[1]));var d=c[0]}else d=this.xmlDoc.documentElement;return d?(this._retry=!1,d):!this._retry&&_isIE?(this._retry=!0,b=this.xmlDoc,this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(a,b)):(dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),document.createElement("DIV"))},dtmlXMLLoaderObject.prototype.loadXMLString=function(a,b){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(a);else{var c=new DOMParser;this.xmlDoc=c.parseFromString(a,"text/xml")}b||(this.onloadAction&&this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null))},dtmlXMLLoaderObject.prototype.loadXML=function(a,b,c,d){this.rSeed&&(a+=(-1!=a.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=a,this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),this.xmlDoc.open(b?"POST":"GET",a,this.async),d?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):b&&this.xmlDoc.setRequestHeader("Content-type",this.contenttype||"application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(c),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this.setXSLParamValue=this.getXMLTopNode=this.xmlNodeToJSON=this.doSerialization=this.loadXMLString=this.loadXML=this.doXSLTransToString=this.doXSLTransToObject=this.doXPathOpera=this.doXPath=this.xmlDoc=this.mainObject=this.onloadAction=this.filePath=this.rSeed=this.async=this._retry=this._getAllNamedChilds=this._filterXPath=null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(a){for(var b={},c=0;c<a.attributes.length;c++)b[a.attributes[c].name]=a.attributes[c].value;for(b._tagvalue=a.firstChild?a.firstChild.nodeValue:"",c=0;c<a.childNodes.length;c++){var d=a.childNodes[c].tagName;d&&(b[d]||(b[d]=[]),b[d].push(this.xmlNodeToJSON(a.childNodes[c])))}return b},dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null,a.dragStarter=null,a.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy,a.dragStarter=b,this.addDragLanding(a,b)},dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){return!a&&!window.event||2!=(a||event).button?window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(a),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),a&&a.preventDefault&&a.preventDefault(),!1):void 0},dhtmlDragAndDropObject.prototype.callDrag=function(a){if(a||(a=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(a,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,a),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var b=dragger.gldragNode;dragger.gldragNode.old&&(b=dragger.gldragNode.old),b.parentNode.removeChild(b);var c=dragger.dragNode.pWindow;if(b.pWindow&&b.pWindow.dhtmlDragAndDrop.lastLanding&&b.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(b.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var d=document.createElement("Div");d.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=d.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),c.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=a.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=a.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";var e=a.srcElement?a.srcElement:a.target;dragger.checkLanding(e,a)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(a){if(window.name){for(var b=parent.frames[window.name].frameElement.offsetParent,c=0,d=0;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;if(parent.dhtmlDragAndDrop){var e=parent.dhtmlDragAndDrop.calculateFramePosition(1);c+=1*e.split("_")[0],d+=1*e.split("_")[1]}if(a)return c+"_"+d;this.fx=c,this.fy=d}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(a,b){a&&a.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=a,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,b.clientX,b.clientY,b),this.lastLanding_scr=_isIE?b.srcElement:b.target):a&&"BODY"!=a.tagName?this.checkLanding(a.parentNode,b):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,b.clientX,b.clientY,b),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(a,b){if(dragger=window.dhtmlDragAndDrop,!b){dragger.stopFrameRoute();var c=dragger.lastLanding;dragger.lastLanding=null,c&&c.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,c,_isIE?event.srcElement:a.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(a){a&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var b=0;b<window.frames.length;b++)try{window.frames[b]!=a&&window.frames[b].dhtmlDragAndDrop&&window.frames[b].dhtmlDragAndDrop.stopFrameRoute(window)}catch(c){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(d){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(a,b){a&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=a.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=a.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=a.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=a.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&b&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=a&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(c){}for(var d=0;d<window.frames.length;d++)try{window.frames[d]!=a&&window.frames[d].dhtmlDragAndDrop&&window.frames[d].dhtmlDragAndDrop.initFrameRoute(window,!a||b?1:0)}catch(e){}},_OperaRv=_KHTMLrv=_FFrv=_isChrome=_isMacOS=_isKHTML=_isOpera=_isIE=_isFF=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||document.documentMode>7)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),dtmlXMLLoaderObject.prototype.doXPath=function(a,b,c,d){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(a,b);if(_isIE)return b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),
b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),null!=c&&b.setProperty("SelectionNamespaces","xmlns:xsl='"+c+"'"),"single"==d?b.selectSingleNode(a):b.selectNodes(a)||[];var e=b;b||(b=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),b||dhtmlxError.throwError("LoadXML","Incorrect XML",[b||this.xmlDoc,this.mainObject]),-1!=b.nodeName.indexOf("document")?e=b:(e=b,b=b.ownerDocument);var g=XPathResult.ANY_TYPE;"single"==d&&(g=XPathResult.FIRST_ORDERED_NODE_TYPE);var f=[],h=b.evaluate(a,e,function(){return c},g,null);if(g==XPathResult.FIRST_ORDERED_NODE_TYPE)return h.singleNodeValue;for(var i=h.iterateNext();i;)f[f.length]=i,i=h.iterateNext();return f},j.prototype.catchError=function(a,b){this.catches[a]=b},j.prototype.throwError=function(a,b,c){return this.catches[a]?this.catches[a](a,b,c):this.catches.ALL?this.catches.ALL(a,b,c):(alert("Error type: "+a+"\nDescription: "+b),null)},window.dhtmlxError=new j,dtmlXMLLoaderObject.prototype.doXPathOpera=function(a,b){var c=a.replace(/[\/]+/gi,"/").split("/"),d=null,e=1;if(!c.length)return[];if("."==c[0])d=[b];else{if(""!=c[0])return[];d=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(c[e].replace(/\[[^\]]*\]/g,"")),e++}for(;e<c.length;e++)d=this._getAllNamedChilds(d,c[e]);return-1!=c[e-1].indexOf("[")&&(d=this._filterXPath(d,c[e-1])),d},dtmlXMLLoaderObject.prototype._filterXPath=function(a,b){for(var c=[],b=b.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),d=0;d<a.length;d++)a[d].getAttribute(b)&&(c[c.length]=a[d]);return c},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(a,b){var c=[];_isKHTML&&(b=b.toUpperCase());for(var d=0;d<a.length;d++)for(var e=0;e<a[d].childNodes.length;e++)_isKHTML?a[d].childNodes[e].tagName&&a[d].childNodes[e].tagName.toUpperCase()==b&&(c[c.length]=a[d].childNodes[e]):a[d].childNodes[e].tagName==b&&(c[c.length]=a[d].childNodes[e]);return c},dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(a,b,c){c||(c=this.xslDoc),c.responseXML&&(c=c.responseXML);var d=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+a+"']",c,"http://www.w3.org/1999/XSL/Transform","single");null!=d&&(d.firstChild.nodeValue=b)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(a,b){if(a||(a=this.xslDoc),a.responseXML&&(a=a.responseXML),b||(b=this.xmlDoc),b.responseXML&&(b=b.responseXML),_isIE){d=new ActiveXObject("Msxml2.DOMDocument.3.0");try{b.transformNodeToObject(a,d)}catch(c){d=b.transformNode(a)}}else{this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(a));var d=this.XSLProcessor.transformToDocument(b)}return d},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(a,b){var c=this.doXSLTransToObject(a,b);return"string"==typeof c?c:this.doSerialization(c)},dtmlXMLLoaderObject.prototype.doSerialization=function(a){if(a||(a=this.xmlDoc),a.responseXML&&(a=a.responseXML),_isIE)return a.xml;var b=new XMLSerializer;return b.serializeToString(a)},dhtmlxEventable=function(a){a.attachEvent=function(a,c,d){return a="ev_"+a.toLowerCase(),this[a]||(this[a]=new this.eventCatcher(d||this)),a+":"+this[a].addEvent(c)},a.callEvent=function(a,c){return a="ev_"+a.toLowerCase(),this[a]?this[a].apply(this,c):!0},a.checkEvent=function(a){return!!this["ev_"+a.toLowerCase()]},a.eventCatcher=function(a){var c=[],d=function(){for(var d=!0,g=0;g<c.length;g++)if(null!=c[g])var f=c[g].apply(a,arguments),d=d&&f;return d};return d.addEvent=function(a){return"function"!=typeof a&&(a=eval(a)),a?c.push(a)-1:!1},d.removeEvent=function(a){c[a]=null},d},a.detachEvent=function(a){if(0!=a){var c=a.split(":");this[c[0]].removeEvent(c[1])}},a.detachAllEvents=function(){for(var a in this)0==a.indexOf("ev_")&&(this.detachEvent(a),this[a]=null)},a=null},xmlPointer.prototype={text:function(){if(!_isFF)return this.d.xml;var x=new XMLSerializer;return x.serializeToString(this.d)},get:function(name){return this.d.getAttribute(name)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.data:""},each:function(name,f,t,i){var a=this.d.childNodes,c=new xmlPointer;if(a.length)for(i=i||0;i<a.length;i++)if(a[i].tagName==name&&(c.d=a[i],-1==f.apply(t,[c,i])))return},get_all:function(){for(var a={},b=this.d.attributes,i=0;i<b.length;i++)a[b[i].name]=b[i].value;return a},sub:function(name){var a=this.d.childNodes,c=new xmlPointer;if(a.length)for(var i=0;i<a.length;i++)if(a[i].tagName==name)return c.d=a[i],c},up:function(name){return new xmlPointer(this.d.parentNode)},set:function(name,val){this.d.setAttribute(name,val)},clone:function(name){return new xmlPointer(this.d)},sub_exists:function(name){var a=this.d.childNodes;if(a.length)for(var i=0;i<a.length;i++)if(a[i].tagName==name)return!0;return!1},through:function(name,rule,v,f,t){var a=this.d.childNodes;if(a.length)for(var i=0;i<a.length;i++){if(a[i].tagName==name&&null!=a[i].getAttribute(rule)&&""!=a[i].getAttribute(rule)&&(!v||a[i].getAttribute(rule)==v)){var c=new xmlPointer(a[i]);f.apply(t,[c,i])}var w=this.d;this.d=a[i],this.through(name,rule,v,f,t),this.d=w}}},dhtmlXTreeObject.prototype.setDataMode=function(mode){this._datamode=mode},dhtmlXTreeObject.prototype._doContClick=function(ev,force){if(!force&&2!=ev.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var el=_isIE?ev.srcElement:ev.target;el&&"BODY"!=el.tagName&&!el.parentObject;)el=el.parentNode;if(!el||!el.parentObject)return!0;var obj=el.parentObject;if(this.callEvent("onRightClick",[obj.id,ev])||((ev.srcElement||ev.target).oncontextmenu=function(e){return(e||event).cancelBubble=!0,!1}),this._acMenu=obj.cMenu||this.cMenu,this._acMenu){if(!this.callEvent("onBeforeContextMenu",[obj.id]))return!0;if(_isMacOS||((ev.srcElement||ev.target).oncontextmenu=function(e){return(e||event).cancelBubble=!0,!1}),this._acMenu.showContextMenu){var dEl0=window.document.documentElement,dEl1=window.document.body,corrector=new Array(dEl0.scrollLeft||dEl1.scrollLeft,dEl0.scrollTop||dEl1.scrollTop);if(_isIE)var x=ev.clientX+corrector[0],y=ev.clientY+corrector[1];else var x=ev.pageX,y=ev.pageY;this._acMenu.showContextMenu(x-1,y-1),this.contextID=obj.id,ev.cancelBubble=!0,this._acMenu._skip_hide=!0}else el.contextMenuId=obj.id,el.contextMenu=this._acMenu,el.a=this._acMenu._contextStart,el.a(el,ev),el.a=null;return!1}return!0},dhtmlXTreeObject.prototype.enableIEImageFix=function(mode){mode?(this._getImg=function(){var z=document.createElement("DIV");return z.innerHTML="&nbsp;",z.className="dhx_bg_img_fix",z},this._setSrc=function(a,b){a.style.backgroundImage="url("+b+")"},this._getSrc=function(a){var z=a.style.backgroundImage;return z.substr(4,z.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(id){return document.createElement(id==this.rootId?"div":"img")},this._setSrc=function(a,b){a.src=b},this._getSrc=function(a){return a.src})},dhtmlXTreeObject.prototype.destructor=function(){for(var a in this._idpull){var z=this._idpull[a];z&&(z.parentObject=null,z.treeNod=null,z.childNodes=null,z.span=null,z.tr.nodem=null,z.tr=null,z.htmlNode.objBelong=null,z.htmlNode=null,this._idpull[a]=null)}this.parentObject.innerHTML="",this.XMLLoader&&this.XMLLoader.destructor(),this.allTree.onselectstart=null,this.allTree.oncontextmenu=null,this.allTree.onmousedown=null;for(var a in this)this[a]=null},cObject.prototype=new Object,cObject.prototype.clone=function(){function _dummy(){}return _dummy.prototype=this,new _dummy},dhtmlXTreeObject.prototype._globalIdStorageAdd=function(itemId,itemObject){return this._globalIdStorageFind(itemId,1,1)?(itemId=itemId+"_"+(new Date).valueOf(),this._globalIdStorageAdd(itemId,itemObject)):(this._idpull[itemId]=itemObject,this._pullSize++,itemId)},dhtmlXTreeObject.prototype._globalIdStorageSub=function(itemId){this._idpull[itemId]&&(this._unselectItem(this._idpull[itemId]),this._idpull[itemId]=null,this._pullSize--),this._locker&&this._locker[itemId]&&(this._locker[itemId]=!1)},dhtmlXTreeObject.prototype._globalIdStorageFind=function(itemId,skipXMLSearch,skipParsing,isreparse){var z=this._idpull[itemId];return z?z:null},dhtmlXTreeObject.prototype._escape=function(str){switch(this.utfesc){case"none":return str;case"utf8":return encodeURIComponent(str);default:return escape(str)}},dhtmlXTreeObject.prototype._drawNewTr=function(htmlObject,node){var tr=document.createElement("tr"),td1=document.createElement("td"),td2=document.createElement("td");return td1.appendChild(document.createTextNode(" ")),td2.colSpan=3,td2.appendChild(htmlObject),tr.appendChild(td1),tr.appendChild(td2),tr},dhtmlXTreeObject.prototype.loadXMLString=function(xmlString,afterCall){var that=this;this.parsCount||this.callEvent("onXLS",[that,null]),this.xmlstate=1,afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXMLString(xmlString)},dhtmlXTreeObject.prototype.loadXML=function(file,afterCall){if(afterCall=afterCall||this.AJAX_callback,this._datamode&&"xml"!=this._datamode)return this["load"+this._datamode.toUpperCase()](file,afterCall);var that=this;this.parsCount||this.callEvent("onXLS",[that,this._ld_id]),this._ld_id=null,this.xmlstate=1,this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype._attachChildNode=function(parentObject,itemId,itemText,itemActionHandler,image1,image2,image3,optionStr,childs,beforeNode,afterNode){beforeNode&&beforeNode.parentObject&&(parentObject=beforeNode.parentObject),0==parentObject.XMLload&&this.XMLsource&&!this.XMLloadingWarning&&(parentObject.XMLload=1,this._loadDynXML(parentObject.id));var Count=parentObject.childsCount,Nodes=parentObject.childNodes;if(afterNode&&afterNode.tr.previousSibling&&(afterNode.tr.previousSibling.previousSibling?beforeNode=afterNode.tr.previousSibling.nodem:optionStr=optionStr.replace("TOP","")+",TOP"),beforeNode){var ik,jk;for(ik=0;Count>ik;ik++)if(Nodes[ik]==beforeNode){for(jk=Count;jk!=ik;jk--)Nodes[1+jk]=Nodes[jk];break}ik++,Count=ik}if(optionStr)for(var tempStr=optionStr.split(","),i=0;i<tempStr.length;i++)switch(tempStr[i]){case"TOP":for(parentObject.childsCount>0&&(beforeNode=new Object,beforeNode.tr=parentObject.childNodes[0].tr.previousSibling),parentObject._has_top=!0,ik=Count;ik>0;ik--)Nodes[ik]=Nodes[ik-1];Count=0}var n;(n=this._idpull[itemId])&&-1==n.span||(n=Nodes[Count]=new dhtmlXTreeItemObject(itemId,itemText,parentObject,this,itemActionHandler,1),itemId=Nodes[Count].id,parentObject.childsCount++),n.htmlNode||(n.label=itemText,n.htmlNode=this._createItem(this.checkBoxOff?1:0,n),n.htmlNode.objBelong=n),image1&&(n.images[0]=image1),image2&&(n.images[1]=image2),image3&&(n.images[2]=image3);var tr=this._drawNewTr(n.htmlNode);if((this.XMLloadingWarning||this._hAdI)&&(n.htmlNode.parentNode.parentNode.style.display="none"),beforeNode&&beforeNode.tr&&beforeNode.tr.nextSibling?parentObject.htmlNode.childNodes[0].insertBefore(tr,beforeNode.tr.nextSibling):this.parsingOn==parentObject.id?this.parsedArray[this.parsedArray.length]=tr:parentObject.htmlNode.childNodes[0].appendChild(tr),beforeNode&&!beforeNode.span&&(beforeNode=null),this.XMLsource&&(childs&&0!=childs?n.XMLload=0:n.XMLload=1),n.tr=tr,tr.nodem=n,0==parentObject.itemId&&(tr.childNodes[0].className="hiddenRow"),(parentObject._r_logic||this._frbtr)&&this._setSrc(n.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]),optionStr)for(var tempStr=optionStr.split(","),i=0;i<tempStr.length;i++)switch(tempStr[i]){case"SELECT":this.selectItem(itemId,!1);break;case"CALL":this.selectItem(itemId,!0);break;case"CHILD":n.XMLload=0;break;case"CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+itemId:this.setCheck(itemId,1);break;case"HCHECKED":this._setCheck(n,"unsure");break;case"OPEN":n.openMe=1}if(!this.XMLloadingWarning&&(this._getOpenState(parentObject)<0&&!this._hAdI&&this.openItem(parentObject.id),beforeNode&&(this._correctPlus(beforeNode),this._correctLine(beforeNode)),this._correctPlus(parentObject),this._correctLine(parentObject),this._correctPlus(n),parentObject.childsCount>=2&&(this._correctPlus(Nodes[parentObject.childsCount-2]),this._correctLine(Nodes[parentObject.childsCount-2])),2!=parentObject.childsCount&&this._correctPlus(Nodes[0]),this.tscheck&&this._correctCheckStates(parentObject),this._onradh))if(1==this.xmlstate){var old=this.onXLE;this.onXLE=function(id){this._onradh(itemId),old&&old(id)}}else this._onradh(itemId);return n},dhtmlXTreeObject.prototype.insertNewItem=function(parentId,itemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children){var parentObject=this._globalIdStorageFind(parentId);if(!parentObject)return-1;var nodez=this._attachChildNode(parentObject,itemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children);return this._idpull[this.rootId].XMLload||(this._idpull[this.rootId].XMLload=1),nodez},dhtmlXTreeObject.prototype.insertNewChild=function(parentId,itemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children){return this.insertNewItem(parentId,itemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children)},dhtmlXTreeObject.prototype._parseXMLTree=function(a,b,c,d,xml){var p=new xmlPointer(xml.getXMLTopNode("tree"));a._parse(p),a._p=p},dhtmlXTreeObject.prototype._parseItem=function(c,temp,preNode,befNode){var id;if(this._srnd&&(!this._idpull[id=c.get("id")]||!this._idpull[id].span))return void this._addItemSRND(temp.id,id,c);var a=c.get_all();if("object"==typeof this.waitUpdateXML&&!this.waitUpdateXML[a.id])return void this._parse(c,a.id,1);var zST=[];if(a.select&&zST.push("SELECT"),a.top&&zST.push("TOP"),a.call&&(this.nodeAskingCall=a.id),-1==a.checked?zST.push("HCHECKED"):a.checked&&zST.push("CHECKED"),a.open&&zST.push("OPEN"),this.waitUpdateXML)if(this._globalIdStorageFind(a.id))var newNode=this.updateItem(a.id,a.text,a.im0,a.im1,a.im2,a.checked,a.child);else{0==this.npl?zST.push("TOP"):preNode=temp.childNodes[this.npl];var newNode=this._attachChildNode(temp,a.id,a.text,0,a.im0,a.im1,a.im2,zST.join(","),a.child,0,preNode);a.id=newNode.id,preNode=null}else var newNode=this._attachChildNode(temp,a.id,a.text,0,a.im0,a.im1,a.im2,zST.join(","),a.child,befNode||0,preNode);if(a.tooltip&&(newNode.span.parentNode.parentNode.title=a.tooltip),a.style&&(newNode.span.style.cssText?newNode.span.style.cssText+=";"+a.style:newNode.span.setAttribute("style",newNode.span.getAttribute("style")+"; "+a.style)),a.radio&&(newNode._r_logic=!0),a.nocheckbox){var check_node=newNode.span.parentNode.previousSibling.previousSibling;check_node.style.display="none",newNode.nocheckbox=!0}a.disabled&&(null!=a.checked&&this._setCheck(newNode,a.checked),this.disableCheckbox(newNode,1)),newNode._acc=a.child||0,this.parserExtension&&this.parserExtension._parseExtension.call(this,c,a,temp?temp.id:0),this.setItemColor(newNode,a.aCol,a.sCol),"1"==a.locked&&this.lockItem(newNode.id,!0,!0),(a.imwidth||a.imheight)&&this.setIconSize(a.imwidth,a.imheight,newNode),"0"!=a.closeable&&"1"!=a.closeable||this.setItemCloseable(newNode,a.closeable);var zcall="";a.topoffset&&this.setItemTopOffset(newNode,a.topoffset),this.slowParse&&"object"!=typeof this.waitUpdateXML||c.sub_exists("item")&&(zcall=this._parse(c,a.id,1)),""!=zcall&&(this.nodeAskingCall=zcall),c.each("userdata",function(u){this.setUserData(c.get("id"),u.get("name"),u.content())},this)},dhtmlXTreeObject.prototype._parse=function(p,parentId,level,start){if(this._srnd&&!this.parentObject.offsetHeight){var self=this;return window.setTimeout(function(){self._parse(p,parentId,level,start)},100)}if(p.exists()){if(this.skipLock=!0,!parentId){parentId=p.get("id");var skey=p.get("dhx_security");skey&&(dhtmlx.security_key=skey),p.get("radio")&&(this.htmlNode._r_logic=!0),this.parsingOn=parentId,this.parsedArray=new Array,this.setCheckList="",this.nodeAskingCall=""}var temp=this._globalIdStorageFind(parentId);if(!temp)return dhtmlxError.throwError("DataStructure","XML refers to not existing parent");if(this.parsCount=this.parsCount?this.parsCount+1:1,this.XMLloadingWarning=1,!temp.childsCount||start||this._edsbps||temp._has_top)var preNode=0;else var preNode=0;if(this.npl=0,p.each("item",function(c,i){temp.XMLload=1,this._parseItem(c,temp,0,preNode),this.npl++},this,start),!level){if(p.each("userdata",function(u){this.setUserData(p.get("id"),u.get("name"),u.content())},this),temp.XMLload=1,this.waitUpdateXML){this.waitUpdateXML=!1;for(var i=temp.childsCount-1;i>=0;i--)temp.childNodes[i]._dmark&&this.deleteItem(temp.childNodes[i].id)}for(var i=(this._globalIdStorageFind(this.parsingOn),0);i<this.parsedArray.length;i++)temp.htmlNode.childNodes[0].appendChild(this.parsedArray[i]);this.parsedArray=[],this.lastLoadedXMLId=parentId,this.XMLloadingWarning=0;for(var chArr=this.setCheckList.split(this.dlmtr),n=0;n<chArr.length;n++)chArr[n]&&this.setCheck(chArr[n],1);this.XMLsource&&this.tscheck&&this.smcheck&&temp.id!=this.rootId&&(0===temp.checkstate?this._setSubChecked(0,temp):1===temp.checkstate&&this._setSubChecked(1,temp)),this._redrawFrom(this,null,start),p.get("order")&&"none"!=p.get("order")&&this._reorderBranch(temp,p.get("order"),!0),""!=this.nodeAskingCall&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]),this._branchUpdate&&this._branchUpdateNext(p)}if(1==this.parsCount){if(this.parsingOn=null,!this._edsbps||!this._edsbpsA.length){var that=this;window.setTimeout(function(){that.callEvent("onXLE",[that,parentId])},1),this.xmlstate=0}this.skipLock=!1}return this.parsCount--,!level&&this.onXLE&&this.onXLE(this,parentId),this.nodeAskingCall}},dhtmlXTreeObject.prototype._branchUpdateNext=function(p){p.each("item",function(c){var nid=c.get("id");this._idpull[nid]&&!this._idpull[nid].XMLload||(this._branchUpdate++,this.smartRefreshItem(c.get("id"),c))},this),this._branchUpdate--},dhtmlXTreeObject.prototype.checkUserData=function(node,parentId){if(1==node.nodeType&&"userdata"==node.tagName){var name=node.getAttribute("name");name&&node.childNodes[0]&&this.setUserData(parentId,name,node.childNodes[0].data)}},dhtmlXTreeObject.prototype._redrawFrom=function(dhtmlObject,itemObject,start,visMode){if(itemObject)tempx=itemObject;else{var tempx=dhtmlObject._globalIdStorageFind(dhtmlObject.lastLoadedXMLId);if(dhtmlObject.lastLoadedXMLId=-1,!tempx)return 0}for(var acc=0,i=start?start-1:0;i<tempx.childsCount;i++)this._branchUpdate&&1!=this._getOpenState(tempx)||itemObject&&1!=visMode||(tempx.childNodes[i].htmlNode.parentNode.parentNode.style.display=""),1==tempx.childNodes[i].openMe&&(this._openItem(tempx.childNodes[i]),tempx.childNodes[i].openMe=0),dhtmlObject._redrawFrom(dhtmlObject,tempx.childNodes[i]);tempx.unParsed||!tempx.XMLload&&this.XMLsource||(tempx._acc=acc),dhtmlObject._correctLine(tempx),dhtmlObject._correctPlus(tempx)},dhtmlXTreeObject.prototype._createSelf=function(){var div=document.createElement("div");return div.className="containerTableStyle",div.style.width=this.width,div.style.height=this.height,this.parentObject.appendChild(div),div},dhtmlXTreeObject.prototype._xcloseAll=function(itemObject){if(!itemObject.unParsed){if(this.rootId!=itemObject.id){if(!itemObject.htmlNode)return;for(var Nodes=itemObject.htmlNode.childNodes[0].childNodes,Count=Nodes.length,i=1;Count>i;i++)Nodes[i].style.display="none";this._correctPlus(itemObject)}for(var i=0;i<itemObject.childsCount;i++)itemObject.childNodes[i].childsCount&&this._xcloseAll(itemObject.childNodes[i])}},dhtmlXTreeObject.prototype._xopenAll=function(itemObject){this._HideShow(itemObject,2);for(var i=0;i<itemObject.childsCount;i++)this._xopenAll(itemObject.childNodes[i])},dhtmlXTreeObject.prototype._correctPlus=function(itemObject){if(itemObject.htmlNode){var imsrc=itemObject.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,imsrc2=itemObject.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],workArray=this.lineArray;if(this.XMLsource&&!itemObject.XMLload){var workArray=this.plusArray;if(this._setSrc(imsrc2,this.iconURL+itemObject.images[2]),this._txtimg)return imsrc.innerHTML="[+]"}else if(itemObject.childsCount||itemObject.unParsed)if(itemObject.htmlNode.childNodes[0].childNodes[1]&&"none"!=itemObject.htmlNode.childNodes[0].childNodes[1].style.display){if(!itemObject.wsign)var workArray=this.minusArray;if(this._setSrc(imsrc2,this.iconURL+itemObject.images[1]),this._txtimg)return imsrc.innerHTML="[-]"}else{if(!itemObject.wsign)var workArray=this.plusArray;if(this._setSrc(imsrc2,this.iconURL+itemObject.images[2]),this._txtimg)return imsrc.innerHTML="[+]"}else this._setSrc(imsrc2,this.iconURL+itemObject.images[0]);var tempNum=2;itemObject.treeNod.treeLinesOn?(itemObject.parentObject&&(tempNum=this._getCountStatus(itemObject.id,itemObject.parentObject)),this._setSrc(imsrc,this.imPath+workArray[tempNum])):this._setSrc(imsrc,this.imPath+workArray[3])}},dhtmlXTreeObject.prototype._correctLine=function(itemObject){if(itemObject.htmlNode){var sNode=itemObject.parentObject;if(sNode)if(0!=this._getLineStatus(itemObject.id,sNode)&&this.treeLinesOn)for(var i=1;i<=itemObject.childsCount&&itemObject.htmlNode.childNodes[0].childNodes[i];i++)itemObject.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")",itemObject.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundRepeat="repeat-y";else for(var i=1;i<=itemObject.childsCount&&itemObject.htmlNode.childNodes[0].childNodes[i];i++)itemObject.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundImage="",itemObject.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundRepeat=""}},dhtmlXTreeObject.prototype._getCountStatus=function(itemId,itemObject){return itemObject.childsCount<=1?itemObject.id==this.rootId?4:0:itemObject.childNodes[0].id==itemId?itemObject.id==this.rootId?2:1:itemObject.childNodes[itemObject.childsCount-1].id==itemId?0:1},dhtmlXTreeObject.prototype._getLineStatus=function(itemId,itemObject){return itemObject.childNodes[itemObject.childsCount-1].id==itemId?0:1},dhtmlXTreeObject.prototype._HideShow=function(itemObject,mode){if(this.XMLsource&&!itemObject.XMLload){if(1==mode)return;return itemObject.XMLload=1,void this._loadDynXML(itemObject.id)}var Nodes=itemObject.htmlNode.childNodes[0].childNodes,Count=Nodes.length;if(Count>1){"none"==Nodes[1].style.display&&1!=mode||2==mode?nodestyle="":(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none");for(var i=1;Count>i;i++)Nodes[i].style.display=nodestyle}this._correctPlus(itemObject)},dhtmlXTreeObject.prototype._getOpenState=function(itemObject){if(!itemObject.htmlNode)return 0;var z=itemObject.htmlNode.childNodes[0].childNodes;return z.length<=1?0:"none"!=z[1].style.display?1:-1},dhtmlXTreeObject.prototype.onRowClick2=function(){var that=this.parentObject.treeNod;return that.callEvent("onDblClick",[this.parentObject.id,that])?(this.parentObject.closeble&&"0"!=this.parentObject.closeble?that._HideShow(this.parentObject):that._HideShow(this.parentObject,2),that.checkEvent("onOpenEnd")&&(that.xmlstate?(that._oie_onXLE.push(that.onXLE),that.onXLE=that._epnFHe):that.callEvent("onOpenEnd",[this.parentObject.id,that._getOpenState(this.parentObject)])),!1):!1},dhtmlXTreeObject.prototype.onRowClick=function(){var that=this.parentObject.treeNod;return that.callEvent("onOpenStart",[this.parentObject.id,that._getOpenState(this.parentObject)])?(this.parentObject.closeble&&"0"!=this.parentObject.closeble?that._HideShow(this.parentObject):that._HideShow(this.parentObject,2),void(that.checkEvent("onOpenEnd")&&(that.xmlstate?(that._oie_onXLE.push(that.onXLE),that.onXLE=that._epnFHe):that.callEvent("onOpenEnd",[this.parentObject.id,that._getOpenState(this.parentObject)])))):0},dhtmlXTreeObject.prototype._epnFHe=function(that,id,flag){id!=this.rootId&&this.callEvent("onOpenEnd",[id,that.getOpenState(id)]),that.onXLE=that._oie_onXLE.pop(),flag||that._oie_onXLE.length||that.onXLE&&that.onXLE(that,id)},dhtmlXTreeObject.prototype.onRowClickDown=function(e){e=e||window.event;var that=this.parentObject.treeNod;that._selectItem(this.parentObject,e)},dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var str=new Array,i=0;i<this._selected.length;i++)str[i]=this._selected[i].id;return str.join(this.dlmtr)},dhtmlXTreeObject.prototype._selectItem=function(node,e,mode){if("undefined"==typeof mode&&(mode=!1),!mode&&this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId()),this._amsel&&e&&(e.ctrlKey||e.metaKey||e.shiftKey)||this._unselectItems(),node.i_sel&&this._amsel&&e&&(e.ctrlKey||e.metaKey))this._unselectItem(node);else if(!(node.i_sel||this._amselS&&0!=this._selected.length&&this._selected[0].parentObject!=node.parentObject))if(this._amsel&&e&&e.shiftKey&&0!=this._selected.length&&this._selected[this._selected.length-1].parentObject==node.parentObject){var f=this._getIndex(this._selected[this._selected.length-1]),d=this._getIndex(node);if(f>d){var l=f;f=d,d=l}for(var g=f;d>=g;g++)node.parentObject.childNodes[g].i_sel||this._markItem(node.parentObject.childNodes[g])}else this._markItem(node);if(!mode&&this.checkEvent("onSelect")){var z=this.getSelectedItemId();z!=this._onSSCFold&&this.callEvent("onSelect",[z])}},dhtmlXTreeObject.prototype._markItem=function(node){node.scolor&&(node.span.style.color=node.scolor),node.span.className="selectedTreeRow",node.i_sel=!0,this._selected[this._selected.length]=node},dhtmlXTreeObject.prototype.getIndexById=function(itemId){var z=this._globalIdStorageFind(itemId);return z?this._getIndex(z):null},dhtmlXTreeObject.prototype._getIndex=function(w){for(var z=w.parentObject,i=0;i<z.childsCount;i++)if(z.childNodes[i]==w)return i},dhtmlXTreeObject.prototype._unselectItem=function(node){if(node&&node.i_sel){node.span.className="standartTreeRow",node.acolor&&(node.span.style.color=node.acolor),node.i_sel=!1;for(var i=0;i<this._selected.length;i++)if(!this._selected[i].i_sel){this._selected.splice(i,1);break}}},dhtmlXTreeObject.prototype._unselectItems=function(){for(var i=0;i<this._selected.length;i++){var node=this._selected[i];node.span.className="standartTreeRow",node.acolor&&(node.span.style.color=node.acolor),node.i_sel=!1}this._selected=new Array},dhtmlXTreeObject.prototype.onRowSelect=function(e,htmlObject,mode){e=e||window.event;var obj=this.parentObject;htmlObject&&(obj=htmlObject.parentObject);var that=obj.treeNod,lastId=that.getSelectedItemId();e&&e.skipUnSel||that._selectItem(obj,e,mode),mode||(obj.actionHandler?obj.actionHandler(obj.id,lastId):that.callEvent("onClick",[obj.id,lastId]))},dhtmlXTreeObject.prototype._correctCheckStates=function(dhtmlObject){if(this.tscheck&&dhtmlObject&&dhtmlObject.id!=this.rootId){var act=dhtmlObject.childNodes,flag1=0,flag2=0;if(0!=dhtmlObject.childsCount){for(var i=0;i<dhtmlObject.childsCount;i++)if(!act[i].dscheck)if(0==act[i].checkstate)flag1=1;else{if(1!=act[i].checkstate){flag1=1,flag2=1;break}flag2=1}flag1&&flag2?this._setCheck(dhtmlObject,"unsure"):flag1?this._setCheck(dhtmlObject,!1):this._setCheck(dhtmlObject,!0),this._correctCheckStates(dhtmlObject.parentObject)}}},dhtmlXTreeObject.prototype.onCheckBoxClick=function(e){return this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])?this.parentObject.dscheck?!0:(this.treeNod.tscheck?1==this.parentObject.checkstate?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):1==this.parentObject.checkstate?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0),this.treeNod._correctCheckStates(this.parentObject.parentObject),this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])):void 0},dhtmlXTreeObject.prototype._createItem=function(acheck,itemObject,mode){var table=document.createElement("table");table.cellSpacing=0,table.cellPadding=0,table.border=0,this.hfMode&&(table.style.tableLayout="fixed"),table.style.margin=0,table.style.padding=0;var tbody=document.createElement("tbody"),tr=document.createElement("tr"),td1=document.createElement("td");if(td1.className="standartTreeImage",this._txtimg){var img0=document.createElement("div");td1.appendChild(img0),img0.className="dhx_tree_textSign"}else{var img0=this._getImg(itemObject.id);img0.border="0","IMG"==img0.tagName&&(img0.align="absmiddle"),td1.appendChild(img0),img0.style.padding=0,img0.style.margin=0,img0.style.width=this.def_line_img_x,img0.style.height=this.def_line_img_y}var td11=document.createElement("td"),inp=this._getImg(this.cBROf?this.rootId:itemObject.id);inp.checked=0,this._setSrc(inp,this.imPath+this.checkArray[0]),inp.style.width="16px",inp.style.height="16px",acheck||(td11.style.display="none"),td11.appendChild(inp),this.cBROf||"IMG"!=inp.tagName||(inp.align="absmiddle"),inp.onclick=this.onCheckBoxClick,inp.treeNod=this,inp.parentObject=itemObject,window._KHTMLrv?td11.width="16px":td11.width="20px";var td12=document.createElement("td");td12.className="standartTreeImage";var img=this._getImg(this.timgen?itemObject.id:this.rootId);img.onmousedown=this._preventNsDrag,img.ondragstart=this._preventNsDrag,img.border="0",this._aimgs&&(img.parentObject=itemObject,"IMG"==img.tagName&&(img.align="absmiddle"),img.onclick=this.onRowSelect),mode||this._setSrc(img,this.iconURL+this.imageArray[0]),td12.appendChild(img),img.style.padding=0,img.style.margin=0,this.timgen?(td12.style.width=img.style.width=this.def_img_x,img.style.height=this.def_img_y):(img.style.width="0px",img.style.height="0px",(_isOpera||window._KHTMLrv)&&(td12.style.display="none"));var td2=document.createElement("td");return td2.className="standartTreeRow",itemObject.span=document.createElement("span"),itemObject.span.className="standartTreeRow",this.mlitems?(itemObject.span.style.width=this.mlitems,itemObject.span.style.display="block"):td2.noWrap=!0,_isIE&&_isIE>7?td2.style.width="999999px":window._KHTMLrv||(td2.style.width="100%"),itemObject.span.innerHTML=itemObject.label,td2.appendChild(itemObject.span),td2.parentObject=itemObject,td1.parentObject=itemObject,td2.onclick=this.onRowSelect,td1.onclick=this.onRowClick,td2.ondblclick=this.onRowClick2,this.ettip&&(tr.title=itemObject.label),this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(td12,this),td12.parentObject=itemObject),this.dragger.addDraggableItem(td2,this)),itemObject.span.style.paddingLeft="5px",itemObject.span.style.paddingRight="5px",td2.style.verticalAlign="",td2.style.fontSize="10pt",td2.style.cursor=this.style_pointer,tr.appendChild(td1),tr.appendChild(td11),tr.appendChild(td12),tr.appendChild(td2),tbody.appendChild(tr),table.appendChild(tbody),(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))&&(tr.onmousemove=this._itemMouseIn,tr[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut),table},dhtmlXTreeObject.prototype.setImagePath=function(newPath){this.imPath=newPath,this.iconURL=newPath},dhtmlXTreeObject.prototype.setIconPath=function(path){this.iconURL=path},dhtmlXTreeObject.prototype.setOnRightClickHandler=function(func){this.attachEvent("onRightClick",func)},dhtmlXTreeObject.prototype.setOnClickHandler=function(func){this.attachEvent("onClick",func)},dhtmlXTreeObject.prototype.setOnSelectStateChange=function(func){this.attachEvent("onSelect",func)},dhtmlXTreeObject.prototype.setXMLAutoLoading=function(filePath){this.XMLsource=filePath},dhtmlXTreeObject.prototype.setOnCheckHandler=function(func){this.attachEvent("onCheck",func)},dhtmlXTreeObject.prototype.setOnOpenHandler=function(func){this.attachEvent("onOpenStart",func)},dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(func){this.attachEvent("onOpenStart",func)},dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(func){this.attachEvent("onOpenEnd",func)},dhtmlXTreeObject.prototype.setOnDblClickHandler=function(func){this.attachEvent("onDblClick",func)},dhtmlXTreeObject.prototype.openAllItems=function(itemId){var temp=this._globalIdStorageFind(itemId);
return temp?void this._xopenAll(temp):0},dhtmlXTreeObject.prototype.getOpenState=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp?this._getOpenState(temp):""},dhtmlXTreeObject.prototype.closeAllItems=function(itemId){itemId===window.undefined&&(itemId=this.rootId);var temp=this._globalIdStorageFind(itemId);return temp?(this._xcloseAll(temp),this.allTree.childNodes[0].border="1",void(this.allTree.childNodes[0].border="0")):0},dhtmlXTreeObject.prototype.setUserData=function(itemId,name,value){var sNode=this._globalIdStorageFind(itemId,0,!0);sNode&&("hint"==name&&(sNode.htmlNode.childNodes[0].childNodes[0].title=value),"undefined"==typeof sNode.userData["t_"+name]&&(sNode._userdatalist?sNode._userdatalist+=","+name:sNode._userdatalist=name),sNode.userData["t_"+name]=value)},dhtmlXTreeObject.prototype.getUserData=function(itemId,name){var sNode=this._globalIdStorageFind(itemId,0,!0);if(sNode)return sNode.userData["t_"+name]},dhtmlXTreeObject.prototype.getItemColor=function(itemId){var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;var res=new Object;return temp.acolor&&(res.acolor=temp.acolor),temp.scolor&&(res.scolor=temp.scolor),res},dhtmlXTreeObject.prototype.setItemColor=function(itemId,defaultColor,selectedColor){if(itemId&&itemId.span)var temp=itemId;else var temp=this._globalIdStorageFind(itemId);return temp?(temp.i_sel?selectedColor&&(temp.span.style.color=selectedColor):defaultColor&&(temp.span.style.color=defaultColor),selectedColor&&(temp.scolor=selectedColor),defaultColor&&(temp.acolor=defaultColor),void 0):0},dhtmlXTreeObject.prototype.getItemText=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp?temp.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML:0},dhtmlXTreeObject.prototype.getParentId=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp&&temp.parentObject?temp.parentObject.id:""},dhtmlXTreeObject.prototype.changeItemId=function(itemId,newItemId){if(itemId!=newItemId){var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;temp.id=newItemId,temp.span.contextMenuId=newItemId,this._idpull[newItemId]=this._idpull[itemId],delete this._idpull[itemId]}},dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut(),this.nodeCut=(new Array).concat(this._selected);for(var i=0;i<this.nodeCut.length;i++){var tempa=this.nodeCut[i];tempa._cimgs=new Array,tempa._cimgs[0]=tempa.images[0],tempa._cimgs[1]=tempa.images[1],tempa._cimgs[2]=tempa.images[2],tempa.images[0]=tempa.images[1]=tempa.images[2]=this.cutImage,this._correctPlus(tempa)}},dhtmlXTreeObject.prototype.doPaste=function(itemId){var tobj=this._globalIdStorageFind(itemId);if(!tobj)return 0;for(var i=0;i<this.nodeCut.length;i++)this._checkPNodes(tobj,this.nodeCut[i])||this._moveNode(this.nodeCut[i],tobj);this.clearCut()},dhtmlXTreeObject.prototype.clearCut=function(){for(var i=0;i<this.nodeCut.length;i++){var tempa=this.nodeCut[i];tempa.images[0]=tempa._cimgs[0],tempa.images[1]=tempa._cimgs[1],tempa.images[2]=tempa._cimgs[2],this._correctPlus(tempa)}this.nodeCut=new Array},dhtmlXTreeObject.prototype._moveNode=function(itemObject,targetObject){return this._moveNodeTo(itemObject,targetObject)},dhtmlXTreeObject.prototype._fixNodesCollection=function(target,zParent){var flag=0,Nodes=target.childNodes,Count=target.childsCount-1;if(zParent!=Nodes[Count]){for(var i=0;Count>i;i++)Nodes[i]==Nodes[Count]&&(Nodes[i]=Nodes[i+1],Nodes[i+1]=Nodes[Count]);for(var i=0;Count+1>i;i++)if(flag){var temp=Nodes[i];Nodes[i]=flag,flag=temp}else Nodes[i]==zParent&&(flag=Nodes[i],Nodes[i]=Nodes[Count])}},dhtmlXTreeObject.prototype._recreateBranch=function(itemObject,targetObject,beforeNode,level){var i,st="";if(beforeNode){for(i=0;i<targetObject.childsCount&&targetObject.childNodes[i]!=beforeNode;i++);0!=i?beforeNode=targetObject.childNodes[i-1]:(st="TOP",beforeNode="")}var t2=this._onradh;this._onradh=null;var newNode=this._attachChildNode(targetObject,itemObject.id,itemObject.label,0,itemObject.images[0],itemObject.images[1],itemObject.images[2],st,0,beforeNode);if(newNode._userdatalist=itemObject._userdatalist,newNode.userData=itemObject.userData.clone(),itemObject._attrs){newNode._attrs={};for(var attr in itemObject._attrs)newNode._attrs[attr]=itemObject._attrs[attr]}newNode.XMLload=itemObject.XMLload,t2&&(this._onradh=t2,this._onradh(newNode.id));for(var i=0;i<itemObject.childsCount;i++)this._recreateBranch(itemObject.childNodes[i],newNode,0,1);return newNode},dhtmlXTreeObject.prototype._moveNodeTo=function(itemObject,targetObject,beforeNode){if(itemObject.treeNod._nonTrivialNode)return itemObject.treeNod._nonTrivialNode(this,targetObject,beforeNode,itemObject);if(this._checkPNodes(targetObject,itemObject))return!1;if(targetObject.mytype)var framesMove=itemObject.treeNod.lWin!=targetObject.lWin;else var framesMove=itemObject.treeNod.lWin!=targetObject.treeNod.lWin;if(!this.callEvent("onDrag",[itemObject.id,targetObject.id,beforeNode?beforeNode.id:null,itemObject.treeNod,targetObject.treeNod]))return!1;0==targetObject.XMLload&&this.XMLsource&&(targetObject.XMLload=1,this._loadDynXML(targetObject.id)),this.openItem(targetObject.id);var oldTree=itemObject.treeNod,c=itemObject.parentObject.childsCount,z=itemObject.parentObject;if(framesMove||oldTree.dpcpy){var _otiid=itemObject.id;itemObject=this._recreateBranch(itemObject,targetObject,beforeNode),oldTree.dpcpy||oldTree.deleteItem(_otiid)}else{var Count=targetObject.childsCount,Nodes=targetObject.childNodes;0==Count&&(targetObject._open=!0),oldTree._unselectItem(itemObject),Nodes[Count]=itemObject,itemObject.treeNod=targetObject.treeNod,targetObject.childsCount++;var tr=this._drawNewTr(Nodes[Count].htmlNode);beforeNode?(targetObject.htmlNode.childNodes[0].insertBefore(tr,beforeNode.tr),this._fixNodesCollection(targetObject,beforeNode),Nodes=targetObject.childNodes):(targetObject.htmlNode.childNodes[0].appendChild(tr),1==this.dadmode&&this._fixNodesCollection(targetObject,beforeNode))}if(!oldTree.dpcpy&&!framesMove){var zir=itemObject.tr;if(document.all&&-1!=navigator.appVersion.search(/MSIE\ 5\.0/gi)?window.setTimeout(function(){zir.parentNode.removeChild(zir)},250):itemObject.parentObject.htmlNode.childNodes[0].removeChild(itemObject.tr),beforeNode&&targetObject==itemObject.parentObject)z.childNodes[z.childsCount-1]=0;else for(var i=0;i<z.childsCount;i++)if(z.childNodes[i].id==itemObject.id){z.childNodes[i]=0;break}oldTree._compressChildList(z.childsCount,z.childNodes),z.childsCount--}if(!framesMove&&!oldTree.dpcpy){if(itemObject.tr=tr,tr.nodem=itemObject,itemObject.parentObject=targetObject,oldTree!=targetObject.treeNod){if(itemObject.treeNod._registerBranch(itemObject,oldTree))return;this._clearStyles(itemObject),this._redrawFrom(this,itemObject.parentObject),this._onradh&&this._onradh(itemObject.id)}this._correctPlus(targetObject),this._correctLine(targetObject),this._correctLine(itemObject),this._correctPlus(itemObject),beforeNode?this._correctPlus(beforeNode):targetObject.childsCount>=2&&(this._correctPlus(Nodes[targetObject.childsCount-2]),this._correctLine(Nodes[targetObject.childsCount-2])),this._correctPlus(Nodes[targetObject.childsCount-1]),this.tscheck&&this._correctCheckStates(targetObject),oldTree.tscheck&&oldTree._correctCheckStates(z)}return c>1&&(oldTree._correctPlus(z.childNodes[c-2]),oldTree._correctLine(z.childNodes[c-2])),oldTree._correctPlus(z),oldTree._correctLine(z),this.callEvent("onDrop",[itemObject.id,targetObject.id,beforeNode?beforeNode.id:null,oldTree,targetObject.treeNod]),itemObject.id},dhtmlXTreeObject.prototype._clearStyles=function(itemObject){if(itemObject.htmlNode){var td1=itemObject.htmlNode.childNodes[0].childNodes[0].childNodes[1],td3=td1.nextSibling.nextSibling;itemObject.span.innerHTML=itemObject.label,itemObject.i_sel=!1,itemObject._aimgs&&this.dragger.removeDraggableItem(td1.nextSibling),this.checkBoxOff?(td1.childNodes[0].style.display="",td1.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(td1.childNodes[0],this.imPath+this.checkArray[itemObject.checkstate])):td1.childNodes[0].style.display="none",td1.childNodes[0].treeNod=this,this.dragger.removeDraggableItem(td3),this.dragAndDropOff&&this.dragger.addDraggableItem(td3,this),this._aimgs&&this.dragger.addDraggableItem(td1.nextSibling,this),td3.childNodes[0].className="standartTreeRow",td3.onclick=this.onRowSelect,td3.ondblclick=this.onRowClick2,td1.previousSibling.onclick=this.onRowClick,this._correctLine(itemObject),this._correctPlus(itemObject);for(var i=0;i<itemObject.childsCount;i++)this._clearStyles(itemObject.childNodes[i])}},dhtmlXTreeObject.prototype._registerBranch=function(itemObject,oldTree){oldTree&&oldTree._globalIdStorageSub(itemObject.id),itemObject.id=this._globalIdStorageAdd(itemObject.id,itemObject),itemObject.treeNod=this;for(var i=0;i<itemObject.childsCount;i++)this._registerBranch(itemObject.childNodes[i],oldTree);return 0},dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(mode){this.tscheck=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.setOnMouseInHandler=function(func){this.ehlt=!0,this.attachEvent("onMouseIn",func)},dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(func){this.ehlt=!0,this.attachEvent("onMouseOut",func)},dhtmlXTreeObject.prototype.enableTreeImages=function(mode){this.timgen=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.enableFixedMode=function(mode){this.hfMode=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.enableCheckBoxes=function(mode,hidden){this.checkBoxOff=convertStringToBoolean(mode),this.cBROf=!(this.checkBoxOff||convertStringToBoolean(hidden))},dhtmlXTreeObject.prototype.enableMultiselection=function(mode,strict){this._amsel=convertStringToBoolean(mode),this._amselS=convertStringToBoolean(strict)},dhtmlXTreeObject.prototype.setStdImages=function(image1,image2,image3){this.imageArray[0]=image1,this.imageArray[1]=image2,this.imageArray[2]=image3},dhtmlXTreeObject.prototype.enableTreeLines=function(mode){this.treeLinesOn=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.setImageArrays=function(arrayName,image1,image2,image3,image4,image5){switch(arrayName){case"plus":this.plusArray[0]=image1,this.plusArray[1]=image2,this.plusArray[2]=image3,this.plusArray[3]=image4,this.plusArray[4]=image5;break;case"minus":this.minusArray[0]=image1,this.minusArray[1]=image2,this.minusArray[2]=image3,this.minusArray[3]=image4,this.minusArray[4]=image5}},dhtmlXTreeObject.prototype.openItem=function(itemId){this.skipLock=!0;var temp=this._globalIdStorageFind(itemId);return temp?this._openItem(temp):0},dhtmlXTreeObject.prototype._openItem=function(item){var state=this._getOpenState(item);if(0>state||this.XMLsource&&!item.XMLload){if(!this.callEvent("onOpenStart",[item.id,state]))return 0;this._HideShow(item,2),this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,item.id,!0),this.xmlstate&&this.XMLsource?(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe):this.callEvent("onOpenEnd",[item.id,this._getOpenState(item)]))}else this._srnd&&this._HideShow(item,2);item.parentObject&&!this._skip_open_parent&&this._openItem(item.parentObject)},dhtmlXTreeObject.prototype.closeItem=function(itemId){if(this.rootId==itemId)return 0;this.skipLock=!0;var temp=this._globalIdStorageFind(itemId);return temp?(temp.closeble&&this._HideShow(temp,1),void(this.skipLock=!1)):0},dhtmlXTreeObject.prototype.getLevel=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp?this._getNodeLevel(temp,0):0},dhtmlXTreeObject.prototype.setItemCloseable=function(itemId,flag){if(flag=convertStringToBoolean(flag),itemId&&itemId.span)var temp=itemId;else var temp=this._globalIdStorageFind(itemId);return temp?void(temp.closeble=flag):0},dhtmlXTreeObject.prototype._getNodeLevel=function(itemObject,count){return itemObject.parentObject?this._getNodeLevel(itemObject.parentObject,count+1):count},dhtmlXTreeObject.prototype.hasChildren=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp?this.XMLsource&&!temp.XMLload?!0:temp.childsCount:0},dhtmlXTreeObject.prototype._getLeafCount=function(itemNode){for(var a=0,b=0;b<itemNode.childsCount;b++)0==itemNode.childNodes[b].childsCount&&a++;return a},dhtmlXTreeObject.prototype.setItemText=function(itemId,newLabel,newTooltip){var temp=this._globalIdStorageFind(itemId);return temp?(temp.label=newLabel,temp.span.innerHTML=newLabel,void(temp.span.parentNode.parentNode.title=newTooltip||"")):0},dhtmlXTreeObject.prototype.getItemTooltip=function(itemId){var temp=this._globalIdStorageFind(itemId);return temp?temp.span.parentNode.parentNode._dhx_title||temp.span.parentNode.parentNode.title||"":""},dhtmlXTreeObject.prototype.refreshItem=function(itemId){itemId||(itemId=this.rootId);this._globalIdStorageFind(itemId);this.deleteChildItems(itemId),this._loadDynXML(itemId)},dhtmlXTreeObject.prototype.setItemImage2=function(itemId,image1,image2,image3){var temp=this._globalIdStorageFind(itemId);return temp?(temp.images[1]=image2,temp.images[2]=image3,temp.images[0]=image1,void this._correctPlus(temp)):0},dhtmlXTreeObject.prototype.setItemImage=function(itemId,image1,image2){var temp=this._globalIdStorageFind(itemId);return temp?(image2?(temp.images[1]=image1,temp.images[2]=image2):temp.images[0]=image1,void this._correctPlus(temp)):0},dhtmlXTreeObject.prototype.getSubItems=function(itemId){var temp=this._globalIdStorageFind(itemId,0,1);if(!temp)return 0;var z="";for(i=0;i<temp.childsCount;i++)z?z+=this.dlmtr+temp.childNodes[i].id:z=""+temp.childNodes[i].id;return z},dhtmlXTreeObject.prototype._getAllScraggyItems=function(node){for(var z="",i=0;i<node.childsCount;i++)if(node.childNodes[i].unParsed||node.childNodes[i].childsCount>0){if(node.childNodes[i].unParsed)var zb=this._getAllScraggyItemsXML(node.childNodes[i].unParsed,1);else var zb=this._getAllScraggyItems(node.childNodes[i]);zb&&(z?z+=this.dlmtr+zb:z=zb)}else z?z+=this.dlmtr+node.childNodes[i].id:z=""+node.childNodes[i].id;return z},dhtmlXTreeObject.prototype._getAllFatItems=function(node){for(var z="",i=0;i<node.childsCount;i++)if(node.childNodes[i].unParsed||node.childNodes[i].childsCount>0){if(z?z+=this.dlmtr+node.childNodes[i].id:z=""+node.childNodes[i].id,node.childNodes[i].unParsed)var zb=this._getAllFatItemsXML(node.childNodes[i].unParsed,1);else var zb=this._getAllFatItems(node.childNodes[i]);zb&&(z+=this.dlmtr+zb)}return z},dhtmlXTreeObject.prototype._getAllSubItems=function(itemId,z,node){if(node)temp=node;else var temp=this._globalIdStorageFind(itemId);if(!temp)return 0;z="";for(var i=0;i<temp.childsCount;i++){z?z+=this.dlmtr+temp.childNodes[i].id:z=""+temp.childNodes[i].id;var zb=this._getAllSubItems(0,z,temp.childNodes[i]);zb&&(z+=this.dlmtr+zb)}return z},dhtmlXTreeObject.prototype.selectItem=function(itemId,mode,preserve){mode=convertStringToBoolean(mode);var temp=this._globalIdStorageFind(itemId);if(!temp||!temp.parentObject)return 0;this.XMLloadingWarning?temp.parentObject.openMe=1:this._openItem(temp.parentObject);var ze=null;preserve&&(ze=new Object,ze.ctrlKey=!0,temp.i_sel&&(ze.skipUnSel=!0)),mode?this.onRowSelect(ze,temp.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1):this.onRowSelect(ze,temp.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)},dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var str=new Array,i=0;i<this._selected.length;i++)str[i]=this._selected[i].span.innerHTML;return str.join(this.dlmtr)},dhtmlXTreeObject.prototype._compressChildList=function(Count,Nodes){Count--;for(var i=0;Count>i;i++)0==Nodes[i]&&(Nodes[i]=Nodes[i+1],Nodes[i+1]=0)},dhtmlXTreeObject.prototype._deleteNode=function(itemId,htmlObject,skip){if(!htmlObject||!htmlObject.parentObject)return 0;var tempos=0,tempos2=0;htmlObject.tr.nextSibling&&(tempos=htmlObject.tr.nextSibling.nodem),htmlObject.tr.previousSibling&&(tempos2=htmlObject.tr.previousSibling.nodem);for(var sN=htmlObject.parentObject,Count=sN.childsCount,Nodes=sN.childNodes,i=0;Count>i;i++)if(Nodes[i].id==itemId){skip||sN.htmlNode.childNodes[0].removeChild(Nodes[i].tr),Nodes[i]=0;break}this._compressChildList(Count,Nodes),skip||sN.childsCount--,tempos&&(this._correctPlus(tempos),this._correctLine(tempos)),tempos2&&(this._correctPlus(tempos2),this._correctLine(tempos2)),this.tscheck&&this._correctCheckStates(sN),skip||this._globalIdStorageRecSub(htmlObject)},dhtmlXTreeObject.prototype.setCheck=function(itemId,state){var sNode=this._globalIdStorageFind(itemId,0,1);sNode&&("unsure"===state?this._setCheck(sNode,state):(state=convertStringToBoolean(state),this.tscheck&&this.smcheck?this._setSubChecked(state,sNode):this._setCheck(sNode,state)),this.smcheck&&this._correctCheckStates(sNode.parentObject))},dhtmlXTreeObject.prototype._setCheck=function(sNode,state){if(sNode){if((sNode.parentObject._r_logic||this._frbtr)&&state)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=sNode;else for(var i=0;i<sNode.parentObject.childsCount;i++)this._setCheck(sNode.parentObject.childNodes[i],0);var z=sNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];"unsure"==state?sNode.checkstate=2:state?sNode.checkstate=1:sNode.checkstate=0,sNode.dscheck&&(sNode.checkstate=sNode.dscheck),this._setSrc(z,this.imPath+(sNode.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[sNode.checkstate])}},dhtmlXTreeObject.prototype.setSubChecked=function(itemId,state){var sNode=this._globalIdStorageFind(itemId);this._setSubChecked(state,sNode),this._correctCheckStates(sNode.parentObject)},dhtmlXTreeObject.prototype._setSubChecked=function(state,sNode){if(state=convertStringToBoolean(state),sNode){if((sNode.parentObject._r_logic||this._frbtr)&&state)for(var i=0;i<sNode.parentObject.childsCount;i++)this._setSubChecked(0,sNode.parentObject.childNodes[i]);if(sNode._r_logic||this._frbtr)this._setSubChecked(state,sNode.childNodes[0]);else for(var i=0;i<sNode.childsCount;i++)this._setSubChecked(state,sNode.childNodes[i]);var z=sNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];state?sNode.checkstate=1:sNode.checkstate=0,sNode.dscheck&&(sNode.checkstate=sNode.dscheck),this._setSrc(z,this.imPath+(sNode.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[sNode.checkstate])}},dhtmlXTreeObject.prototype.isItemChecked=function(itemId){var sNode=this._globalIdStorageFind(itemId);if(sNode)return sNode.checkstate},dhtmlXTreeObject.prototype.deleteChildItems=function(itemId){var sNode=this._globalIdStorageFind(itemId);if(sNode)for(var j=sNode.childsCount,i=0;j>i;i++)this._deleteNode(sNode.childNodes[0].id,sNode.childNodes[0])},dhtmlXTreeObject.prototype.deleteItem=function(itemId,selectParent){if(!this._onrdlh||this._onrdlh(itemId)){this._deleteItem(itemId,selectParent)}this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"},dhtmlXTreeObject.prototype._deleteItem=function(itemId,selectParent,skip){selectParent=convertStringToBoolean(selectParent);var sNode=this._globalIdStorageFind(itemId);if(sNode){var pid=this.getParentId(itemId),zTemp=sNode.parentObject;return this._deleteNode(itemId,sNode,skip),this._editCell&&this._editCell.id==itemId&&(this._editCell=null),this._correctPlus(zTemp),this._correctLine(zTemp),selectParent&&pid!=this.rootId&&this.selectItem(pid,1),zTemp}},dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(itemObject){for(var i=0;i<itemObject.childsCount;i++)this._globalIdStorageRecSub(itemObject.childNodes[i]),this._globalIdStorageSub(itemObject.childNodes[i].id);this._globalIdStorageSub(itemObject.id);var z=itemObject;z.span=null,z.tr.nodem=null,z.tr=null,z.htmlNode=null},dhtmlXTreeObject.prototype.insertNewNext=function(itemId,newItemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children){var sNode=this._globalIdStorageFind(itemId);if(!sNode||!sNode.parentObject)return 0;var nodez=this._attachChildNode(0,newItemId,itemText,itemActionHandler,image1,image2,image3,optionStr,children,sNode);return nodez},dhtmlXTreeObject.prototype.getItemIdByIndex=function(itemId,index){var z=this._globalIdStorageFind(itemId);return!z||index>=z.childsCount?null:z.childNodes[index].id},dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(itemId,index){var z=this._globalIdStorageFind(itemId);return!z||index>=z.childsCount?null:z.childNodes[index].id},dhtmlXTreeObject.prototype.setDragHandler=function(func){this.attachEvent("onDrag",func)},dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null),this.allTree.className=this.allTree.className.replace(" selectionBox","")},dhtmlXTreeObject.prototype.enableDragAndDrop=function(mode,rmode){"temporary_disabled"==mode?(this.dADTempOff=!1,mode=!0):this.dADTempOff=!0,this.dragAndDropOff=convertStringToBoolean(mode),this.dragAndDropOff&&this.dragger.addDragLanding(this.allTree,this),arguments.length>1&&(this._ddronr=!convertStringToBoolean(rmode))},dhtmlXTreeObject.prototype._setMove=function(htmlNode,x,y){if(htmlNode.parentObject.span){var a1=getAbsoluteTop(htmlNode),a2=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode,this.dadmodefix=0;var zN=htmlNode.parentObject.span;zN.className+=" dragAndDropRow",this._lastMark=zN,this._autoScroll(null,a1,a2)}},dhtmlXTreeObject.prototype._autoScroll=function(node,a1,a2){this.autoScroll&&(node&&(a1=getAbsoluteTop(node),a2=getAbsoluteTop(this.allTree)-this.allTree.scrollTop),a1-a2-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),a1-a2<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))},dhtmlXTreeObject.prototype._createDragNode=function(htmlObject,e){if(!this.dADTempOff)return null;var obj=htmlObject.parentObject;if(!this.callEvent("onBeforeDrag",[obj.id,e]))return null;obj.i_sel||this._selectItem(obj,e);var dragSpan=document.createElement("div"),text=new Array;if(this._itim_dg)for(var i=0;i<this._selected.length;i++)text[i]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[i].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[i].span.innerHTML+"</td></tr></table>";else text=this.getSelectedItemText().split(this.dlmtr);return dragSpan.innerHTML=text.join(""),dragSpan.style.position="absolute",dragSpan.className="dragSpanDiv",this._dragged=(new Array).concat(this._selected),dragSpan},dhtmlXTreeObject.prototype._focusNode=function(item){var z=getAbsoluteTop(item.htmlNode)-getAbsoluteTop(this.allTree);(z>this.allTree.offsetHeight-30||0>z)&&(this.allTree.scrollTop=z+this.allTree.scrollTop)},dhtmlXTreeObject.prototype._preventNsDrag=function(e){return e&&e.preventDefault?(e.preventDefault(),!1):!1},dhtmlXTreeObject.prototype._drag=function(sourceHtmlObject,dhtmlObject,targetHtmlObject){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer),targetHtmlObject.parentObject||(targetHtmlObject=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0),this._clearMove();var z=sourceHtmlObject.parentObject.treeNod;if(z&&z._clearMove&&z._clearMove(""),!this.dragMove||this.dragMove()){if(z&&z._clearMove&&z._dragged)var col=z._dragged;else var col=new Array(sourceHtmlObject.parentObject);for(var trg=targetHtmlObject.parentObject,i=0;i<col.length;i++){var newID=this._moveNode(col[i],trg);this.dadmodec&&newID!==!1&&(trg=this._globalIdStorageFind(newID,!0,!0)),newID&&!this._sADnD&&this.selectItem(newID,0,1)}}z&&(z._dragged=new Array)},dhtmlXTreeObject.prototype._dragIn=function(htmlObject,shtmlObject,x,y){if(!this.dADTempOff)return 0;var fobj=shtmlObject.parentObject,tobj=htmlObject.parentObject;if(tobj||!this._ddronr){if(!this.callEvent("onDragIn",[fobj.id,tobj?tobj.id:null,fobj.treeNod,this]))return tobj&&this._autoScroll(htmlObject),0;if(tobj){if(null==fobj.childNodes)return this._setMove(htmlObject,x,y),htmlObject;for(var stree=fobj.treeNod,i=0;i<stree._dragged.length;i++)if(this._checkPNodes(tobj,stree._dragged[i]))return this._autoScroll(htmlObject),0;this._setMove(htmlObject,x,y),this._getOpenState(tobj)<=0&&(this._autoOpenId=tobj.id,this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1e3))}else this.allTree.className+=" selectionBox";return htmlObject}},dhtmlXTreeObject.prototype._autoOpenItem=function(e,treeObject){treeObject.openItem(treeObject._autoOpenId)},dhtmlXTreeObject.prototype._dragOut=function(htmlObject){this._clearMove(),this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)},dhtmlXTreeObject.prototype.moveItem=function(itemId,mode,targetId,targetTree){var sNode=this._globalIdStorageFind(itemId);if(!sNode)return 0;var resultId=null;switch(mode){case"right":alert("Not supported yet");break;case"item_child":var tNode=(targetTree||this)._globalIdStorageFind(targetId);if(!tNode)return 0;resultId=(targetTree||this)._moveNodeTo(sNode,tNode,0);break;case"item_sibling":var tNode=(targetTree||this)._globalIdStorageFind(targetId);if(!tNode)return 0;resultId=(targetTree||this)._moveNodeTo(sNode,tNode.parentObject,tNode);break;case"item_sibling_next":var tNode=(targetTree||this)._globalIdStorageFind(targetId);if(!tNode)return 0;resultId=tNode.tr&&tNode.tr.nextSibling&&tNode.tr.nextSibling.nodem?(targetTree||this)._moveNodeTo(sNode,tNode.parentObject,tNode.tr.nextSibling.nodem):(targetTree||this)._moveNodeTo(sNode,tNode.parentObject);break;case"left":sNode.parentObject.parentObject&&(resultId=this._moveNodeTo(sNode,sNode.parentObject.parentObject,sNode.parentObject));break;case"up":var z=this._getPrevNode(sNode);if(-1==z||!z.parentObject)return null;resultId=this._moveNodeTo(sNode,z.parentObject,z);break;case"up_strict":var z=this._getIndex(sNode);0!=z&&(resultId=this._moveNodeTo(sNode,sNode.parentObject,sNode.parentObject.childNodes[z-1]));break;case"down_strict":var z=this._getIndex(sNode),count=sNode.parentObject.childsCount-2;z==count?resultId=this._moveNodeTo(sNode,sNode.parentObject):count>z&&(resultId=this._moveNodeTo(sNode,sNode.parentObject,sNode.parentObject.childNodes[z+2]));break;case"down":var z=this._getNextNode(this._lastChild(sNode));if(-1==z||!z.parentObject)return;if(z.parentObject==sNode.parentObject)var z=this._getNextNode(z);if(-1==z)resultId=this._moveNodeTo(sNode,sNode.parentObject);else{if(-1==z||!z.parentObject)return;resultId=this._moveNodeTo(sNode,z.parentObject,z)}}return _isIE&&_isIE<8&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"),resultId},dhtmlXTreeObject.prototype._loadDynXML=function(id,src){src=src||this.XMLsource;var sn=(new Date).valueOf();this._ld_id=id,this.loadXML(src+getUrlSymbol(src)+"uid="+sn+"&id="+this._escape(id))},dhtmlXTreeObject.prototype._checkPNodes=function(item1,item2){return this._dcheckf?!1:item2==item1?1:item1.parentObject?this._checkPNodes(item1.parentObject,item2):0},dhtmlXTreeObject.prototype.disableDropCheck=function(mode){this._dcheckf=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.preventIECaching=function(mode){this.no_cashe=convertStringToBoolean(mode),this.XMLLoader.rSeed=this.no_cashe},dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching,dhtmlXTreeObject.prototype.disableCheckbox=function(itemId,mode){if("object"!=typeof itemId)var sNode=this._globalIdStorageFind(itemId,0,1);else var sNode=itemId;sNode&&(sNode.dscheck=convertStringToBoolean(mode)?(sNode.checkstate||0)%3+3:sNode.checkstate>2?sNode.checkstate-3:sNode.checkstate,this._setCheck(sNode),sNode.dscheck<3&&(sNode.dscheck=!1))},dhtmlXTreeObject.prototype.setEscapingMode=function(mode){this.utfesc=mode},dhtmlXTreeObject.prototype.enableHighlighting=function(mode){this.ehlt=!0,this.ehlta=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype._itemMouseOut=function(){var that=this.childNodes[3].parentObject,tree=that.treeNod;tree.callEvent("onMouseOut",[that.id]),that.id==tree._l_onMSI&&(tree._l_onMSI=null),tree.ehlta&&(that.span.className=that.span.className.replace("_lor",""))},dhtmlXTreeObject.prototype._itemMouseIn=function(){var that=this.childNodes[3].parentObject,tree=that.treeNod;tree._l_onMSI!=that.id&&tree.callEvent("onMouseIn",[that.id]),tree._l_onMSI=that.id,tree.ehlta&&(that.span.className=that.span.className.replace("_lor",""),that.span.className=that.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))},dhtmlXTreeObject.prototype.enableActiveImages=function(mode){this._aimgs=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.focusItem=function(itemId){var sNode=this._globalIdStorageFind(itemId);return sNode?void this._focusNode(sNode):0},dhtmlXTreeObject.prototype.getAllSubItems=function(itemId){return this._getAllSubItems(itemId)},dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless,dhtmlXTreeObject.prototype._getAllScraggyItems=function(node){for(var z="",i=0;i<node.childsCount;i++)if(node.childNodes[i].unParsed||node.childNodes[i].childsCount>0){if(node.childNodes[i].unParsed)var zb=this._getAllScraggyItemsXML(node.childNodes[i].unParsed,1);else var zb=this._getAllScraggyItems(node.childNodes[i]);zb&&(z?z+=this.dlmtr+zb:z=zb)}else z?z+=this.dlmtr+node.childNodes[i].id:z=""+node.childNodes[i].id;return z},dhtmlXTreeObject.prototype._getAllFatItems=function(node){for(var z="",i=0;i<node.childsCount;i++)if(node.childNodes[i].unParsed||node.childNodes[i].childsCount>0){if(z?z+=this.dlmtr+node.childNodes[i].id:z=""+node.childNodes[i].id,node.childNodes[i].unParsed)var zb=this._getAllFatItemsXML(node.childNodes[i].unParsed,1);else var zb=this._getAllFatItems(node.childNodes[i]);zb&&(z+=this.dlmtr+zb)}return z},dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids,dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)},dhtmlXTreeObject.prototype.getAllUnchecked=function(itemId){return itemId&&(itemId=this._globalIdStorageFind(itemId)),this._getAllChecked(itemId,"",0)},dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)},dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var temp=[this._getAllChecked("","",1)],second=this._getAllChecked("","",2);return second&&temp.push(second),temp.join(this.dlmtr)},dhtmlXTreeObject.prototype._getAllChecked=function(htmlNode,list,mode){htmlNode||(htmlNode=this.htmlNode),htmlNode.checkstate==mode&&(htmlNode.nocheckbox||(list?list+=this.dlmtr+htmlNode.id:list=""+htmlNode.id));for(var j=htmlNode.childsCount,i=0;j>i;i++)list=this._getAllChecked(htmlNode.childNodes[i],list,mode);return list?list:""},dhtmlXTreeObject.prototype.setItemStyle=function(itemId,style_string,resetCss){var resetCss=resetCss||!1,temp=this._globalIdStorageFind(itemId);return temp?void(temp.span.style.cssText?temp.span.style.cssText=resetCss?style_string:temp.span.style.cssText+";"+style_string:temp.span.setAttribute("style",temp.span.getAttribute("style")+"; "+style_string)):0},dhtmlXTreeObject.prototype.enableImageDrag=function(mode){this._itim_dg=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.setOnDragIn=function(func){this.attachEvent("onDragIn",func)},dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(mode){this.autoScroll=convertStringToBoolean(mode)},dhtmlXTreeObject.prototype.setSkin=function(name){var tmp=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=tmp+" dhxtree_"+name,"dhx_terrace"==name&&this.enableTreeLines(!1)},function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(obj){return[obj.parent,obj.width||"100%",obj.height||"100%",obj.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",
checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})}(),dhtmlXTreeObject.prototype._dp_init=function(dp){dp.attachEvent("insertCallback",function(upd,id,parent){var data=this._loader.doXPath(".//item",upd),text=data[0].getAttribute("text");this.obj.insertNewItem(parent,id,text,0,0,0,0,"CHILD")}),dp.attachEvent("updateCallback",function(upd,id,parent){var data=this._loader.doXPath(".//item",upd),text=data[0].getAttribute("text");this.obj.setItemText(id,text),this.obj.getParentId(id)!=parent&&this.obj.moveItem(id,"item_child",parent),this.setUpdated(id,!0,"updated")}),dp.attachEvent("deleteCallback",function(upd,id,parent){this.obj.setUserData(id,this.action_param,"true_deleted"),this.obj.deleteItem(id,!1)}),dp._methods=["setItemStyle","","changeItemId","deleteItem"],this.attachEvent("onEdit",function(state,id){return 3==state&&dp.setUpdated(id,!0),!0}),this.attachEvent("onDrop",function(id,id_2,id_3,tree_1,tree_2){tree_1==tree_2&&dp.setUpdated(id,!0)}),this._onrdlh=function(rowId){var z=dp.getState(rowId);return"inserted"==z?(dp.set_invalid(rowId,!1),dp.setUpdated(rowId,!1),!0):"true_deleted"==z?(dp.setUpdated(rowId,!1),!0):(dp.setUpdated(rowId,!0,"deleted"),!1)},this._onradh=function(rowId){dp.setUpdated(rowId,!0,"inserted")},dp._getRowData=function(rowId){var data={},z=this.obj._globalIdStorageFind(rowId),z2=z.parentObject,i=0;for(i=0;i<z2.childsCount&&z2.childNodes[i]!=z;i++);for(data.tr_id=z.id,data.tr_pid=z2.id,data.tr_order=i,data.tr_text=z.span.innerHTML,z2=(z._userdatalist||"").split(","),i=0;i<z2.length;i++)data[z2[i]]=z.userData["t_"+z2[i]];return data}},jsonPointer.prototype={text:function(){var afff=function(n){for(var p=[],i=0;i<n.length;i++)p.push("{"+sfff(n[i])+"}");return p.join(",")},sfff=function(n){var p=[];for(var a in n)"object"==typeof n[a]?a.length?p.push('"'+a+'":['+afff(n[a])+"]"):p.push('"'+a+'":{'+sfff(n[a])+"}"):p.push('"'+a+'":"'+n[a]+'"');return p.join(",")};return"{"+sfff(this.d)+"}"},get:function(name){return this.d[name]},exists:function(){return!!this.d},content:function(){return this.d.content},each:function(name,f,t){var a=this.d[name],c=new jsonPointer;if(a)for(var i=0;i<a.length;i++)c.d=a[i],f.apply(t,[c,i])},get_all:function(){return this.d},sub:function(name){return new jsonPointer(this.d[name],this.d)},sub_exists:function(name){return!!this.d[name]},each_x:function(name,rule,f,t,i){var a=this.d[name],c=new jsonPointer(0,this.d);if(a)for(i=i||0;i<a.length;i++)if(a[i][rule]&&(c.d=a[i],-1==f.apply(t,[c,i])))return},up:function(name){return new jsonPointer(this.dp,this.d)},set:function(name,val){this.d[name]=val},clone:function(name){return new jsonPointer(this.d,this.dp)},through:function(name,rule,v,f,t){var a=this.d[name];if(a.length)for(var i=0;i<a.length;i++){if(null!=a[i][rule]&&""!=a[i][rule]&&(!v||a[i][rule]==v)){var c=new jsonPointer(a[i],this.d);f.apply(t,[c,i])}var w=this.d;this.d=a[i],this.sub_exists(name)&&this.through(name,rule,v,f,t),this.d=w}}},dhtmlXTreeObject.prototype.loadJSArrayFile=function(file,afterCall){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){eval("var z="+arguments[4].xmlDoc.responseText),that.loadJSArray(z)},this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype.loadCSV=function(file,afterCall){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){that.loadCSVString(arguments[4].xmlDoc.responseText)},this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype.loadJSArray=function(ar,afterCall){for(var z=[],i=0;i<ar.length;i++)z[ar[i][1]]||(z[ar[i][1]]=[]),z[ar[i][1]].push({id:ar[i][0],text:ar[i][2]});var top={id:this.rootId},f=function(top,f){if(z[top.id]){top.item=z[top.id];for(var j=0;j<top.item.length;j++)f(top.item[j],f)}};f(top,f),this.loadJSONObject(top,afterCall)},dhtmlXTreeObject.prototype.loadCSVString=function(csv,afterCall){for(var z=[],ar=csv.split("\n"),i=0;i<ar.length;i++){var t=ar[i].split(",");z[t[1]]||(z[t[1]]=[]),z[t[1]].push({id:t[0],text:t[2]})}var top={id:this.rootId},f=function(top,f){if(z[top.id]){top.item=z[top.id];for(var j=0;j<top.item.length;j++)f(top.item[j],f)}};f(top,f),this.loadJSONObject(top,afterCall)},dhtmlXTreeObject.prototype.loadJSONObject=function(json,afterCall){this.parsCount||this.callEvent("onXLS",[this,null]),this.xmlstate=1;var p=new jsonPointer(json);this._parse(p),this._p=p,afterCall&&afterCall()},dhtmlXTreeObject.prototype.loadJSON=function(file,afterCall){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){try{eval("var t="+arguments[4].xmlDoc.responseText)}catch(e){return void dhtmlxError.throwError("LoadXML","Incorrect JSON",[arguments[4].xmlDoc,this])}var p=new jsonPointer(t);that._parse(p),that._p=p},this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var out=['{"id":"'+this.rootId+'", "item":['],p=[],i=0;i<this.htmlNode.childsCount;i++)p.push(this._serializeItemJSON(this.htmlNode.childNodes[i]));return out.push(p.join(",")),out.push("]}"),out.join("")},dhtmlXTreeObject.prototype._serializeItemJSON=function(itemNode){var out=[];if(itemNode.unParsed)return itemNode.unParsed.text();if(this._selected.length)var lid=this._selected[0].id;else lid="";var text=itemNode.span.innerHTML;if(text=text.replace(/\"/g,'\\"',text),this._xfullXML?out.push('{ "id":"'+itemNode.id+'", '+(1==this._getOpenState(itemNode)?' "open":"1", ':"")+(lid==itemNode.id?' "select":"1",':"")+' "text":"'+text+'", "im0":"'+itemNode.images[0]+'", "im1":"'+itemNode.images[1]+'", "im2":"'+itemNode.images[2]+'" '+(itemNode.acolor?', "aCol":"'+itemNode.acolor+'" ':"")+(itemNode.scolor?', "sCol":"'+itemNode.scolor+'" ':"")+(1==itemNode.checkstate?', "checked":"1" ':2==itemNode.checkstate?', "checked":"-1"':"")+(itemNode.closeable?', "closeable":"1" ':"")+(this.XMLsource&&0==itemNode.XMLload?', "child":"1" ':"")):out.push('{ "id":"'+itemNode.id+'", '+(1==this._getOpenState(itemNode)?' "open":"1", ':"")+(lid==itemNode.id?' "select":"1",':"")+' "text":"'+text+'"'+(this.XMLsource&&0==itemNode.XMLload?', "child":"1" ':"")),this._xuserData&&itemNode._userdatalist){out.push(', "userdata":[');for(var names=itemNode._userdatalist.split(","),p=[],i=0;i<names.length;i++)p.push('{ "name":"'+names[i]+'" , "content":"'+itemNode.userData["t_"+names[i]]+'" }');out.push(p.join(",")),out.push("]")}if(itemNode.childsCount){out.push(', "item":[');for(var p=[],i=0;i<itemNode.childsCount;i++)p.push(this._serializeItemJSON(itemNode.childNodes[i]));out.push(p.join(",")),out.push("]\n")}return out.push("}\n"),out.join("")},"undefined"==typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(_elem){for(var i=0;i<this.length;i++)if(this[i]===_elem)return i;return-1});var _egwQueuedCallbacks={};egwEventQueue.prototype.flush=function(){this.events={}},egwEventQueue.prototype.queue=function(_proc,_context,_args,_id){"undefined"!=typeof _args&&_args instanceof Array||(_args=[]),this.key_id++;var key="";key="string"==typeof _id&&_id?_id:"ev_"+this.key_id;var cnt=1;return"undefined"!=typeof this.events[key]&&(cnt=this.events[key].cnt+1),this.events[key]={proc:_proc,context:_context,args:_args,cnt:cnt},key},egwEventQueue.prototype.run=function(_key){if("undefined"!=typeof this.events[_key]){var eventObj=this.events[_key];eventObj.cnt--,0==eventObj.cnt&&(eventObj.proc.apply(eventObj.context,eventObj.args),delete this.events[_key])}},egwEventQueue.prototype.queueTimeout=function(_proc,_context,_args,_id,_timeout){var key=this.queue(_proc,_context,_args,_id),self=this;window.setTimeout(function(){self.run(key)},_timeout)},egwFnct.prototype.hasHandler=function(){return null!==this.fnct&&!this.isDefault},egwFnct.prototype.setValue=function(_value){if(this.value=null,this.fnct=null,"function"==typeof _value)this.fnct=_value;else if("string"==typeof _value&&"javaScript:"==_value.substr(0,11)&&"function"==typeof window[_value.substr(11)])this.fnct=window[_value.substr(11)],console.log("Global function is bad!",_value);else if(this.acceptedTypes.indexOf(typeof _value)>=0)this.value=_value;else if("string"==typeof _value&&"javaScript:app."==_value.substr(0,15)&&window.app){var parts=_value.split(".");3==parts.length&&"object"==typeof window.app[parts[1]]&&"function"==typeof window.app[parts[1]][parts[2]]&&(this.fnct=window.app[parts[1]][parts[2]],this.context=window.app[parts[1]])}else _value&&egw.debug("warn","Unable to parse Exec function %o for action '%s'",_value,this.context.id)},egwFnct.prototype.exec=function(){return this.fnct?this.fnct.apply(this.context,arguments):this.value};var _egw_mobileBrowser=null,egw_globalActionManager=null,egw_globalObjectManager=null;"undefined"==typeof window._egwActionClasses&&(window._egwActionClasses={}),_egwActionClasses.default={actionConstructor:egwAction,implementation:null},_egwActionClasses.actionManager={actionConstructor:egwActionManager,implementation:null},egwAction.prototype.remove=function(){if(this.children=[],this.parent){var idx=this.parent.children.indexOf(this);idx>=0&&this.parent.children.splice(idx,1)}},egwAction.prototype.getActionById=function(_id,_search_depth){if(this.id==_id)return this;if("undefined"==typeof _search_depth&&(_search_depth=Number.MAX_VALUE),this.canHaveChildren)for(var i=0;i<this.children.length&&_search_depth>0;i++){var elem=this.children[i].getActionById(_id,_search_depth-1);if(elem)return elem}return null},egwAction.prototype.getActionsByAttr=function(_attr,_val){var _actions=[];if("undefined"!=typeof this[_attr]&&this[_attr]===_val&&_actions.push(this),this.canHaveChildren)for(var i=0;i<this.children.length;i++)_actions=_actions.concat(this.children[i].getActionsByAttr(_attr,_val));return _actions},egwAction.prototype.addAction=function(_type,_id,_caption,_iconUrl,_onExecute,_allowOnMultiple){if(_type||(_type="popup"),this.canHaveChildren){var constructor=_egwActionClasses[_type].actionConstructor;if("function"==typeof constructor){var action=new constructor(this,_id,_caption,_iconUrl,_onExecute,_allowOnMultiple);return this.children.push(action),action}throw"Given action type not registered."}throw"This action does not allow child elements!"},egwAction.prototype.defaultIcons={view:"view",edit:"edit",open:"edit",add:"new",new:"new",delete:"delete",cat:"attach",document:"etemplate/merge",print:"print",copy:"copy",move:"move",cut:"cut",paste:"editpaste",save:"save",apply:"apply",cancel:"cancel",continue:"continue",next:"continue",finish:"finish",back:"back",previous:"back",close:"close"},egwAction.prototype.updateActions=function(_actions,_app){if(!this.canHaveChildren)throw"This action element cannot have children!";"undefined"==typeof _app&&(_app=egw_getAppName());var egw=window.egw(_app);jQuery.isArray(_actions)&&(_actions=jQuery.extend({},_actions));for(var i in _actions){var elem=_actions[i];if("string"==typeof elem&&(_actions[i]=elem={caption:elem}),"object"==typeof elem){"string"!=typeof elem.id&&(elem.id=i),"undefined"==typeof elem.iconUrl&&("undefined"==typeof elem.icon&&(elem.icon=this.defaultIcons[elem.id]),"undefined"!=typeof elem.icon&&(elem.iconUrl=egw.image(elem.icon)),delete elem.icon),"delete"==elem.id&&"undefined"==typeof elem.shortcut&&(elem.shortcut={keyCode:46,shift:!1,ctrl:!1,alt:!1,caption:egw.lang("Del")}),!elem.caption||"undefined"!=typeof elem.no_lang&&elem.no_lang||(elem.caption=egw.lang(elem.caption),"string"==typeof elem.hint&&(elem.hint=egw.lang(elem.hint))),delete elem.no_lang;for(var attr in{confirm:"",confirm_multiple:""})"string"==typeof elem[attr]&&(elem[attr]=egw.lang(elem[attr])+("?"!=elem[attr].substr(-1)?"?":""));"undefined"!=typeof elem.enabled&&elem.enabled!==!0||("undefined"!=typeof elem.enableClass?elem.enabled=this.enableClass:"undefined"!=typeof elem.disableClass?elem.enabled=this.not_disableClass:"undefined"!=typeof elem.enableId&&(elem.enabled=this.enableId));var action=this.getActionById(elem.id);if(!action){"undefined"==typeof elem.type&&(elem.type="popup");var constructor=null;if(this.canHaveChildren!==!0&&-1==this.canHaveChildren.indexOf(elem.type))throw"This child type '"+elem.type+"' is not allowed!";if("undefined"!=typeof _egwActionClasses[elem.type]&&(constructor=_egwActionClasses[elem.type].actionConstructor),"function"!=typeof constructor||!constructor)throw'Given action type "'+elem.type+'" not registered.';action=new constructor(this,elem.id),this.children.push(action)}action.updateAction(elem),elem.children&&action.updateActions(elem.children,_app)}}},egwAction.prototype.not_disableClass=function(_action,_senders,_target){return!$j(_target.iface.getDOMNode()).hasClass(_action.data.disableClass)},egwAction.prototype.enableClass=function(_action,_senders,_target){return $j(_target.iface.getDOMNode()).hasClass(_action.data.enableClass)},egwAction.prototype.enableId=function(_action,_senders,_target){return"string"==typeof _action.data.enableId&&(_action.data.enableId=new RegExp(_action.data.enableId)),_target.id.match(_action.data.enableId)},egwAction.prototype.setDefaultExecute=function(_value){if("actionManager"==this.type||this.onExecute.hasHandler()||(this.onExecute.isDefault=!0,this.onExecute.setValue(_value)),this.canHaveChildren)for(var i=0;i<this.children.length;i++)this.children[i].setDefaultExecute(_value)},egwAction.prototype.execute=function(_senders,_target){if("undefined"==typeof _target&&(_target=null),this.data&&(this.data.confirm||this.data.confirm_multiple)&&this.onExecute.fcnt!=window.nm_action&&"undefined"!=typeof et2_dialog){var msg=this.data.confirm||"";if(_senders.length>1){this.data.confirm_multiple&&(msg=this.data.confirm_multiple);var obj_manager=egw_getObjectManager(this.getManager().parent.id,!1);obj_manager&&obj_manager.getAllSelected()&&(msg+="\n\n"+egw().lang("Attention: action will be applied to all rows, not only visible ones!"))}var self=this;if(msg.trim().length>0)return void et2_dialog.show_dialog(function(_button){return _button==et2_dialog.YES_BUTTON?self.onExecute.exec(self,_senders,_target):void 0},msg,self.data.hint,{},et2_dialog.BUTTONS_YES_NO,et2_dialog.QUESTION_MESSAGE)}return this.onExecute.exec(this,_senders,_target)},egwAction.prototype.set_onExecute=function(_value){this.onExecute.setValue(_value)},egwAction.prototype.set_caption=function(_value){this.caption=_value},egwAction.prototype.set_iconUrl=function(_value){this.iconUrl=_value},egwAction.prototype.set_enabled=function(_value){this.enabled.setValue(_value)},egwAction.prototype.set_allowOnMultiple=function(_value){this.allowOnMultiple=_value},egwAction.prototype.set_hideOnDisabled=function(_value){this.hideOnDisabled=_value},egwAction.prototype.set_hideOnMobile=function(_value){this.hideOnMobile=_value},egwAction.prototype.set_data=function(_value){this.data=_value},egwAction.prototype.updateAction=function(_data){egwActionStoreJSON(_data,this,"data")},egwAction.prototype.appendToTree=function(_tree,_addChildren){"undefined"==typeof _addChildren&&(_addChildren=!0),"undefined"==typeof _addParent&&(_addParent=!0);var root=_tree.root,parent_cntr=null,cntr={action:this,children:[]};if(this.parent&&"actionManager"!=this.type){parent_cntr=_egwActionTreeContains(root,this.parent),parent_cntr||(parent_cntr=this.parent.appendToTree(_tree,!1));for(var added=!1,i=0;i<parent_cntr.children.length;i++)if(parent_cntr.children[i].action==this){cntr=parent_cntr.children[i],added=!0;break}added||parent_cntr.children.push(cntr)}else{for(var added=!1,i=0;i<root.length;i++)if(root[i].action==this){cntr=root[i],added=!0;break}added||root.push(cntr)}if(_addChildren)for(var i=0;i<this.children.length;i++)this.children[i].appendToTree(_tree,!0);return cntr},egwAction.prototype.getManager=function(){return"actionManager"==this.type?this:this.parent?this.parent.getManager():null},egwActionImplementation.prototype.registerAction=function(_actionObjectInterface,_triggerCallback,_context){return"undefined"==typeof _context&&(_context=null),this.doRegisterAction(_actionObjectInterface,_triggerCallback,_context)},egwActionImplementation.prototype.unregisterAction=function(_actionObjectInterface){return this.doUnregisterAction(_actionObjectInterface)},egwActionImplementation.prototype.executeImplementation=function(_context,_selected,_links){return this.doExecuteImplementation(_context,_selected,_links)},egwActionLink.prototype.updateLink=function(_data){egwActionStoreJSON(_data,this,!0)},egwActionLink.prototype.set_enabled=function(_value){this.enabled=_value},egwActionLink.prototype.set_visible=function(_value){this.visible=_value},egwActionLink.prototype.set_actionId=function(_value){if(this.actionId=_value,this.actionObj=this.manager.getActionById(_value),!this.actionObj)throw"Action object with id '"+_value+"' does not exist!"};var EGW_AO_STATE_NORMAL=0,EGW_AO_STATE_SELECTED=1,EGW_AO_STATE_FOCUSED=2,EGW_AO_STATE_VISIBLE=4,EGW_AO_EVENT_DRAG_OVER_ENTER=0,EGW_AO_EVENT_DRAG_OVER_LEAVE=1,EGW_AO_SHIFT_STATE_NONE=0,EGW_AO_SHIFT_STATE_MULTI=1,EGW_AO_SHIFT_STATE_BLOCK=2,EGW_AO_FLAG_IS_CONTAINER=1,EGW_AO_FLAG_DEFAULT_FOCUS=2;egwActionObject.prototype.setAOI=function(_aoi){null==_aoi&&(_aoi=new egwActionObjectDummyInterface),this.iface&&_aoi.setState(this.iface.getState()),this.iface=_aoi,this.iface.setStateChangeCallback(this._ifaceCallback,this),this.iface.setReconnectActionsCallback(this._reconnectCallback,this)},egwActionObject.prototype.getObjectById=function(_id,_search_depth){if(this.id==_id)return this;"undefined"==typeof _search_depth&&(_search_depth=Number.MAX_VALUE);for(var i=0;i<this.children.length&&_search_depth>0;i++){var obj=this.children[i].getObjectById(_id,_search_depth-1);if(obj)return obj}return null},egwActionObject.prototype.addObject=function(_id,_interface,_flags){return this.insertObject(!1,_id,_interface,_flags)},egwActionObject.prototype.insertObject=function(_index,_id,_iface,_flags){_index===!1&&(_index=this.children.length);var obj=null;if("object"==typeof _id?(obj=_id,obj.parent=null,obj.setFocused(!1),obj.parent=this):"string"==typeof _id&&(obj=new egwActionObject(_id,this,_iface,this.manager,_flags)),!obj)throw"Error while adding new element to the ActionObjects!";return this.children.splice(_index,0,obj),obj},egwActionObject.prototype.clear=function(){for(;this.children.length>0;)this.children[0].remove();this.selectedChildren=[],this.focusedChild=null,this.actionLinks=[]},egwActionObject.prototype.remove=function(){if(this.setFocused(!1),this.setSelected(!1),this.setAllSelected(!1),this.unregisterActions(),this.clear(),null!=this.parent){var idx=this.parent.children.indexOf(this);idx>=0&&this.parent.children.splice(idx,1)}},egwActionObject.prototype.getRootObject=function(){return null===this.parent?this:this.parent.getRootObject()},egwActionObject.prototype.getParentList=function(){if(null===this.parent)return[];var list=this.parent.getParentList();return list.unshift(this.parent),list},egwActionObject.prototype.getContainerRoot=function(){return egwBitIsSet(this.flags,EGW_AO_FLAG_IS_CONTAINER)||null===this.parent?this:this.parent.getContainerRoot()},egwActionObject.prototype.getSelectedObjects=function(_test,_list){if("undefined"==typeof _test&&(_test=null),"undefined"==typeof _list&&(_list={elements:[]}),_test&&!_test(this)||!this.getSelected()||_list.elements.push(this),this.selectedChildren)for(var i=0;i<this.selectedChildren.length;i++)this.selectedChildren[i].getSelectedObjects(_test,_list);return _list.elements},egwActionObject.prototype.getAllSelected=function(){if(this.children.length==this.selectedChildren.length){for(var i=0;i<this.children.length;i++)if(!this.children[i].getAllSelected())return!1;return!egwBitIsSet(this.flags,EGW_AO_FLAG_IS_CONTAINER)||this.children.length>0}return!1},egwActionObject.prototype.toggleAllSelected=function(_select){return"undefined"==typeof _select&&(_select=!this.getAllSelected()),_select&&this.manager&&this.manager.getActionById("select_all")?this.manager.getActionById("select_all").execute(this):void this.setAllSelected(_select)},egwActionObject.prototype.flatList=function(_visibleOnly,_obj){"undefined"==typeof _obj&&(_obj={elements:[]}),"undefined"==typeof _visibleOnly&&(_visibleOnly=!1),_visibleOnly&&!this.getVisible()||_obj.elements.push(this);for(var i=0;i<this.children.length;i++)this.children[i].flatList(_visibleOnly,_obj);return _obj.elements},egwActionObject.prototype.traversePath=function(_to){var contRoot=this.getContainerRoot();if(contRoot){var flatList=contRoot.flatList(),thisId=flatList.indexOf(this),toId=flatList.indexOf(_to);if(-1!==thisId&&-1!==toId){var from=Math.min(thisId,toId),to=Math.max(thisId,toId);return flatList.slice(from,to+1)}}return[]},egwActionObject.prototype.getIndex=function(){return null===this.parent?0:this.parent.children.indexOf(this)},egwActionObject.prototype.getFocusedObject=function(){return this.focusedChild||null},egwActionObject.prototype._ifaceCallback=function(_newState,_changedBit,_shiftState){"undefined"==typeof _shiftState&&(_shiftState=EGW_AO_SHIFT_STATE_NONE);var selected=egwBitIsSet(_newState,EGW_AO_STATE_SELECTED),visible=egwBitIsSet(_newState,EGW_AO_STATE_VISIBLE);if(_changedBit==EGW_AO_STATE_VISIBLE&&visible!=this.getVisible()){if(!visible)return this.setSelected(!1),this.setFocused(!1),EGW_AO_STATE_NORMAL;this.registerActions()}if(this.parent&&visible&&_changedBit==EGW_AO_STATE_SELECTED){var selected=egwBitIsSet(_newState,EGW_AO_STATE_SELECTED),objs=[];if(selected){this.parent.children.indexOf(this);if(!egwBitIsSet(_shiftState,EGW_AO_SHIFT_STATE_MULTI)){this.getContainerRoot().setAllSelected(!1)}if(egwBitIsSet(_shiftState,EGW_AO_SHIFT_STATE_BLOCK)){var focused=this.getFocusedObject();if(focused){objs=this.traversePath(focused);for(var i=0;i<objs.length;i++)objs[i].setSelected(!0)}}}0!=objs.length&&egwBitIsSet(_shiftState,EGW_AO_SHIFT_STATE_BLOCK)||(this.setFocused(!0),_newState=egwSetBit(EGW_AO_STATE_FOCUSED,_newState,!0)),this.setSelected(selected)}return _newState},egwActionObject.prototype.handleKeyPress=function(_keyCode,_shift,_ctrl,_alt){switch(_keyCode){case EGW_KEY_ARROW_UP:case EGW_KEY_ARROW_DOWN:case EGW_KEY_PAGE_UP:case EGW_KEY_PAGE_DOWN:if(!_alt){var intval=_keyCode==EGW_KEY_ARROW_UP||_keyCode==EGW_KEY_ARROW_DOWN?1:10;if(this.children.length>0){var focused=this.getFocusedObject(),selObj=null;if(selObj=focused?_keyCode==EGW_KEY_ARROW_UP||_keyCode==EGW_KEY_PAGE_UP?focused.getPrevious(intval):focused.getNext(intval):this.children[0],null!=selObj){if(_shift)for(var objs=focused.traversePath(selObj),i=0;i<objs.length;i++)objs[i].setSelected(!0);else this.setAllSelected(!1);selObj.setSelected(!0),selObj.setFocused(!0),selObj.makeVisible()}return!0}}break;case EGW_KEY_A:if(_ctrl&&!_shift&&!_alt)return this.toggleAllSelected(),!0}return!1},egwActionObject.prototype.getPrevious=function(_intval){if(null!=this.parent){if(this.getFocused()&&!this.getSelected())return this;var flatTree=this.getContainerRoot().flatList(),idx=flatTree.indexOf(this);if(idx>0)return idx=Math.max(1,idx-_intval),flatTree[idx]}return this},egwActionObject.prototype.getNext=function(_intval){if(null!=this.parent){if(this.getFocused()&&!this.getSelected())return this;var flatTree=this.getContainerRoot().flatList(!0),idx=flatTree.indexOf(this);if(idx<flatTree.length-1)return idx=Math.min(flatTree.length-1,idx+_intval),flatTree[idx]}return this},egwActionObject.prototype.getSelected=function(){return egwBitIsSet(this.getState(),EGW_AO_STATE_SELECTED)},egwActionObject.prototype.getFocused=function(){return egwBitIsSet(this.getState(),EGW_AO_STATE_FOCUSED)},egwActionObject.prototype.getVisible=function(){return egwBitIsSet(this.getState(),EGW_AO_STATE_VISIBLE)},egwActionObject.prototype.getState=function(){return this.iface.getState()},egwActionObject.prototype.setFocused=function(_focused){"undefined"==typeof _focused&&(_focused=!0);var state=this.iface.getState();if(egwBitIsSet(state,EGW_AO_STATE_FOCUSED)!=_focused){var currentlyFocused=this.getFocusedObject();currentlyFocused&&currentlyFocused!=this&&currentlyFocused.setFocused(!1),this.iface.setState(egwSetBit(state,EGW_AO_STATE_FOCUSED,_focused)),this.parent&&this.parent.updateFocusedChild(this,_focused)}null!=this.focusedChild&&0==_focused&&this.focusedChild.setFocused(!1)},egwActionObject.prototype.setSelected=function(_selected){var state=this.iface.getState();egwBitIsSet(state,EGW_AO_STATE_SELECTED)!=_selected&&egwBitIsSet(state,EGW_AO_STATE_VISIBLE)&&(this.iface.setState(egwSetBit(state,EGW_AO_STATE_SELECTED,_selected)),this.parent&&this.parent.updateSelectedChildren(this,_selected||this.selectedChildren.length>0))},egwActionObject.prototype.setAllSelected=function(_selected,_informParent){"undefined"==typeof _informParent&&(_informParent=!0);var state=this.iface.getState();if(egwBitIsSet(state,EGW_AO_STATE_SELECTED)!=_selected&&(this.iface.setState(egwSetBit(state,EGW_AO_STATE_SELECTED,_selected)),_informParent&&this.parent&&this.parent.updateSelectedChildren(this,_selected)),_selected||this.selectedChildren.length>0)for(var i=0;i<this.children.length;i++)this.children[i].setAllSelected(_selected,!1);if(this.selectedChildren=[],_selected)for(var i=0;i<this.children.length;i++)this.selectedChildren.push(this.children[i]);egwQueueCallback(this.setSelectedCallback,[],this,"setSelectedCallback")},egwActionObject.prototype.updateSelectedChildren=function(_child,_selected){var id=this.selectedChildren.indexOf(_child),wasEmpty=0==this.selectedChildren.length;_selected&&-1==id?this.selectedChildren.push(_child):_selected||-1==id||this.selectedChildren.splice(id,1),wasEmpty!=this.selectedChildren.length==0&&this.parent&&this.parent.updateSelectedChildren(this,wasEmpty),egwQueueCallback(this.setSelectedCallback,this.getContainerRoot().getSelectedObjects(),this,"setSelectedCallback")},egwActionObject.prototype.updateFocusedChild=function(_child,_focused){_focused?this.focusedChild=_child:this.focusedChild==_child&&(this.focusedChild=null),this.parent&&this.parent.updateFocusedChild(_child,_focused)},egwActionObject.prototype.updateActionLinks=function(_actionLinks,_recursive,_doCreate){"undefined"==typeof _recursive&&(_recursive=!1),"undefined"==typeof _doCreate&&(_doCreate=!0);for(var i=0;i<_actionLinks.length;i++){var elem=_actionLinks[i];if("string"==typeof elem&&(elem={actionId:elem}),"undefined"!=typeof elem.actionId&&elem.actionId){var actionLink=this.getActionLink(elem.actionId);!actionLink&&_doCreate&&(actionLink=new egwActionLink(this.manager),this.actionLinks.push(actionLink)),actionLink&&actionLink.updateLink(elem)}}if(_recursive)for(var i=0;i<this.children.length;i++)this.children[i].updateActionLinks(_actionLinks,!0,_doCreate);this.getVisible()&&null!=this.iface&&this.registerActions()},egwActionObject.prototype._reconnectCallback=function(){this.registeredImpls=[],this.registerActions()},egwActionObject.prototype.registerActions=function(){var groups=this.getActionImplementationGroups();for(var group in groups)if("undefined"!=typeof _egwActionClasses[group]&&_egwActionClasses[group].implementation&&this.iface){var impl=_egwActionClasses[group].implementation();-1==this.registeredImpls.indexOf(impl)&&impl.registerAction(this.iface,this.executeActionImplementation,this)&&this.registeredImpls.push(impl)}},egwActionObject.prototype.unregisterActions=function(){for(;this.registeredImpls.length>0;){var impl=this.registeredImpls.pop();this.iface&&impl.unregisterAction(this.iface)}},egwActionObject.prototype.triggerCallback=function(){return this.onBeforeTrigger?this.onBeforeTrigger():!0},egwActionObject.prototype.makeVisible=function(){this.iface.makeVisible()};var EGW_AO_EXEC_SELECTED=0,EGW_AO_EXEC_THIS=1;egwActionObject.prototype.executeActionImplementation=function(_implContext,_implType,_execType){if("undefined"==typeof _execType&&(_execType=EGW_AO_EXEC_SELECTED),"string"==typeof _implType&&(_implType=_egwActionClasses[_implType].implementation()),"object"==typeof _implType&&_implType){if(_execType==EGW_AO_EXEC_SELECTED){egwBitIsSet(EGW_AO_FLAG_IS_CONTAINER,this.flags)||this.forceSelection();var selectedActions=this.getSelectedLinks(_implType.type)}else _execType==EGW_AO_EXEC_THIS&&(selectedActions=this._getLinks([this],_implType.type));if(selectedActions.selected.length>0&&egwObjectLength(selectedActions.links)>0)return _implType.executeImplementation(_implContext,selectedActions.selected,selectedActions.links)}return!1},egwActionObject.prototype.forceSelection=function(){var selected=this.getContainerRoot().getSelectedObjects(),thisInList=-1!=selected.indexOf(this);thisInList||(this.getContainerRoot().setAllSelected(!1),this.setSelected(!0)),this.setFocused(!0)},egwActionObject.prototype.getSelectedLinks=function(_actionType){var selected=this.getContainerRoot().getSelectedObjects();return this._getLinks(selected,_actionType)},egwActionObject.prototype._getLinks=function(_objs,_actionType){for(var actionLinks={},testedSelected=[],test=function(olink){if(olink.actionObj.type==_actionType){"undefined"==typeof actionLinks[olink.actionId]&&(actionLinks[olink.actionId]={actionObj:olink.actionObj,enabled:1==testedSelected.length,visible:!1,cnt:0});var llink=actionLinks[olink.actionId];if(llink.enabled=llink.enabled&&olink.actionObj.enabled.exec(olink.actionObj,_objs,_objs[i])&&olink.enabled&&olink.visible,llink.visible=llink.visible||olink.visible,llink.cnt++,olink.actionObj&&olink.actionObj.children.length>0)for(var j=0;j<olink.actionObj.children.length;j++){var child=olink.actionObj.children[j];test({actionObj:child,actionId:child.id,enabled:olink.enabled,visible:olink.visible})}}},i=0;i<_objs.length;i++){var obj=_objs[i];if(!egwBitIsSet(obj.flags,EGW_AO_FLAG_IS_CONTAINER)&&obj.triggerCallback()){testedSelected.push(obj);for(var j=0;j<obj.actionLinks.length;j++)test(obj.actionLinks[j])}}for(var k in actionLinks)actionLinks[k].enabled=actionLinks[k].enabled&&actionLinks[k].cnt>=testedSelected.length&&(actionLinks[k].actionObj.allowOnMultiple===!0||"only"==actionLinks[k].actionObj.allowOnMultiple&&actionLinks[k].cnt>1||0==actionLinks[k].actionObj.allowOnMultiple&&1==actionLinks[k].cnt),egwIsMobile()||(actionLinks[k].actionObj.hideOnMobile=!1),actionLinks[k].visible=actionLinks[k].visible&&!actionLinks[k].actionObj.hideOnMobile&&(actionLinks[k].enabled||!actionLinks[k].actionObj.hideOnDisabled);return{selected:testedSelected,links:actionLinks}},egwActionObject.prototype.getActionLink=function(_actionId){for(var i=0;i<this.actionLinks.length;i++)if(this.actionLinks[i].actionObj.id==_actionId)return this.actionLinks[i];return null},egwActionObject.prototype.getActionImplementationGroups=function(_test,_groups){"undefined"==typeof _groups&&(_groups={}),"undefined"==typeof _test&&(_test=function(_obj){return!0});for(var i=0;i<this.actionLinks.length;i++){var action=this.actionLinks[i].actionObj;"undefined"!=typeof action&&_test(this)&&("undefined"==typeof _groups[action.type]&&(_groups[action.type]=[]),_groups[action.type].push({object:this,link:this.actionLinks[i]}))}for(var i=0;i<this.children.length;i++)this.children[i].getActionImplementationGroups(_test,_groups);
return _groups},egwActionObject.prototype.isDragOut=function(_event){return(_event.altKey||_event.metaKey)&&_event.shiftKey&&1==_event.which},egwActionObject.prototype.isSelection=function(_event){return!_event.shiftKey&&1==_event.which&&(_event.metaKey||_event.ctrlKey)},egwActionObjectInterface.prototype.setStateChangeCallback=function(_callback,_context){this.stateChangeCallback=_callback,this.stateChangeContext=_context},egwActionObjectInterface.prototype.setReconnectActionsCallback=function(_callback,_context){this.reconnectActionsCallback=_callback,this.reconnectActionsContext=_context},egwActionObjectInterface.prototype.reconnectActions=function(){this.reconnectActionsCallback&&this.reconnectActionsCallback.call(this.reconnectActionsContext)},egwActionObjectInterface.prototype.updateState=function(_stateBit,_set,_shiftState){var newState=egwSetBit(this._state,_stateBit,_set);this.stateChangeCallback?this._state=this.stateChangeCallback.call(this.stateChangeContext,newState,_stateBit,_shiftState):this._state=newState},egwActionObjectInterface.prototype.getDOMNode=function(){return this.doGetDOMNode()},egwActionObjectInterface.prototype.setState=function(_state){_state!=this._state&&(this._state=_state,this.doSetState(_state))},egwActionObjectInterface.prototype.getState=function(){return this._state},egwActionObjectInterface.prototype.triggerEvent=function(_event,_data){return"undefined"==typeof _data&&(_data=null),this.doTriggerEvent(_event,_data)},egwActionObjectInterface.prototype.makeVisible=function(){return this.doMakeVisible()};var egwActionObjectDummyInterface=egwActionObjectInterface,EGW_KEY_BACKSPACE=8,EGW_KEY_TAB=9,EGW_KEY_ENTER=13,EGW_KEY_ESCAPE=27,EGW_KEY_DELETE=46,EGW_KEY_SPACE=32,EGW_KEY_PAGE_UP=33,EGW_KEY_PAGE_DOWN=34,EGW_KEY_ARROW_LEFT=37,EGW_KEY_ARROW_UP=38,EGW_KEY_ARROW_RIGHT=39,EGW_KEY_ARROW_DOWN=40,EGW_KEY_0=48,EGW_KEY_1=49,EGW_KEY_2=50,EGW_KEY_3=51,EGW_KEY_4=52,EGW_KEY_5=53,EGW_KEY_6=54,EGW_KEY_7=55,EGW_KEY_8=56,EGW_KEY_9=57,EGW_KEY_A=65,EGW_KEY_B=66,EGW_KEY_C=67,EGW_KEY_D=68,EGW_KEY_E=69,EGW_KEY_F=70,EGW_KEY_G=71,EGW_KEY_H=72,EGW_KEY_I=73,EGW_KEY_J=74,EGW_KEY_K=75,EGW_KEY_L=76,EGW_KEY_M=77,EGW_KEY_N=78,EGW_KEY_O=79,EGW_KEY_P=80,EGW_KEY_Q=81,EGW_KEY_R=82,EGW_KEY_S=83,EGW_KEY_T=84,EGW_KEY_U=85,EGW_KEY_V=86,EGW_KEY_W=87,EGW_KEY_X=88,EGW_KEY_Y=89,EGW_KEY_Z=90,EGW_KEY_MENU=93,EGW_KEY_F1=112,EGW_KEY_F2=113,EGW_KEY_F3=114,EGW_KEY_F4=115,EGW_KEY_F5=116,EGW_KEY_F6=117,EGW_KEY_F7=118,EGW_KEY_F8=119,EGW_KEY_F9=120,EGW_KEY_F10=121,EGW_KEY_F11=122,EGW_KEY_F12=123,EGW_VALID_KEYS=[8,9,13,27,46,32,33,34,37,38,39,40,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,93,112,113,114,115,116,117,118,119,120,121,122,123],egw_keycode_translation_function=function(_nativeKeyCode){return _nativeKeyCode>=96&&105>=_nativeKeyCode&&(_nativeKeyCode-=48),_nativeKeyCode};$j(document).ready(function(){$j(document).keydown(function(e){var keyCode=e.which;if(keyCode=egw_keycode_translation_function(keyCode),keyCode=egw_keycode_makeValid(keyCode),-1!=keyCode){var inInput=_egw_nodeIsInInput(e.target);(!inInput||keyCode>=EGW_KEY_F1&&EGW_KEY_F12>=keyCode)&&egw_keyHandler(keyCode,e.shiftKey,e.ctrlKey||e.metaKey,e.altKey)&&e.preventDefault()}})}),$j(window).on("contextmenu",document,function(event){return 1!=event.originalEvent.x||1!=event.originalEvent.y?!0:!event.ctrlKey&&egw_keyHandler(EGW_KEY_MENU,event.shiftKey,event.ctrlKey||event.metaKey,event.altKey)?(event.preventDefault(),!1):!0});var egw_registeredShortcuts={},_egw_active_menu=null;egwMenu.prototype._checkImpl=function(){return"function"==typeof egwMenuImpl},egwMenu.prototype.showAt=function(_x,_y,_force){if("undefined"==typeof _force&&(_force=!1),null!=_egw_active_menu){if(_egw_active_menu==this&&!_force)return this.hide(),!1;_egw_active_menu.hide()}if(null==this.instance&&this._checkImpl){this.instance=new egwMenuImpl(this.children),_egw_active_menu=this;var self=this;return this.instance.showAt(_x,_y,function(){self.instance=null,_egw_active_menu=null}),!0}return!1},egwMenu.prototype.hide=function(){_egw_active_menu==this&&(_egw_active_menu=null),null!=this.instance&&(this.instance.hide(),this.instance=null)},egwMenu.prototype.addItem=function(_id,_caption,_iconUrl,_onClick){var item=_egwGenMenuItem(this,_id,_caption,_iconUrl,_onClick);return this.children.push(item),item},egwMenu.prototype.clear=function(){this.children=[]},egwMenu.prototype.loadStructure=function(_elements){this.children=_egwGenMenuStructure(_elements,this)},egwMenu.prototype.getItem=function(_id){return _egwSearchMenuItem(this.children,_id)},egwMenu.prototype.setGlobalOnClick=function(_onClick){_egwSetMenuOnClick(this.children,_onClick)},egwMenuItem.prototype.getItem=function(_id){return this.id===_id?this:_egwSearchMenuItem(this.children,_id)},egwMenuItem.prototype.setGlobalOnClick=function(_onClick){this.onClick=_onClick,_egwSetMenuOnClick(this.children,_onClick)},egwMenuItem.prototype.addItem=function(_id,_caption,_iconUrl,_onClick){var item=_egwGenMenuItem(this,_id,_caption,_iconUrl,_onClick);return this.children.push(item),item},egwMenuItem.prototype.set_id=function(_value){this.id=_value},egwMenuItem.prototype.set_caption=function(_value){this.caption=_value},egwMenuItem.prototype.set_checkbox=function(_value){this.checkbox=_value},egwMenuItem.prototype.set_checked=function(_value){if(_value&&this.groupIndex>0)for(var i=0;i<this.parent.children.length;i++){var obj=this.parent.children[i];obj.groupIndex==this.groupIndex&&(obj.checked=!1)}this.checked=_value},egwMenuItem.prototype.set_groupIndex=function(_value){this.groupIndex=_value},egwMenuItem.prototype.set_enabled=function(_value){this.enabled=_value},egwMenuItem.prototype.set_onClick=function(_value){this.onClick=_value},egwMenuItem.prototype.set_iconUrl=function(_value){this.iconUrl=_value},egwMenuItem.prototype.set_default=function(_value){this.default=_value},egwMenuItem.prototype.set_data=function(_value){this.data=_value},egwMenuItem.prototype.set_hint=function(_value){this.hint=_value},egwMenuItem.prototype.set_shortcutCaption=function(_value){this.shortcutCaption=_value},function($){function calculateEuclideanDistance(x1,y1,x2,y2){var diffX=x2-x1,diffY=y2-y1;return Math.sqrt(diffX*diffX+diffY*diffY)}function onTouchStart(event){var e=event.originalEvent;if(!e.touches||1===e.targetTouches.length&&1===e.touches.length){startTapAndHoldDetector.call(this,event);var element=$(this);element.bind(TOUCHMOVE,onTouchMove),element.bind(TOUCHEND,onTouchEnd)}else stopTapAndHoldDetector.call(this)}function onTouchMove(event){if(null!=tapAndHoldTimer){var e=event.originalEvent,x=e.changedTouches?e.changedTouches[0].pageX:e.pageX,y=e.changedTouches?e.changedTouches[0].pageY:e.pageY,tapAndHoldPoint=$(this).data("taphold.point"),euclideanDistance=calculateEuclideanDistance(tapAndHoldPoint.x,tapAndHoldPoint.y,x,y);euclideanDistance>MAX_DISTANCE_ALLOWED_IN_TAP_AND_HOLD_EVENT&&stopTapAndHoldDetector.call(this)}}function onTouchEnd(event){stopTapAndHoldDetector.call(this)}function onTapAndHold(event){clear.call(this),$(this).data("taphold.handler").call(this,event)}function clear(){tapAndHoldTimer=null,$(this).unbind(TOUCHMOVE,onTouchMove),$(this).unbind(TOUCHEND,onTouchEnd)}function startTapAndHoldDetector(event){if(null==tapAndHoldTimer){var self=this;tapAndHoldTimer=setTimeout(function(){onTapAndHold.call(self,event)},TAP_AND_HOLD_TRIGGER_TIMER);var e=event.originalEvent,tapAndHoldPoint={};tapAndHoldPoint.x=e.changedTouches?e.changedTouches[0].pageX:e.pageX,tapAndHoldPoint.y=e.changedTouches?e.changedTouches[0].pageY:e.pageY,$(this).data("taphold.point",tapAndHoldPoint)}}function stopTapAndHoldDetector(){clearTimeout(tapAndHoldTimer),clear.call(this)}var TAP_AND_HOLD_TRIGGER_TIMER=600,MAX_DISTANCE_ALLOWED_IN_TAP_AND_HOLD_EVENT=40,TOUCHSTART="touchstart",TOUCHEND="touchend",TOUCHMOVE="touchmove",tapAndHoldTimer=null;$.event.special.taphold={setup:function(){},add:function(handleObj){$(this).data("taphold.handler",handleObj.handler),handleObj.data?$(this).bind(TOUCHSTART,handleObj.data,onTouchStart):$(this).bind(TOUCHSTART,onTouchStart)},remove:function(handleObj){stopTapAndHoldDetector.call(this),handleObj.data?$(this).unbind(TOUCHSTART,handleObj.data,onTouchStart):$(this).unbind(TOUCHSTART,onTouchStart)},teardown:function(){}}}(jQuery),"undefined"==typeof window._egwActionClasses&&(window._egwActionClasses={}),_egwActionClasses.popup={actionConstructor:egwPopupAction,implementation:getPopupImplementation};var _popupActionImpl=null;"undefined"==typeof window._egwActionClasses&&(window._egwActionClasses={}),_egwActionClasses.drag={actionConstructor:egwDragAction,implementation:getDragImplementation},_egwActionClasses.drop={actionConstructor:egwDropAction,implementation:getDropImplementation};var _dragActionImpl=null,_dropActionImpl=null,EGW_AI_DRAG=256,EGW_AI_DRAG_OUT=1|EGW_AI_DRAG,EGW_AI_DRAG_OVER=2|EGW_AI_DRAG;dhtmlXMenuObject.prototype.init=function(){1!=this._isInited&&(this.dLoad?(this.callEvent("onXLS",[]),this._xmlLoader.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&etc="+(new Date).getTime())):(this._initTopLevelMenu(),this._isInited=!0))},dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(id){var count=0;for(var a in this.itemPull){var par=this.itemPull[a].parent,tp=this.itemPull[a].type;null!=this.idPull[a]&&(par!=id||"item"!=tp&&"radio"!=tp&&"checkbox"!=tp||"none"==this.idPull[a].style.display||count++)}return count},dhtmlXMenuObject.prototype._redefineComplexState=function(id){if(this.idPrefix+this.topId!=id&&null!=this.idPull["polygon_"+id]&&null!=this.idPull[id]){var u=this._countVisiblePolygonItems(id);u>0&&!this.itemPull[id].complex&&this._updateItemComplexState(id,!0,!1),0==u&&this.itemPull[id].complex&&this._updateItemComplexState(id,!1,!1)}},dhtmlXMenuObject.prototype._updateItemComplexState=function(id,state,over){if(!this.context&&"TopLevel"==this._getItemLevelType(id.replace(this.idPrefix,"")))return void(this.itemPull[id].complex=state);if(null!=this.idPull[id]&&null!=this.itemPull[id]&&(this.itemPull[id].complex=state,id!=this.idPrefix+this.topId)){var arrowObj=null,item=this.idPull[id].childNodes[this._rtl?0:2];if(item.childNodes[0]&&0===String(item.childNodes[0].className).search("complex_arrow")&&(arrowObj=item.childNodes[0]),this.itemPull[id].complex){if(null==arrowObj){for(arrowObj=document.createElement("DIV"),arrowObj.className="complex_arrow",arrowObj.id="arrow_"+id;item.childNodes.length>0;)item.removeChild(item.childNodes[0]);item.appendChild(arrowObj)}return void(this.dLoad&&"get"==this.itemPull[id].loaded&&this.loaderIcon?"complex_arrow_loading"!=arrowObj.className&&(arrowObj.className="complex_arrow_loading"):arrowObj.className="complex_arrow")}this.itemPull[id].complex||null==arrowObj||(item.removeChild(arrowObj),null!=this.itemPull[id].hotkey_backup&&this.setHotKey&&this.setHotKey(id.replace(this.idPrefix,""),this.itemPull[id].hotkey_backup))}},dhtmlXMenuObject.prototype._getItemLevelType=function(id){return this.itemPull[this.idPrefix+id].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"},dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(id,parent){var i=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var q=0;q<i.length;q++)i[q]!=id&&this._hidePolygon(i[q]),null!=this.idPull[i[q]]&&i[q]!=id&&(this.idPull[i[q]].className=this.idPull[i[q]].className.replace(/Selected/g,"Normal"));"enabled"==this.itemPull[this.idPrefix+id].state&&(this.idPull[this.idPrefix+id].className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+id,"parent"),this.menuSelected="win"==this.menuMode?-1!=this.menuSelected?id:this.menuSelected:id,this.itemPull[this.idPrefix+id].complex&&-1!=this.menuSelected&&this._showPolygon(this.idPrefix+id,this.dirTopLevel))},dhtmlXMenuObject.prototype._initTopLevelMenu=function(){if(this.dirTopLevel="bottom",this.dirSubLevel=this._rtl?"left":"right",this.context)this.idPull[this.idPrefix+this.topId]=new Array(0,0),this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var m=this._getMenuNodes(this.idPrefix+this.topId),q=0;q<m.length;q++)"item"==this.itemPull[m[q]].type&&this._renderToplevelItem(m[q],null),"separator"==this.itemPull[m[q]].type&&this._renderSeparator(m[q],null)},dhtmlXMenuObject.prototype._renderToplevelItem=function(id,pos){var main_self=this,m=document.createElement("DIV");if(m.id=id,"enabled"==this.itemPull[id].state&&null!=this.itemPull[id].cssNormal?m.className=this.itemPull[id].cssNormal:m.className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[id].state?"Normal":"Disabled"),""!=this.itemPull[id].title){var t1=document.createElement("DIV");t1.className="top_level_text",t1.innerHTML=this.itemPull[id].title,m.appendChild(t1)}if(this.itemPull[id].tip.length>0&&(m.title=this.itemPull[id].tip),""!=this.itemPull[id].imgen||""!=this.itemPull[id].imgdis){var imgTop=this.itemPull[id]["enabled"==this.itemPull[id].state?"imgen":"imgdis"];if(imgTop){var img=document.createElement("IMG");img.border="0",img.id="image_"+id,img.src=this.imagePath+imgTop,img.className="dhtmlxMenu_TopLevel_Item_Icon",m.childNodes.length>0&&!this._rtl?m.insertBefore(img,m.childNodes[0]):m.appendChild(img)}}m.onselectstart=function(e){return e=e||event,e.returnValue=!1,!1},m.oncontextmenu=function(e){return e=e||event,e.returnValue=!1,!1},this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className="right"==this._align?"align_right":"align_left",this.base.appendChild(this.cont)),null!=pos&&(pos++,0>pos&&(pos=0),pos>this.cont.childNodes.length-1&&(pos=null)),null!=pos?this.cont.insertBefore(m,this.cont.childNodes[pos]):this.cont.appendChild(m),this.idPull[m.id]=m,this.itemPull[id].complex&&!this.dLoad&&this._addSubMenuPolygon(this.itemPull[id].id,this.itemPull[id].id),m.onmouseover=function(){"web"==main_self.menuMode&&window.clearTimeout(main_self.menuTimeoutHandler);var i=main_self._getSubItemToDeselectByPolygon("parent");main_self._removeSubItemFromSelected(-1,-1);for(var q=0;q<i.length;q++)i[q]!=this.id&&main_self._hidePolygon(i[q]),null!=main_self.idPull[i[q]]&&i[q]!=this.id&&(null!=main_self.itemPull[i[q]].cssNormal?main_self.idPull[i[q]].className=main_self.itemPull[i[q]].cssNormal:("sub_item_selected"==main_self.idPull[i[q]].className&&(main_self.idPull[i[q]].className="sub_item"),main_self.idPull[i[q]].className=main_self.idPull[i[q]].className.replace(/Selected/g,"Normal")));if("enabled"==main_self.itemPull[this.id].state){if(this.className="dhtmlxMenu_"+main_self.skin+"_TopLevel_Item_Selected",main_self._addSubItemToSelected(this.id,"parent"),main_self.menuSelected="win"==main_self.menuMode?-1!=main_self.menuSelected?this.id:main_self.menuSelected:this.id,main_self.dLoad&&"no"==main_self.itemPull[this.id].loaded){main_self.menuModeTopLevelTimeout&&"web"==main_self.menuMode&&!main_self.context&&(this._mouseOver=!0,this._dynLoadTM=(new Date).getTime());var xmlLoader=new dtmlXMLLoaderObject(main_self._xmlParser,window);main_self.itemPull[this.id].loaded="get",main_self.callEvent("onXLS",[]),xmlLoader.loadXML(main_self.dLoadUrl+main_self.dLoadSign+"action=loadMenu&parentId="+this.id.replace(main_self.idPrefix,"")+"&etc="+(new Date).getTime())}if((!main_self.dLoad||main_self.dLoad&&(!main_self.itemPull[this.id].loaded||"yes"==main_self.itemPull[this.id].loaded))&&main_self.itemPull[this.id].complex&&-1!=main_self.menuSelected)if(main_self.menuModeTopLevelTimeout&&"web"==main_self.menuMode&&!main_self.context){this._mouseOver=!0;var showItemId=this.id;this._menuOpenTM=window.setTimeout(function(){main_self._showPolygon(showItemId,main_self.dirTopLevel)},main_self.menuModeTopLevelTimeoutTime)}else main_self._showPolygon(this.id,main_self.dirTopLevel)}main_self._doOnTouchMenu(this.id.replace(main_self.idPrefix,""))},m.onmouseout=function(){main_self.itemPull[this.id].complex&&-1!=main_self.menuSelected||"enabled"!=main_self.itemPull[this.id].state||(null!=main_self.itemPull[this.id].cssNormal?m.className=main_self.itemPull[this.id].cssNormal:m.className="dhtmlxMenu_"+main_self.skin+"_TopLevel_Item_Normal"),"web"==main_self.menuMode&&(window.clearTimeout(main_self.menuTimeoutHandler),main_self.menuTimeoutHandler=window.setTimeout(function(){main_self._clearAndHide()},main_self.menuTimeoutMsec,"JavaScript")),main_self.menuModeTopLevelTimeout&&"web"==main_self.menuMode&&!main_self.context&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))},m.onclick=function(e){if("web"==main_self.menuMode&&window.clearTimeout(main_self.menuTimeoutHandler),"web"==main_self.menuMode||"disabled"!=main_self.itemPull[this.id].state){if(e=e||event,e.cancelBubble=!0,e.returnValue=!1,"win"==main_self.menuMode&&main_self.itemPull[this.id].complex){if(main_self.menuSelected==this.id){main_self.menuSelected=-1;var s=!1}else{main_self.menuSelected=this.id;var s=!0}s?main_self._showPolygon(this.id,main_self.dirTopLevel):main_self._hidePolygon(this.id)}var tc=main_self.itemPull[this.id].complex?"c":"-",td="enabled"!=main_self.itemPull[this.id].state?"d":"-",cas={ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};return main_self._doOnClick(this.id.replace(main_self.idPrefix,""),tc+td+"t",cas),!1}},"dhx_terrace"==this.skin&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype.setImagePath=function(){},dhtmlXMenuObject.prototype.setIconsPath=function(path){this.imagePath=path},dhtmlXMenuObject.prototype.setIconPath=dhtmlXMenuObject.prototype.setIconsPath,dhtmlXMenuObject.prototype._updateItemImage=function(id,levelType){id=this.idPrefix+id;var isTopLevel=this.itemPull[id].parent==this.idPrefix+this.topId&&!this.context,imgObj=null;if(isTopLevel)for(var q=0;q<this.idPull[id].childNodes.length;q++)try{"dhtmlxMenu_TopLevel_Item_Icon"==this.idPull[id].childNodes[q].className&&(imgObj=this.idPull[id].childNodes[q])}catch(e){}else try{var imgObj=this.idPull[id].childNodes[this._rtl?2:0].childNodes[0]}catch(e){}if("radio"==this.itemPull[id].type)var imgSrc=this.itemPull[id]["enabled"==this.itemPull[id].state?"imgen":"imgdis"];else var imgSrc=this.itemPull[id]["enabled"==this.itemPull[id].state?"imgen":"imgdis"];if(imgSrc.length>0)if(null!=imgObj)imgObj.src=this.imagePath+imgSrc;else if(isTopLevel){var imgObj=document.createElement("IMG");imgObj.className="dhtmlxMenu_TopLevel_Item_Icon",imgObj.src=this.imagePath+imgSrc,imgObj.border="0",imgObj.id="image_"+id,!this._rtl&&this.idPull[id].childNodes.length>0?this.idPull[id].insertBefore(imgObj,this.idPull[id].childNodes[0]):this.idPull[id].appendChild(imgObj)}else{var imgObj=document.createElement("IMG");imgObj.className="sub_icon",imgObj.src=this.imagePath+imgSrc,imgObj.border="0",imgObj.id="image_"+id;for(var item=this.idPull[id].childNodes[this._rtl?2:0];item.childNodes.length>0;)item.removeChild(item.childNodes[0]);item.appendChild(imgObj)}else null!=imgObj&&imgObj.parentNode.removeChild(imgObj)},dhtmlXMenuObject.prototype.removeItem=function(id,_isTId,_recCall){_isTId||(id=this.idPrefix+id);var pId=null;if(id!=this.idPrefix+this.topId){if(null==this.itemPull[id])return;this.idPull["polygon_"+id]&&this.idPull["polygon_"+id]._tmShow&&window.clearTimeout(this.idPull["polygon_"+id]._tmShow);var t=this.itemPull[id].type;if("separator"==t){var item=this.idPull["separator_"+id];this.itemPull[id].parent==this.idPrefix+this.topId?(item.onclick=null,item.onselectstart=null,item.id=null,item.parentNode.removeChild(item)):(item.childNodes[0].childNodes[0].onclick=null,item.childNodes[0].childNodes[0].onselectstart=null,item.childNodes[0].childNodes[0].id=null,item.childNodes[0].removeChild(item.childNodes[0].childNodes[0]),item.removeChild(item.childNodes[0]),item.parentNode.removeChild(item)),this.idPull["separator_"+id]=null,this.itemPull[id]=null,delete this.idPull["separator_"+id],delete this.itemPull[id],item=null}else{pId=this.itemPull[id].parent;var item=this.idPull[id];for(item.onclick=null,item.oncontextmenu=null,item.onmouseover=null,item.onmouseout=null,item.onselectstart=null,item.id=null;item.childNodes.length>0;)item.removeChild(item.childNodes[0]);item.parentNode.removeChild(item),this.idPull[id]=null,this.itemPull[id]=null,delete this.idPull[id],delete this.itemPull[id],item=null}t=null}for(var a in this.itemPull)this.itemPull[a].parent==id&&this.removeItem(a,!0,!0);var p2=new Array(id);null==pId||_recCall||null!=this.idPull["polygon_"+pId]&&0==this.idPull["polygon_"+pId].tbd.childNodes.length&&(p2.push(pId),this._updateItemComplexState(pId,!1,!1));for(var q=0;q<p2.length;q++)if(this.idPull["polygon_"+p2[q]]){var p=this.idPull["polygon_"+p2[q]];if(p.onclick=null,p.oncontextmenu=null,p.tbl.removeChild(p.tbd),p.tbd=null,p.removeChild(p.tbl),p.tbl=null,p.id=null,p.parentNode.removeChild(p),p=null,this._isIE6){var pc="polygon_"+p2[q]+"_ie6cover";null!=this.idPull[pc]&&(document.body.removeChild(this.idPull[pc]),delete this.idPull[pc])}null!=this.idPull["arrowup_"+id]&&this._removeArrow&&this._removeArrow("arrowup_"+id),null!=this.idPull["arrowdown_"+id]&&this._removeArrow&&this._removeArrow("arrowdown_"+id),this.idPull["polygon_"+p2[q]]=null,delete this.idPull["polygon_"+p2[q]]}p2=null,"dhx_terrace"==this.skin&&1==arguments.length&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._getAllParents=function(id){var parents=new Array;for(var a in this.itemPull)if(this.itemPull[a].parent==id&&(parents[parents.length]=this.itemPull[a].id,this.itemPull[a].complex))for(var t=this._getAllParents(this.itemPull[a].id),q=0;q<t.length;q++)parents[parents.length]=t[q];return parents},dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.context=!0,1==this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.skin+"_Middle",""),this.base._autoSkinUpdate=!1),null!=this.addBaseIdAsContextZone&&this.addContextZone(this.addBaseIdAsContextZone)},dhtmlXMenuObject.prototype.addContextZone=function(zoneId){if(zoneId==document.body){zoneId="document.body."+this.idPrefix;var zone=document.body}else var zone=document.getElementById(zoneId);var zoneExists=!1;for(var a in this.contextZones)zoneExists=zoneExists||a==zoneId||this.contextZones[a]==zone;if(1==zoneExists)return!1;this.contextZones[zoneId]=zone;var main_self=this;_isOpera?(this.operaContext=function(e){main_self._doOnContextMenuOpera(e,main_self)},zone.addEventListener("mouseup",this.operaContext,!1)):(null==zone.oncontextmenu||zone._oldContextMenuHandler||(zone._oldContextMenuHandler=zone.oncontextmenu),zone.oncontextmenu=function(e){for(var q in dhtmlxMenuObjectLiveInstances)q!=main_self._UID&&dhtmlxMenuObjectLiveInstances[q].context&&dhtmlxMenuObjectLiveInstances[q]._hideContextMenu();return e=e||event,e.cancelBubble=!0,e.returnValue=!1,main_self._doOnContextBeforeCall(e,this),!1})},dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(e,main_self){for(var q in dhtmlxMenuObjectLiveInstances)q!=main_self._UID&&dhtmlxMenuObjectLiveInstances[q].context&&dhtmlxMenuObjectLiveInstances[q]._hideContextMenu();return e.cancelBubble=!0,e.returnValue=!1,0==e.button&&1==e.ctrlKey&&main_self._doOnContextBeforeCall(e,this),!1},dhtmlXMenuObject.prototype.removeContextZone=function(zoneId){if(!this.isContextZone(zoneId))return!1;zoneId==document.body&&(zoneId="document.body."+this.idPrefix);var zone=this.contextZones[zoneId];_isOpera?zone.removeEventListener("mouseup",this.operaContext,!1):(zone.oncontextmenu=null!=zone._oldContextMenuHandler?zone._oldContextMenuHandler:null,zone._oldContextMenuHandler=null);try{this.contextZones[zoneId]=null,delete this.contextZones[zoneId]}catch(e){}return!0},dhtmlXMenuObject.prototype.isContextZone=function(zoneId){if(zoneId==document.body&&null!=this.contextZones["document.body."+this.idPrefix])return!0;var isZone=!1;return null!=this.contextZones[zoneId]&&this.contextZones[zoneId]==document.getElementById(zoneId)&&(isZone=!0),isZone},dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:""==this.idPull["polygon_"+this.idPrefix+this.topId].style.display},dhtmlXMenuObject.prototype._showContextMenu=function(x,y,zoneId){return this._clearAndHide(),null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:(window.clearTimeout(this.menuTimeoutHandler),this.idPull[this.idPrefix+this.topId]=new Array(x,y),this._showPolygon(this.idPrefix+this.topId,"bottom"),void this.callEvent("onContextMenu",[zoneId]))},dhtmlXMenuObject.prototype._hideContextMenu=function(){return null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:(this._clearAndHide(),this._hidePolygon(this.idPrefix+this.topId),void(this.zInd=this.zIndInit))},dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(e,cZone){this.contextMenuZoneId=cZone.id,this._clearAndHide(),this._hideContextMenu();var p=e.srcElement||e.target,px=_isIE||_isOpera||_KHTMLrv?e.offsetX:e.layerX,py=_isIE||_isOpera||_KHTMLrv?e.offsetY:e.layerY,mx=getAbsoluteLeft(p)+px,my=getAbsoluteTop(p)+py;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[cZone.id,e])&&this.contextAutoShow&&(this._showContextMenu(mx,my,cZone.id),this.callEvent("onAfterContextMenu",[cZone.id,e])):this.contextAutoShow&&(this._showContextMenu(mx,my,cZone.id),this.callEvent("onAfterContextMenu",[cZone.id]))},dhtmlXMenuObject.prototype.showContextMenu=function(x,y){this._showContextMenu(x,y,!1)},dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()},dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){this._isVisibleArea||(this.menuX1=document.body.scrollLeft,this.menuX2=this.menuX1+(window.innerWidth||document.body.clientWidth),this.menuY1=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),this.menuY2=this.menuY1+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight))},dhtmlXMenuObject.prototype.getItemPosition=function(id){id=this.idPrefix+id;var pos=-1;if(null==this.itemPull[id])return pos;for(var parent=this.itemPull[id].parent,obj=null!=this.idPull["polygon_"+parent]?this.idPull["polygon_"+parent].tbd:this.cont,q=0;q<obj.childNodes.length;q++)obj.childNodes[q]!=this.idPull["separator_"+id]&&obj.childNodes[q]!=this.idPull[id]||(pos=q);return pos},dhtmlXMenuObject.prototype.setItemPosition=function(id,pos){if(id=this.idPrefix+id,null!=this.idPull[id]){var isOnTopLevel=this.itemPull[id].parent==this.idPrefix+this.topId,itemData=this.idPull[id],itemPos=this.getItemPosition(id.replace(this.idPrefix,"")),parent=this.itemPull[id].parent,obj=null!=this.idPull["polygon_"+parent]?this.idPull["polygon_"+parent].tbd:this.cont;obj.removeChild(obj.childNodes[itemPos]),0>pos&&(pos=0),isOnTopLevel&&1>pos&&(pos=1),pos<obj.childNodes.length?obj.insertBefore(itemData,obj.childNodes[pos]):obj.appendChild(itemData)}},dhtmlXMenuObject.prototype.getParentId=function(id){return id=this.idPrefix+id,null==this.itemPull[id]?null:(null!=this.itemPull[id].parent?this.itemPull[id].parent:this.topId).replace(this.idPrefix,"")},dhtmlXMenuObject.prototype.addNewSibling=function(nextToId,itemId,itemText,disabled,imgEnabled,imgDisabled){var id=this.idPrefix+(null!=itemId?itemId:this._genStr(24)),parentId=this.idPrefix+(null!=nextToId?this.getParentId(nextToId):this.topId);this._addItemIntoGlobalStrorage(id,parentId,itemText,"item",disabled,imgEnabled,imgDisabled),parentId!=this.idPrefix+this.topId||this.context?this._renderSublevelItem(id,this.getItemPosition(nextToId)):this._renderToplevelItem(id,this.getItemPosition(nextToId))},dhtmlXMenuObject.prototype.addNewChild=function(parentId,pos,itemId,itemText,disabled,imgEnabled,imgDisabled){if(null==parentId){if(!this.context)return this.addNewSibling(parentId,itemId,itemText,disabled,imgEnabled,imgDisabled),void(null!=pos&&this.setItemPosition(itemId,pos));parentId=this.topId}itemId=this.idPrefix+(null!=itemId?itemId:this._genStr(24)),this.setHotKey&&this.setHotKey(parentId,""),parentId=this.idPrefix+parentId,this._addItemIntoGlobalStrorage(itemId,parentId,itemText,"item",disabled,imgEnabled,imgDisabled),null==this.idPull["polygon_"+parentId]&&this._renderSublevelPolygon(parentId,parentId),this._renderSublevelItem(itemId,pos-1),this._redefineComplexState(parentId)},dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(itemId,itemParentId,itemText,itemType,disabled,img,imgDis){var item={id:itemId,title:itemText,imgen:null!=img?img:"",imgdis:null!=imgDis?imgDis:"",type:itemType,state:1==disabled?"disabled":"enabled",parent:itemParentId,complex:!1,hotkey:"",tip:""};this.itemPull[item.id]=item},dhtmlXMenuObject.prototype._addSubMenuPolygon=function(id,parentId){var j=(this._renderSublevelPolygon(id,parentId),this._getMenuNodes(parentId));for(q=0;q<j.length;q++)"separator"==this.itemPull[j[q]].type?this._renderSeparator(j[q],null):this._renderSublevelItem(j[q],null);if(id==parentId);else;for(var q=0;q<j.length;q++)this.itemPull[j[q]].complex&&this._addSubMenuPolygon(id,this.itemPull[j[q]].id)},dhtmlXMenuObject.prototype._renderSublevelPolygon=function(id,parentId){var s=document.createElement("DIV");s.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Polygon "+(this._rtl?"dir_right":""),s.dir="ltr",s.oncontextmenu=function(e){return e=e||event,e.returnValue=!1,e.cancelBubble=!0,!1},s.id="polygon_"+parentId,s.onclick=function(e){e=e||event,e.cancelBubble=!0},s.style.display="none",document.body.insertBefore(s,document.body.firstChild);var tbl=document.createElement("TABLE");tbl.className="dhtmlxMebu_SubLevelArea_Tbl",tbl.cellSpacing=0,tbl.cellPadding=0,tbl.border=0;var tbd=document.createElement("TBODY");return tbl.appendChild(tbd),s.appendChild(tbl),s.tbl=tbl,s.tbd=tbd,this.idPull[s.id]=s,null!=this.sxDacProc&&(this.idPull["sxDac_"+parentId]=new this.sxDacProc(s,s.className),_isIE?(this.idPull["sxDac_"+parentId]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+parentId]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+parentId]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+parentId]._setCustomCycle(this.dacCycles))),s},dhtmlXMenuObject.prototype._renderSublevelItem=function(id,pos){var main_self=this,tr=document.createElement("TR");tr.className="enabled"==this.itemPull[id].state?"sub_item":"sub_item_dis";var t1=document.createElement("TD");t1.className="sub_item_icon";var icon=this.itemPull[id]["enabled"==this.itemPull[id].state?"imgen":"imgdis"];if(""!=icon){var tp=this.itemPull[id].type;if("checkbox"==tp||"radio"==tp){var img=document.createElement("DIV");img.id="image_"+this.itemPull[id].id,img.className="sub_icon "+icon,t1.appendChild(img)}if("checkbox"!=tp&&"radio"!=tp){var img=document.createElement("IMG");img.id="image_"+this.itemPull[id].id,img.className="sub_icon",img.src=this.imagePath+icon,t1.appendChild(img)}}var t2=document.createElement("TD");if(t2.className="sub_item_text",""!=this.itemPull[id].title){var t2t=document.createElement("DIV");t2t.className="sub_item_text",t2t.innerHTML=this.itemPull[id].title,t2.appendChild(t2t)}else t2.innerHTML="&nbsp;";var t3=document.createElement("TD");if(t3.className="sub_item_hk",this.itemPull[id].complex){var arw=document.createElement("DIV");arw.className="complex_arrow",arw.id="arrow_"+this.itemPull[id].id,t3.appendChild(arw)}else if(this.itemPull[id].hotkey.length>0&&!this.itemPull[id].complex){var t3t=document.createElement("DIV");t3t.className="sub_item_hk",t3t.innerHTML=this.itemPull[id].hotkey,t3.appendChild(t3t)}else t3.innerHTML="&nbsp;";tr.appendChild(this._rtl?t3:t1),tr.appendChild(t2),tr.appendChild(this._rtl?t1:t3),tr.id=this.itemPull[id].id,tr.parent=this.itemPull[id].parent,this.itemPull[id].tip.length>0&&(tr.title=this.itemPull[id].tip),this._hideTMData||(this._hideTMData={}),tr.onselectstart=function(e){return e=e||event,e.returnValue=!1,!1},tr.onmouseover=function(e){main_self._hideTMData[this.id]&&window.clearTimeout(main_self._hideTMData[this.id]),"web"==main_self.menuMode&&window.clearTimeout(main_self.menuTimeoutHandler),
this._visible||main_self._redistribSubLevelSelection(this.id,this.parent),this._visible=!0},tr.onmouseout=function(){"web"==main_self.menuMode&&(main_self.menuTimeoutHandler&&window.clearTimeout(main_self.menuTimeoutHandler),main_self.menuTimeoutHandler=window.setTimeout(function(){main_self&&main_self._clearAndHide&&main_self._clearAndHide()},main_self.menuTimeoutMsec,"JavaScript"));var k=this;main_self._hideTMData[this.id]&&window.clearTimeout(main_self._hideTMData[this.id]),main_self._hideTMData[this.id]=window.setTimeout(function(){k._visible=!1},50)},tr.onclick=function(e){if(main_self.checkEvent("onClick")||!main_self.itemPull[this.id].complex){e=e||event,e.cancelBubble=!0,e.returnValue=!1,tc=main_self.itemPull[this.id].complex?"c":"-",td="enabled"==main_self.itemPull[this.id].state?"-":"d";var cas={ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};switch(main_self.itemPull[this.id].type){case"checkbox":main_self._checkboxOnClickHandler(this.id.replace(main_self.idPrefix,""),tc+td+"n",cas);break;case"radio":main_self._radioOnClickHandler(this.id.replace(main_self.idPrefix,""),tc+td+"n",cas);break;case"item":main_self._doOnClick(this.id.replace(main_self.idPrefix,""),tc+td+"n",cas)}return!1}};var polygon=this.idPull["polygon_"+this.itemPull[id].parent];null!=pos&&(pos++,0>pos&&(pos=0),pos>polygon.tbd.childNodes.length-1&&(pos=null)),null!=pos&&null!=polygon.tbd.childNodes[pos]?polygon.tbd.insertBefore(tr,polygon.tbd.childNodes[pos]):polygon.tbd.appendChild(tr),this.idPull[tr.id]=tr},dhtmlXMenuObject.prototype._renderSeparator=function(id,pos){var level=this.context?"SubLevelArea":this.itemPull[id].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if("TopLevel"!=level||!this.context){var main_self=this;if("TopLevel"!=level){var tr=document.createElement("TR");tr.className="sub_sep";var td=document.createElement("TD");td.colSpan="3",tr.appendChild(td)}var k=document.createElement("DIV");if(k.id="separator_"+id,k.className="TopLevel"==level?"top_sep":"sub_sep",k.onselectstart=function(e){e=e||event,e.returnValue=!1},k.onclick=function(e){e=e||event,e.cancelBubble=!0;var cas={ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};main_self._doOnClick(this.id.replace("separator_"+main_self.idPrefix,""),"--s",cas)},"TopLevel"==level){if(null!=pos)pos++,0>pos&&(pos=0),null!=this.cont.childNodes[pos]?this.cont.insertBefore(k,this.cont.childNodes[pos]):this.cont.appendChild(k);else{var last=this.cont.childNodes[this.cont.childNodes.length-1];-1==String(last).search("TopLevel_Text")?this.cont.appendChild(k):this.cont.insertBefore(k,last)}this.idPull[k.id]=k}else{var polygon=this.idPull["polygon_"+this.itemPull[id].parent];null!=pos&&(pos++,0>pos&&(pos=0),pos>polygon.tbd.childNodes.length-1&&(pos=null)),null!=pos&&null!=polygon.tbd.childNodes[pos]?polygon.tbd.insertBefore(tr,polygon.tbd.childNodes[pos]):polygon.tbd.appendChild(tr),td.appendChild(k),this.idPull[k.id]=tr}}},dhtmlXMenuObject.prototype.addNewSeparator=function(nextToId,itemId){itemId=this.idPrefix+(null!=itemId?itemId:this._genStr(24));var parentId=this.idPrefix+this.getParentId(nextToId);this._addItemIntoGlobalStrorage(itemId,parentId,"","separator",!1,"",""),this._renderSeparator(itemId,this.getItemPosition(nextToId))},dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()},dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0),this._isInited=!1,this.idPrefix=this._genStr(12),this.itemPull={}},dhtmlXMenuObject.prototype.unload=function(){if("function"==typeof window.addEventListener?(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1)):(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)),this._bodyClick=null,this._bodyContext=null,this.removeItem(this.idPrefix+this.topId,!0),this.itemPull=null,this.idPull=null,this.context)for(var a in this.contextZones)this.removeContextZone(a);null!=this.cont&&(this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null),null!=this.base&&(this.base.className="",this.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base.onselectstart=null,this.base=null),this.setSkin=null,this.detachAllEvents(),this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null),this._align=null,this._arrowFFFix=null,this._isIE6=null,this._isInited=null,this._rtl=null,this._scrollDownTMStep=null,this._scrollDownTMTime=null,this._scrollUpTMStep=null,this._scrollUpTMTime=null,this._topLevelBottomMargin=null,this._topLevelOffsetLeft=null,this._topLevelBottomMargin=null,this._topLevelRightMargin=null,this.addBaseIdAsContextZone=null,this.context=null,this.contextAutoHide=null,this.contextAutoShow=null,this.contextHideAllMode=null,this.contextMenuZoneId=null,this.dLoad=null,this.dLoadSign=null,this.dLoadUrl=null,this.loaderIcon=null,this.fixedPosition=null,this.dirSubLevel=null,this.dirTopLevel=null,this.limit=null,this.menuSelected=null,this.menuLastClicked=null,this.idPrefix=null,this.imagePath=null,this.menuMode=null,this.menuModeTopLevelTimeout=null,this.menuModeTopLevelTimeoutTime=null,this.menuTimeoutHandler=null,this.menuTimeoutMsec=null,this.menuTouched=null,this.isDhtmlxMenuObject=null,this.itemHotKeyTagName=null,this.itemHrefTagName=null,this.itemTagName=null,this.itemTextTagName=null,this.itemTipTagName=null,this.userDataTagName=null,this.skin=null,this.topId=null,this.dacCycles=null,this.dacCyclesIE=null,this.dacSpeed=null,this.dacSpeedIE=null,this.zInd=null,this.zIndInit=null,this.zIndStep=null,this._enableDacSupport=null,this._selectedSubItems=null,this._openedPolygons=null,this._addSubItemToSelected=null,this._removeSubItemFromSelected=null,this._getSubItemToDeselectByPolygon=null,this._hidePolygon=null,this._showPolygon=null,this._redistribSubLevelSelection=null,this._doOnClick=null,this._doOnTouchMenu=null,this._searchMenuNode=null,this._getMenuNodes=null,this._genStr=null,this._clearAndHide=null,this._doOnLoad=null,this.getItemType=null,this.forEachItem=null,this.init=null,this.loadXML=null,this.loadXMLString=null,this._buildMenu=null,this._xmlParser=null,this._showSubLevelItem=null,this._hideSubLevelItem=null,this._countVisiblePolygonItems=null,this._redefineComplexState=null,this._updateItemComplexState=null,this._getItemLevelType=null,this._redistribTopLevelSelection=null,this._initTopLevelMenu=null,this._renderToplevelItem=null,this.setImagePath=null,this.setIconsPath=null,this.setIconPath=null,this._updateItemImage=null,this.removeItem=null,this._getAllParents=null,this.renderAsContextMenu=null,this.addContextZone=null,this.removeContextZone=null,this.isContextZone=null,this._isContextMenuVisible=null,this._showContextMenu=null,this._doOnContextBeforeCall=null,this._autoDetectVisibleArea=null,this._addItemIntoGlobalStrorage=null,this._addSubMenuPolygon=null,this._renderSublevelPolygon=null,this._renderSublevelItem=null,this._renderSeparator=null,this._hideContextMenu=null,this.clearAll=null,this.getItemPosition=null,this.setItemPosition=null,this.getParentId=null,this.addNewSibling=null,this.addNewChild=null,this.addNewSeparator=null,this.attachEvent=null,this.callEvent=null,this.checkEvent=null,this.eventCatcher=null,this.detachEvent=null,this.dhx_Event=null,this.unload=null,this.items=null,this.radio=null,this.detachAllEvents=null,this.hide=null,this.showContextMenu=null,this.hideContextMenu=null,this._changeItemState=null,this._changeItemVisible=null,this._updateLoaderIcon=null,this._clearAllSelectedSubItemsInPolygon=null,this._checkArrowsState=null,this._addUpArrow=null,this._addDownArrow=null,this._removeUpArrow=null,this._removeDownArrow=null,this._isArrowExists=null,this._doScrollUp=null,this._doScrollDown=null,this._countPolygonItems=null,this._getRadioImgObj=null,this._setRadioState=null,this._radioOnClickHandler=null,this._getCheckboxState=null,this._setCheckboxState=null,this._readLevel=null,this._updateCheckboxImage=null,this._checkboxOnClickHandler=null,this._removeArrow=null,this.setItemEnabled=null,this.setItemDisabled=null,this.isItemEnabled=null,this.getItemText=null,this.setItemText=null,this.loadFromHTML=null,this.hideItem=null,this.showItem=null,this.isItemHidden=null,this.setUserData=null,this.getUserData=null,this.setOpenMode=null,this.setWebModeTimeout=null,this.enableDynamicLoading=null,this.getItemImage=null,this.setItemImage=null,this.clearItemImage=null,this.setAutoShowMode=null,this.setAutoHideMode=null,this.setContextMenuHideAllMode=null,this.getContextMenuHideAllMode=null,this.setVisibleArea=null,this.setTooltip=null,this.getTooltip=null,this.setHotKey=null,this.getHotKey=null,this.setItemSelected=null,this.setTopText=null,this.setRTL=null,this.setAlign=null,this.setHref=null,this.clearHref=null,this.getCircuit=null,this.contextZones=null,this.setOverflowHeight=null,this.userData=null,this.getRadioChecked=null,this.setRadioChecked=null,this.addRadioButton=null,this.setCheckboxState=null,this.getCheckboxState=null,this.addCheckbox=null,this.serialize=null,this.extendedModule=null,dhtmlxMenuObjectLiveInstances[this._UID]=null;try{delete dhtmlxMenuObjectLiveInstances[this._UID]}catch(e){}this._UID=null};var dhtmlxMenuObjectLiveInstances={};dhtmlXMenuObject.prototype.i18n={dhxmenuextalert:"dhtmlxmenu_ext.js required"},function(){dhtmlx.extend_api("dhtmlXMenuObject",{_init:function(obj){return[obj.parent,obj.skin]},align:"setAlign",top_text:"setTopText",context:"renderAsContextMenu",icon_path:"setIconsPath",open_mode:"setOpenMode",rtl:"setRTL",skin:"setSkin",dynamic:"enableDynamicLoading",xml:"loadXML",items:"items",overflow:"setOverflowHeight"},{items:function(arr,parent){for(var pos=1e5,lastItemId=null,i=0;i<arr.length;i++){var item=arr[i];"separator"==item.type?(this.addNewSeparator(lastItemId,pos,item.id),lastItemId=item.id):(this.addNewChild(parent,pos,item.id,item.text,item.disabled,item.img,item.img_disabled),lastItemId=item.id,item.items&&this.items(item.items,item.id))}}})}(),dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var a in this.itemPull)if(this.itemPull[a].parent==this.idPrefix+this.topId&&null!=this.idPull[a]){var bl=!1,br=!1;this.idPull[a].parentNode.firstChild==this.idPull[a]&&(bl=!0),this.idPull[a].parentNode.lastChild==this.idPull[a]&&(br=!0);for(var b in this.itemPull)"separator"==this.itemPull[b].type&&this.itemPull[b].parent==this.idPrefix+this.topId&&(this.idPull[a].nextSibling==this.idPull["separator_"+b]&&(br=!0),this.idPull[a].previousSibling==this.idPull["separator_"+b]&&(bl=!0));this.idPull[a].style.borderLeft=bl?"1px solid #cecece":"0px solid white",this.idPull[a].style.borderTopLeftRadius=this.idPull[a].style.borderBottomLeftRadius=bl?"5px":"0px",this.idPull[a].style.borderTopRightRadius=this.idPull[a].style.borderBottomRightRadius=br?"5px":"0px",this.idPull[a]._bl=bl,this.idPull[a]._br=br}},dhtmlXMenuObject.prototype._improveTerraceButton=function(id,state){state?(this.idPull[id].style.borderBottomLeftRadius=this.idPull[id]._bl?"5px":"0px",this.idPull[id].style.borderBottomRightRadius=this.idPull[id]._br?"5px":"0px"):(this.idPull[id].style.borderBottomLeftRadius="0px",this.idPull[id].style.borderBottomRightRadius="0px")},dhtmlXMenuObject.prototype.extendedModule="DHXMENUEXT",dhtmlXMenuObject.prototype.setItemEnabled=function(id){this._changeItemState(id,"enabled",this._getItemLevelType(id))},dhtmlXMenuObject.prototype.setItemDisabled=function(id){this._changeItemState(id,"disabled",this._getItemLevelType(id))},dhtmlXMenuObject.prototype.isItemEnabled=function(id){return null!=this.itemPull[this.idPrefix+id]?"enabled"==this.itemPull[this.idPrefix+id].state:!1},dhtmlXMenuObject.prototype._changeItemState=function(id,newState,levelType){var t=!1,j=this.idPrefix+id;return null!=this.itemPull[j]&&null!=this.idPull[j]&&this.itemPull[j].state!=newState&&(this.itemPull[j].state=newState,this.itemPull[j].parent!=this.idPrefix+this.topId||this.context?this.idPull[j].className="sub_item"+("enabled"==this.itemPull[j].state?"":"_dis"):this.idPull[j].className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[j].state?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+id,this.itemPull[this.idPrefix+id].complex,!1),this._updateItemImage(id,levelType),this.idPrefix+this.menuLastClicked==j&&"TopLevel"!=levelType&&this._redistribSubLevelSelection(j,this.itemPull[j].parent),"TopLevel"==levelType&&!this.context),t},dhtmlXMenuObject.prototype.getItemText=function(id){return null!=this.itemPull[this.idPrefix+id]?this.itemPull[this.idPrefix+id].title:""},dhtmlXMenuObject.prototype.setItemText=function(id,text){if(id=this.idPrefix+id,null!=this.itemPull[id]&&null!=this.idPull[id])if(this._clearAndHide(),this.itemPull[id].title=text,this.itemPull[id].parent!=this.idPrefix+this.topId||this.context){for(var tObj=null,q=0;q<this.idPull[id].childNodes[1].childNodes.length;q++)"sub_item_text"==String(this.idPull[id].childNodes[1].childNodes[q].className||"")&&(tObj=this.idPull[id].childNodes[1].childNodes[q]);""==String(this.itemPull[id].title).length||null==this.itemPull[id].title?tObj&&(tObj.parentNode.removeChild(tObj),tObj=null,this.idPull[id].childNodes[1].innerHTML="&nbsp;"):(tObj||(tObj=document.createElement("DIV"),tObj.className="sub_item_text",this.idPull[id].childNodes[1].innerHTML="",this.idPull[id].childNodes[1].appendChild(tObj)),tObj.innerHTML=this.itemPull[id].title)}else{for(var tObj=null,q=0;q<this.idPull[id].childNodes.length;q++)try{"top_level_text"==this.idPull[id].childNodes[q].className&&(tObj=this.idPull[id].childNodes[q])}catch(e){}""==String(this.itemPull[id].title).length||null==this.itemPull[id].title?null!=tObj&&tObj.parentNode.removeChild(tObj):(tObj||(tObj=document.createElement("DIV"),tObj.className="top_level_text",this._rtl&&this.idPull[id].childNodes.length>0?this.idPull[id].insertBefore(tObj,this.idPull[id].childNodes[0]):this.idPull[id].appendChild(tObj)),tObj.innerHTML=this.itemPull[id].title)}},dhtmlXMenuObject.prototype.loadFromHTML=function(objId,clearAfterAdd,onLoadFunction){this.itemTagName="DIV","string"==typeof objId&&(objId=document.getElementById(objId)),this._buildMenu(objId,null),this.init(),clearAfterAdd&&objId.parentNode.removeChild(objId),null!=onLoadFunction&&onLoadFunction()},dhtmlXMenuObject.prototype.hideItem=function(id){this._changeItemVisible(id,!1)},dhtmlXMenuObject.prototype.showItem=function(id){this._changeItemVisible(id,!0)},dhtmlXMenuObject.prototype.isItemHidden=function(id){var isHidden=null;return null!=this.idPull[this.idPrefix+id]&&(isHidden="none"==this.idPull[this.idPrefix+id].style.display),isHidden},dhtmlXMenuObject.prototype._changeItemVisible=function(id,visible){var itemId=this.idPrefix+id;null!=this.itemPull[itemId]&&("separator"==this.itemPull[itemId].type&&(itemId="separator_"+itemId),null!=this.idPull[itemId]&&(this.idPull[itemId].style.display=visible?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+id].parent)))},dhtmlXMenuObject.prototype.setUserData=function(id,name,value){this.userData[this.idPrefix+id+"_"+name]=value},dhtmlXMenuObject.prototype.getUserData=function(id,name){return null!=this.userData[this.idPrefix+id+"_"+name]?this.userData[this.idPrefix+id+"_"+name]:null},dhtmlXMenuObject.prototype.setOpenMode=function(mode){"win"==mode||"web"==mode?this.menuMode=mode:"web"==this.menuMode},dhtmlXMenuObject.prototype.setWebModeTimeout=function(tm){this.menuTimeoutMsec=isNaN(tm)?400:tm},dhtmlXMenuObject.prototype.enableDynamicLoading=function(url,icon){this.dLoad=!0,this.dLoadUrl=url,this.dLoadSign=-1==String(this.dLoadUrl).search(/\?/)?"?":"&",this.loaderIcon=icon,this.init()},dhtmlXMenuObject.prototype._updateLoaderIcon=function(id,state){if(null!=this.idPull[id]&&!(String(this.idPull[id].className).search("TopLevel_Item")>=0)){var ind=this._rtl?0:2;if(this.idPull[id].childNodes[ind]&&this.idPull[id].childNodes[ind].childNodes[0]){var aNode=this.idPull[id].childNodes[ind].childNodes[0];0===String(aNode.className).search("complex_arrow")&&(aNode.className="complex_arrow"+(state?"_loading":""))}}},dhtmlXMenuObject.prototype.getItemImage=function(id){var imgs=new Array(null,null);return id=this.idPrefix+id,"item"==this.itemPull[id].type&&(imgs[0]=this.itemPull[id].imgen,imgs[1]=this.itemPull[id].imgdis),imgs},dhtmlXMenuObject.prototype.setItemImage=function(id,img,imgDis){"item"==this.itemPull[this.idPrefix+id].type&&(this.itemPull[this.idPrefix+id].imgen=img,this.itemPull[this.idPrefix+id].imgdis=imgDis,this._updateItemImage(id,this._getItemLevelType(id)))},dhtmlXMenuObject.prototype.clearItemImage=function(id){this.setItemImage(id,"","")},dhtmlXMenuObject.prototype.setAutoShowMode=function(mode){this.contextAutoShow=1==mode},dhtmlXMenuObject.prototype.setAutoHideMode=function(mode){this.contextAutoHide=1==mode},dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(mode){this.contextHideAllMode=1==mode},dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.contextHideAllMode},dhtmlXMenuObject.prototype.setVisibleArea=function(x1,x2,y1,y2){this._isVisibleArea=!0,this.menuX1=x1,this.menuX2=x2,this.menuY1=y1,this.menuY2=y2},dhtmlXMenuObject.prototype.setTooltip=function(id,tip){id=this.idPrefix+id,null!=this.itemPull[id]&&null!=this.idPull[id]&&(this.idPull[id].title=tip.length>0?tip:null,this.itemPull[id].tip=tip)},dhtmlXMenuObject.prototype.getTooltip=function(id){return null==this.itemPull[this.idPrefix+id]?null:this.itemPull[this.idPrefix+id].tip},dhtmlXMenuObject.prototype.setHotKey=function(id,hkey){if(id=this.idPrefix+id,null!=this.itemPull[id]&&null!=this.idPull[id]&&(this.itemPull[id].parent!=this.idPrefix+this.topId||this.context)&&!this.itemPull[id].complex){var t=this.itemPull[id].type;if("item"==t||"checkbox"==t||"radio"==t){var hkObj=null;try{"sub_item_hk"==this.idPull[id].childNodes[this._rtl?0:2].childNodes[0].className&&(hkObj=this.idPull[id].childNodes[this._rtl?0:2].childNodes[0])}catch(e){}if(0==hkey.length)this.itemPull[id].hotkey_backup=this.itemPull[id].hotkey,this.itemPull[id].hotkey="",null!=hkObj&&hkObj.parentNode.removeChild(hkObj);else{if(this.itemPull[id].hotkey=hkey,this.itemPull[id].hotkey_backup=null,null==hkObj){hkObj=document.createElement("DIV"),hkObj.className="sub_item_hk";for(var item=this.idPull[id].childNodes[this._rtl?0:2];item.childNodes.length>0;)item.removeChild(item.childNodes[0]);item.appendChild(hkObj)}hkObj.innerHTML=hkey}}}},dhtmlXMenuObject.prototype.getHotKey=function(id){return null==this.itemPull[this.idPrefix+id]?null:this.itemPull[this.idPrefix+id].hotkey},dhtmlXMenuObject.prototype.setItemSelected=function(id){return null==this.itemPull[this.idPrefix+id]?null:void 0},dhtmlXMenuObject.prototype.setTopText=function(text){this.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._rtl?"left":"left"==this._align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=text)},dhtmlXMenuObject.prototype.setAlign=function(align){this._align!=align&&("left"!=align&&"right"!=align||(this._align=align,this.cont&&(this.cont.className="right"==this._align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this._align?"right":"left"))))},dhtmlXMenuObject.prototype.setHref=function(itemId,href,target){null!=this.itemPull[this.idPrefix+itemId]&&(this.itemPull[this.idPrefix+itemId].href_link=href,null!=target&&(this.itemPull[this.idPrefix+itemId].href_target=target))},dhtmlXMenuObject.prototype.clearHref=function(itemId){null!=this.itemPull[this.idPrefix+itemId]&&(delete this.itemPull[this.idPrefix+itemId].href_link,delete this.itemPull[this.idPrefix+itemId].href_target)},dhtmlXMenuObject.prototype.getCircuit=function(id){for(var parents=new Array(id);this.getParentId(id)!=this.topId;)id=this.getParentId(id),parents[parents.length]=id;return parents.reverse()},dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(polygon){for(var subIds=this._getSubItemToDeselectByPolygon(polygon),q=0;q<this._openedPolygons.length;q++)this._openedPolygons[q]!=polygon&&this._hidePolygon(this._openedPolygons[q]);for(var q=0;q<subIds.length;q++)null!=this.idPull[subIds[q]]&&"enabled"==this.itemPull[subIds[q]].state&&(this.idPull[subIds[q]].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Normal")},dhtmlXMenuObject.prototype._checkArrowsState=function(id){var polygon=this.idPull["polygon_"+id],arrowUp=this.idPull["arrowup_"+id],arrowDown=this.idPull["arrowdown_"+id];0==polygon.scrollTop?arrowUp.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp_Disabled":arrowUp.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp"+(arrowUp.over?"_Over":""),polygon.scrollTop+polygon.offsetHeight<polygon.scrollHeight?arrowDown.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown"+(arrowDown.over?"_Over":""):arrowDown.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown_Disabled"},dhtmlXMenuObject.prototype._addUpArrow=function(id){var main_self=this,arrow=document.createElement("DIV");arrow.pId=this.idPrefix+id,arrow.id="arrowup_"+this.idPrefix+id,arrow.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp",arrow.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>",arrow.style.display="none",arrow.over=!1,arrow.onselectstart=function(e){return e=e||event,e.returnValue=!1,!1},arrow.oncontextmenu=function(e){return e=e||event,e.returnValue=!1,!1},arrow.onmouseover=function(){"web"==main_self.menuMode&&window.clearTimeout(main_self.menuTimeoutHandler),main_self._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,main_self._canScrollUp=!0,main_self._doScrollUp(this.pId,!0))},arrow.onmouseout=function(){"web"==main_self.menuMode&&(window.clearTimeout(main_self.menuTimeoutHandler),main_self.menuTimeoutHandler=window.setTimeout(function(){main_self._clearAndHide()},main_self.menuTimeoutMsec,"JavaScript")),this.over=!1,main_self._canScrollUp=!1,this.className!="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(main_self._scrollUpTM))},arrow.onclick=function(e){return e=e||event,e.returnValue=!1,e.cancelBubble=!0,!1},document.body.insertBefore(arrow,document.body.firstChild),this.idPull[arrow.id]=arrow},dhtmlXMenuObject.prototype._addDownArrow=function(id){var main_self=this,arrow=document.createElement("DIV");arrow.pId=this.idPrefix+id,arrow.id="arrowdown_"+this.idPrefix+id,arrow.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown",arrow.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>",arrow.style.display="none",arrow.over=!1,arrow.onselectstart=function(e){return e=e||event,e.returnValue=!1,!1},arrow.oncontextmenu=function(e){return e=e||event,e.returnValue=!1,!1},arrow.onmouseover=function(){"web"==main_self.menuMode&&window.clearTimeout(main_self.menuTimeoutHandler),main_self._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,main_self._canScrollDown=!0,main_self._doScrollDown(this.pId,!0))},arrow.onmouseout=function(){"web"==main_self.menuMode&&(window.clearTimeout(main_self.menuTimeoutHandler),main_self.menuTimeoutHandler=window.setTimeout(function(){main_self._clearAndHide()},main_self.menuTimeoutMsec,"JavaScript")),this.over=!1,main_self._canScrollDown=!1,this.className!="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(main_self._scrollDownTM))},arrow.onclick=function(e){return e=e||event,e.returnValue=!1,e.cancelBubble=!0,!1},document.body.insertBefore(arrow,document.body.firstChild),this.idPull[arrow.id]=arrow},dhtmlXMenuObject.prototype._removeUpArrow=function(id){var fullId="arrowup_"+this.idPrefix+id;this._removeArrow(fullId)},dhtmlXMenuObject.prototype._removeDownArrow=function(id){var fullId="arrowdown_"+this.idPrefix+id;this._removeArrow(fullId)},dhtmlXMenuObject.prototype._removeArrow=function(fullId){var arrow=this.idPull[fullId];arrow.onselectstart=null,arrow.oncontextmenu=null,arrow.onmouseover=null,arrow.onmouseout=null,arrow.onclick=null,arrow.parentNode&&arrow.parentNode.removeChild(arrow),arrow=null,this.idPull[fullId]=null;try{delete this.idPull[fullId]}catch(e){}},dhtmlXMenuObject.prototype._isArrowExists=function(id){return null!=this.idPull["arrowup_"+id]&&null!=this.idPull["arrowdown_"+id]},dhtmlXMenuObject.prototype._doScrollUp=function(id,checkArrows){var polygon=this.idPull["polygon_"+id];if(this._canScrollUp&&polygon.scrollTop>0){var theEnd=!1,nextScrollTop=polygon.scrollTop-this._scrollUpTMStep;if(0>nextScrollTop&&(theEnd=!0,nextScrollTop=0),polygon.scrollTop=nextScrollTop,!theEnd){var that=this;this._scrollUpTM=window.setTimeout(function(){that._doScrollUp(id,!1)},this._scrollUpTMTime)}}else this._canScrollUp=!1,this._checkArrowsState(id);checkArrows&&this._checkArrowsState(id)},dhtmlXMenuObject.prototype._doScrollDown=function(id,checkArrows){var polygon=this.idPull["polygon_"+id];if(this._canScrollDown&&polygon.scrollTop+polygon.offsetHeight<=polygon.scrollHeight){var theEnd=!1,nextScrollTop=polygon.scrollTop+this._scrollDownTMStep;if(nextScrollTop+polygon.offsetHeight>polygon.scollHeight&&(theEnd=!0,nextScrollTop=polygon.scollHeight-polygon.offsetHeight),polygon.scrollTop=nextScrollTop,!theEnd){var that=this;this._scrollDownTM=window.setTimeout(function(){that._doScrollDown(id,!1)},this._scrollDownTMTime)}}else this._canScrollDown,this._checkArrowsState(id);checkArrows&&this._checkArrowsState(id)},dhtmlXMenuObject.prototype._countPolygonItems=function(id){var count=0;for(var a in this.itemPull){var par=this.itemPull[a].parent,tp=this.itemPull[a].type;par!=this.idPrefix+id||"item"!=tp&&"radio"!=tp&&"checkbox"!=tp||count++}return count},dhtmlXMenuObject.prototype.setOverflowHeight=function(itemsNum){if("auto"===itemsNum)return this.limit=0,void(this.autoOverflow=!0);if(!(0==this.limit&&0>=itemsNum)){if(this._clearAndHide(),this.limit>=0&&itemsNum>0)return void(this.limit=itemsNum);if(this.limit>0&&0>=itemsNum){for(var a in this.itemPull)if(this._isArrowExists(a)){var b=String(a).replace(this.idPrefix,"");this._removeUpArrow(b),this._removeDownArrow(b),this.idPull["polygon_"+a].style.height=""}return void(this.limit=0)}}},dhtmlXMenuObject.prototype._getRadioImgObj=function(id){try{var imgObj=this.idPull[this.idPrefix+id].childNodes[this._rtl?2:0].childNodes[0]}catch(e){var imgObj=null}return imgObj},dhtmlXMenuObject.prototype._setRadioState=function(id,state){var imgObj=this._getRadioImgObj(id);if(null!=imgObj){var rObj=this.itemPull[this.idPrefix+id];rObj.checked=state,rObj.imgen="rdbt_"+(rObj.checked?"1":"0"),rObj.imgdis=rObj.imgen,imgObj.className="sub_icon "+rObj.imgen}},dhtmlXMenuObject.prototype._radioOnClickHandler=function(id,type,casState){if("d"!=type.charAt(1)&&null!=this.itemPull[this.idPrefix+id].group){var group=this.itemPull[this.idPrefix+id].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[group,this.getRadioChecked(group),id,this.contextMenuZoneId,casState])&&this.setRadioChecked(group,id):this.setRadioChecked(group,id),this.checkEvent("onClick")&&this.callEvent("onClick",[id])}},dhtmlXMenuObject.prototype.getRadioChecked=function(group){for(var id=null,q=0;q<this.radio[group].length;q++){var itemId=this.radio[group][q].replace(this.idPrefix,""),imgObj=this._getRadioImgObj(itemId);if(null!=imgObj){var checked=imgObj.className.match(/rdbt_1$/gi);null!=checked&&(id=itemId)}}return id},dhtmlXMenuObject.prototype.setRadioChecked=function(group,id){if(null!=this.radio[group])for(var q=0;q<this.radio[group].length;q++){var itemId=this.radio[group][q].replace(this.idPrefix,"");this._setRadioState(itemId,itemId==id)}},dhtmlXMenuObject.prototype.addRadioButton=function(mode,nextToId,pos,itemId,itemText,group,state,disabled){if(this.context&&nextToId==this.topId);else{if(null==this.itemPull[this.idPrefix+nextToId])return;if("child"==mode&&"item"!=this.itemPull[this.idPrefix+nextToId].type)return}var id=this.idPrefix+(null!=itemId?itemId:this._genStr(24)),img="rdbt_"+(state?"1":"0"),imgDis=img;if("sibling"==mode){var parentId=this.idPrefix+this.getParentId(nextToId);this._addItemIntoGlobalStrorage(id,parentId,itemText,"radio",disabled,img,imgDis),this._renderSublevelItem(id,this.getItemPosition(nextToId))}else{var parentId=this.idPrefix+nextToId;this._addItemIntoGlobalStrorage(id,parentId,itemText,"radio",disabled,img,imgDis),null==this.idPull["polygon_"+parentId]&&this._renderSublevelPolygon(parentId,parentId),this._renderSublevelItem(id,pos-1),this._redefineComplexState(parentId)}var gr=null!=group?group:this._genStr(24);this.itemPull[id].group=gr,null==this.radio[gr]&&(this.radio[gr]=new Array),this.radio[gr][this.radio[gr].length]=id,1==state&&this.setRadioChecked(gr,String(id).replace(this.idPrefix,""))},dhtmlXMenuObject.prototype._getCheckboxState=function(id){return null==this.itemPull[this.idPrefix+id]?null:this.itemPull[this.idPrefix+id].checked},dhtmlXMenuObject.prototype._setCheckboxState=function(id,state){null!=this.itemPull[this.idPrefix+id]&&(this.itemPull[this.idPrefix+id].checked=state)},dhtmlXMenuObject.prototype._updateCheckboxImage=function(id){if(null!=this.idPull[this.idPrefix+id]){this.itemPull[this.idPrefix+id].imgen="chbx_"+(this._getCheckboxState(id)?"1":"0"),this.itemPull[this.idPrefix+id].imgdis=this.itemPull[this.idPrefix+id].imgen;try{this.idPull[this.idPrefix+id].childNodes[this._rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+id].imgen}catch(e){}}},dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(id,type,casState){if("d"!=type.charAt(1)&&null!=this.itemPull[this.idPrefix+id]){var state=this._getCheckboxState(id);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[id,state,this.contextMenuZoneId,casState])&&this.setCheckboxState(id,!state):this.setCheckboxState(id,!state),this.checkEvent("onClick")&&this.callEvent("onClick",[id])}},dhtmlXMenuObject.prototype.setCheckboxState=function(id,state){this._setCheckboxState(id,state),this._updateCheckboxImage(id)},dhtmlXMenuObject.prototype.getCheckboxState=function(id){return this._getCheckboxState(id)},dhtmlXMenuObject.prototype.addCheckbox=function(mode,nextToId,pos,itemId,itemText,state,disabled){if(this.context&&nextToId==this.topId);else{if(null==this.itemPull[this.idPrefix+nextToId])return;if("child"==mode&&"item"!=this.itemPull[this.idPrefix+nextToId].type)return}var img="chbx_"+(state?"1":"0"),imgDis=img;if("sibling"==mode){var id=this.idPrefix+(null!=itemId?itemId:this._genStr(24)),parentId=this.idPrefix+this.getParentId(nextToId);this._addItemIntoGlobalStrorage(id,parentId,itemText,"checkbox",disabled,img,imgDis),this.itemPull[id].checked=state,this._renderSublevelItem(id,this.getItemPosition(nextToId))}else{var id=this.idPrefix+(null!=itemId?itemId:this._genStr(24)),parentId=this.idPrefix+nextToId;this._addItemIntoGlobalStrorage(id,parentId,itemText,"checkbox",disabled,img,imgDis),this.itemPull[id].checked=state,null==this.idPull["polygon_"+parentId]&&this._renderSublevelPolygon(parentId,parentId),this._renderSublevelItem(id,pos-1),this._redefineComplexState(parentId)}},dhtmlXMenuObject.prototype._readLevel=function(parentId){var xml="";for(var a in this.itemPull)if(this.itemPull[a].parent==parentId){var imgEn="",imgDis="",hotKey="",itemId=String(this.itemPull[a].id).replace(this.idPrefix,""),itemType="",itemText=""!=this.itemPull[a].title?' text="'+this.itemPull[a].title+'"':"",itemState="";
"item"==this.itemPull[a].type&&(""!=this.itemPull[a].imgen&&(imgEn=' img="'+this.itemPull[a].imgen+'"'),""!=this.itemPull[a].imgdis&&(imgDis=' imgdis="'+this.itemPull[a].imgdis+'"'),""!=this.itemPull[a].hotkey&&(hotKey="<hotkey>"+this.itemPull[a].hotkey+"</hotkey>")),"separator"==this.itemPull[a].type?itemType=' type="separator"':"disabled"==this.itemPull[a].state&&(itemState=' enabled="false"'),"checkbox"==this.itemPull[a].type&&(itemType=' type="checkbox"'+(this.itemPull[a].checked?' checked="true"':"")),"radio"==this.itemPull[a].type&&(itemType=' type="radio" group="'+this.itemPull[a].group+'" '+(this.itemPull[a].checked?' checked="true"':"")),xml+="<item id='"+itemId+"'"+itemText+itemType+imgEn+imgDis+itemState+">",xml+=hotKey,this.itemPull[a].complex&&(xml+=this._readLevel(a)),xml+="</item>"}return xml},dhtmlXMenuObject.prototype.serialize=function(){var xml="<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>";return xml},"function"==typeof egw&&egw(window).includeCSS(egw.webserverUrl+"/phpgwapi/js/egw_action/test/skins/dhtmlxmenu_egw.css"),egwMenuImpl.prototype._translateStructure=function(_structure,_parentId,_idCnt){for(var counter=0,last_id=null,i=0;i<_structure.length;i++){var elem=_structure[i],id=elem.id||"elem_"+(_idCnt+counter);if(counter++,"-"==elem.caption&&null!=last_id)this.dhtmlxmenu.addNewSeparator(last_id,id);else{if(elem.checkbox&&0===elem.groupIndex)this.dhtmlxmenu.addCheckbox("child",_parentId,i,id,elem.caption,elem.checked,!elem.enabled);else if(elem.checkbox&&elem.groupIndex>0)elem._dhtmlx_grpid="grp_"+_idCnt+"_"+elem.groupIndex,this.dhtmlxmenu.addRadioButton("child",_parentId,i,id,elem.caption,elem._dhtmlx_grpid,elem.checked,!elem.enabled);else{var caption=elem.caption;elem.default&&(caption="<b>"+caption+"</b>"),this.dhtmlxmenu.addNewChild(_parentId,i,id,caption,!elem.enabled,elem.iconUrl,elem.iconUrl)}null!=elem.shortcutCaption&&this.dhtmlxmenu.setHotKey(id,elem.shortcutCaption),elem.children.length>0&&(counter+=this._translateStructure(elem.children,id,_idCnt+counter))}this.dhtmlxmenu.setUserData(id,"egw_menu",elem),elem.hint&&this.dhtmlxmenu.setTooltip(id,elem.hint);var last_id=id}return counter},egwMenuImpl.prototype.showAt=function(_x,_y,_onHide){var self=this;_onHide&&this.dhtmlxmenu.attachEvent("onHide",function(id){null===id&&_onHide()});var self=this;window.setTimeout(function(){self.dhtmlxmenu.showContextMenu(_x,_y)},0)},egwMenuImpl.prototype.hide=function(){this.dhtmlxmenu.hide()},function(){var SelectParser;SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(child){return"OPTGROUP"===child.nodeName.toUpperCase()?this.add_group(child):this.add_option(child)},SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;for(group_position=this.parsed.length,this.parsed.push({array_index:group_position,group:!0,label:this.escapeExpression(group.label),children:0,disabled:group.disabled}),_ref=group.childNodes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],_results.push(this.add_option(option,group_position,group.disabled));return _results},SelectParser.prototype.add_option=function(option,group_position,group_disabled){return"OPTION"===option.nodeName.toUpperCase()?(""!==option.text?(null!=group_position&&(this.parsed[group_position].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,selected:option.selected,disabled:group_disabled===!0?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},SelectParser.prototype.escapeExpression=function(text){var map,unsafe_chars;return null==text||text===!1?"":/[\&\<\>\"\'\`]/.test(text)?(map={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unsafe_chars=/&(?!\w+;)|[\<\>\"\'\`]/g,text.replace(unsafe_chars,function(chr){return map[chr]||"&amp;"})):text},SelectParser}(),SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;for(parser=new SelectParser,_ref=select.childNodes,_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],parser.add_node(child);return parser.parsed},this.SelectParser=SelectParser}.call(this),function(){var AbstractChosen,root;root=this,AbstractChosen=function(){function AbstractChosen(form_field,options){this.form_field=form_field,this.options=null!=options?options:{},AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup())}return AbstractChosen.prototype.set_default_values=function(){var _this=this;return this.click_test_action=function(evt){return _this.test_active_click(evt)},this.activate_action=function(evt){return _this.activate_field(evt)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1},AbstractChosen.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return _this.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(evt){var _this=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return _this.blur_test()},100))},AbstractChosen.prototype.results_option_build=function(options){var content,data,_i,_len,_ref;for(content="",_ref=this.results_data,_i=0,_len=_ref.length;_len>_i;_i++)data=_ref[_i],data.group&&(data.search_match||data.group_match)?content+=this.result_add_group(data):!data.empty&&data.search_match&&(content+=this.result_add_option(data)),(null!=options?options.first:void 0)&&(data.selected&&this.is_multiple?this.choice_build(data):data.selected&&!this.is_multiple&&this.single_set_selected_text(data.text));return content},AbstractChosen.prototype.result_add_option=function(option){var classes,style;return classes=[],option.disabled||option.selected&&this.is_multiple||classes.push("active-result"),!option.disabled||option.selected&&this.is_multiple||classes.push("disabled-result"),option.selected&&classes.push("result-selected"),null!=option.group_array_index&&classes.push("group-option"),""!==option.classes&&classes.push(option.classes),style=""!==option.style.cssText?' style="'+option.style+'"':"",'<li class="'+classes.join(" ")+'"'+style+' data-option-array-index="'+option.array_index+'">'+option.search_text+"</li>"},AbstractChosen.prototype.result_add_group=function(group){return'<li class="group-result">'+group.search_text+"</li>"},AbstractChosen.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing?this.winnow_results():void 0},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(evt){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.winnow_results=function(){var option,regex,regexAnchor,results,searchText,startpos,text,zregex,_i,_len,_ref;for(this.no_results_clear(),results=0,searchText=this.get_search_text(),regexAnchor=this.search_contains?"":"^",regex=new RegExp(regexAnchor+searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),zregex=new RegExp(searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),_ref=this.results_data,_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],option.empty||(option.group&&(option.group_match=!1),option.group&&!this.group_search||(option.search_match=!1,option.search_text=option.group?option.label:option.html,option.search_match=this.search_string_match(option.search_text,regex),option.search_match&&(results+=1),option.search_match?(searchText.length&&(startpos=option.search_text.search(zregex),text=option.search_text.substr(0,startpos+searchText.length)+"</em>"+option.search_text.substr(startpos+searchText.length),option.search_text=text.substr(0,startpos)+"<em>"+text.substr(startpos)),null!=option.group_array_index&&(this.results_data[option.group_array_index].group_match=!0)):null!=option.group_array_index&&this.results_data[option.group_array_index].search_match&&(option.search_match=!0)));return 1>results&&searchText.length?(this.update_results_content(""),this.result_clear_highlight(),this.no_results(searchText)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},AbstractChosen.prototype.search_string_match=function(search_string,regex){var part,parts,_i,_len;if(regex.test(search_string))return!0;if(this.enable_split_word_search&&(search_string.indexOf(" ")>=0||0===search_string.indexOf("["))&&(parts=search_string.replace(/\[|\]/g,"").split(" "),parts.length))for(_i=0,_len=parts.length;_len>_i;_i++)if(part=parts[_i],regex.test(part))return!0},AbstractChosen.prototype.choices_count=function(){var option,_i,_len,_ref;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,_ref=this.form_field.options,_i=0,_len=_ref.length;_len>_i;_i++)option=_ref[_i],option.selected&&(this.selected_option_count+=1);return this.selected_option_count},AbstractChosen.prototype.choices_click=function(evt){return evt.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;switch(stroke=null!=(_ref=evt.which)?_ref:evt.keyCode,this.search_field_scale(),stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(evt.preventDefault(),this.results_showing)return this.result_select(evt);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},AbstractChosen.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},AbstractChosen.prototype.generate_field_id=function(){return this.generate_random_id()},AbstractChosen.browser_is_supported=function(){var _ref;return"Microsoft Internet Explorer"===window.navigator.appName?null!==(_ref=document.documentMode)&&_ref>=8:!0},AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No results match",AbstractChosen}(),root.AbstractChosen=AbstractChosen}.call(this),function(){var $,Chosen,root,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};root=this,$=jQuery,$.fn.extend({chosen:function(options){return AbstractChosen.browser_is_supported()?this.each(function(input_field){var $this;return $this=$(this),$this.hasClass("chzn-done")?void 0:$this.data("chosen",new Chosen(this,options))}):this},unchosen:function(){return $(this).each(function(input_field){var chosen,element;return element=$(this),chosen=element.data("chosen"),chosen&&(chosen.remove(),element.data("chosen",null)),element})}}),Chosen=function(_super){function Chosen(){return _ref=Chosen.__super__.constructor.apply(this,arguments)}return __extends(Chosen,_super),Chosen.prototype.setup=function(){return this.form_field_jq=$(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},Chosen.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},Chosen.prototype.set_up_html=function(){var container_classes,container_props;return container_classes=["chzn-container"],container_classes.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&container_classes.push(this.form_field.className),this.is_rtl&&container_classes.push("chzn-rtl"),container_props={class:container_classes.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(container_props.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chzn"),this.container=$("<div />",container_props),this.is_multiple?this.container.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop"><ul class="chzn-results"></ul></div>'):this.container.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chzn-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var _this=this;return this.container.mousedown(function(evt){_this.container_mousedown(evt)}),this.container.mouseup(function(evt){_this.container_mouseup(evt)}),this.container.mouseenter(function(evt){_this.mouse_enter(evt)}),this.container.mouseleave(function(evt){_this.mouse_leave(evt)}),this.search_results.mouseup(function(evt){_this.search_results_mouseup(evt)}),this.search_results.mouseover(function(evt){_this.search_results_mouseover(evt)}),this.search_results.mouseout(function(evt){_this.search_results_mouseout(evt)}),this.search_results.bind("mousewheel DOMMouseScroll",function(evt){_this.search_results_mousewheel(evt)}),this.form_field_jq.bind("liszt:updated",function(evt){_this.results_update_field(evt)}),this.form_field_jq.bind("liszt:activate",function(evt){_this.activate_field(evt)}),this.form_field_jq.bind("liszt:open",function(evt){_this.container_mousedown(evt)}),this.search_field.blur(function(evt){_this.input_blur(evt)}),this.search_field.keyup(function(evt){_this.keyup_checker(evt)}),this.search_field.keydown(function(evt){_this.keydown_checker(evt)}),this.search_field.focus(function(evt){_this.input_focus(evt)}),this.is_multiple?this.search_choices.click(function(evt){_this.choices_click(evt)}):this.container.click(function(evt){evt.preventDefault()})},Chosen.prototype.unregister_observers=function(){return this.form_field_jq.unbind()},Chosen.prototype.remove_html=function(){return this.form_field_jq.show().removeClass("chzn-done"),this.container.remove()},Chosen.prototype.unregister_observers=function(){return this.form_field_jq.unbind()},Chosen.prototype.remove_html=function(){return this.form_field_jq.show().removeClass("chzn-done"),this.container.remove()},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},Chosen.prototype.container_mousedown=function(evt){return this.is_disabled||(evt&&"mousedown"===evt.type&&!this.results_showing&&evt.preventDefault(),null!=evt&&$(evt.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!evt||$(evt.target)[0]!==this.selected_item[0]&&!$(evt.target).parents("a.chzn-single").length||(evt.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),$(document).click(this.click_test_action),this.results_show()),this.activate_field())},Chosen.prototype.container_mouseup=function(evt){return"ABBR"!==evt.target.nodeName||this.is_disabled?void 0:this.results_reset(evt)},Chosen.prototype.search_results_mousewheel=function(evt){var delta,_ref1,_ref2;return delta=-(null!=(_ref1=evt.originalEvent)?_ref1.wheelDelta:void 0)||(null!=(_ref2=evt.originialEvent)?_ref2.detail:void 0),null!=delta?(evt.preventDefault(),"DOMMouseScroll"===evt.type&&(delta=40*delta),this.search_results.scrollTop(delta+this.search_results.scrollTop())):void 0},Chosen.prototype.blur_test=function(evt){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},Chosen.prototype.close_field=function(){return $(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(evt){return this.container.is($(evt.target).closest(".chzn-container"))?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=root.SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chzn-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chzn-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){if(this.result_clear_highlight(),this.result_highlight=el,this.result_highlight.addClass("highlighted"),maxHeight=parseInt(this.search_results.css("maxHeight"),10),visible_top=this.search_results.scrollTop(),visible_bottom=maxHeight+visible_top,high_top=this.result_highlight.position().top+this.search_results.scrollTop(),high_bottom=high_top+this.result_highlight.outerHeight(),high_bottom>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);if(visible_top>high_top)return this.search_results.scrollTop(high_top)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count())return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;this.container.addClass("chzn-with-drop"),this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});var windowHeight=$(window).height(),dropdownTop=this.container.offset().top+this.container.height()-$(window).scrollTop();return totalHeight=this.dropdown.height()+dropdownTop,this.dropdown.toggleClass("chzn-above",totalHeight>windowHeight),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},Chosen.prototype.update_results_content=function(content){return this.search_results.html(content)},Chosen.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chzn-with-drop"),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this})),this.results_showing=!1},Chosen.prototype.reset_tab_index=function(){var tabbed_item;return tabbed_item=this.is_multiple?this.search_field:this.selected_item,this.form_field_jq.attr("tabindex",tabbed_item.attr("tabindex")),tabbed_item.attr("tabindex")-1},Chosen.prototype.set_tab_index=function(el){var ti;return this.form_field_jq.attr("tabindex")?(ti=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",ti)):void 0},Chosen.prototype.set_label_behavior=function(){var _this=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=$("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.click(function(evt){return _this.is_multiple?_this.container_mousedown(evt):_this.activate_field()}):void 0},Chosen.prototype.reset_tab_index=function(){var tabbed_item;return tabbed_item=this.is_multiple?this.search_field:this.selected_item,this.form_field_jq.attr("tabindex",tabbed_item.attr("tabindex")),tabbed_item.attr("tabindex")-1},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(evt){var target;return target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first(),target.length?(this.result_highlight=target,this.result_select(evt),this.search_field.focus()):void 0},Chosen.prototype.search_results_mouseover=function(evt){var target;return target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first(),target?this.result_do_highlight(target):void 0},Chosen.prototype.search_results_mouseout=function(evt){return $(evt.target).hasClass("active-result")?this.result_clear_highlight():void 0},Chosen.prototype.choice_build=function(item){var choice,close_link,_this=this;return choice=$("<li />",{class:"search-choice"}).html("<span>"+item.html+"</span>"),item.disabled?choice.addClass("search-choice-disabled"):(close_link=$("<a />",{href:"#",class:"search-choice-close",rel:item.array_index}),close_link.click(function(evt){return _this.choice_destroy_link_click(evt)}),choice.append(close_link)),this.search_container.before(choice)},Chosen.prototype.choice_destroy_link_click=function(evt){return evt.preventDefault(),evt.stopPropagation(),this.is_disabled?void 0:this.choice_destroy($(evt.target))},Chosen.prototype.choice_destroy=function(link){return this.result_deselect(link.attr("rel"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),link.parents("li").first().remove(),this.search_field_scale()):void 0},Chosen.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},Chosen.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(evt){var high,item;return this.result_highlight?(high=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(this.is_multiple?high.removeClass("active-result"):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=high),high.addClass("result-selected"),item=this.results_data[high[0].getAttribute("data-option-array-index")],item.selected=!0,this.form_field.options[item.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(item):this.single_set_selected_text(item.text),(evt.metaKey||evt.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[item.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},Chosen.prototype.single_set_selected_text=function(text){return null==text&&(text=this.default_text),text===this.default_text?this.selected_item.addClass("chzn-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chzn-default")),this.selected_item.find("span").text(text)},Chosen.prototype.result_deselect=function(pos){var result_data;return result_data=this.results_data[pos],this.form_field.options[result_data.options_index].disabled?!1:(result_data.selected=!1,this.form_field.options[result_data.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chzn-single-with-deselect")):void 0},Chosen.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":$("<div/>").text($.trim(this.search_field.val())).html()},Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;return selected_results=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first(),null!=do_high?this.result_do_highlight(do_high):void 0},Chosen.prototype.no_results=function(terms){var no_results_html;return no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),no_results_html.find("span").first().html(terms),this.search_results.append(no_results_html)},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.remove=function(){return this.reset_tab_index(),this.unregister_observers(),this.remove_html()},Chosen.prototype.keydown_arrow=function(){var next_sib;return this.results_showing&&this.result_highlight?(next_sib=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(next_sib):void 0:this.results_show()},Chosen.prototype.keyup_arrow=function(){var prev_sibs;return this.results_showing||this.is_multiple?this.result_highlight?(prev_sibs=this.result_highlight.prevAll("li.active-result"),prev_sibs.length?this.result_do_highlight(prev_sibs.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(next_available_destroy=this.search_container.siblings("li.search-choice").last(),next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled")?(this.pending_backstroke=next_available_destroy,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(evt){var stroke,_ref1;switch(stroke=null!=(_ref1=evt.which)?_ref1:evt.keyCode,this.search_field_scale(),8!==stroke&&this.pending_backstroke&&this.clear_backstroke(),stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(evt),this.mouse_on_container=!1;break;case 13:evt.preventDefault();break;case 38:evt.preventDefault(),this.keyup_arrow();break;case 40:evt.preventDefault(),this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var div,f_width,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){for(h=0,w=0,style_block="position:absolute; left: -1000px; top: -1000px; display:none;",styles=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],_i=0,_len=styles.length;_len>_i;_i++)style=styles[_i],style_block+=style+":"+this.search_field.css(style)+";";return div=$("<div />",{style:style_block}),div.text(this.search_field.val()),$("body").append(div),w=div.width()+25,div.remove(),f_width=this.container.outerWidth(),w>f_width-10&&(w=f_width-10),this.search_field.css({width:w+"px"})}},Chosen}(AbstractChosen),root.Chosen=Chosen}.call(this),function(){window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,e={timestamp:"FADA",version:"4.5.4 DEV",revision:"56b7395",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var b=window.CKEDITOR_BASEPATH||"";if(!b)for(var c=document.getElementsByTagName("script"),e=0;e<c.length;e++){var f=c[e].src.match(a);if(f){b=f[1];break}}if(-1==b.indexOf(":/")&&"//"!=b.slice(0,2)&&(b=0===b.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+b:location.href.match(/^[^\?]*\/(?:)/)[0]+b),!b)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return b}(),getUrl:function(a){
return-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a),this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"&":"?")+"t="+this.timestamp),a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),b())}catch(f){}}function b(){for(var a;a=c.shift();)a()}var c=[];return function(f){function b(){try{document.documentElement.doScroll("left")}catch(g){return void setTimeout(b,1)}a()}if(c.push(f),"complete"===document.readyState&&setTimeout(a,1),1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",a),window.attachEvent("onload",a),f=!1;try{f=!window.frameElement}catch(k){}document.documentElement.doScroll&&f&&b()}}}()},b=window.CKEDITOR_GETURL;if(b){var c=e.getUrl;e.getUrl=function(a){return b.call(e,a)||c.call(e,a)}}return e}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(a){var b,e=CKEDITOR.event.prototype;for(b in e)null==a[b]&&(a[b]=e[b])},CKEDITOR.event.prototype=function(){function a(a){var d=e(this);return d[a]||(d[a]=new b(a))}var e=function(a){return a=a.getPrivate&&a.getPrivate()||a._||(a._={}),a.events||(a.events={})},b=function(a){this.name=a,this.listeners=[]};return b.prototype={getListenerIndex:function(a){for(var b=0,e=this.listeners;b<e.length;b++)if(e[b].fn==a)return b;return-1}},{define:function(b,d){var e=a.call(this,b);CKEDITOR.tools.extend(e,d,!0)},on:function(b,d,e,l,f){function h(g,a,f,h){return g={name:b,sender:this,editor:g,data:a,listenerData:l,stop:f,cancel:h,removeListener:k},!1===d.call(e,g)?!1:g.data}function k(){n.removeListener(b,d)}var g=a.call(this,b);if(0>g.getListenerIndex(d)){g=g.listeners,e||(e=this),isNaN(f)&&(f=10);var n=this;h.fn=d,h.priority=f;for(var q=g.length-1;q>=0;q--)if(g[q].priority<=f)return g.splice(q+1,0,h),{removeListener:k};g.unshift(h)}return{removeListener:k}},once:function(){var a=Array.prototype.slice.call(arguments),b=a[1];return a[1]=function(a){return a.removeListener(),b.apply(this,arguments)},this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,a},fire:function(){var a=0,b=function(){a=1},m=0,l=function(){m=1};return function(f,h,k){var g=e(this)[f];f=a;var n=m;if(a=m=0,g){var q=g.listeners;if(q.length)for(var t,q=q.slice(0),u=0;u<q.length;u++){if(g.errorProof)try{t=q[u].call(this,k,h,b,l)}catch(p){}else t=q[u].call(this,k,h,b,l);if(!1===t?m=1:"undefined"!=typeof t&&(h=t),a||m)break}}return h=m?!1:"undefined"==typeof h?!0:h,a=f,m=n,h}}(),fireOnce:function(a,b,m){return b=this.fire(a,b,m),delete e(this)[a],b},removeListener:function(a,b){var m=e(this)[a];if(m){var l=m.getListenerIndex(b);l>=0&&m.listeners.splice(l,1)}},removeAllListeners:function(){var b,a=e(this);for(b in a)delete a[b]},hasListeners:function(a){return(a=e(this)[a])&&0<a.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,e){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fire.call(this,a,e,this)},CKEDITOR.editor.prototype.fireOnce=function(a,e){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fireOnce.call(this,a,e,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),e=a.match(/edge[ \/](\d+.?\d*)/),b=-1<a.indexOf("trident/"),b=!(!e&&!b),b={ie:b,edge:!!e,webkit:!b&&-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<a.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;return a!=b&&a!="["+b+"]"},secure:"https:"==location.protocol};b.gecko="Gecko"==navigator.product&&!b.webkit&&!b.ie,b.webkit&&(-1<a.indexOf("chrome")?b.chrome=!0:b.safari=!0);var c=0;return b.ie&&(c=e?parseFloat(e[1]):b.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,b.ie9Compat=9==c,b.ie8Compat=8==c,b.ie7Compat=7==c,b.ie6Compat=7>c||b.quirks),b.gecko&&(e=a.match(/rv:([\d\.]+)/))&&(e=e[1].split("."),c=1e4*e[0]+100*(e[1]||0)+1*(e[2]||0)),b.air&&(c=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),b.webkit&&(c=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),b.version=c,b.isCompatible=!(b.ie&&7>c||b.gecko&&4e4>c||b.webkit&&534>c),b.hidpi=2<=window.devicePixelRatio,b.needsBrFiller=b.gecko||b.webkit||b.ie&&c>10,b.needsNbspFiller=b.ie&&11>c,b.cssClass="cke_browser_"+(b.ie?"ie":b.gecko?"gecko":b.webkit?"webkit":"unknown"),b.quirks&&(b.cssClass+=" cke_browser_quirks"),b.ie&&(b.cssClass+=" cke_browser_ie"+(b.quirks?"6 cke_browser_iequirks":b.version)),b.air&&(b.cssClass+=" cke_browser_air"),b.iOS&&(b.cssClass+=" cke_browser_ios"),b.hidpi&&(b.cssClass+=" cke_hidpi"),b}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript",a.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(a)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)},function(){CKEDITOR.domReady(function(){var a=CKEDITOR.loadFullCore,e=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():e&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*e))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(a,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:a,additionalData:e})},CKEDITOR.error=function(a,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:a,additionalData:e})},CKEDITOR.on("log",function(a){if(window.console&&window.console.log){var e=console[a.data.type]?a.data.type:"log",b=a.data.errorCode;(a=a.data.additionalData)?console[e]("[CKEDITOR] "+b,a):console[e]("[CKEDITOR] "+b),console[e]("[CKEDITOR] For more information go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+b)}},null,null,999),CKEDITOR.dom={},function(){var a=[],e=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",b=/&/g,c=/>/g,d=/</g,m=/"/g,l=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,f={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},h=function(a,g){return"#"==g[0]?String.fromCharCode(parseInt(g.slice(1),10)):f[g]};CKEDITOR.on("reset",function(){a=[]}),CKEDITOR.tools={arrayCompare:function(a,g){if(!a&&!g)return!0;if(!a||!g||a.length!=g.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!=g[b])return!1;return!0},getIndex:function(a,g){for(var b=0;b<a.length;++b)if(g(a[b]))return b;return-1},clone:function(a){var g;if(a&&a instanceof Array){g=[];for(var b=0;b<a.length;b++)g[b]=CKEDITOR.tools.clone(a[b]);return g}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp||a.nodeType||a.window===a)return a;g=new a.constructor;for(b in a)g[b]=CKEDITOR.tools.clone(a[b]);return g},capitalize:function(a,g){return a.charAt(0).toUpperCase()+(g?a.slice(1):a.slice(1).toLowerCase())},extend:function(a){var b,f,g=arguments.length;"boolean"==typeof(b=arguments[g-1])?g--:"boolean"==typeof(b=arguments[g-2])&&(f=arguments[g-1],g-=2);for(var h=1;g>h;h++){var d,c=arguments[h];for(d in c)!0!==b&&null!=a[d]||(!f||d in f)&&(a[d]=c[d])}return a},prototypedCopy:function(a){var g=function(){};return g.prototype=a,new g},copy:function(a){var b,g={};for(b in a)g[b]=a[b];return g},isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},isEmpty:function(a){for(var g in a)if(a.hasOwnProperty(g))return!1;return!0},cssVendorPrefix:function(a,g,b){return b?e+a+":"+g+";"+a+":"+g:(b={},b[a]=g,b[e+a]=g,b)},cssStyleToDomStyle:function(){var a=document.createElement("div").style,g="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?g:a.replace(/-./g,function(g){return g.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){a=[].concat(a);for(var g,b=[],f=0;f<a.length;f++)(g=a[f])&&(/@import|[{}]/.test(g)?b.push("<style>"+g+"</style>"):b.push('<link type="text/css" rel=stylesheet href="'+g+'">'));return b.join("")},htmlEncode:function(a){return void 0===a||null===a?"":String(a).replace(b,"&amp;").replace(c,"&gt;").replace(d,"&lt;")},htmlDecode:function(a){return a.replace(l,h)},htmlEncodeAttr:function(a){return CKEDITOR.tools.htmlEncode(a).replace(m,"&quot;")},htmlDecodeAttr:function(a){return CKEDITOR.tools.htmlDecode(a)},transformPlainTextToHtml:function(a,g){var b=g==CKEDITOR.ENTER_BR,f=this.htmlEncode(a.replace(/\r\n/g,"\n")),f=f.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),h=g==CKEDITOR.ENTER_P?"p":"div";if(!b){var c=/\n{2}/g;if(c.test(f))var d="<"+h+">",e="</"+h+">",f=d+f.replace(c,function(){return e+d})+e}return f=f.replace(/\n/g,"<br>"),b||(f=f.replace(new RegExp("<br>(?=</"+h+">)"),function(g){return CKEDITOR.tools.repeat(g,2)})),f=f.replace(/^ | $/g,"&nbsp;"),f=f.replace(/(>|\s) /g,function(g,a){return a+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var a="e",g=0;8>g;g++)a+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return a},override:function(a,g){var b=g(a);return b.prototype=a.prototype,b},setTimeout:function(a,g,b,f,h){return h||(h=window),b||(b=h),h.setTimeout(function(){f?a.apply(b,[].concat(f)):a.apply(b)},g||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(g){return g.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(g){return g.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(g){return g.replace(a,"")}}(),indexOf:function(a,g){if("function"==typeof g){for(var b=0,f=a.length;f>b;b++)if(g(a[b]))return b}else{if(a.indexOf)return a.indexOf(g);for(b=0,f=a.length;f>b;b++)if(a[b]===g)return b}return-1},search:function(a,g){var b=CKEDITOR.tools.indexOf(a,g);return b>=0?a[b]:null},bind:function(a,g){return function(){return a.apply(g,arguments)}},createClass:function(a){var g=a.$,b=a.base,f=a.privates||a._,h=a.proto;if(a=a.statics,!g&&(g=function(){b&&this.base.apply(this,arguments)}),f)var c=g,g=function(){var g,a=this._||(this._={});for(g in f){var b=f[g];a[g]="function"==typeof b?CKEDITOR.tools.bind(b,this):b}c.apply(this,arguments)};return b&&(g.prototype=this.prototypedCopy(b.prototype),g.prototype.constructor=g,g.base=b,g.baseProto=b.prototype,g.prototype.base=function(){this.base=b.prototype.base,b.apply(this,arguments),this.base=arguments.callee}),h&&this.extend(g.prototype,h,!0),a&&this.extend(g,a,!0),g},addFunction:function(b,g){return a.push(function(){return b.apply(g||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var g=a[b];return g&&g.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var g,a=/^-?\d+\.?\d*px$/;return function(b){return g=CKEDITOR.tools.trim(b+"")+"px",a.test(g)?g:b||""}}(),convertToPx:function(){var a;return function(g){return a||(a=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(a)),/%$/.test(g)?g:(a.setStyle("width",g),a.$.clientWidth)}}(),repeat:function(a,g){return Array(g+1).join(a)},tryThese:function(){for(var a,g=0,b=arguments.length;b>g;g++){var f=arguments[g];try{a=f();break}catch(h){}}return a},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(a){return function(){var g=arguments,b=this;window.setTimeout(function(){a.apply(b,g)},0)}},normalizeCssText:function(a,g){var f,b=[],h=CKEDITOR.tools.parseCssText(a,!0,g);for(f in h)b.push(f+":"+h[f]);return b.sort(),b.length?b.join(";")+";":""},convertRgbToHex:function(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,b,f,h){for(a=[b,f,h],b=0;3>b;b++)a[b]=("0"+parseInt(a[b],10).toString(16)).slice(-2);return"#"+a.join("")})},parseCssText:function(a,g,b){var f={};return b&&(b=new CKEDITOR.dom.element("span"),b.setAttribute("style",a),a=CKEDITOR.tools.convertRgbToHex(b.getAttribute("style")||"")),a&&";"!=a?(a.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,b,h){g&&(b=b.toLowerCase(),"font-family"==b&&(h=h.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),h=CKEDITOR.tools.trim(h)),f[b]=h}),f):f},writeCssText:function(a,g){var b,f=[];for(b in a)f.push(b+":"+a[b]);return g&&f.sort(),f.join("; ")},objectCompare:function(a,g,b){var f;if(!a&&!g)return!0;if(!a||!g)return!1;for(f in a)if(a[f]!=g[f])return!1;if(!b)for(f in g)if(a[f]!=g[f])return!1;return!0},objectKeys:function(a){var b,g=[];for(b in a)g.push(b);return g},convertArrayToObject:function(a,g){var b={};1==arguments.length&&(g=!0);for(var f=0,h=a.length;h>f;++f)b[a[f]]=g;return b},fixDomain:function(){for(var a;;)try{a=window.parent.document.domain;break}catch(g){if(a=a?a.replace(/.+?(?:\.|$)/,""):document.domain,!a)break;document.domain=a}return!!a},eventsBuffer:function(a,g,b){function f(){c=(new Date).getTime(),h=!1,b?g.call(b):g()}var h,c=0;return{input:function(){if(!h){var g=(new Date).getTime()-c;a>g?h=setTimeout(f,a-g):f()}},reset:function(){h&&clearTimeout(h),h=c=0}}},enableHtml5Elements:function(a,g){for(var h,b="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),f=b.length;f--;)h=a.createElement(b[f]),g&&a.appendChild(h)},checkIfAnyArrayItemMatches:function(a,g){for(var b=0,f=a.length;f>b;++b)if(a[b].match(g))return!0;return!1},checkIfAnyObjectPropertyMatches:function(a,g){for(var b in a)if(b.match(g))return!0;return!1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw=="}}(),CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,e=function(a,g){for(var b=CKEDITOR.tools.clone(a),f=1;f<arguments.length;f++){g=arguments[f];for(var h in g)delete b[h]}return b},b={},c={},d={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},m={command:1,link:1,meta:1,noscript:1,script:1,style:1},l={},f={"#":1},h={center:1,dir:1,noframes:1};return a(b,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},f,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),a(c,d,b,h),e={a:e(b,{a:1,button:1}),abbr:b,address:c,area:l,article:c,aside:c,audio:a({source:1,track:1},c),b:b,base:l,bdi:b,bdo:b,blockquote:c,body:c,br:l,button:e(b,{a:1,button:1}),canvas:b,caption:c,cite:b,code:b,col:l,colgroup:{col:1},command:l,datalist:a({option:1},b),dd:c,del:b,details:a({summary:1},c),dfn:b,div:c,dl:{dt:1,dd:1},dt:c,em:b,embed:l,fieldset:a({legend:1},c),figcaption:c,figure:a({figcaption:1},c),footer:c,form:c,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,head:a({title:1,base:1},m),header:c,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:l,html:a({head:1,body:1},c,m),i:b,iframe:f,img:l,input:l,ins:b,kbd:b,keygen:l,label:b,legend:b,li:c,link:l,main:c,map:c,mark:b,menu:a({li:1},c),meta:l,meter:e(b,{meter:1}),nav:c,noscript:a({link:1,meta:1,style:1},b),object:a({param:1},b),ol:{li:1},optgroup:{option:1},option:f,output:b,p:b,param:l,pre:b,progress:e(b,{progress:1}),q:b,rp:b,rt:b,ruby:a({rp:1,rt:1},b),s:b,samp:b,script:f,section:c,select:{optgroup:1,option:1},small:b,source:l,span:b,strong:b,style:f,sub:b,summary:a({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},b),sup:b,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:c,textarea:f,tfoot:{tr:1},th:c,thead:{tr:1},time:e(b,{time:1}),title:f,tr:{th:1,td:1},track:l,u:b,ul:{li:1},var:b,video:a({source:1,track:1},c),wbr:l,acronym:b,applet:a({param:1},c),basefont:l,big:b,center:c,dialog:l,dir:{li:1},font:b,isindex:l,noframes:c,strike:b,tt:b},a(e,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},d,h),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:b,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},e.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),e}(),CKEDITOR.dom.event=function(a){this.$=a},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(a+=CKEDITOR.CTRL),this.$.shiftKey&&(a+=CKEDITOR.SHIFT),this.$.altKey&&(a+=CKEDITOR.ALT),a},preventDefault:function(a){var e=this.$;e.preventDefault?e.preventDefault():e.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(a){a&&(this.$=a)},CKEDITOR.dom.domObject.prototype=function(){var a=function(a,b){return function(c){"undefined"!=typeof CKEDITOR&&a.fire(b,new CKEDITOR.dom.event(c))}};return{getPrivate:function(){var a;return(a=this.getCustomData("_"))||this.setCustomData("_",a={}),a},on:function(e){var b=this.getCustomData("_cke_nativeListeners");return b||(b={},this.setCustomData("_cke_nativeListeners",b)),b[e]||(b=b[e]=a(this,e),this.$.addEventListener?this.$.addEventListener(e,b,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+e,b)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(a){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(a)){var b=this.getCustomData("_cke_nativeListeners"),c=b&&b[a];c&&(this.$.removeEventListener?this.$.removeEventListener(a,c,!1):this.$.detachEvent&&this.$.detachEvent("on"+a,c),delete b[a])}},removeAllListeners:function(){var b,a=this.getCustomData("_cke_nativeListeners");for(b in a){var c=a[b];this.$.detachEvent?this.$.detachEvent("on"+b,c):this.$.removeEventListener&&this.$.removeEventListener(b,c,!1),delete a[b]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(a){var e={};CKEDITOR.on("reset",function(){e={}}),a.equals=function(a){try{return a&&a.$===this.$}catch(c){return!1}},a.setCustomData=function(a,c){var d=this.getUniqueId();return(e[d]||(e[d]={}))[a]=c,this},a.getCustomData=function(a){var c=this.$["data-cke-expando"];return(c=c&&e[c])&&a in c?c[a]:null},a.removeCustomData=function(a){var d,m,c=this.$["data-cke-expando"],c=c&&e[c];return c&&(d=c[a],m=a in c,delete c[a]),m?d:null},a.clearCustomData=function(){this.removeAllListeners();var a=this.$["data-cke-expando"];a&&delete e[a]},a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(a)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,e){return a.append(this,e),a},clone:function(a,e){function b(c){if(c["data-cke-expando"]&&(c["data-cke-expando"]=!1),(c.nodeType==CKEDITOR.NODE_ELEMENT||c.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(e||c.nodeType!=CKEDITOR.NODE_ELEMENT||c.removeAttribute("id",!1),a)){c=c.childNodes;for(var d=0;d<c.length;d++)b(c[d])}}function c(b){if(b.type==CKEDITOR.NODE_ELEMENT||b.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(b.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var d=b.getName();":"==d[0]&&b.renameNode(d.substring(1))}if(a)for(d=0;d<b.getChildCount();d++)c(b.getChild(d))}}var d=this.$.cloneNode(a);return b(d),d=new CKEDITOR.dom.node(d),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&c(d),d},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},insertBeforeMe:function(a){return this.$.parentNode.insertBefore(a.$,this.$),a},getAddress:function(a){for(var e=[],b=this.getDocument().$.documentElement,c=this.$;c&&c!=b;){var d=c.parentNode;d&&e.unshift(this.getIndex.call({$:c},a)),c=d}return e},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){function e(a,b){var f=b?a.nextSibling:a.previousSibling;return f&&f.nodeType==CKEDITOR.NODE_TEXT?f.nodeValue?f:e(f,b):null}var d,b=this.$,c=-1;if(!this.$.parentNode||a&&b.nodeType==CKEDITOR.NODE_TEXT&&!b.nodeValue&&!e(b)&&!e(b,!0))return-1;do(!a||b==this.$||b.nodeType!=CKEDITOR.NODE_TEXT||!d&&b.nodeValue)&&(c++,d=b.nodeType==CKEDITOR.NODE_TEXT);while(b=b.previousSibling);return c},getNextSourceNode:function(a,e,b){if(b&&!b.call){var c=b;b=function(a){return!a.equals(c)}}a=!a&&this.getFirst&&this.getFirst();var d;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getNext()}for(;!a&&(d=(d||this).getParent());){if(b&&!1===b(d,!0))return null;a=d.getNext()}return!a||b&&!1===b(a)?null:e&&e!=a.type?a.getNextSourceNode(!1,e,b):a},getPreviousSourceNode:function(a,e,b){if(b&&!b.call){var c=b;b=function(a){return!a.equals(c)}}a=!a&&this.getLast&&this.getLast();var d;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&b&&!1===b(this,!0))return null;a=this.getPrevious()}for(;!a&&(d=(d||this).getParent());){if(b&&!1===b(d,!0))return null;a=d.getPrevious()}return!a||b&&!1===b(a)?null:e&&a.type!=e?a.getPreviousSourceNode(!1,e,b):a},getPrevious:function(a){var b,e=this.$;do b=(e=e.previousSibling)&&10!=e.nodeType&&new CKEDITOR.dom.node(e);while(b&&a&&!a(b));return b},getNext:function(a){var b,e=this.$;do b=(e=e.nextSibling)&&new CKEDITOR.dom.node(e);while(b&&a&&!a(b));return b},getParent:function(a){var e=this.$.parentNode;return e&&(e.nodeType==CKEDITOR.NODE_ELEMENT||a&&e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(e):null},getParents:function(a){var e=this,b=[];do b[a?"push":"unshift"](e);while(e=e.getParent());return b},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var e=this.contains?this:this.getParent();do if(e.contains(a))return e;while(e=e.getParent());return null},getPosition:function(a){var e=this.$,b=a.$;if(e.compareDocumentPosition)return e.compareDocumentPosition(b);if(e==b)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(e.contains){if(e.contains(b))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(b.contains(e))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in e)return 0>e.sourceIndex||0>b.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:e.sourceIndex<b.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}e=this.getAddress(),a=a.getAddress();for(var b=Math.min(e.length,a.length),c=0;b>c;c++)if(e[c]!=a[c])return e[c]<a[c]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return e.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,e){var c,d,b=this.$;e||(b=b.parentNode),"function"==typeof a?(d=!0,c=a):(d=!1,c=function(b){return b="string"==typeof b.nodeName?b.nodeName.toLowerCase():"","string"==typeof a?b==a:b in a});for(;b;){if(c(d?new CKEDITOR.dom.node(b):b))return new CKEDITOR.dom.node(b);try{b=b.parentNode}catch(m){b=null}}return null},hasAscendant:function(a,e){var b=this.$;for(e||(b=b.parentNode);b;){if(b.nodeName&&b.nodeName.toLowerCase()==a)return!0;b=b.parentNode}return!1},move:function(a,e){a.append(this.remove(),e)},remove:function(a){var e=this.$,b=e.parentNode;if(b){if(a)for(;a=e.firstChild;)b.insertBefore(e.removeChild(a),e);b.removeChild(e)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var a;this.getFirst&&(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.ltrim(a.getText()),b=a.getLength();if(!e){a.remove();continue}e.length<b&&(a.split(b-e.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.rtrim(a.getText()),b=a.getLength();if(!e){a.remove();continue}e.length<b&&(a.split(e.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(a){var e=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(e=this.getParent()),CKEDITOR.env.edge&&e&&e.is("textarea")&&(a=!0),!a&&e&&"undefined"!=typeof e.$.isContentEditable)return!(e.$.isContentEditable||e.data("cke-editable"));for(;e;){if(e.data("cke-editable"))return!1;if(e.hasAttribute("contenteditable"))return"false"==e.getAttribute("contenteditable");e=e.getParent()}return!0}}),CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,e="CSS1Compat"==a.compatMode;return{width:(e?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(e?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;return"pageXOffset"in a?{x:a.pageXOffset||0,y:a.pageYOffset||0}:(a=a.document,{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0})},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}}),CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var e=new CKEDITOR.dom.element("link");e.setAttributes({rel:"stylesheet",type:"text/css",href:a}),this.getHead().append(e)}},appendStyleText:function(a){if(this.$.createStyleSheet){var e=this.$.createStyleSheet("");e.cssText=a}else{var b=new CKEDITOR.dom.element("style",this);b.append(new CKEDITOR.dom.text(a,this)),this.getHead().append(b)}return e||b.$.sheet},createElement:function(a,e){var b=new CKEDITOR.dom.element(a,this);return e&&(e.attributes&&b.setAttributes(e.attributes),e.styles&&b.setStyles(e.styles)),b},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch(e){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,e){for(var b=this.$.documentElement,c=0;b&&c<a.length;c++){var d=a[c];if(e)for(var m=-1,l=0;l<b.childNodes.length;l++){var f=b.childNodes[l];if((!0!==e||3!=f.nodeType||!f.previousSibling||3!=f.previousSibling.nodeType)&&(m++,m==d)){b=f;break}}else b=b.childNodes[d]}return b?new CKEDITOR.dom.node(b):null},getElementsByTag:function(a,e){return CKEDITOR.env.ie&&8>=document.documentMode||!e||(a=e+":"+a),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write(a),this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");return a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a)),a}}),CKEDITOR.dom.nodeList=function(a){this.$=a},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null;
}},CKEDITOR.dom.element=function(a,e){"string"==typeof a&&(a=(e?e.$:document).createElement(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(a,e){var b=new CKEDITOR.dom.element("div",e);return b.setHtml(a),b.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(a,e,b,c){var d=e.getCustomData("list_marker_id")||e.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),m=e.getCustomData("list_marker_names")||e.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return a[d]=e,m[b]=1,e.setCustomData(b,c)},CKEDITOR.dom.element.clearAllMarkers=function(a){for(var e in a)CKEDITOR.dom.element.clearMarkers(a,a[e],1)},CKEDITOR.dom.element.clearMarkers=function(a,e,b){var m,c=e.getCustomData("list_marker_names"),d=e.getCustomData("list_marker_id");for(m in c)e.removeCustomData(m);e.removeCustomData("list_marker_names"),b&&(e.removeCustomData("list_marker_id"),delete a[d])},function(){function a(a,b){return-1<(" "+a+" ").replace(m," ").indexOf(" "+b+" ")}function e(a){var b=!0;return a.$.id||(a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),b=!1),function(){b||a.removeAttribute("id")}}function b(a,b){return"#"+a.$.id+" "+b.split(/,\s*/).join(", #"+a.$.id+" ")}function c(a){for(var b=0,c=0,g=l[a].length;g>c;c++)b+=parseInt(this.getComputedStyle(l[a][c])||0,10)||0;return b}var d=!!document.createElement("span").classList,m=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:d?function(a){return this.$.classList.add(a),this}:function(b){var h=this.$.className;return h&&(a(h,b)||(h+=" "+b)),this.$.className=h||b,this},removeClass:d?function(a){var b=this.$;return b.classList.remove(a),b.className||b.removeAttribute("class"),this}:function(b){var h=this.getAttribute("class");return h&&a(h,b)&&((h=h.replace(new RegExp("(?:^|\\s+)"+b+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",h):this.removeAttribute("class")),this},hasClass:function(b){return a(this.$.className,b)},append:function(a,b){return"string"==typeof a&&(a=this.getDocument().createElement(a)),b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$),a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a),b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(a){if(a||CKEDITOR.env.needsBrFiller){for(a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();a&&a.is&&a.is("br")||(a=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a))}},breakParent:function(a,b){var c=new CKEDITOR.dom.range(this.getDocument());c.setStartAfter(this),c.setEndAfter(a);var g=c.extractContents(!1,b||!1);c.insertNode(this.remove()),g.insertAfterNode(this)},contains:document.compareDocumentPosition?function(a){return!!(16&this.$.compareDocumentPosition(a.$))}:function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)},focus:function(){function a(){try{this.$.focus()}catch(b){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");return a.appendChild(this.$.cloneNode(!0)),a.innerHTML},getClientRect:function(){var a=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!a.width&&(a.width=a.right-a.left),!a.height&&(a.height=a.bottom-a.top),a},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(a){try{var b=this.$;if(this.getParent())return b.innerHTML=a;var c=this.getDocument()._getHtml5ShivFrag();return c.appendChild(b),b.innerHTML=a,c.removeChild(b),a}catch(g){for(this.$.innerHTML="",b=new CKEDITOR.dom.element("body",this.getDocument()),b.$.innerHTML=a,b=b.getChildren();b.count();)this.append(b.getItem(0));return a}}:function(a){return this.$.innerHTML=a},setText:function(){var a=document.createElement("p");return a.innerHTML="x",a=a.textContent,function(b){this.$[a?"textContent":"innerText"]=b}}(),getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){switch(a){case"class":a="className";break;case"http-equiv":a="httpEquiv";break;case"name":return this.$.name;case"tabindex":return a=this.$.getAttribute(a,2),0!==a&&0===this.$.tabIndex&&(a=null),a;case"checked":return a=this.$.attributes.getNamedItem(a),(a.specified?a.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[a];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(a,2)}:a}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=this.getWindow().$.getComputedStyle(this.$,null);return b?b.getPropertyValue(a):""}:function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return a},a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var a=this.$.tabIndex;return 0!==a||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?a:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}return this.getName=function(){return a},this.getName()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;return(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getNext(a)),b},getLast:function(a){var b=this.$.lastChild;return(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getPrevious(a)),b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();if("object"==typeof arguments[0])return!!arguments[0][a];for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[b]||CKEDITOR.dtd.$empty[b]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==a?(a=CKEDITOR.dtd[b]||CKEDITOR.dtd.span,!(!a||!a["#"])):!0},isIdentical:function(a){var b=this.clone(0,1);if(a=a.clone(0,1),b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),b.$.isEqualNode)return b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.isEqualNode(a.$);if(b=b.getOuterHtml(),a=a.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var c=this.getParent();c.type==CKEDITOR.NODE_ELEMENT&&(c=c.clone(),c.setHtml(b),b=c.getHtml(),c.setHtml(a),a=c.getHtml())}return b==a},isVisible:function(){var b,c,a=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return a&&CKEDITOR.env.webkit&&(b=this.getWindow(),!b.equals(CKEDITOR.document.getWindow())&&(c=b.$.frameElement)&&(a=new CKEDITOR.dom.element(c).isVisible())),!!a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var a=this.getChildren(),b=0,c=a.count();c>b;b++){var g=a.getItem(b);if((g.type!=CKEDITOR.NODE_ELEMENT||!g.data("cke-bookmark"))&&(g.type==CKEDITOR.NODE_ELEMENT&&!g.isEmptyInlineRemoveable()||g.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(g.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,_moz_dirty:1};return b>0&&(b>2||!c[a[0].nodeName]||2==b&&!c[a[1].nodeName])},hasAttribute:function(){function a(b){var c=this.$.attributes.getNamedItem(b);if("input"==this.getName())switch(b){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return b=this.getAttribute("type"),"checkbox"==b||"radio"==b?"on"!=this.$.value:!!this.$.value}return c?c.specified:!1}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a:function(a){return!!this.$.attributes.getNamedItem(a)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;if(a=a.$,c!=a){var g;if(b)for(;g=c.lastChild;)a.insertBefore(c.removeChild(g),a.firstChild);else for(;g=c.firstChild;)a.appendChild(c.removeChild(g))}},mergeSiblings:function(){function a(b,c,g){if(c&&c.type==CKEDITOR.NODE_ELEMENT){for(var f=[];c.data("cke-bookmark")||c.isEmptyInlineRemoveable();)if(f.push(c),c=g?c.getNext():c.getPrevious(),!c||c.type!=CKEDITOR.NODE_ELEMENT)return;if(b.isIdentical(c)){for(var d=g?b.getLast():b.getFirst();f.length;)f.shift().move(b,!g);c.moveChildren(b,!g),c.remove(),d&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings()}}}return function(b){(!1===b||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(a(this,this.getNext(),!0),a(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){return this.$.setAttribute(a,b),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(b,c){return"class"==b?this.$.className=c:"style"==b?this.$.style.cssText=c:"tabindex"==b?this.$.tabIndex=c:"checked"==b?this.$.checked=c:"contenteditable"==b?a.call(this,"contentEditable",c):a.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(b,c){if("src"==b&&c.match(/^http:\/\//))try{a.apply(this,arguments)}catch(g){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){return this.$.value=a,this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==a&&(a="contentEditable"),this.$.removeAttribute(a)}:a}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a)a.hasOwnProperty(b)&&this.removeAttribute(b)},removeStyle:function(a){var b=this.$.style;if(b.removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)b.removeProperty?b.removeProperty(a):b.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a)),this.$.style.cssText||this.removeAttribute("style");else{var g,c=["top","left","right","bottom"];"border"==a&&(g=["color","style","width"]);for(var b=[],d=0;d<c.length;d++)if(g)for(var e=0;e<g.length;e++)b.push([a,c[d],g[e]].join("-"));else b.push([a,c[d]].join("-"));for(a=0;a<b.length;a++)this.removeStyle(b[a])}},setStyle:function(a,b){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b,this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(a=Math.round(100*a),this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var a,b=this.getElementsByTag("*"),c=0,g=b.count();g>c;c++)a=b.getItem(c),a.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var b=0,c=0,g=this.getDocument(),d=g.getBody(),e="BackCompat"==g.$.compatMode;if(document.documentElement.getBoundingClientRect){var m=this.$.getBoundingClientRect(),l=g.$.documentElement,p=l.clientTop||d.$.clientTop||0,r=l.clientLeft||d.$.clientLeft||0,w=!0;CKEDITOR.env.ie&&(w=g.getDocumentElement().contains(this),g=g.getBody().contains(this),w=e&&g||!e&&w),w&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(b=d.$.scrollLeft||l.scrollLeft,c=d.$.scrollTop||l.scrollTop):(c=e?d.$:l,b=c.scrollLeft,c=c.scrollTop),b=m.left+b-r,c=m.top+c-p)}else for(p=this,r=null;p&&"body"!=p.getName()&&"html"!=p.getName();){for(b+=p.$.offsetLeft-p.$.scrollLeft,c+=p.$.offsetTop-p.$.scrollTop,p.equals(this)||(b+=p.$.clientLeft||0,c+=p.$.clientTop||0);r&&!r.equals(p);)b-=r.$.scrollLeft,c-=r.$.scrollTop,r=r.getParent();r=p,p=(m=p.$.offsetParent)?new CKEDITOR.dom.element(m):null}return a&&(m=this.getWindow(),p=a.getWindow(),!m.equals(p)&&m.$.frameElement&&(a=new CKEDITOR.dom.element(m.$.frameElement).getDocumentPosition(a),b+=a.x,c+=a.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||e||(b+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0),{x:b,y:c}},scrollIntoView:function(a){var b=this.getParent();if(b)do if((b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight)&&!b.is("body")&&this.scrollIntoParent(b,a,1),b.is("html")){var c=b.getWindow();try{var g=c.$.frameElement;g&&(b=new CKEDITOR.dom.element(g))}catch(d){}}while(b=b.getParent())},scrollIntoParent:function(a,b,c){function l(b,g){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(b,g):(a.$.scrollLeft+=b,a.$.scrollTop+=g)}function p(a,b){var g={x:0,y:0};if(!a.is(w?"body":"html")){var c=a.$.getBoundingClientRect();g.x=c.left,g.y=c.top}return c=a.getWindow(),c.equals(b)||(c=p(CKEDITOR.dom.element.get(c.$.frameElement),b),g.x+=c.x,g.y+=c.y),g}function r(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}var g,d,e,m;!a&&(a=this.getWindow()),e=a.getDocument();var w="BackCompat"==e.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=w?e.getBody():e.getDocumentElement()),e=a.getWindow(),d=p(this,e);var z=p(a,e),B=this.$.offsetHeight;g=this.$.offsetWidth;var v=a.$.clientHeight,y=a.$.clientWidth;e=d.x-r(this,"left")-z.x||0,m=d.y-r(this,"top")-z.y||0,g=d.x+g+r(this,"right")-(z.x+y)||0,d=d.y+B+r(this,"bottom")-(z.y+v)||0,(0>m||d>0)&&l(0,!0===b?m:!1===b?d:0>m?m:d),c&&(0>e||g>0)&&l(0>e?e:g,0)},setState:function(a,b,c){switch(b=b||"cke",a){case CKEDITOR.TRISTATE_ON:this.addClass(b+"_on"),this.removeClass(b+"_off"),this.removeClass(b+"_disabled"),c&&this.setAttribute("aria-pressed",!0),c&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(b+"_disabled"),this.removeClass(b+"_off"),this.removeClass(b+"_on"),c&&this.setAttribute("aria-disabled",!0),c&&this.removeAttribute("aria-pressed");break;default:this.addClass(b+"_off"),this.removeClass(b+"_on"),this.removeClass(b+"_disabled"),c&&this.removeAttribute("aria-pressed"),c&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,b){var c=this.$.attributes;b=b||{};for(var g=0;g<c.length;g++){var m,d=c[g],e=d.nodeName.toLowerCase();e in b||("checked"==e&&(m=this.getAttribute(e))?a.setAttribute(e,m):CKEDITOR.env.ie&&!this.hasAttribute(e)||(m=this.getAttribute(e),null===m&&(m=d.nodeValue),a.setAttribute(e,m)))}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument();a=new CKEDITOR.dom.element(a,b),this.copyAttributes(a),this.moveChildren(a),this.getParent(!0)&&this.$.parentNode.replaceChild(a.$,this.$),a.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=a.$,delete this.getName}},getChild:function(){function a(b,c){var g=b.childNodes;return c>=0&&c<g.length?g[c]:void 0}return function(b){var c=this.$;if(b.slice)for(b=b.slice();0<b.length&&c;)c=a(c,b.shift());else c=a(c,b);return c?new CKEDITOR.dom.node(c):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT&&b.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(b){b.data.getTarget().getAscendant(a,!0)||b.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){return a="data-"+a,void 0===b?this.getAttribute(a):(!1===b?this.removeAttribute(a):this.setAttribute(a,b),null)},getEditor:function(){var b,c,a=CKEDITOR.instances;for(b in a)if(c=a[b],c.element.equals(this)&&c.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return c;return null},find:function(a){var c=e(this);return a=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(b(this,a))),c(),a},findOne:function(a){var c=e(this);return a=this.$.querySelector(b(this,a)),c(),a?new CKEDITOR.dom.element(a):null},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var g=a(this);if(!1!==g){c=this.getChildren();for(var d=0;d<c.count();d++)g=c.getItem(d),g.type==CKEDITOR.NODE_ELEMENT?g.forEach(a,b):b&&g.type!=b||a(g)}}});var l={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,b,d){"number"==typeof b&&(!d||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(b-=c.call(this,a)),this.setStyle(a,b+"px"))},CKEDITOR.dom.element.prototype.getSize=function(a,b){var d=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;return b&&(d-=c.call(this,a)),d}}(),CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document,this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$,a.parentNode.insertBefore(this.$,a.nextSibling)},getHtml:function(){var a=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(a),a.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function a(a,b){var g=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,g.collapsed)return this.end(),null;g.optimize()}var c,d=g.startContainer;c=g.endContainer;var k,f=g.startOffset,e=g.endOffset,n=this.guard,h=this.type,m=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var l=c.type==CKEDITOR.NODE_ELEMENT?c:c.getParent(),A=c.type==CKEDITOR.NODE_ELEMENT?c.getChild(e):c.getNext();this._.guardLTR=function(a,b){return!(b&&l.equals(a)||A&&a.equals(A)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(g.root))}}if(a&&!this._.guardRTL){var D=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),G=d.type==CKEDITOR.NODE_ELEMENT?f?d.getChild(f-1):null:d.getPrevious();this._.guardRTL=function(a,b){return!(b&&D.equals(a)||G&&a.equals(G)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(g.root))}}var E=a?this._.guardRTL:this._.guardLTR;for(k=n?function(a,b){return!1===E(a,b)?!1:n(a,b)}:E,this.current?c=this.current[m](!1,h,k):(a?c.type==CKEDITOR.NODE_ELEMENT&&(c=e>0?c.getChild(e-1):!1===k(c,!0)?null:c.getPreviousSourceNode(!0,h,k)):(c=d,c.type==CKEDITOR.NODE_ELEMENT&&((c=c.getChild(f))||(c=!1===k(d,!0)?null:d.getNextSourceNode(!0,h,k)))),c&&!1===k(c)&&(c=null));c&&!this._.end;){if(this.current=c,this.evaluator&&!1===this.evaluator(c)){if(b&&this.evaluator)return!1}else if(!b)return c;c=c[m](!1,h,k)}return this.end(),this.current=null}function e(b){for(var g,c=null;g=a.call(this,b);)c=g;return c}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=a,this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return!1!==a.call(this,0,1)},checkBackward:function(){return!1!==a.call(this,1,1)},lastForward:function(){return e.call(this)},lastBackward:function(){return e.call(this,1)},reset:function(){delete this.current,this._={}}}});var b={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},c={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in c||!b[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a)):!0},CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(a,b){function g(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(c){var d,f;return d=c&&c.type!=CKEDITOR.NODE_ELEMENT&&(f=c.getParent())&&g(f),d=a?d:d||g(c),!!(b^d)}},CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var g;return b&&b.type==CKEDITOR.NODE_TEXT&&(g=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&"​"==b.getText()),!!(a^g)}},CKEDITOR.dom.walker.invisible=function(a){var b=CKEDITOR.dom.walker.whitespaces(),g=CKEDITOR.env.webkit?1:0;return function(c){return b(c)?c=1:(c.type==CKEDITOR.NODE_TEXT&&(c=c.getParent()),c=c.$.offsetWidth<=g),!!(a^c)}},CKEDITOR.dom.walker.nodeType=function(a,b){return function(g){return!!(b^g.type==a)}},CKEDITOR.dom.walker.bogus=function(a){function b(a){return!m(a)&&!l(a)}return function(g){var c=CKEDITOR.env.needsBrFiller?g.is&&g.is("br"):g.getText&&d.test(g.getText());return c&&(c=g.getParent(),g=g.getNext(b),c=c.isBlockBoundary()&&(!g||g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary())),!!(a^c)}},CKEDITOR.dom.walker.temp=function(a){return function(b){return b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent()),b=b&&b.hasAttribute("data-cke-temp"),!!(a^b)}};var d=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,m=CKEDITOR.dom.walker.whitespaces(),l=CKEDITOR.dom.walker.bookmark(),f=CKEDITOR.dom.walker.temp(),h=function(a){return l(a)||m(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(a){return function(b){return b=m(b)||l(b)||f(b),!!(a^b)}};var k=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(a){return function(b){for(var g=0,c=b.getChildCount();c>g;++g)if(!k(b.getChild(g)))return!!a;return!a}};var g=CKEDITOR.dom.walker.empty(),n=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(a){var g,b={};for(g in a)CKEDITOR.dtd[g]["#"]&&(b[g]=1);return b}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(a){return function(b){return b=k(b)?!1:!!(b.type==CKEDITOR.NODE_TEXT||b.type==CKEDITOR.NODE_ELEMENT&&(b.is(CKEDITOR.dtd.$inline)||b.is("hr")||"false"==b.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&b.is(n)&&g(b))),!!(a^b)}},CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(h(a));return a&&(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&d.test(a.getText()))?a:!1}}(),CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var e=a instanceof CKEDITOR.dom.document;this.document=e?a:a.getDocument(),this.root=e?a.getBody():a},function(){function a(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset}function e(a,b,c,d,f){function e(a,b,g,c){var d=g?a.getPrevious():a.getNext();return c&&m?d:(v||c?b.append(a.clone(!0,f),g):(a.remove(),l&&b.append(a)),d)}function k(){var a,b,g,c=Math.min(F.length,N.length);for(a=0;c>a;a++)if(b=F[a],g=N[a],!b.equals(g))return a;return a-1}function h(){var b=R-1,c=E&&I&&!y.equals(C);P-1>b||T-1>b||c?(c?a.moveToPosition(C,CKEDITOR.POSITION_BEFORE_START):T==b+1&&G?a.moveToPosition(N[b],CKEDITOR.POSITION_BEFORE_END):a.moveToPosition(N[b+1],CKEDITOR.POSITION_BEFORE_START),d&&(b=F[b+1])&&b.type==CKEDITOR.NODE_ELEMENT&&(c=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document),c.insertAfter(b),b.mergeSiblings(!1),a.moveToBookmark({startNode:c}))):a.collapse(!0)}a.optimizeBookmark();var m=0===b,l=1==b,v=2==b;b=v||l;var D,G,E,I,H,K,y=a.startContainer,C=a.endContainer,x=a.startOffset,A=a.endOffset;if(v&&C.type==CKEDITOR.NODE_TEXT&&y.equals(C))y=a.document.createText(y.substring(x,A)),c.append(y);else{C.type==CKEDITOR.NODE_TEXT?v?K=!0:C=C.split(A):0<C.getChildCount()?A>=C.getChildCount()?(C=C.getChild(A-1),G=!0):C=C.getChild(A):I=G=!0,y.type==CKEDITOR.NODE_TEXT?v?H=!0:y.split(x):0<y.getChildCount()?0===x?(y=y.getChild(x),D=!0):y=y.getChild(x-1):E=D=!0;for(var Y,M,W,F=y.getParents(),N=C.getParents(),R=k(),P=F.length-1,T=N.length-1,O=c,U=-1,J=R;P>=J;J++){for(M=F[J],W=M.getNext(),J!=P||M.equals(N[J])&&T>P?b&&(Y=O.append(M.clone(0,f))):D?e(M,O,!1,E):H&&O.append(a.document.createText(M.substring(x)));W;){if(W.equals(N[J])){U=J;break}W=e(W,O)}O=Y}for(O=c,J=R;T>=J;J++)if(c=N[J],W=c.getPrevious(),c.equals(F[J]))b&&(O=O.getChild(0));else{if(J!=T||c.equals(F[J])&&P>T?b&&(Y=O.append(c.clone(0,f))):G?e(c,O,!1,I):K&&O.append(a.document.createText(c.substring(0,A))),J>U)for(;W;)W=e(W,O,!0);O=Y}v||h()}}function b(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!0),d=CKEDITOR.dom.walker.bogus();return function(f){return c(f)||b(f)?!0:d(f)&&!a?a=!0:!(f.type==CKEDITOR.NODE_TEXT&&(f.hasAscendant("pre")||CKEDITOR.tools.trim(f.getText()).length)||f.type==CKEDITOR.NODE_ELEMENT&&!f.is(m))}}function c(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(d){return c(d)||b(d)?!0:!a&&l(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$removeEmpty)}}function d(a){return function(){var b;return this[a?"getPreviousNode":"getNextNode"](function(a){return!b&&k(a)&&(b=a),h(a)&&!(l(a)&&a.equals(b))})}}var m={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},l=CKEDITOR.dom.walker.bogus(),f=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,h=CKEDITOR.dom.walker.editable(),k=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);return a._setStartContainer(this.startContainer),a.startOffset=this.startOffset,a._setEndContainer(this.endContainer),a.endOffset=this.endOffset,a.collapsed=this.collapsed,a},collapse:function(a){a?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(a){var b=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||e(this,2,b,!1,"undefined"==typeof a?!0:a),b},deleteContents:function(a){this.collapsed||e(this,0,null,a)},extractContents:function(a,b){var c=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||e(this,1,c,a,"undefined"==typeof b?!0:b),c},createBookmark:function(a){var b,c,d,f,e=this.collapsed;return b=this.document.createElement("span"),b.data("cke-bookmark",1),b.setStyle("display","none"),b.setHtml("&nbsp;"),a&&(d="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",d+(e?"C":"S"))),e||(c=b.clone(),c.setHtml("&nbsp;"),a&&c.setAttribute("id",d+"E"),f=this.clone(),f.collapse(),f.insertNode(c)),f=this.clone(),f.collapse(!0),f.insertNode(b),c?(this.setStartAfter(b),this.setEndBefore(c)):this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END),{startNode:a?d+(e?"C":"S"):b,endNode:a?d+"E":c,serializable:a,collapsed:e}},createBookmark2:function(){function a(g){var f,c=g.container,d=g.offset;f=c;var e=d;if(f=f.type!=CKEDITOR.NODE_ELEMENT||0===e||e==f.getChildCount()?0:f.getChild(e-1).type==CKEDITOR.NODE_TEXT&&f.getChild(e).type==CKEDITOR.NODE_TEXT,f&&(c=c.getChild(d-1),d=c.getLength()),c.type==CKEDITOR.NODE_ELEMENT&&d>1&&(d=c.getChild(d-1).getIndex(!0)+1),c.type==CKEDITOR.NODE_TEXT){for(f=c,e=0;(f=f.getPrevious())&&f.type==CKEDITOR.NODE_TEXT;)e+=f.getLength();f=e,c.getText()?d+=f:(e=c.getPrevious(b),f?(d=f,c=e?e.getNext():c.getParent().getFirst()):(c=c.getParent(),d=e?e.getIndex(!0)+1:0))}g.container=c,g.offset=d}var b=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(b){var c=this.collapsed,d={container:this.startContainer,offset:this.startOffset},f={container:this.endContainer,offset:this.endOffset};return b&&(a(d),c||a(f)),{start:d.container.getAddress(b),end:c?null:f.container.getAddress(b),startOffset:d.offset,endOffset:f.offset,normalized:b,collapsed:c,is2:!0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),c=a.startOffset,d=a.end&&this.document.getByAddress(a.end,a.normalized);a=a.endOffset,this.setStart(b,c),d?this.setEnd(d,a):this.collapse(!0)}else b=(c=a.serializable)?this.document.getById(a.startNode):a.startNode,a=c?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):this.collapse(!0)},getBoundaryNodes:function(){var f,a=this.startContainer,b=this.endContainer,c=this.startOffset,d=this.endOffset;if(a.type==CKEDITOR.NODE_ELEMENT)if(f=a.getChildCount(),f>c)a=a.getChild(c);else if(1>f)a=a.getPreviousSourceNode();else{for(a=a.$;a.lastChild;)a=a.lastChild;a=new CKEDITOR.dom.node(a),a=a.getNextSourceNode()||a}if(b.type==CKEDITOR.NODE_ELEMENT)if(f=b.getChildCount(),f>d)b=b.getChild(d).getPreviousSourceNode(!0);else if(1>f)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=b.lastChild;b=new CKEDITOR.dom.node(b)}return a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b),{startNode:a,endNode:b}},getCommonAncestor:function(a,b){var c=this.startContainer,d=this.endContainer,c=c.equals(d)?a&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(d);return b&&!c.is?c.getParent():c},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):this.setStartBefore(a)),a=this.endContainer,b=this.endOffset,a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START),b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var c=this.startContainer,d=this.startOffset,f=this.collapsed;
if((!a||f)&&c&&c.type==CKEDITOR.NODE_TEXT){if(d)if(d>=c.getLength())d=c.getIndex()+1,c=c.getParent();else{var e=c.split(d),d=c.getIndex()+1,c=c.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(e,this.endOffset-this.startOffset):c.equals(this.endContainer)&&(this.endOffset+=1)}else d=c.getIndex(),c=c.getParent();if(this.setStart(c,d),f)return void this.collapse(!0)}c=this.endContainer,d=this.endOffset,b||f||!c||c.type!=CKEDITOR.NODE_TEXT||(d?(d>=c.getLength()||c.split(d),d=c.getIndex()+1):d=c.getIndex(),c=c.getParent(),this.setEnd(c,d))},enlarge:function(a,b){function c(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var d=new RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var f=1;case CKEDITOR.ENLARGE_ELEMENT:var e=function(a,b){var c=new CKEDITOR.dom.range(h);c.setStart(a,b),c.setEndAt(h,CKEDITOR.POSITION_BEFORE_END);var g,c=new CKEDITOR.dom.walker(c);for(c.guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())};g=c.next();){if(g.type!=CKEDITOR.NODE_TEXT)return!1;if(D=g!=a?g.getText():g.substring(b),d.test(D))return!1}return!0};if(this.collapsed)break;var m,l,v,y,C,A,D,k=this.getCommonAncestor(),h=this.root,x=!1;A=this.startContainer;var G=this.startOffset;for(A.type==CKEDITOR.NODE_TEXT?(G&&(A=!CKEDITOR.tools.trim(A.substring(0,G)).length&&A,x=!!A),A&&((y=A.getPrevious())||(v=A.getParent()))):(G&&(y=A.getChild(G-1)||A.getLast()),y||(v=A)),v=c(v);v||y;){if(v&&!y){if(!C&&v.equals(k)&&(C=!0),f?v.isBlockBoundary():!h.contains(v))break;x&&"inline"==v.getComputedStyle("display")||(x=!1,C?m=v:this.setStartBefore(v)),y=v.getPrevious()}for(;y;)if(A=!1,y.type==CKEDITOR.NODE_COMMENT)y=y.getPrevious();else{if(y.type==CKEDITOR.NODE_TEXT)D=y.getText(),d.test(D)&&(y=null),A=/[\s\ufeff]$/.test(D);else if((y.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||b&&y.is("br"))&&!y.data("cke-bookmark"))if(x&&CKEDITOR.dtd.$removeEmpty[y.getName()]){if(D=y.getText(),d.test(D))y=null;else for(var I,G=y.$.getElementsByTagName("*"),E=0;I=G[E++];)if(!CKEDITOR.dtd.$removeEmpty[I.nodeName.toLowerCase()]){y=null;break}y&&(A=!!D.length)}else y=null;if(A&&(x?C?m=v:v&&this.setStartBefore(v):x=!0),y){if(A=y.getPrevious(),!v&&!A){v=y,y=null;break}y=A}else v=null}v&&(v=c(v.getParent()))}for(A=this.endContainer,G=this.endOffset,v=y=null,C=x=!1,A.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(A.substring(G)).length?x=!0:(x=!A.getLength(),G==A.getLength()?(y=A.getNext())||(v=A.getParent()):e(A,G)&&(v=A.getParent())):(y=A.getChild(G))||(v=A);v||y;){if(v&&!y){if(!C&&v.equals(k)&&(C=!0),f?v.isBlockBoundary():!h.contains(v))break;x&&"inline"==v.getComputedStyle("display")||(x=!1,C?l=v:v&&this.setEndAfter(v)),y=v.getNext()}for(;y;){if(A=!1,y.type==CKEDITOR.NODE_TEXT)D=y.getText(),e(y,0)||(y=null),A=/^[\s\ufeff]/.test(D);else if(y.type==CKEDITOR.NODE_ELEMENT){if((0<y.$.offsetWidth||b&&y.is("br"))&&!y.data("cke-bookmark"))if(x&&CKEDITOR.dtd.$removeEmpty[y.getName()]){if(D=y.getText(),d.test(D))y=null;else for(G=y.$.getElementsByTagName("*"),E=0;I=G[E++];)if(!CKEDITOR.dtd.$removeEmpty[I.nodeName.toLowerCase()]){y=null;break}y&&(A=!!D.length)}else y=null}else A=1;if(A&&x&&(C?l=v:this.setEndAfter(v)),y){if(A=y.getNext(),!v&&!A){v=y,y=null;break}y=A}else v=null}v&&(v=c(v.getParent()))}m&&l&&(k=m.contains(l)?l:m,this.setStartBefore(k),this.setEndAfter(k));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:v=new CKEDITOR.dom.range(this.root),h=this.root,v.setStartAt(h,CKEDITOR.POSITION_AFTER_START),v.setEnd(this.startContainer,this.startOffset),v=new CKEDITOR.dom.walker(v);var H,K,F=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),N=null,R=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(N){if(N.equals(a))return void(N=null)}else N=a;else if(N)return;var b=F(a);return b||(H=a),b},f=function(a){var b=R(a);return!b&&a.is&&a.is("br")&&(K=a),b};if(v.guard=R,v=v.lastBackward(),H=H||h,this.setStartAt(H,!H.is("br")&&(!v&&this.checkStartOfBlock()||v&&H.contains(v))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){v=this.clone(),v=new CKEDITOR.dom.walker(v);var P=CKEDITOR.dom.walker.whitespaces(),T=CKEDITOR.dom.walker.bookmark();if(v.evaluator=function(a){return!P(a)&&!T(a)},(v=v.previous())&&v.type==CKEDITOR.NODE_ELEMENT&&v.is("br"))break}v=this.clone(),v.collapse(),v.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),v=new CKEDITOR.dom.walker(v),v.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?f:R,H=N=K=null,v=v.lastForward(),H=H||h,this.setEndAt(H,!v&&this.checkEndOfBlock()||v&&H.contains(v)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),K&&this.setEndAfter(K)}},shrink:function(a,b,c){if(!this.collapsed){a=a||CKEDITOR.SHRINK_TEXT;var d=this.clone(),f=this.startContainer,e=this.endContainer,k=this.startOffset,h=this.endOffset,m=1,l=1;f&&f.type==CKEDITOR.NODE_TEXT&&(k?k>=f.getLength()?d.setStartAfter(f):(d.setStartBefore(f),m=0):d.setStartBefore(f)),e&&e.type==CKEDITOR.NODE_TEXT&&(h?h>=e.getLength()?d.setEndAfter(e):(d.setEndAfter(e),l=0):d.setEndBefore(e));var d=new CKEDITOR.dom.walker(d),v=CKEDITOR.dom.walker.bookmark();d.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var y;return d.guard=function(b,d){return v(b)?!0:a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||d&&b.equals(y)||!1===c&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable")?!1:(d||b.type!=CKEDITOR.NODE_ELEMENT||(y=b),!0)},m&&(f=d[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(f,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),l&&(d.reset(),(d=d[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(d,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!m&&!l)}},insertNode:function(a){this.optimizeBookmark(),this.trim(!1,!0);var b=this.startContainer,c=b.getChild(this.startOffset);c?a.insertBefore(c):b.append(a),a.getParent()&&a.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b),this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset),this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0),this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex(),b=b.getParent()),this._setStartContainer(b),this.startOffset=c,this.endContainer||(this._setEndContainer(b),this.endOffset=c),a(this)},setEnd:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex()+1,b=b.getParent()),this._setEndContainer(b),this.endOffset=c,this.startContainer||(this._setStartContainer(b),this.startOffset=c),a(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setStart(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setStart(b,b.getLength()):this.setStart(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(b)}a(this)},setEndAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setEnd(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setEnd(b,b.getLength()):this.setEnd(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(b)}a(this)},fixBlock:function(a,b){var c=this.createBookmark(),d=this.document.createElement(b);this.collapse(a),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(d),d.trim(),this.insertNode(d);var f=d.getBogus();return f&&f.remove(),d.appendBogus(),this.moveToBookmark(c),d},splitBlock:function(a,b){var c=new CKEDITOR.dom.elementPath(this.startContainer,this.root),d=new CKEDITOR.dom.elementPath(this.endContainer,this.root),f=c.block,e=d.block,k=null;return c.blockLimit.equals(d.blockLimit)?("br"!=a&&(f||(f=this.fixBlock(!0,a),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),e||(e=this.fixBlock(!1,a))),c=f&&this.checkStartOfBlock(),d=e&&this.checkEndOfBlock(),this.deleteContents(),f&&f.equals(e)&&(d?(k=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),e=null):c?(k=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),f=null):(e=this.splitElement(f,b||!1),f.is("ul","ol")||f.appendBogus())),{previousBlock:f,nextBlock:e,wasStartOfBlock:c,wasEndOfBlock:d,elementPath:k}):null},splitElement:function(a,b){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);var c=this.extractContents(!1,b||!1),d=a.clone(!1,b||!1);return c.appendTo(d),d.insertAfter(a),this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),d},removeEmptyBlocksAtEnd:function(){function a(g){return function(a){return!(b(a)||c(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||g.is("table")&&a.is("caption"))}}var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var e,c=this.createBookmark(),d=this[b?"endPath":"startPath"](),f=d.block||d.blockLimit;f&&!f.equals(d.root)&&!f.getFirst(a(f));)e=f.getParent(),this[b?"setEndAt":"setStartAt"](f,CKEDITOR.POSITION_AFTER_END),f.remove(1),f=e;this.moveToBookmark(c)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,b){var d=b==CKEDITOR.START,f=this.clone();return f.collapse(d),f[d?"setStartAt":"setEndAt"](a,d?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),f=new CKEDITOR.dom.walker(f),f.evaluator=c(d),f[d?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,c=this.startOffset;return CKEDITOR.env.ie&&c&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.ltrim(a.substring(0,c)),f.test(a)&&this.trim(0,1)),this.trim(),a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),c=this.clone(),c.collapse(!0),c.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START),a=new CKEDITOR.dom.walker(c),a.evaluator=b(),a.checkBackward()},checkEndOfBlock:function(){var a=this.endContainer,c=this.endOffset;return CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.rtrim(a.substring(c)),f.test(a)&&this.trim(1,0)),this.trim(),a=new CKEDITOR.dom.elementPath(this.endContainer,this.root),c=this.clone(),c.collapse(!1),c.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END),a=new CKEDITOR.dom.walker(c),a.evaluator=b(),a.checkForward()},getPreviousNode:function(a,b,c){var d=this.clone();return d.collapse(1),d.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START),c=new CKEDITOR.dom.walker(d),c.evaluator=a,c.guard=b,c.previous()},getNextNode:function(a,b,c){var d=this.clone();return d.collapse(),d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END),c=new CKEDITOR.dom.walker(d),c.evaluator=a,c.guard=b,c.next()},checkReadOnly:function(){function a(b,c){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if("false"==b.getAttribute("contentEditable")&&!b.data("cke-editable"))return 0;if(b.is("html")||"true"==b.getAttribute("contentEditable")&&(b.contains(c)||b.equals(c)))break}b=b.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),moveToElementEditablePosition:function(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&f.test(a.getText())?this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),c=1;break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),!0;var d=a,e=c,h=void 0;d.type==CKEDITOR.NODE_ELEMENT&&d.isEditable(!1)&&(h=d[b?"getLast":"getFirst"](k)),e||h||(h=d[b?"getPrevious":"getNext"](k)),a=h}return!!c},moveToClosestEditablePosition:function(a,b){var c,f,e,d=0,k=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return a?(c=new CKEDITOR.dom.range(this.root),c.moveToPosition(a,k[b?0:1])):c=this.clone(),a&&!a.is(CKEDITOR.dtd.$block)?d=1:(f=c[b?"getNextEditableNode":"getPreviousEditableNode"]())&&(d=1,(e=f.type==CKEDITOR.NODE_ELEMENT)&&f.is(CKEDITOR.dtd.$block)&&"false"==f.getAttribute("contenteditable")?(c.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),c.setEndAt(f,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&e&&f.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(c.setEnd(f,0),c.collapse()):c.moveToPosition(f,k[b?1:0])),d&&this.moveToRange(c),!!d},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=this.clone();if(a.optimize(),a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return c(a)&&b(a)};var d=a.next();return a.reset(),d&&d.equals(a.previous())?d:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:d(),getPreviousEditableNode:d(1),scrollIntoView:function(){var b,c,d,a=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),f=this.clone();f.optimize(),(d=f.startContainer.type==CKEDITOR.NODE_TEXT)?(c=f.startContainer.getText(),b=f.startContainer.split(f.startOffset),a.insertAfter(f.startContainer)):f.insertNode(a),a.scrollIntoView(),d&&(f.startContainer.setText(c),b.remove()),a.remove()},_setStartContainer:function(a){this.startContainer=a},_setEndContainer:function(a){this.endContainer=a}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function a(a){1>arguments.length||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function e(a){var b=[];return a.forEach(function(a){return"true"==a.getAttribute("contenteditable")?(b.push(a),!1):void 0},CKEDITOR.NODE_ELEMENT,!0),b}function b(a,c,d,f){a:{null==f&&(f=e(d));for(var h;h=f.shift();)if(h.getDtd().p){f={element:h,remaining:f};break a}f=null}return f?(h=CKEDITOR.filter.instances[f.element.data("cke-filter")])&&!h.check(c)?b(a,c,d,f.remaining):(c=new CKEDITOR.dom.range(f.element),c.selectNodeContents(f.element),c=c.createIterator(),c.enlargeBr=a.enlargeBr,c.enforceRealBlocks=a.enforceRealBlocks,c.activeFilter=c.filter=h,a._.nestedEditable={element:f.element,container:d,remaining:f.remaining,iterator:c},1):0}function c(a,b,c){return b?(a=a.clone(),a.collapse(!c),a.checkBoundaryOfElement(b,c?CKEDITOR.START:CKEDITOR.END)):!1}var d=/^[\r\n\t ]+$/,m=CKEDITOR.dom.walker.bookmark(!1,!0),l=CKEDITOR.dom.walker.whitespaces(!0),f=function(a){return m(a)&&l(a)},h={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(a){var g,e,l,t,u;if(a=a||"p",this._.nestedEditable){if(g=this._.nestedEditable.iterator.getNextParagraph(a))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,g;if(this.activeFilter=this.filter,b(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(a);this._.nestedEditable=null}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var p=this.range.clone();e=p.startPath();var r=p.endPath(),w=!p.collapsed&&c(p,e.block),z=!p.collapsed&&c(p,r.block,1);p.shrink(CKEDITOR.SHRINK_ELEMENT,!0),w&&p.setStartAt(e.block,CKEDITOR.POSITION_BEFORE_END),z&&p.setEndAt(r.block,CKEDITOR.POSITION_AFTER_START),e=p.endContainer.hasAscendant("pre",!0)||p.startContainer.hasAscendant("pre",!0),p.enlarge(this.forceBrBreak&&!e||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),p.collapsed||(e=new CKEDITOR.dom.walker(p.clone()),r=CKEDITOR.dom.walker.bookmark(!0,!0),e.evaluator=r,this._.nextNode=e.next(),e=new CKEDITOR.dom.walker(p.clone()),e.evaluator=r,e=e.previous(),this._.lastNode=e.getNextSourceNode(!0,null,p.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(r=this.range.clone(),r.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),r.checkEndOfBlock()&&(r=new CKEDITOR.dom.elementPath(r.endContainer,r.root),this._.lastNode=(r.block||r.blockLimit).getNextSourceNode(!0))),this._.lastNode&&p.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=p.document.createText(""),this._.lastNode.insertAfter(e)),p=null),this._.started=1,e=p}for(r=this._.nextNode,p=this._.lastNode,this._.nextNode=null;r;){var w=0,z=r.hasAscendant("pre"),B=r.type!=CKEDITOR.NODE_ELEMENT,v=0;if(B)r.type==CKEDITOR.NODE_TEXT&&d.test(r.getText())&&(B=0);else{var y=r.getName();if(CKEDITOR.dtd.$block[y]&&"false"==r.getAttribute("contenteditable")){g=r,b(this,a,g);break}if(r.isBlockBoundary(this.forceBrBreak&&!z&&{br:1})){if("br"==y)B=1;else if(!e&&!r.getChildCount()&&"hr"!=y){g=r,l=r.equals(p);break}e&&(e.setEndAt(r,CKEDITOR.POSITION_BEFORE_START),"br"!=y&&(this._.nextNode=r)),w=1}else{if(r.getFirst()){e||(e=this.range.clone(),e.setStartAt(r,CKEDITOR.POSITION_BEFORE_START)),r=r.getFirst();continue}B=1}}if(B&&!e&&(e=this.range.clone(),e.setStartAt(r,CKEDITOR.POSITION_BEFORE_START)),l=(!w||B)&&r.equals(p),e&&!w)for(;!r.getNext(f)&&!l;){if(y=r.getParent(),y.isBlockBoundary(this.forceBrBreak&&!z&&{br:1})){w=1,B=0,l||y.equals(p),e.setEndAt(y,CKEDITOR.POSITION_BEFORE_END);break}r=y,B=1,l=r.equals(p),v=1}if(B&&e.setEndAt(r,CKEDITOR.POSITION_AFTER_END),r=this._getNextSourceNode(r,v,p),(l=!r)||w&&e)break}if(!g){if(!e)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;g=new CKEDITOR.dom.elementPath(e.startContainer,e.root),r=g.blockLimit,w={div:1,th:1,td:1},g=g.block,!g&&r&&!this.enforceRealBlocks&&w[r.getName()]&&e.checkStartOfBlock()&&e.checkEndOfBlock()&&!r.equals(e.root)?g=r:!g||this.enforceRealBlocks&&g.is(h)?(g=this.range.document.createElement(a),e.extractContents().appendTo(g),g.trim(),e.insertNode(g),t=u=!0):"li"!=g.getName()?e.checkStartOfBlock()&&e.checkEndOfBlock()||(g=g.clone(!1),e.extractContents().appendTo(g),g.trim(),u=e.splitBlock(),t=!u.wasStartOfBlock,u=!u.wasEndOfBlock,e.insertNode(g)):l||(this._.nextNode=g.equals(p)?null:this._getNextSourceNode(e.getBoundaryNodes().endNode,1,p))}return t&&(t=g.getPrevious())&&t.type==CKEDITOR.NODE_ELEMENT&&("br"==t.getName()?t.remove():t.getLast()&&"br"==t.getLast().$.nodeName.toLowerCase()&&t.getLast().remove()),u&&(t=g.getLast())&&t.type==CKEDITOR.NODE_ELEMENT&&"br"==t.getName()&&(!CKEDITOR.env.needsBrFiller||t.getPrevious(m)||t.getNext(m))&&t.remove(),this._.nextNode||(this._.nextNode=l||g.equals(p)||!p?null:this._getNextSourceNode(g,1,p)),g},_getNextSourceNode:function(a,b,c){function d(a){return!(a.equals(c)||a.equals(f))}var f=this.range.root;for(a=a.getNextSourceNode(b,null,d);!m(a);)a=a.getNextSourceNode(b,null,d);return a}},CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}}(),CKEDITOR.command=function(a,e){this.uiItems=[],this.exec=function(b){return this.state!=CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()?(this.editorFocus&&a.focus(),!1===this.fire("exec")?!0:!1!==e.exec.call(this,a,b)):!1},this.refresh=function(a,b){return!this.readOnly&&a.readOnly?!0:this.context&&!b.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[a.mode]&&this.disable(),!1===this.fire("refresh",{editor:a,path:b})?!0:e.refresh&&!1!==e.refresh.apply(this,arguments))};var b;this.checkAllowed=function(c){return c||"boolean"!=typeof b?b=a.activeFilter.checkFeature(this):b},CKEDITOR.tools.extend(this,e,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!e.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){return this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()?!1:(this.previousState=this.state,this.state=a,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function a(a,b,c,d,g){var f,e;a=[];for(f in b){e=b[f],e="boolean"==typeof e?{}:"function"==typeof e?{match:e}:E(e),"$"!=f.charAt(0)&&(e.elements=f),c&&(e.featureName=c.toLowerCase());var k=e;k.elements=l(k.elements,/\s+/)||null,k.propertiesOnly=k.propertiesOnly||!0===k.elements;var h=/\s*,\s*/,m=void 0;for(m in K){k[m]=l(k[m],h)||null;var v=k,p=F[m],y=l(k[F[m]],h),n=k[m],B=[],r=!0,C=void 0;y?r=!1:y={};for(C in n)"!"==C.charAt(0)&&(C=C.slice(1),B.push(C),y[C]=!0,r=!1);for(;C=B.pop();)n[C]=n["!"+C],delete n["!"+C];v[p]=(r?!1:y)||null}k.match=k.match||null,d.push(e),a.push(e)}b=g.elements,g=g.generic;var u;for(c=0,d=a.length;d>c;++c){f=E(a[c]),e=!0===f.classes||!0===f.styles||!0===f.attributes,k=f,m=p=h=void 0;for(h in K)k[h]=w(k[h]);v=!0;for(m in F){h=F[m],p=k[h],y=[],n=void 0;for(n in p)-1<n.indexOf("*")?y.push(new RegExp("^"+n.replace(/\*/g,".*")+"$")):y.push(n);p=y,p.length&&(k[h]=p,v=!1)}if(k.nothingRequired=v,k.noProperties=!(k.attributes||k.classes||k.styles),!0===f.elements||null===f.elements)g[e?"unshift":"push"](f);else for(u in k=f.elements,delete f.elements,k)b[u]?b[u][e?"unshift":"push"](f):b[u]=[f]}}function e(a,c,d,g){if((!a.match||a.match(c))&&(g||f(a,c))&&(a.propertiesOnly||(d.valid=!0),d.allAttributes||(d.allAttributes=b(a.attributes,c.attributes,d.validAttributes)),d.allStyles||(d.allStyles=b(a.styles,c.styles,d.validStyles)),!d.allClasses)){if(a=a.classes,c=c.classes,g=d.validClasses,a)if(!0===a)a=!0;else{for(var h,e=0,k=c.length;k>e;++e)h=c[e],g[h]||(g[h]=a(h));a=!1}else a=!1;d.allClasses=a}}function b(a,b,c){if(!a)return!1;if(!0===a)return!0;for(var d in b)c[d]||(c[d]=a(d));return!1}function c(a,b,c){if(!a.match||a.match(b)){if(a.noProperties)return!1;if(c.hadInvalidAttribute=d(a.attributes,b.attributes)||c.hadInvalidAttribute,c.hadInvalidStyle=d(a.styles,b.styles)||c.hadInvalidStyle,a=a.classes,b=b.classes,a){for(var g=!1,f=!0===a,e=b.length;e--;)(f||a(b[e]))&&(b.splice(e,1),g=!0);a=g}else a=!1;c.hadInvalidClass=a||c.hadInvalidClass}}function d(a,b){if(!a)return!1;var g,c=!1,d=!0===a;for(g in b)(d||a(g))&&(delete b[g],c=!0);return c}function m(a,b,c){return a.disabled||a.customConfig&&!c||!b?!1:(a._.cachedChecks={},!0)}function l(a,b){if(!a)return!1;if(!0===a)return a;if("string"==typeof a)return a=I(a),"*"==a?!0:CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return a.length?CKEDITOR.tools.convertArrayToObject(a):!1;var g,c={},d=0;for(g in a)c[g]=a[g],d++;return d?c:!1}function f(a,b){if(a.nothingRequired)return!0;var c,d,g,f;if(g=a.requiredClasses)for(f=b.classes,c=0;c<g.length;++c)if(d=g[c],"string"==typeof d){if(-1==CKEDITOR.tools.indexOf(f,d))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(f,d))return!1;return h(b.styles,a.requiredStyles)&&h(b.attributes,a.requiredAttributes)}function h(a,b){if(!b)return!0;for(var d,c=0;c<b.length;++c)if(d=b[c],"string"==typeof d){if(!(d in a))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,d))return!1;return!0}function k(a){if(!a)return{};a=a.split(/\s*,\s*/).sort();for(var b={};a.length;)b[a.shift()]="cke-test";return b}function g(a){var b,c,d,g,f={},e=1;for(a=I(a);b=a.match(N);)(c=b[2])?(d=n(c,"styles"),g=n(c,"attrs"),c=n(c,"classes")):d=g=c=null,f["$"+e++]={elements:b[1],classes:c,styles:d,attributes:g},a=a.slice(b[0].length);return f}function n(a,b){var c=a.match(R[b]);return c?I(c[1]):null}function q(a){var b=a.styleBackup=a.attributes.style,c=a.classBackup=a.attributes.class;a.styles||(a.styles=CKEDITOR.tools.parseCssText(b||"",1)),a.classes||(a.classes=c?c.split(/\s+/):[])}function t(a,b,d,g){var k,f=0;if(g.toHtml&&(b.name=b.name.replace(P,"$1")),g.doCallbacks&&a.elementCallbacks){a:{k=a.elementCallbacks;for(var l,h=0,m=k.length;m>h;++h)if(l=k[h](b)){k=l;break a}k=void 0}if(k)return k}if(g.doTransform&&(k=a._.transformations[b.name])){for(q(b),h=0;h<k.length;++h)y(a,b,k[h]);p(b)}if(g.doFilter){a:{h=b.name,m=a._,a=m.allowedRules.elements[h],k=m.allowedRules.generic,h=m.disallowedRules.elements[h],m=m.disallowedRules.generic,l=g.skipRequired;var n,F,v={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(a||k){if(q(b),h)for(n=0,F=h.length;F>n;++n)if(!1===c(h[n],b,v)){a=null;break a}if(m)for(n=0,F=m.length;F>n;++n)c(m[n],b,v);if(a)for(n=0,F=a.length;F>n;++n)e(a[n],b,v,l);if(k)for(n=0,F=k.length;F>n;++n)e(k[n],b,v,l);a=v}else a=null}if(!a||!a.valid)return d.push(b),1;F=a.validAttributes;var B=a.validStyles;k=a.validClasses;var h=b.attributes,C=b.styles,m=b.classes;l=b.classBackup;var u,t,w=b.styleBackup,A=[],v=[],x=/^data-cke-/;if(n=!1,delete h.style,delete h.class,delete b.classBackup,delete b.styleBackup,!a.allAttributes)for(u in h)F[u]||(x.test(u)?u==(t=u.replace(/^data-cke-saved-/,""))||F[t]||(delete h[u],n=!0):(delete h[u],n=!0));if(!a.allStyles||a.hadInvalidStyle){for(u in C)a.allStyles||B[u]?A.push(u+":"+C[u]):n=!0;A.length&&(h.style=A.sort().join("; "))}else w&&(h.style=w);if(!a.allClasses||a.hadInvalidClass){for(u=0;u<m.length;++u)(a.allClasses||k[m[u]])&&v.push(m[u]);v.length&&(h.class=v.sort().join(" ")),l&&v.length<l.split(/\s+/).length&&(n=!0)}else l&&(h.class=l);if(n&&(f=1),!g.skipFinalValidation&&!r(b))return d.push(b),1}return g.toHtml&&(b.name=b.name.replace(T,"cke:$1")),f}function u(a){var c,b=[];for(c in a)-1<c.indexOf("*")&&b.push(c.replace(/\*/g,".*"));return b.length?new RegExp("^(?:"+b.join("|")+")$"):null}function p(a){var c,b=a.attributes;delete b.style,delete b.class,(c=CKEDITOR.tools.writeCssText(a.styles,!0))&&(b.style=c),a.classes.length&&(b.class=a.classes.sort().join(" "))}function r(a){switch(a.name){case"a":if(!(a.children.length||a.attributes.name||a.attributes.id))return!1;break;case"img":if(!a.attributes.src)return!1}return!0}function w(a){if(!a)return!1;if(!0===a)return!0;var b=u(a);return function(c){return c in a||b&&c.match(b)}}function z(){return new CKEDITOR.htmlParser.element("br")}function B(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==a.name||G.$block[a.name])}function v(a,b,c){var d=a.name;if(G.$empty[d]||!a.children.length)"hr"==d&&"br"==b?a.replaceWith(z()):(a.parent&&c.push({check:"it",el:a.parent}),a.remove());else if(G.$block[d]||"tr"==d)if("br"==b)a.previous&&!B(a.previous)&&(b=z(),b.insertBefore(a)),a.next&&!B(a.next)&&(b=z(),b.insertAfter(a)),a.replaceWithChildren();else{var g,d=a.children;b:{g=G[b];for(var k,f=0,e=d.length;e>f;++f)if(k=d[f],k.type==CKEDITOR.NODE_ELEMENT&&!g[k.name]){g=!1;break b}g=!0}if(g)a.name=b,a.attributes={},c.push({check:"parent-down",el:a});else{g=a.parent;for(var h,m,f=g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==g.name,e=d.length;e>0;)k=d[--e],f&&(k.type==CKEDITOR.NODE_TEXT||k.type==CKEDITOR.NODE_ELEMENT&&G.$inline[k.name])?(h||(h=new CKEDITOR.htmlParser.element(b),h.insertAfter(a),c.push({check:"parent-down",el:h})),h.add(k,0)):(h=null,m=G[g.name]||G.span,k.insertAfter(a),g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||k.type!=CKEDITOR.NODE_ELEMENT||m[k.name]||c.push({check:"el-up",el:k}));a.remove()}}else d in{style:1,script:1}?a.remove():(a.parent&&c.push({check:"it",el:a.parent}),a.replaceWithChildren())}function y(a,b,c){var d,g;for(d=0;d<c.length;++d)if(g=c[d],!(g.check&&!a.check(g.check,!1)||g.left&&!g.left(b))){g.right(b,O);break}}function C(a,b){var f,e,k,h,c=b.getDefinition(),d=c.attributes,g=c.styles;if(a.name!=c.element)return!1;for(f in d)if("class"==f){for(c=d[f].split(/\s+/),k=a.classes.join("|");h=c.pop();)if(-1==k.indexOf(h))return!1}else if(a.attributes[f]!=d[f])return!1;for(e in g)if(a.styles[e]!=g[e])return!1;return!0}function x(a,b){var c,d;return"string"==typeof a?c=a:a instanceof CKEDITOR.style?d=a:(c=a[0],d=a[1]),[{element:c,left:d,right:function(a,c){c.transform(a,b)}}]}function A(a){return function(b){return C(b,a)}}function D(a){return function(b,c){c[a](b)}}var G=CKEDITOR.dtd,E=CKEDITOR.tools.copy,I=CKEDITOR.tools.trim,H=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(a){if(this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this,a instanceof CKEDITOR.editor){a=this.editor=a,this.customConfig=!0;var b=a.config.allowedContent;!0===b?this.disabled=!0:(b||(this.customConfig=!1),this.allow(b,"config",1),this.allow(a.config.extraAllowedContent,"extra",1),this.allow(H[a.enterMode]+" "+H[a.shiftEnterMode],"default",1),this.disallow(a.config.disallowedContent))}else this.customConfig=!1,this.allow(a,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(b,c,d){if(!m(this,b,d))return!1;var f,e;if("string"==typeof b)b=g(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),c,d);f=b.getDefinition(),b={},d=f.attributes,b[f.element]=f={styles:f.styles,requiredStyles:f.styles&&CKEDITOR.tools.objectKeys(f.styles)},d&&(d=E(d),f.classes=d.class?d.class.split(/\s+/):null,f.requiredClasses=f.classes,delete d.class,f.attributes=d,f.requiredAttributes=d&&CKEDITOR.tools.objectKeys(d))}else if(CKEDITOR.tools.isArray(b)){for(f=0;f<b.length;++f)e=this.allow(b[f],c,d);return e}return a(this,b,c,this.allowedContent,this._.allowedRules),!0},applyTo:function(a,b,c,d){
if(this.disabled)return!1;var k,g=this,f=[],e=this.editor&&this.editor.config.protectedSource,h=!1,m={doFilter:!c,doTransform:!0,doCallbacks:!0,toHtml:b};a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;if(!b||"span"!=a.name||!~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-"))if(k=t(g,a,f,m),1&k)h=!0;else if(2&k)return!1}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var c;a:{var d=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));c=[];var l,v,n;if(e)for(v=0;v<e.length;++v)if((n=d.match(e[v]))&&n[0].length==d.length){c=!0;break a}d=CKEDITOR.htmlParser.fragment.fromHtml(d),1==d.children.length&&(l=d.children[0]).type==CKEDITOR.NODE_ELEMENT&&t(g,l,c,m),c=!c.length}c||f.push(a)}},null,!0),f.length&&(h=!0);var l;a=[],d=H[d||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var n;c=f.pop();)c.type==CKEDITOR.NODE_ELEMENT?v(c,d,a):c.remove();for(;l=a.pop();)if(c=l.el,c.parent)switch(n=G[c.parent.name]||G.span,l.check){case"it":G.$removeEmpty[c.name]&&!c.children.length?v(c,d,a):r(c)||v(c,d,a);break;case"el-up":c.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||n[c.name]||v(c,d,a);break;case"parent-down":c.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||n[c.name]||v(c.parent,d,a)}return h},checkFeature:function(a){return this.disabled||!a?!0:(a.toFeature&&(a=a.toFeature(this.editor)),!a.requiredContent||this.check(a.requiredContent))},disable:function(){this.disabled=!0},disallow:function(b){return m(this,b,!0)?("string"==typeof b&&(b=g(b)),a(this,b,null,this.disallowedContent,this._.disallowedRules),!0):!1},addContentForms:function(a){if(!this.disabled&&a){var b,c,g,d=[];for(b=0;b<a.length&&!g;++b)c=a[b],("string"==typeof c||c instanceof CKEDITOR.style)&&this.check(c)&&(g=c);if(g){for(b=0;b<a.length;++b)d.push(x(a[b],g));this.addTransformations(d)}}},addElementCallback:function(a){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(a)},addFeature:function(a){return this.disabled||!a?!0:(a.toFeature&&(a=a.toFeature(this.editor)),this.allow(a.allowedContent,a.name),this.addTransformations(a.contentTransformations),this.addContentForms(a.contentForms),a.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(a.requiredContent):!0)},addTransformations:function(a){var b,c;if(!this.disabled&&a){var g,d=this._.transformations;for(g=0;g<a.length;++g){b=a[g];var f=void 0,e=void 0,k=void 0,h=void 0,m=void 0,l=void 0;for(c=[],e=0;e<b.length;++e)k=b[e],"string"==typeof k?(k=k.split(/\s*:\s*/),h=k[0],m=null,l=k[1]):(h=k.check,m=k.left,l=k.right),f||(f=k,f=f.element?f.element:h?h.match(/^([a-z0-9]+)/i)[0]:f.left.getDefinition().element),m instanceof CKEDITOR.style&&(m=A(m)),c.push({check:h==f?null:h,left:m,right:"string"==typeof l?D(l):l});b=f,d[b]||(d[b]=[]),d[b].push(c)}}},check:function(a,b,c){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var d=a.length;d--;)if(this.check(a[d],b,c))return!0;return!1}var f,e;if("string"==typeof a){if(e=a+"<"+(!1===b?"0":"1")+(c?"1":"0")+">",e in this._.cachedChecks)return this._.cachedChecks[e];d=g(a).$1,f=d.styles;var h=d.classes;d.name=d.elements,d.classes=h=h?h.split(/\s*,\s*/):[],d.styles=k(f),d.attributes=k(d.attributes),d.children=[],h.length&&(d.attributes.class=h.join(" ")),f&&(d.attributes.style=CKEDITOR.tools.writeCssText(d.styles)),f=d}else d=a.getDefinition(),f=d.styles,h=d.attributes||{},f?(f=E(f),h.style=CKEDITOR.tools.writeCssText(f,!0)):f={},f={name:d.element,attributes:h,classes:h.class?h.class.split(/\s+/):[],styles:f,children:[]};var l,h=CKEDITOR.tools.clone(f),m=[];if(!1!==b&&(l=this._.transformations[f.name])){for(d=0;d<l.length;++d)y(this,f,l[d]);p(f)}return t(this,h,m,{doFilter:!0,doTransform:!1!==b,skipRequired:!c,skipFinalValidation:!c}),b=0<m.length?!1:!!CKEDITOR.tools.objectCompare(f.attributes,h.attributes,!0),"string"==typeof a&&(this._.cachedChecks[e]=b),b},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(c,d){var f,g=a.slice();if(this.check(H[c]))return c;for(d||(g=g.reverse());f=g.pop();)if(this.check(f))return b[f];return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var K={styles:1,attributes:1,classes:1},F={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},N=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,R={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},P=/^cke:(object|embed|param)$/,T=/^(object|embed|param)$/,O=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width"),this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width"),this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,c){if(c=c||b,!(c in a.styles)){var d=a.attributes[b];d&&(/^\d+$/.test(d)&&(d+="px"),a.styles[c]=d)}delete a.attributes[b]},lengthToAttribute:function(a,b,c){if(c=c||b,!(c in a.attributes)){var d=a.styles[b],g=d&&d.match(/^(\d+)(?:\.\d*)?px$/);g?a.attributes[c]=g[1]:"cke-test"==d&&(a.attributes[c]="cke-test")}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;"left"!=b&&"right"!=b||(a.styles.float=b)}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles.float;"left"!=b&&"right"!=b||(a.attributes.align=b)}delete a.styles.float},matchesStyle:C,transform:function(a,b){if("string"==typeof b)a.name=b;else{var f,e,k,h,c=b.getDefinition(),d=c.styles,g=c.attributes;a.name=c.element;for(f in g)if("class"==f)for(c=a.classes.join("|"),k=g[f].split(/\s+/);h=k.pop();)-1==c.indexOf(h)&&a.classes.push(h);else a.attributes[f]=g[f];for(e in d)a.styles[e]=d[e]}}}}(),function(){CKEDITOR.focusManager=function(a){return a.focusManager?a.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:a},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer),a&&(this.currentActive=a),this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(a){function e(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var b=CKEDITOR.focusManager._.blurDelay;a||!b?e.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,e.call(this)},b,this)}},add:function(a,e){var b=a.getCustomData("focusmanager");if(!b||b!=this){b&&b.remove(a);var b="focus",c="blur";e&&(CKEDITOR.env.ie?(b="focusin",c="focusout"):CKEDITOR.event.useCapture=1);var d={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(b,d.focus,this),a.on(c,d.blur,this),e&&(CKEDITOR.event.useCapture=0),a.setCustomData("focusmanager",this),a.setCustomData("focusmanager_handlers",d)}},remove:function(a){a.removeCustomData("focusmanager");var e=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",e.blur),a.removeListener("focus",e.focus)}}}(),CKEDITOR.keystrokeHandler=function(a){return a.keystrokeHandler?a.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:a},this)},function(){var a,e=function(b){b=b.data;var d=b.getKeystroke(),e=this.keystrokes[d],l=this._.editor;return a=!1===l.fire("key",{keyCode:d,domEvent:b}),a||(e&&(a=!1!==l.execCommand(e,{from:"keystrokeHandler"})),a||(a=!!this.blockedKeystrokes[d])),a&&b.preventDefault(!0),!a},b=function(b){a&&(a=!1,b.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",e,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&a.on("keypress",b,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,e,b){a&&CKEDITOR.lang.languages[a]||(a=this.detect(e,a));var c=this;e=function(){c[a].dir=c.rtl[a]?"rtl":"ltr",b(a,c[a])},this[a]?e():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),e,this)},detect:function(a,e){var b=this.languages;e=e||navigator.userLanguage||navigator.language||a;var c=e.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),d=c[1],c=c[2];return b[d+"-"+c]?d=d+"-"+c:b[d]||(d=null),CKEDITOR.lang.detect=d?function(){return d}:function(a){return a},d||a}}}(),CKEDITOR.scriptLoader=function(){var a={},e={};return{load:function(b,c,d,m){var l="string"==typeof b;l&&(b=[b]),d||(d=CKEDITOR);var f=b.length,h=[],k=[],g=function(a){c&&(l?c.call(d,a):c.call(d,h,k))};if(0===f)g(!0);else{var n=function(a,b){(b?h:k).push(a),0>=--f&&(m&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),g(b))},q=function(b,c){a[b]=1;var d=e[b];delete e[b];for(var g=0;g<d.length;g++)d[g](b,c)},t=function(b){if(a[b])n(b,!0);else{var d=e[b]||(e[b]=[]);if(d.push(n),!(1<d.length)){var g=new CKEDITOR.dom.element("script");g.setAttributes({type:"text/javascript",src:b}),c&&(CKEDITOR.env.ie&&11>CKEDITOR.env.version?g.$.onreadystatechange=function(){"loaded"!=g.$.readyState&&"complete"!=g.$.readyState||(g.$.onreadystatechange=null,q(b,!0))}:(g.$.onload=function(){setTimeout(function(){q(b,!0)},0)},g.$.onerror=function(){q(b,!1)})),g.appendTo(CKEDITOR.document.getHead())}}};m&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var u=0;f>u;u++)t(b[u])}},queue:function(){function a(){var b;(b=c[0])&&this.load(b.scriptUrl,b.callback,CKEDITOR,0)}var c=[];return function(d,e){var l=this;c.push({scriptUrl:d,callback:function(){e&&e.apply(this,arguments),c.shift(),a.call(l)}}),1==c.length&&a.call(this)}}()}}(),CKEDITOR.resourceManager=function(a,e){this.basePath=a,this.fileName=e,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(a,e){if(this.registered[a])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.');var b=this.registered[a]=e||{};return b.name=a,b.path=this.getPath(a),CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",b),this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var e=this.externals[a];return CKEDITOR.getUrl(e&&e.dir||this.basePath+a+"/")},getFilePath:function(a){var e=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(e?e.file:this.fileName+".js"))},addExternal:function(a,e,b){a=a.split(",");for(var c=0;c<a.length;c++){var d=a[c];b||(e=e.replace(/[^\/]+$/,function(a){return b=a,""})),this.externals[d]={dir:e,file:b||this.fileName+".js"}}},load:function(a,e,b){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var c=this.loaded,d=this.registered,m=[],l={},f={},h=0;h<a.length;h++){var k=a[h];if(k)if(c[k]||d[k])f[k]=this.get(k);else{var g=this.getFilePath(k);m.push(g),g in l||(l[g]=[]),l[g].push(k)}}CKEDITOR.scriptLoader.load(m,function(a,d){if(d.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+l[d[0]].join(",")+'" was not found at "'+d[0]+'".');for(var g=0;g<a.length;g++)for(var k=l[a[g]],h=0;h<k.length;h++){var m=k[h];f[m]=this.get(m),c[m]=1}e.call(b,f)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var e={};return function(b,c,d){var m={},l=function(b){a.call(this,b,function(a){CKEDITOR.tools.extend(m,a);var g,b=[];for(g in a){var f=a[g],q=f&&f.requires;if(!e[g]){if(f.icons)for(var t=f.icons.split(","),u=t.length;u--;)CKEDITOR.skin.addIcon(t[u],f.path+"icons/"+(CKEDITOR.env.hidpi&&f.hidpi?"hidpi/":"")+t[u]+".png");e[g]=1}if(q)for(q.split&&(q=q.split(",")),f=0;f<q.length;f++)m[q[f]]||b.push(q[f])}if(b.length)l.call(this,b);else{for(g in m)f=m[g],f.onLoad&&!f.onLoad._called&&(!1===f.onLoad()&&delete m[g],f.onLoad._called=1);c&&c.call(d||window,m)}},this)};l.call(this,b)}}),CKEDITOR.plugins.setLang=function(a,e,b){var c=this.get(a);a=c.langEntries||(c.langEntries={}),c=c.lang||(c.lang=[]),c.split&&(c=c.split(",")),-1==CKEDITOR.tools.indexOf(c,e)&&c.push(e),a[e]=b},CKEDITOR.ui=function(a){return a.ui?a.ui:(this.items={},this.instances={},this.editor=a,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(a,e,b){b.name=a.toLowerCase();var c=this.items[a]={type:e,command:b.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(c,b)},get:function(a){return this.instances[a]},create:function(a){var e=this.items[a],b=e&&this._.handlers[e.type],c=e&&e.command&&this.editor.getCommand(e.command),b=b&&b.create.apply(this,e.args);return this.instances[a]=b,c&&c.uiItems.push(b),b&&!b.type&&(b.type=e.type),b},addHandler:function(a,e){this._.handlers[a]=e},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function a(a,d,g){if(CKEDITOR.event.call(this),a=a&&CKEDITOR.tools.clone(a),void 0!==d){if(!(d instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!g)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!b(d,g))throw Error('The specified element mode is not supported on element: "'+d.getName()+'".');this.element=d,this.elementMode=g,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(d.getId()||d.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||e(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",c),this.on("selectionChange",function(a){m(this,a.data.path)}),this.on("activeFilterChange",function(){m(this,this.elementPath(),!0)}),this.on("mode",c),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){f(this,a)},0,this)}function e(){do var a="editor"+ ++t;while(CKEDITOR.instances[a]);return a}function b(a,b){return b==CKEDITOR.ELEMENT_MODE_INLINE?a.is(CKEDITOR.dtd.$editable)||a.is("textarea"):b==CKEDITOR.ELEMENT_MODE_REPLACE?!a.is(CKEDITOR.dtd.$nonBodyContent):1}function c(){var b,a=this.commands;for(b in a)d(this,a[b])}function d(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function m(a,b,c){if(b){var d,g,f=a.commands;for(g in f)d=f[g],(c||d.contextSensitive)&&d.refresh(a,b)}}function l(a){var b=a.config.customConfig;if(!b)return!1;var b=CKEDITOR.getUrl(b),c=u[b]||(u[b]={});return c.fn?(c.fn.call(a,a.config),CKEDITOR.getUrl(a.config.customConfig)!=b&&l(a)||a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){c.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},l(a)}),!0}function f(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0),delete a.config.on}c=a.config,a.readOnly=c.readOnly?!0:a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.is("textarea")?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):!1,a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p):!1,a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0,a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode,a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode,c.skin&&(CKEDITOR.skinName=c.skin),a.fireOnce("configLoaded"),a.dataProcessor=new CKEDITOR.htmlDataProcessor(a),a.filter=a.activeFilter=new CKEDITOR.filter(a),h(a)}),b&&null!=b.customConfig&&(a.config.customConfig=b.customConfig),l(a)||a.fireOnce("customConfigLoaded")}function h(a){CKEDITOR.skin.loadPart("editor",function(){k(a)})}function k(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,c){var d=a.config.title;a.langCode=b,a.lang=CKEDITOR.tools.prototypedCopy(c),a.title="string"==typeof d||!1===d?d:[a.lang.editor,a.name].join(", "),a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir),a.fire("langLoaded"),g(a)})}function g(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})},null,null,1),n(a)})}function n(a){var b=a.config,c=b.plugins,d=b.extraPlugins,g=b.removePlugins;if(d)var f=new RegExp("(?:^|,)(?:"+d.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(f,""),c=c+(","+d);if(g)var e=new RegExp("(?:^|,)(?:"+g.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(e,"");CKEDITOR.env.air&&(c+=",adobeair"),CKEDITOR.plugins.load(c.split(","),function(c){var d=[],g=[],f=[];a.plugins=c;for(var k in c){var n,h=c[k],m=h.lang,l=null,v=h.requires;if(CKEDITOR.tools.isArray(v)&&(v=v.join(",")),v&&(n=v.match(e)))for(;v=n.pop();)CKEDITOR.error("editor-plugin-required",{plugin:v.replace(",",""),requiredBy:k});m&&!a.lang[k]&&(m.split&&(m=m.split(",")),0<=CKEDITOR.tools.indexOf(m,a.langCode)?l=a.langCode:(l=a.langCode.replace(/-.*/,""),l=l!=a.langCode&&0<=CKEDITOR.tools.indexOf(m,l)?l:0<=CKEDITOR.tools.indexOf(m,"en")?"en":m[0]),h.langEntries&&h.langEntries[l]?(a.lang[k]=h.langEntries[l],l=null):f.push(CKEDITOR.getUrl(h.path+"lang/"+l+".js"))),g.push(l),d.push(h)}CKEDITOR.scriptLoader.load(f,function(){for(var c=["beforeInit","init","afterInit"],f=0;f<c.length;f++)for(var e=0;e<d.length;e++){var k=d[e];0===f&&g[e]&&k.lang&&k.langEntries&&(a.lang[k.name]=k.langEntries[g[e]]),k[c[f]]&&k[c[f]](a)}for(a.fireOnce("pluginsLoaded"),b.keystrokes&&a.setKeystroke(a.config.keystrokes),e=0;e<a.config.blockedKeystrokes.length;e++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[e]]=1;a.status="loaded",a.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,a)})})}function q(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();return this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b)),a.is("textarea")?a.setValue(b):a.setHtml(b),!0}return!1}a.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=a;var t=0,u={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){b.name=a.toLowerCase();var c=new CKEDITOR.command(this,b);return this.mode&&d(this,c),this.commands[a]=c},_attachToForm:function(){function a(b){c.updateElement(),c._.required&&!d.getValue()&&!1===c.fire("required")&&b.data.preventDefault()}function b(a){return!!(a&&a.call&&a.apply)}var c=this,d=c.element,g=new CKEDITOR.dom.element(d.$.form);d.is("textarea")&&g&&(g.on("submit",a),b(g.$.submit)&&(g.$.submit=CKEDITOR.tools.override(g.$.submit,function(b){return function(){a(),b.apply?b.apply(this):b()}})),c.on("destroy",function(){g.removeListener("submit",a)}))},destroy:function(a){this.fire("beforeDestroy"),!a&&q.call(this),this.editable(null),this.filter.destroy(),delete this.filter,delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){if(a=this.getSelection(),!a)return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};return c&&c.state!=CKEDITOR.TRISTATE_DISABLED&&!1!==this.fire("beforeCommandExec",d)&&(d.returnValue=c.exec(d.commandData),!c.async&&!1!==this.fire("afterCommandExec",d))?d.returnValue:!1},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;return"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():""),b={dataValue:b},!a&&this.fire("getData",b),b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");return"string"!=typeof a&&(a=(a=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.is("textarea")?a.getValue():a.getHtml():""),a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){var d=!0,g=b;b&&"object"==typeof b&&(c=b.internal,g=b.callback,d=!b.noSnapshot),!c&&d&&this.fire("saveSnapshot"),!g&&c||this.once("dataReady",function(a){!c&&d&&this.fire("saveSnapshot"),g&&g.call(a.editor)}),a={dataValue:a},!c&&this.fire("setData",a),this._.data=a.dataValue,!c&&this.fire("afterSetData",a)},setReadOnly:function(a){a=null==a||a,this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b,c){this.fire("insertHtml",{dataValue:a,mode:b,range:c})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},getSelectedHtml:function(a){var b=this.editable(),c=this.getSelection(),c=c&&c.getRanges();return b&&c&&0!==c.length?(b=b.getHtmlFromRange(c[0]),a?b.getHtml():b):null},extractSelectedHtml:function(a,b){var c=this.editable(),d=this.getSelection().getRanges();return c&&0!==d.length?(d=d[0],c=c.extractHtmlFromRange(d,b),b||this.getSelection().selectRanges([d]),a?c.getHtml():c):null},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return q.call(this)},setKeystroke:function(){for(var c,d,a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],g=b.length;g--;)c=b[g],d=0,CKEDITOR.tools.isArray(c)&&(d=c[1],c=c[0]),d?a[c]=d:delete a[c]},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter),this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:a:this.enterMode,b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode,this.activeEnterMode==a&&this.activeShiftEnterMode==b||(this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange"))},showNotification:function(a){alert(a)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,e={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(b){for(var c,d,l,m=0;c=this._.htmlPartsRegex.exec(b);)if(d=c.index,d>m&&(m=b.substring(m,d),l?l.push(m):this.onText(m)),m=this._.htmlPartsRegex.lastIndex,!(d=c[1])||(d=d.toLowerCase(),l&&CKEDITOR.dtd.$cdata[d]&&(this.onCDATA(l.join("")),l=null),l))if(l)l.push(c[0]);else if(d=c[3]){if(d=d.toLowerCase(),!/="/.test(d)){var h,f={},k=c[4];if(c=!!c[5],k)for(;h=a.exec(k);){var g=h[1].toLowerCase();h=h[2]||h[3]||h[4]||"",f[g]=!h&&e[g]?g:CKEDITOR.tools.htmlDecodeAttr(h)}this.onTagOpen(d,f,c),!l&&CKEDITOR.dtd.$cdata[d]&&(l=[])}}else(d=c[2])&&this.onComment(d);else this.onTagClose(d);b.length>m&&this.onText(b.substring(m,b.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("<",a)},openTagClose:function(a,e){e?this._.output.push(" />"):this._.output.push(">")},attribute:function(a,e){"string"==typeof e&&(e=CKEDITOR.tools.htmlEncodeAttr(e)),this._.output.push(" ",a,'="',e,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("<!--",a,"-->")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(a){var e=this._.output.join("");return a&&this.reset(),e}}}),function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,e=CKEDITOR.tools.indexOf(a,this),b=this.previous,c=this.next;b&&(b.next=c),c&&(c.previous=b),a.splice(e,1),this.parent=null},replaceWith:function(a){var e=this.parent.children,b=CKEDITOR.tools.indexOf(e,this),c=a.previous=this.previous,d=a.next=this.next;c&&(c.next=a),d&&(d.previous=a),e[b]=a,a.parent=this.parent,this.parent=null},insertAfter:function(a){var e=a.parent.children,b=CKEDITOR.tools.indexOf(e,a),c=a.next;e.splice(b+1,0,this),this.next=a.next,this.previous=a,a.next=this,c&&(c.previous=this),this.parent=a.parent},insertBefore:function(a){var e=a.parent.children,b=CKEDITOR.tools.indexOf(e,a);e.splice(b,0,this),this.next=a,(this.previous=a.previous)&&(a.previous.next=this),a.previous=this,this.parent=a.parent},getAscendant:function(a){for(var e=("function"==typeof a?a:"string"==typeof a?function(b){return b.name==a}:function(b){return b.name in a}),b=this.parent;b&&b.type==CKEDITOR.NODE_ELEMENT;){if(e(b))return b;b=b.parent}return null},wrapWith:function(a){return this.replaceWith(a),a.add(this),a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}}}(),CKEDITOR.htmlParser.comment=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,e){var b=this.value;return(b=a.onComment(e,b,this))?"string"!=typeof b?(this.replaceWith(b),!1):(this.value=b,!0):(this.remove(),!1)},writeHtml:function(a,e){e&&this.filter(e),a.comment(this.value)}}),function(){CKEDITOR.htmlParser.text=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,e){return(this.value=a.onText(e,this.value,this))?void 0:(this.remove(),!1)},writeHtml:function(a,e){e&&this.filter(e),a.text(this.value)}})}(),function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}})}(),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function a(a){return a.attributes["data-cke-survive"]?!1:"a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name]}var e=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),b={ol:1,ul:1},c=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),d={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(m,l,f){function h(a){var b;if(0<r.length)for(var c=0;c<r.length;c++){var d=r[c],g=d.name,f=CKEDITOR.dtd[g],e=z.name&&CKEDITOR.dtd[z.name];e&&!e[g]||a&&f&&!f[a]&&CKEDITOR.dtd[a]?g==z.name&&(n(z,z.parent,1),c--):(b||(k(),b=1),d=d.clone(),d.parent=z,z=d,r.splice(c,1),c--)}}function k(){for(;w.length;)n(w.shift(),z)}function g(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var d,b=a.children.length,c=a.children[b-1];c&&c.type==CKEDITOR.NODE_TEXT&&((d=CKEDITOR.tools.rtrim(c.value))?c.value=d:a.children.length=b-1)}}function n(b,c,d){c=c||z||p;var e=z;void 0===b.previous&&(q(c,b)&&(z=c,u.onTagOpen(f,{}),b.returnPoint=c=z),g(b),a(b)&&!b.children.length||c.add(b),"pre"==b.name&&(v=!1),"textarea"==b.name&&(B=!1)),b.returnPoint?(z=b.returnPoint,delete b.returnPoint):z=d?c:e}function q(a,b){if((a==p||"body"==a.name)&&f&&(!a.name||CKEDITOR.dtd[a.name][f])){var c,d;return(c=b.attributes&&(d=b.attributes["data-cke-real-element-type"])?d:b.name)&&c in CKEDITOR.dtd.$inline&&!(c in CKEDITOR.dtd.head)&&!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}}function t(a,b){return a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent?a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b:!1}var u=new CKEDITOR.htmlParser,p=l instanceof CKEDITOR.htmlParser.element?l:"string"==typeof l?new CKEDITOR.htmlParser.element(l):new CKEDITOR.htmlParser.fragment,r=[],w=[],z=p,B="textarea"==p.name,v="pre"==p.name;u.onTagOpen=function(d,g,f,m){if(g=new CKEDITOR.htmlParser.element(d,g),g.isUnknown&&f&&(g.isEmpty=!0),g.isOptionalClose=m,a(g))r.push(g);else{if("pre"==d)v=!0;else{if("br"==d&&v)return void z.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==d&&(B=!0)}if("br"==d)w.push(g);else{for(;m=(f=z.name)?CKEDITOR.dtd[f]||(z._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c,!(g.isUnknown||z.isUnknown||m[d]);)if(z.isOptionalClose)u.onTagClose(f);else if(d in b&&f in b)f=z.children,(f=f[f.length-1])&&"li"==f.name||n(f=new CKEDITOR.htmlParser.element("li"),z),!g.returnPoint&&(g.returnPoint=z),z=f;else if(d in CKEDITOR.dtd.$listItem&&!t(d,f))u.onTagOpen("li"==d?"ul":"dl",{},0,1);else if(f in e&&!t(d,f))!g.returnPoint&&(g.returnPoint=z),z=z.parent;else{if(f in CKEDITOR.dtd.$inline&&r.unshift(z),!z.parent){g.isOrphan=1;break}n(z,z.parent,1)}h(d),k(),g.parent=z,g.isEmpty?n(g):z=g}}},u.onTagClose=function(a){for(var b=r.length-1;b>=0;b--)if(a==r[b].name)return void r.splice(b,1);for(var c=[],d=[],g=z;g!=p&&g.name!=a;)g._.isBlockLike||d.unshift(g),c.push(g),g=g.returnPoint||g.parent;if(g!=p){for(b=0;b<c.length;b++){var e=c[b];n(e,e.parent)}z=g,g._.isBlockLike&&k(),n(g,g.parent),g==z&&(z=z.parent),r=r.concat(d)}"body"==a&&(f=!1)},u.onText=function(a){if(z._.hasInlineStarted&&!w.length||v||B||(a=CKEDITOR.tools.ltrim(a),0!==a.length)){var b=z.name,g=b?CKEDITOR.dtd[b]||(z._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):c;!B&&!g["#"]&&b in e?(u.onTagOpen(d[b]||""),u.onText(a)):(k(),h(),v||B||(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),a=new CKEDITOR.htmlParser.text(a),q(z,a)&&this.onTagOpen(f,{},0,1),z.add(a))}},u.onCDATA=function(a){z.add(new CKEDITOR.htmlParser.cdata(a))},u.onComment=function(a){k(),h(),z.add(new CKEDITOR.htmlParser.comment(a))},u.parse(m);for(k();z!=p;)n(z,z.parent,1);return g(p),p},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var c=b>0?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT&&(c.value=CKEDITOR.tools.rtrim(c.value),0===c.value.length))return this.children.pop(),void this.add(a);c.next=a}a.previous=c,a.parent=this,this.children.splice(b,0,a),this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike);
},filter:function(a,b){b=this.getFilterContext(b),a.onRoot(b,this),this.filterChildren(a,!1,b)},filterChildren:function(a,b,c){if(this.childrenFilteredBy!=a.id)for(c=this.getFilterContext(c),b&&!this.parent&&a.onRoot(c,this),this.childrenFilteredBy=a.id,b=0;b<this.children.length;b++)!1===this.children[b].filter(a,c)&&b--},writeHtml:function(a,b){b&&this.filter(b),this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,c){var d=this.getFilterContext();for(c&&!this.parent&&b&&b.onRoot(d,this),b&&this.filterChildren(b,!1,d),b=0,c=this.children,d=c.length;d>b;b++)c[b].writeHtml(a)},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var d=a(this);if(!1!==d){c=this.children;for(var e=0;e<c.length;e++)d=c[e],d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,b):b&&d.type!=b||a(d)}},getFilterContext:function(a){return a||{}}}}(),function(){function a(){this.rules=[]}function e(b,c,d,e){var l,f;for(l in c)(f=b[l])||(f=b[l]=new a),f.add(c[l],d,e)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(b){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new a,this.attributeNameRules=new a,this.elementsRules={},this.attributesRules={},this.textRules=new a,this.commentRules=new a,this.rootRules=new a,b&&this.addRules(b,10)},proto:{addRules:function(a,c){var d;"number"==typeof c?d=c:c&&"priority"in c&&(d=c.priority),"number"!=typeof d&&(d=10),"object"!=typeof c&&(c={}),a.elementNames&&this.elementNameRules.addMany(a.elementNames,d,c),a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,d,c),a.elements&&e(this.elementsRules,a.elements,d,c),a.attributes&&e(this.attributesRules,a.attributes,d,c),a.text&&this.textRules.add(a.text,d,c),a.comment&&this.commentRules.add(a.comment,d,c),a.root&&this.rootRules.add(a.root,d,c)},applyTo:function(a){a.filter(this)},onElementName:function(a,c){return this.elementNameRules.execOnName(a,c)},onAttributeName:function(a,c){return this.attributeNameRules.execOnName(a,c)},onText:function(a,c,d){return this.textRules.exec(a,c,d)},onComment:function(a,c,d){return this.commentRules.exec(a,c,d)},onRoot:function(a,c){return this.rootRules.exec(a,c)},onElement:function(a,c){for(var e,d=[this.elementsRules["^"],this.elementsRules[c.name],this.elementsRules.$],l=0;3>l;l++)if(e=d[l]){if(e=e.exec(a,c,this),!1===e)return null;if(e&&e!=c)return this.onNode(a,e);if(c.parent&&!c.name)break}return c},onNode:function(a,c){var d=c.type;return d==CKEDITOR.NODE_ELEMENT?this.onElement(a,c):d==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,c.value)):d==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,c.value)):null},onAttribute:function(a,c,d,e){return(d=this.attributesRules[d])?d.exec(a,e,c,this):e}}}),CKEDITOR.htmlParser.filterRulesGroup=a,a.prototype={add:function(a,c,d){this.rules.splice(this.findIndex(c),0,{value:a,priority:c,options:d})},addMany:function(a,c,d){for(var e=[this.findIndex(c),0],l=0,f=a.length;f>l;l++)e.push({value:a[l],priority:c,options:d});this.rules.splice.apply(this.rules,e)},findIndex:function(a){for(var c=this.rules,d=c.length-1;d>=0&&a<c[d].priority;)d--;return d+1},exec:function(a,c){var h,k,g,n,d=c instanceof CKEDITOR.htmlParser.node||c instanceof CKEDITOR.htmlParser.fragment,e=Array.prototype.slice.call(arguments,1),l=this.rules,f=l.length;for(n=0;f>n;n++)if(d&&(h=c.type,k=c.name),g=l[n],!(a.nonEditable&&!g.options.applyToAll||a.nestedEditable&&g.options.excludeNestedEditable)){if(g=g.value.apply(null,e),!1===g||d&&g&&(g.name!=k||g.type!=h))return g;null!=g&&(e[0]=c=g)}return c},execOnName:function(a,c){for(var f,d=0,e=this.rules,l=e.length;c&&l>d;d++)f=e[d],a.nonEditable&&!f.options.applyToAll||a.nestedEditable&&f.options.excludeNestedEditable||(c=c.replace(f.value[0],f.value[1]));return c}}}(),function(){function a(a,g){function f(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function e(a,d){return function(g){if(g.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var l,v,e=[],h=b(g);if(h)for(k(h,1)&&e.push(h);h;)m(h)&&(l=c(h))&&k(l)&&((v=c(l))&&!m(v)?e.push(l):(f(n).insertAfter(l),l.remove())),h=h.previous;for(h=0;h<e.length;h++)e[h].remove();(e=!a||!1!==("function"==typeof d?d(g):d))&&((n||CKEDITOR.env.needsBrFiller||g.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(n||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||g.name in CKEDITOR.dtd.tr||g.name in CKEDITOR.dtd.$listItem))?(e=b(g),e=!e||"form"==g.name&&"input"==e.name):e=!1),e&&g.add(f(a))}}}function k(a,b){if((!n||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&"br"==a.name&&!a.attributes["data-cke-eol"])return!0;var c;return!!(a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(r))&&(c.index&&(new CKEDITOR.htmlParser.text(a.value.substring(0,c.index)).insertBefore(a),a.value=c[0]),!CKEDITOR.env.needsBrFiller&&n&&(!b||a.parent.name in F)||!n&&((c=a.previous)&&"br"==c.name||!c||m(c))))}var B,h={elements:{}},n="html"==g,F=CKEDITOR.tools.extend({},v);for(B in F)"#"in z[B]||delete F[B];for(B in F)h.elements[B]=e(n,a.config.fillEmptyBlocks);return h.root=e(n,!1),h.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var g=b.attributes;if("data-cke-bogus"in g||"data-cke-eol"in g)delete g["data-cke-bogus"];else{for(g=b.next;g&&d(g);)g=g.next;var e=c(b);!g&&m(b.parent)?l(b.parent,f(a)):m(g)&&e&&!m(e)&&f(a).insertBefore(g)}}}}(n),h}function e(a,b){return a!=CKEDITOR.ENTER_BR&&!1!==b?a==CKEDITOR.ENTER_DIV?"div":"p":!1}function b(a){for(a=a.children[a.children.length-1];a&&d(a);)a=a.previous;return a}function c(a){for(a=a.previous;a&&d(a);)a=a.previous;return a}function d(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function m(a){return a&&(a.type==CKEDITOR.NODE_ELEMENT&&a.name in v||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function l(a,b){var c=a.children[a.children.length-1];a.children.push(b),b.parent=a,c&&(c.next=b,b.previous=c)}function f(a){a=a.attributes,"false"!=a.contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1),a.contenteditable="false"}function h(a){switch(a=a.attributes,a["data-cke-editable"]){case"true":a.contenteditable="true";break;case"1":delete a.contenteditable}}function k(a){return a.replace(D,function(a,b,c){return"<"+b+c.replace(G,function(a,b){return E.test(b)&&-1==c.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a})+">"})}function g(a,b){return a.replace(b,function(a,b,c){return 0===a.indexOf("<textarea")&&(a=b+t(c).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>"})}function n(a){return a.replace(K,function(a,b){return decodeURIComponent(b)})}function q(a){return a.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(a){return"<!--"+w+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"-->"})}function t(a){return a.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)})}function u(a,b){var c=b._.dataStore;return a.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function p(a,b){var c=[],d=b.config.protectedSource,g=b._.dataStore||(b._.dataStore={id:1}),f=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,d=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(d);a=a.replace(/\x3c!--[\s\S]*?--\x3e/g,function(a){return"<!--{cke_tempcomment}"+(c.push(a)-1)+"-->"});for(var e=0;e<d.length;e++)a=a.replace(d[e],function(a){return a=a.replace(f,function(a,b,d){return c[d]}),/cke_temp(comment)?/.test(a)?a:"<!--{cke_temp}"+(c.push(a)-1)+"-->"});return a=a.replace(f,function(a,b,d){return"<!--"+w+(b?"{C}":"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"-->"}),a=a.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(a){return a.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(a,b){return g[g.id]=decodeURIComponent(b),"{cke_protected_"+g.id++ +"}"})}),a=a.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(a,c,d,g){return"<"+c+d+">"+u(t(g),b)+"</"+c+">"})}CKEDITOR.htmlDataProcessor=function(b){var c,d,f=this;this.editor=b,this.dataFilter=c=new CKEDITOR.htmlParser.filter,this.htmlFilter=d=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,c.addRules(y),c.addRules(C,{applyToAll:!0}),c.addRules(a(b,"data"),{applyToAll:!0}),d.addRules(x),d.addRules(A,{applyToAll:!0}),d.addRules(a(b,"html"),{applyToAll:!0}),b.on("toHtml",function(a){a=a.data;var d,c=a.dataValue,c=p(c,b),c=g(c,H),c=k(c),c=g(c,I),c=c.replace(F,"$1cke:$2"),c=c.replace(R,"<cke:$1$2></cke:$1>"),c=c.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),c=c.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");d=a.context||b.editable().getName();var f;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==d&&(d="div",c="<pre>"+c+"</pre>",f=1),d=b.document.createElement(d),d.setHtml("a"+c),c=d.getHtml().substr(1),c=c.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),f&&(c=c.replace(/^<pre>|<\/pre>$/gi,"")),c=c.replace(N,"$1$2"),c=n(c),c=t(c),d=!1===a.fixForBody?!1:e(a.enterMode,b.config.autoParagraph),c=CKEDITOR.htmlParser.fragment.fromHtml(c,a.context,d),d&&(f=c,!f.children.length&&CKEDITOR.dtd[f.name][d]&&(d=new CKEDITOR.htmlParser.element(d),f.add(d))),a.dataValue=c},null,null,5),b.on("toHtml",function(a){a.data.filter.applyTo(a.data.dataValue,!0,a.data.dontFilter,a.data.enterMode)&&b.fire("dataFiltered")},null,null,6),b.on("toHtml",function(a){a.data.dataValue.filterChildren(f.dataFilter,!0)},null,null,10),b.on("toHtml",function(a){a=a.data;var b=a.dataValue,c=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(c),b=c.getHtml(!0),a.dataValue=q(b)},null,null,15),b.on("toDataFormat",function(a){var c=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/^<br *\/?>/i,"")),a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(c,a.data.context,e(a.data.enterMode,b.config.autoParagraph))},null,null,5),b.on("toDataFormat",function(a){a.data.dataValue.filterChildren(f.htmlFilter,!0)},null,null,10),b.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,!1,!0)},null,null,11),b.on("toDataFormat",function(a){var c=a.data.dataValue,d=f.writer;d.reset(),c.writeChildrenHtml(d),c=d.getHtml(!0),c=t(c),c=u(c,b),a.data.dataValue=c},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,c,d){var f,e,k,h,g=this.editor;return b&&"object"==typeof b?(f=b.context,c=b.fixForBody,d=b.dontFilter,e=b.filter,k=b.enterMode,h=b.protectedWhitespaces):f=b,f||null===f||(f=g.editable().getName()),g.fire("toHtml",{dataValue:a,context:f,fixForBody:c,dontFilter:d,filter:e||g.filter,enterMode:k||g.enterMode,protectedWhitespaces:h}).dataValue},toDataFormat:function(a,b){var c,d,g;return b&&(c=b.context,d=b.filter,g=b.enterMode),c||null===c||(c=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:a,filter:d||this.editor.filter,context:c,enterMode:g||this.editor.enterMode}).dataValue}};var r=/(?:&nbsp;|\xa0)$/,w="{cke_protected}",z=CKEDITOR.dtd,B="caption colgroup col thead tfoot tbody".split(" "),v=CKEDITOR.tools.extend({},z.$blockLimit,z.$block),y={elements:{input:f,textarea:f}},C={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},x={elements:{embed:function(a){var b=a.parent;if(b&&"object"==b.name){var c=b.attributes.width,b=b.attributes.height;c&&(a.attributes.width=c),b&&(a.attributes.height=b)}},a:function(a){var b=a.attributes;return a.children.length||b.name||b.id||a.attributes["data-cke-saved-name"]?void 0:!1}}},A={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var d,c=["name","href","src"],g=0;g<c.length;g++)d="data-cke-saved-"+c[g],d in b&&delete b[c[g]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var c,d;return a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(c=CKEDITOR.tools.indexOf(B,a.name),d=CKEDITOR.tools.indexOf(B,b.name)),c>-1&&d>-1&&c!=d||(c=a.parent?a.getIndex():-1,d=b.parent?b.getIndex():-1),c>d?1:-1})},param:function(a){return a.children=[],a.isEmpty=!0,a},span:function(a){"Apple-style-span"==a.attributes.class&&delete a.name},html:function(a){delete a.attributes.contenteditable,delete a.attributes.class},body:function(a){delete a.attributes.spellcheck,delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value)),a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&l(a,b=new CKEDITOR.htmlParser.text),b.value=a.attributes["data-cke-title"]||""},input:h,textarea:h},attributes:{class:function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(A.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});var D=/<(a|area|img|input|source)\b([^>]*)>/gi,G=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,E=/^(href|src|name)$/i,I=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,H=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,K=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,F=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,N=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,R=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(a,e){this.name=a,this.attributes=e||{},this.children=[];var b=a||"",c=b.match(/^cke:(.*)/);c&&(b=c[1]),b=!!(CKEDITOR.dtd.$nonBodyContent[b]||CKEDITOR.dtd.$block[b]||CKEDITOR.dtd.$listItem[b]||CKEDITOR.dtd.$tableContent[b]||CKEDITOR.dtd.$nonEditable[b]||"br"==b),this.isEmpty=!!CKEDITOR.dtd.$empty[a],this.isUnknown=!CKEDITOR.dtd[a],this._={isBlockLike:b,hasInlineStarted:this.isEmpty||!b}},CKEDITOR.htmlParser.cssStyle=function(a){var e={};return((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,d){"font-family"==c&&(d=d.replace(/["']/g,"")),e[c.toLowerCase()]=d}),{rules:e,populate:function(a){var c=this.toString();c&&(a instanceof CKEDITOR.dom.element?a.setAttribute("style",c):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=c:a.style=c)},toString:function(){var c,a=[];for(c in e)e[c]&&a.push(c,":",e[c],";");return a.join("")}}},function(){function a(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}var e=function(a,b){return a=a[0],b=b[0],b>a?-1:a>b?1:0},b=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:b.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var l,f,e=this;if(b=e.getFilterContext(b),b.off)return!0;for(e.parent||a.onRoot(b,e);;){if(l=e.name,!(f=a.onElementName(b,l)))return this.remove(),!1;if(e.name=f,!(e=a.onElement(b,e)))return this.remove(),!1;if(e!==this)return this.replaceWith(e),!1;if(e.name==l)break;if(e.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(e),!1;if(!e.name)return this.replaceWithChildren(),!1}l=e.attributes;var h,k;for(h in l){for(f=l[h];;){if(!(k=a.onAttributeName(b,h))){delete l[h];break}if(k==h)break;delete l[h],h=k}k&&(!1===(f=a.onAttribute(b,e,k,f))?delete l[k]:l[k]=f)}return e.isEmpty||this.filterChildren(a,!1,b),!0},filterChildren:b.filterChildren,writeHtml:function(a,b){b&&this.filter(b);var h,k,m=this.name,l=[],f=this.attributes;a.openTag(m,f);for(h in f)l.push([h,f[h]]);for(a.sortAttributes&&l.sort(e),h=0,k=l.length;k>h;h++)f=l[h],a.attribute(f[0],f[1]);a.openTagClose(m,this.isEmpty),this.writeChildrenHtml(a),this.isEmpty||a.closeTag(m)},writeChildrenHtml:b.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);this.remove()},forEach:b.forEach,getFirst:function(b){if(!b)return this.children.length?this.children[0]:null;"function"!=typeof b&&(b=a(b));for(var d=0,e=this.children.length;e>d;++d)if(b(this.children[d]))return this.children[d];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(a),a.getHtml()},setHtml:function(a){a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children;for(var b=0,e=a.length;e>b;++b)a[b].parent=this},getOuterHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(a),a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),e=this.clone(),l=0;l<b.length;++l)b[l].parent=e;return e.children=b,b[0]&&(b[0].previous=null),a>0&&(this.children[a-1].next=null),this.parent.add(e,this.getIndex()+1),e},addClass:function(a){if(!this.hasClass(a)){var b=this.attributes.class||"";this.attributes.class=b+(b?" ":"")+a}},removeClass:function(a){var b=this.attributes.class;b&&((b=CKEDITOR.tools.trim(b.replace(new RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes.class=b:delete this.attributes.class)},hasClass:function(a){var b=this.attributes.class;return b?new RegExp("(?:^|\\s)"+a+"(?=\\s|$)").test(b):!1},getFilterContext:function(a){var b=[];if(a||(a={off:!1,nonEditable:!1,nestedEditable:!1}),a.off||"off"!=this.attributes["data-cke-processor"]||b.push("off",!0),a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&"true"==this.attributes.contenteditable&&b.push("nestedEditable",!0):b.push("nonEditable",!0),b.length){a=CKEDITOR.tools.copy(a);for(var e=0;e<b.length;e+=2)a[b[e]]=b[e+1]}return a}},!0)}(),function(){var a={},e=/{([^}]+)}/g,b=/([\\'])/g,c=/\n/g,d=/\r/g;CKEDITOR.template=function(m){if(a[m])this.output=a[m];else{var l=m.replace(b,"\\$1").replace(c,"\\n").replace(d,"\\r").replace(e,function(a,b){return"',data['"+b+"']==undefined?'{"+b+"}':data['"+b+"'],'"});this.output=a[m]=Function("data","buffer","return buffer?buffer.push('"+l+"'):['"+l+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a,a.on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))}),a.on("blur",function(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,a)},CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]},function(){var a={};CKEDITOR.addTemplate=function(e,b){var c=a[e];return c?c:(c={name:e,source:b},CKEDITOR.fire("template",c),a[e]=new CKEDITOR.template(c.source))},CKEDITOR.getTemplate=function(e){return a[e]}}(),function(){var a=[];CKEDITOR.addCss=function(e){a.push(e)},CKEDITOR.getCss=function(){return a.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(a,e){if(!CKEDITOR.env.isCompatible)return null;if(a=CKEDITOR.dom.element.get(a),a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var b=new CKEDITOR.editor(e,a,CKEDITOR.ELEMENT_MODE_INLINE),c=a.is("textarea")?a:null;return c?(b.setData(c.getValue(),null,!0),a=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!b.readOnly+'" class="cke_textarea_inline">'+c.getValue()+"</div>",CKEDITOR.document),a.insertAfter(c),c.hide(),c.$.form&&b._attachToForm()):b.setData(a.getHtml(),null,!0),b.on("loaded",function(){b.fire("uiReady"),b.editable(a),b.container=a,b.ui.contentsElement=a,b.setData(b.getData(1)),b.resetDirty(),b.fire("contentDom"),b.mode="wysiwyg",b.fire("mode"),b.status="ready",b.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,b)},null,null,1e4),b.on("destroy",function(){c&&(b.container.clearCustomData(),b.container.remove(),c.show()),b.element.clearCustomData(),delete b.element}),b},CKEDITOR.inlineAll=function(){var a,e,b;for(b in CKEDITOR.dtd.$editable)for(var c=CKEDITOR.document.getElementsByTag(b),d=0,m=c.count();m>d;d++)a=c.getItem(d),"true"==a.getAttribute("contenteditable")&&(e={element:a,config:{}},!1!==CKEDITOR.fire("inline",e)&&CKEDITOR.inline(a,e.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function a(a,d,m,l){if(!CKEDITOR.env.isCompatible)return null;if(a=CKEDITOR.dom.element.get(a),a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var f=new CKEDITOR.editor(d,a,l);return l==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),f._.required=a.hasAttribute("required"),a.removeAttribute("required")),m&&f.setData(m,null,!0),f.on("loaded",function(){b(f),l==CKEDITOR.ELEMENT_MODE_REPLACE&&f.config.autoUpdateElement&&a.$.form&&f._attachToForm(),f.setMode(f.config.startupMode,function(){f.resetDirty(),f.status="ready",f.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,f)})}),f.on("destroy",e),f}function e(){var a=this.container,b=this.element;a&&(a.clearCustomData(),a.remove()),b&&(b.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.show(),this._.required&&b.setAttribute("required","required")),delete this.element)}function b(a){var b=a.name,e=a.element,l=a.elementMode,f=a.fire("uiSpace",{space:"top",html:""}).html,h=a.fire("uiSpace",{space:"bottom",html:""}).html,k=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),b=CKEDITOR.dom.element.createFromHtml(k.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:f?'<span id="'+a.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+f+"</span>":"",contentId:a.ui.spaceId("contents"),bottomHtml:h?'<span id="'+a.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+h+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));l==CKEDITOR.ELEMENT_MODE_REPLACE?(e.hide(),b.insertAfter(e)):e.append(b),a.container=b,a.ui.contentsElement=a.ui.space("contents"),f&&a.ui.space("top").unselectable(),h&&a.ui.space("bottom").unselectable(),e=a.config.width,l=a.config.height,e&&b.setStyle("width",CKEDITOR.tools.cssLength(e)),l&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(l)),b.disableContextMenu(),CKEDITOR.env.webkit&&b.on("focus",function(){a.focus()}),a.fireOnce("uiReady")}CKEDITOR.replace=function(b,d){return a(b,d,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(b,d,e){return a(b,d,e,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var e=null,l=a[b];if(l.name||l.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(l.className))continue}else if("function"==typeof arguments[0]&&(e={},!1===arguments[0](l,e)))continue;this.replace(l,e)}}},CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes={}))[a]=b},CKEDITOR.editor.prototype.setMode=function(a,b){var e=this,l=this._.modes;if(a!=e.mode&&l&&l[a]){if(e.fire("beforeSetMode",a),e.mode){var h,f=e.checkDirty(),l=e._.previousModeData,k=0;e.fire("beforeModeUnload"),e.editable(0),e._.previousMode=e.mode,e._.previousModeData=h=e.getData(1),"source"==e.mode&&l==h&&(e.fire("lockSnapshot",{forceUpdate:!0}),k=1),e.ui.space("contents").setHtml(""),e.mode=""}else e._.previousModeData=e.getData(1);this._.modes[a](function(){e.mode=a,void 0!==f&&!f&&e.resetDirty(),k?e.fire("unlockSnapshot"):"wysiwyg"==a&&e.fire("saveSnapshot"),setTimeout(function(){e.fire("mode"),b&&b.call(e)},0)})}},CKEDITOR.editor.prototype.resize=function(a,b,e,l){var f=this.container,h=this.ui.space("contents"),k=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;l=l?this.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}):f,l.setSize("width",a,!0),k&&(k.style.width="1%");var g=(l.$.offsetHeight||0)-(h.$.clientHeight||0),f=Math.max(b-(e?0:g),0);b=e?b+g:b,h.setStyle("height",f+"px"),k&&(k.style.width="100%"),this.fire("resize",{outerHeight:b,contentsHeight:f,outerWidth:a||l.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function a(a){var h,b=a.editor,d=a.data.path,g=d.blockLimit,f=a.data.selection,k=f.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(f=e(f,d))&&(f.appendBogus(),h=CKEDITOR.env.ie),l(b,d.block,g)&&k.collapsed&&!k.getCommonAncestor().isReadOnly()&&(d=k.clone(),d.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),g=new CKEDITOR.dom.walker(d),g.guard=function(a){return!c(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly()},!g.checkForward()||d.checkStartOfBlock()&&d.checkEndOfBlock())&&(b=k.fixBlock(!0,b.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(b=b.getFirst(c))&&b.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(b.getText()).match(/^(?:&nbsp;|\xa0)$/)&&b.remove(),h=1,a.cancel()),h&&k.select()}function e(a,b){if(a.isFake)return 0;var d=b.block||b.blockLimit,g=d&&d.getLast(c);return!d||!d.isBlockBoundary()||g&&g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary()||d.is("pre")||d.getBogus()?void 0:d}function b(a){var b=a.data.getTarget();b.is("input")&&(b=b.getAttribute("type"),"submit"!=b&&"reset"!=b||a.data.preventDefault())}function c(a){return g(a)&&n(a)}function d(a,b){return function(c){var d=c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget;(d=d&&d.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(d):null)&&(b.equals(d)||b.contains(d))||a.call(this,c)}}function m(a){function b(a){return function(b,g){return g&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(e)&&(d=b),g||!c(b)||a&&t(b)?void 0:!1}}var d,g=a.getRanges()[0];a=a.root;var e={table:1,ul:1,ol:1,dl:1};if(g.startPath().contains(e)){var f=g.clone();if(f.collapse(1),f.setStartAt(a,CKEDITOR.POSITION_AFTER_START),a=new CKEDITOR.dom.walker(f),a.guard=b(),a.checkBackward(),d)return f=g.clone(),f.collapse(),f.setEndAt(d,CKEDITOR.POSITION_AFTER_END),a=new CKEDITOR.dom.walker(f),a.guard=b(!0),d=!1,a.checkForward(),d}return null}function l(a,b,c){return!1!==a.config.autoParagraph&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&(a.editable().equals(c)&&!b||b&&"true"==b.getAttribute("contenteditable"))}function f(a){return a.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==a.config.autoParagraph?a.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function h(a){var b=a.editor;b.getSelection().scrollIntoView(),setTimeout(function(){b.fire("saveSnapshot")},0)}function k(a,b,c){var d=a.getCommonAncestor(b);for(b=a=c?b:a;(a=a.getParent())&&!d.equals(a)&&1==a.getChildCount();)b=a;b.remove()}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||b),this.editor=a,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a)))return void a.focus();try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(b){if(!CKEDITOR.env.ie)throw b}CKEDITOR.env.safari&&!this.isInline()&&(a=CKEDITOR.document.getActive(),a.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(a,b){var c=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",b=d(b,this),c[0]=a,c[1]=b),CKEDITOR.dom.element.prototype.on.apply(this,c)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var b=Array.prototype.slice.call(arguments,1),b=a.on.apply(a,b);return this._.listeners.push(b),b},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var b,c,a=this._.attrChanges;for(c in a)a.hasOwnProperty(c)&&(b=a[c],null!==b?this.setAttribute(c,b):this.removeAttribute(c))},attachClass:function(a){var b=this.getCustomData("classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var c=this.getAttribute(a);b!==c&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=c),this.setAttribute(a,b))},insertText:function(a){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(a),"text")},transformPlainTextToHtml:function(a){var b=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(a,b)},insertHtml:function(a,b,c){var d=this.editor;d.focus(),d.fire("saveSnapshot"),c||(c=d.getSelection().getRanges()[0]),p(this,b||"html",a,c),c.select(),h(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(a,b,c){p(this,c||"html",a,b),this.editor.fire("afterInsertHtml",{intoRange:b})},insertElement:function(a,b){var d=this.editor;d.focus(),d.fire("saveSnapshot");var g=d.activeEnterMode,d=d.getSelection(),e=a.getName(),e=CKEDITOR.dtd.$block[e];b||(b=d.getRanges()[0]),this.insertElementIntoRange(a,b)&&(b.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),e&&((e=a.getNext(function(a){return c(a)&&!t(a)}))&&e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$block)?e.getDtd()["#"]?b.moveToElementEditStart(e):b.moveToElementEditEnd(a):e||g==CKEDITOR.ENTER_BR||(e=b.fixBlock(!0,g==CKEDITOR.ENTER_DIV?"div":"p"),b.moveToElementEditStart(e)))),d.selectRanges([b]),h(this)},insertElementIntoSelection:function(a){this.insertElement(a)},insertElementIntoRange:function(a,b){var c=this.editor,d=c.config.enterMode,g=a.getName(),e=CKEDITOR.dtd.$block[g];if(b.checkReadOnly())return!1;b.deleteContents(1),b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&r(b);var f,k;if(e)for(;(f=b.getCommonAncestor(0,1))&&(k=CKEDITOR.dtd[f.getName()])&&(!k||!k[g]);)f.getName()in CKEDITOR.dtd.span?b.splitElement(f):b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(f),b.collapse(!0),f.remove()):b.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());return b.insertNode(a),!0},setData:function(a,b){b||(a=this.editor.dataProcessor.toHtml(a)),this.setHtml(a),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();return a||(b=this.editor.dataProcessor.toDataFormat(b)),b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var a=this.editor;this._.detach(),delete a.document,delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function a(){var g,b=c.getDocument().$,d=b.getSelection();a:if(d.anchorNode&&d.anchorNode==c.$)g=!0;else{if(CKEDITOR.env.webkit&&(g=c.getDocument().getActive())&&g.equals(c)&&!d.anchorNode){g=!0;break a}g=void 0}g&&(g=new CKEDITOR.dom.range(c),g.moveToElementEditStart(c),b=b.createRange(),
b.setStart(g.startContainer.$,g.startOffset),b.collapse(!0),d.removeAllRanges(),d.addRange(b))}function b(){var a=c.getDocument().$,d=a.selection,g=c.getDocument().getActive();"None"==d.type&&g.equals(c)&&(d=new CKEDITOR.dom.range(c),a=a.body.createTextRange(),d.moveToElementEditStart(c),d=d.startContainer,d.type!=CKEDITOR.NODE_ELEMENT&&(d=d.getParent()),a.moveToElementText(d.$),a.collapse(!0),a.select())}var c=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),b()):this.hasFocus?(this.focus(),a()):this.once("focus",function(){a()},null,null,-999)},getHtmlFromRange:function(a){return a.collapsed?new CKEDITOR.dom.documentFragment(a.document):(a={doc:this.getDocument(),range:a.clone()},w.eol.detect(a,this),w.bogus.exclude(a),w.cell.shrink(a),a.fragment=a.range.cloneContents(),w.tree.rebuild(a,this),w.eol.fix(a,this),new CKEDITOR.dom.documentFragment(a.fragment.$))},extractHtmlFromRange:function(a,b){var c=z,d={range:a,doc:a.document},g=this.getHtmlFromRange(a);if(a.collapsed)return a.optimize(),g;a.enlarge(CKEDITOR.ENLARGE_INLINE,1),c.table.detectPurge(d),d.bookmark=a.createBookmark(),delete d.range;var e=this.editor.createRange();if(e.moveToPosition(d.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),d.targetBookmark=e.createBookmark(),c.list.detectMerge(d,this),c.table.detectRanges(d,this),c.block.detectMerge(d,this),d.tableContentsRanges?(c.table.deleteRanges(d),a.moveToBookmark(d.bookmark),d.range=a):(a.moveToBookmark(d.bookmark),d.range=a,a.extractContents(c.detectExtractMerge(d))),a.moveToBookmark(d.targetBookmark),a.optimize(),c.fixUneditableRangePosition(a),c.list.merge(d,this),c.table.purge(d,this),c.block.merge(d,this),b){if(c=a.startPath(),d=a.checkStartOfBlock()&&a.checkEndOfBlock()&&c.block&&!a.root.equals(c.block)){a:{var f,d=c.block.getElementsByTag("span"),e=0;if(d)for(;f=d.getItem(e++);)if(!n(f)){d=!0;break a}d=!1}d=!d}d&&(a.moveToPosition(c.block,CKEDITOR.POSITION_BEFORE_START),c.block.remove())}else c.autoParagraph(this.editor,a),q(a.startContainer)&&a.startContainer.appendBogus();return a.startContainer.mergeSiblings(),g},setup:function(){var a=this.editor;if(this.attachListener(a,"beforeGetData",function(){var b=this.getData();this.is("textarea")||!1!==a.config.ignoreEmptyParagraph&&(b=b.replace(u,function(a,b){return b})),a.setData(b,null,1)},this),this.attachListener(a,"getSnapshot",function(a){a.data=this.getData(1)},this),this.attachListener(a,"afterSetData",function(){this.setData(a.getData(1))},this),this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1)},this),this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()},this),this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode,a.data.range)},this),this.attachListener(a,"insertElement",function(a){this.insertElement(a.data)},this),this.attachListener(a,"insertText",function(a){this.insertText(a.data)},this),this.setReadOnly(a.readOnly),this.attachClass("cke_editable"),a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):a.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&a.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+a.config.contentsLangDirection),a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly,a.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),a.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",function(){a.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",a.tabIndex),!this.is("textarea")){a.document=this.getDocument(),a.window=this.getWindow();var d=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var e=a.config.contentsLangDirection;this.getDirection(1)!=e&&this.changeAttr("dir",e);var f=CKEDITOR.getCss();f&&(e=d.getHead(),e.getCustomData("stylesheet")||(f=d.appendStyleText(f),f=new CKEDITOR.dom.element(f.ownerNode||f.owningElement),e.setCustomData("stylesheet",f),f.data("cke-temp",1))),e=d.getCustomData("stylesheet_ref")||0,d.setCustomData("stylesheet_ref",e+1),this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling),this.attachListener(this,"click",function(a){a=a.data;var b=new CKEDITOR.dom.elementPath(a.getTarget(),this).contains("a");b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()});var h={8:1,46:1};this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var d,c=b.data.domEvent.getKey();if(c in h){b=a.getSelection();var e,l,n,v,f=b.getRanges()[0],k=f.startPath(),c=8==c;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(e=b.getSelectedElement())||(e=m(b))?(a.fire("saveSnapshot"),f.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove(),f.select(),a.fire("saveSnapshot"),d=1):f.collapsed&&((l=k.block)&&(v=l[c?"getPrevious":"getNext"](g))&&v.type==CKEDITOR.NODE_ELEMENT&&v.is("table")&&f[c?"checkStartOfBlock":"checkEndOfBlock"]()?(a.fire("saveSnapshot"),f[c?"checkEndOfBlock":"checkStartOfBlock"]()&&l.remove(),f["moveToElementEdit"+(c?"End":"Start")](v),f.select(),a.fire("saveSnapshot"),d=1):k.blockLimit&&k.blockLimit.is("td")&&(n=k.blockLimit.getAscendant("table"))&&f.checkBoundaryOfElement(n,c?CKEDITOR.START:CKEDITOR.END)&&(v=n[c?"getPrevious":"getNext"](g))?(a.fire("saveSnapshot"),f["moveToElementEdit"+(c?"End":"Start")](v),f.checkStartOfBlock()&&f.checkEndOfBlock()?v.remove():f.select(),a.fire("saveSnapshot"),d=1):(n=k.contains(["td","th","caption"]))&&f.checkBoundaryOfElement(n,c?CKEDITOR.START:CKEDITOR.END)&&(d=1))}return!d}),a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(b){b.data.getKeystroke()in h&&!this.getFirst(c)&&(this.appendBogus(),b=a.createRange(),b.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),b.select())}),this.attachListener(this,"dblclick",function(b){return a.readOnly?!1:(b={element:b.data.getTarget()},void a.fire("doubleclick",b))}),CKEDITOR.env.ie&&this.attachListener(this,"click",b),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(b){var c=b.data.getTarget();c.is("img","hr","input","textarea","select")&&!c.isReadOnly()&&(a.getSelection().selectElement(c),c.is("input","textarea","select")&&b.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(b){(b=b.data.getTarget())&&b.is("img")&&a.getSelection().selectElement(b)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(2==b.data.$.button&&(b=b.data.getTarget(),!b.getOuterHtml().replace(u,""))){var c=a.createRange();c.moveToElementEditStart(b),c.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(a,"key",function(b){if(a.readOnly)return!0;if(b=b.data.domEvent.getKey(),b in h){var c=8==b,d=a.getSelection().getRanges()[0];if(b=d.startPath(),d.collapsed)a:{var g=b.block;if(g&&d[c?"checkStartOfBlock":"checkEndOfBlock"]()&&d.moveToClosestEditablePosition(g,!c)&&d.collapsed){if(d.startContainer.type==CKEDITOR.NODE_ELEMENT){var e=d.startContainer.getChild(d.startOffset-(c?1:0));if(e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("hr")){a.fire("saveSnapshot"),e.remove(),b=!0;break a}}if(d=d.startPath().block,!d||d&&d.contains(g))b=void 0;else{a.fire("saveSnapshot");var f;(f=(c?d:g).getBogus())&&f.remove(),f=a.getSelection(),e=f.createBookmarks(),(c?g:d).moveChildren(c?d:g,!1),b.lastElement.mergeSiblings(),k(g,d,!c),f.selectBookmarks(e),b=!0}}else b=!1}else c=d,f=b.block,d=c.endPath().block,f&&d&&!f.equals(d)?(a.fire("saveSnapshot"),(g=f.getBogus())&&g.remove(),c.enlarge(CKEDITOR.ENLARGE_INLINE),c.deleteContents(),d.getParent()&&(d.moveChildren(f,!1),b.lastElement.mergeSiblings(),k(f,d,!0)),c=a.getSelection().getRanges()[0],c.collapse(1),c.optimize(),""===c.startContainer.getHtml()&&c.startContainer.appendBogus(),c.select(),b=!0):b=!1;if(!b)return;return a.getSelection().scrollIntoView(),a.fire("saveSnapshot"),!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var a;if(a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());if(!this.is("textarea")){a=this.getDocument();var b=a.getHead();if(b.getCustomData("stylesheet")){var c=a.getCustomData("stylesheet_ref");--c?a.setCustomData("stylesheet_ref",c):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;return b&&a?0:(arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null)),b)},CKEDITOR.on("instanceLoaded",function(b){var c=b.editor;c.on("insertElement",function(a){a=a.data,a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))}),c.on("selectionChange",function(b){if(!c.readOnly){var d=c.getSelection();d&&!d.isLocked&&(d=c.checkDirty(),c.fire("lockSnapshot"),a(b),c.fire("unlockSnapshot"),!d&&c.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=b.editable();if(a&&a.isInline()){var c=b.title;a.changeAttr("role","textbox"),a.changeAttr("aria-label",c),c&&a.changeAttr("title",c);var d=b.fire("ariaEditorHelpLabel",{}).label;if(d&&(c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var g=CKEDITOR.tools.getNextId(),d=CKEDITOR.dom.element.createFromHtml('<span id="'+g+'" class="cke_voice_label">'+d+"</span>");c.append(d),a.changeAttr("aria-describedby",g)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var g=CKEDITOR.dom.walker.whitespaces(!0),n=CKEDITOR.dom.walker.bookmark(!1,!0),q=CKEDITOR.dom.walker.empty(),t=CKEDITOR.dom.walker.bogus(),u=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,p=function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT}function b(c,d){var g,e,f,k,h=[],l=d.range.startContainer;g=d.range.startPath();for(var l=m[l.getName()],n=0,u=c.getChildren(),w=u.count(),r=-1,t=-1,y=0,p=g.contains(m.$list);w>n;++n)g=u.getItem(n),a(g)?(f=g.getName(),p&&f in CKEDITOR.dtd.$list?h=h.concat(b(g,d)):(k=!!l[f],"br"!=f||!g.data("cke-eol")||n&&n!=w-1||(y=(e=n?h[n-1].node:u.getItem(n+1))&&(!a(e)||!e.is("br")),e=e&&a(e)&&m.$block[e.getName()]),-1!=r||k||(r=n),k||(t=n),h.push({isElement:1,isLineBreak:y,isBlock:g.isBlockBoundary(),hasBlockSibling:e,node:g,name:f,allowed:k}),e=y=0)):h.push({isElement:0,node:g,allowed:1});return r>-1&&(h[r].firstNotAllowed=1),t>-1&&(h[t].lastNotAllowed=1),h}function d(b,c){var k,g=[],e=b.getChildren(),f=e.count(),h=0,l=m[c],n=!b.is(m.$inline)||b.is("br");for(n&&g.push(" ");f>h;h++)k=e.getItem(h),a(k)&&!k.is(l)?g=g.concat(d(k,c)):g.push(k);return n&&g.push(" "),g}function g(b){return a(b.startContainer)&&b.startContainer.getChild(b.startOffset-1)}function e(b){return b&&a(b)&&(b.is(m.$removeEmpty)||b.is("a")&&!b.isBlockBoundary())}function k(b,c,d,g){var f,h,e=b.clone();e.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),(f=new CKEDITOR.dom.walker(e).next())&&a(f)&&n[f.getName()]&&(h=f.getPrevious())&&a(h)&&!h.getParent().equals(b.startContainer)&&d.contains(h)&&g.contains(f)&&f.isIdentical(h)&&(f.moveChildren(h),f.remove(),k(b,c,d,g))}function h(b,c){function d(b,c){return c.isBlock&&c.isElement&&!c.node.is("br")&&a(b)&&b.is("br")?(b.remove(),1):void 0}var g=c.endContainer.getChild(c.endOffset),e=c.endContainer.getChild(c.endOffset-1);g&&d(g,b[b.length-1]),e&&d(e,b[0])&&(c.setEnd(c.endContainer,c.endOffset-1),c.collapse())}var m=CKEDITOR.dtd,n={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},u={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},w=CKEDITOR.tools.extend({},m.$inline);return delete w.br,function(n,F,r,t){var p=n.editor,q=!1;if("unfiltered_html"==F&&(F="html",q=!0),!t.checkReadOnly()){var z=new CKEDITOR.dom.elementPath(t.startContainer,t.root).blockLimit||t.root;n={type:F,dontFilter:q,editable:n,editor:p,range:t,blockLimit:z,mergeCandidates:[],zombies:[]},F=n.range,t=n.mergeCandidates;var E,M;if("text"==n.type&&F.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(E=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",F.document),F.insertNode(E),F.setStartAfter(E)),q=new CKEDITOR.dom.elementPath(F.startContainer),n.endPath=z=new CKEDITOR.dom.elementPath(F.endContainer),!F.collapsed){var p=z.block||z.blockLimit,W=F.getCommonAncestor();p&&!p.equals(W)&&!p.contains(W)&&F.checkEndOfBlock()&&n.zombies.push(p),F.deleteContents()}for(;(M=g(F))&&a(M)&&M.isBlockBoundary()&&q.contains(M);)F.moveToPosition(M,CKEDITOR.POSITION_BEFORE_END);for(k(F,n.blockLimit,q,z),E&&(F.setEndBefore(E),F.collapse(),E.remove()),E=F.startPath(),(p=E.contains(e,!1,1))&&(F.splitElement(p),n.inlineStylesRoot=p,n.inlineStylesPeak=E.lastElement),E=F.createBookmark(),(p=E.startNode.getPrevious(c))&&a(p)&&e(p)&&t.push(p),(p=E.startNode.getNext(c))&&a(p)&&e(p)&&t.push(p),p=E.startNode;(p=p.getParent())&&e(p);)t.push(p);if(F.moveToBookmark(E),E=r){if(E=n.range,"text"==n.type&&n.inlineStylesRoot){for(M=n.inlineStylesPeak,F=M.getDocument().createText("{cke-peak}"),t=n.inlineStylesRoot.getParent();!M.equals(t);)F=F.appendTo(M.clone()),M=M.getParent();r=F.getOuterHtml().split("{cke-peak}").join(r)}if(M=n.blockLimit.getName(),/^\s+|\s+$/.test(r)&&"span"in CKEDITOR.dtd[M]){var U='<span data-cke-marker="1">&nbsp;</span>';r=U+r+U}if(r=n.editor.dataProcessor.toHtml(r,{context:null,fixForBody:!1,protectedWhitespaces:!!U,dontFilter:n.dontFilter,filter:n.editor.activeFilter,enterMode:n.editor.activeEnterMode}),M=E.document.createElement("body"),M.setHtml(r),U&&(M.getFirst().remove(),M.getLast().remove()),(U=E.startPath().block)&&(1!=U.getChildCount()||!U.getBogus()))a:{var J;if(1==M.getChildCount()&&a(J=M.getFirst())&&J.is(u)&&!J.hasAttribute("contenteditable")){for(U=J.getElementsByTag("*"),E=0,t=U.count();t>E;E++)if(F=U.getItem(E),!F.is(w))break a;J.moveChildren(J.getParent(1)),J.remove()}}n.dataWrapper=M,E=r}if(E){J=n.range,E=J.document;var L;M=n.blockLimit,t=0;var S,Q,aa,U=[];r=p=0;var V,da;F=J.startContainer;var ba,q=n.endPath.elements[0],z=q.getPosition(F),W=!(!q.getCommonAncestor(F)||z==CKEDITOR.POSITION_IDENTICAL||z&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);for(F=b(n.dataWrapper,n),h(F,J);t<F.length;t++){if(z=F[t],L=z.isLineBreak){L=J,V=M;var X=void 0,ea=void 0;z.hasBlockSibling?L=1:(X=L.startContainer.getAscendant(m.$block,1))&&X.is({div:1,p:1})?(ea=X.getPosition(V),ea==CKEDITOR.POSITION_IDENTICAL||ea==CKEDITOR.POSITION_CONTAINS?L=0:(V=L.splitElement(X),L.moveToPosition(V,CKEDITOR.POSITION_AFTER_START),L=1)):L=0}if(L)r=t>0;else{if(L=J.startPath(),!z.isBlock&&l(n.editor,L.block,L.blockLimit)&&(aa=f(n.editor))&&(aa=E.createElement(aa),aa.appendBogus(),J.insertNode(aa),CKEDITOR.env.needsBrFiller&&(S=aa.getBogus())&&S.remove(),J.moveToPosition(aa,CKEDITOR.POSITION_BEFORE_END)),(L=J.startPath().block)&&!L.equals(Q)&&((S=L.getBogus())&&(S.remove(),U.push(L)),Q=L),z.firstNotAllowed&&(p=1),p&&z.isElement){for(L=J.startContainer,V=null;L&&!m[L.getName()][z.name];){if(L.equals(M)){L=null;break}V=L,L=L.getParent()}if(L)V&&(da=J.splitElement(V),n.zombies.push(da),n.zombies.push(V));else{V=M.getName(),ba=!t,L=t==F.length-1,V=d(z.node,V);for(var X=[],ea=V.length,ca=0,ga=void 0,fa=0,ia=-1;ea>ca;ca++)ga=V[ca]," "==ga?(fa||ba&&!ca||(X.push(new CKEDITOR.dom.text(" ")),ia=X.length),fa=1):(X.push(ga),fa=0);L&&ia==X.length&&X.pop(),ba=X}}if(ba){for(;L=ba.pop();)J.insertNode(L);ba=0}else J.insertNode(z.node);z.lastNotAllowed&&t<F.length-1&&((da=W?q:da)&&J.setEndAt(da,CKEDITOR.POSITION_AFTER_START),p=0),J.collapse()}}1!=F.length?S=!1:(S=F[0],S=S.isElement&&"false"==S.node.getAttribute("contenteditable")),S&&(r=!0,L=F[0].node,J.setStartAt(L,CKEDITOR.POSITION_BEFORE_START),J.setEndAt(L,CKEDITOR.POSITION_AFTER_END)),n.dontMoveCaret=r,n.bogusNeededBlocks=U}S=n.range;var Z;for(da=n.bogusNeededBlocks,ba=S.createBookmark();Q=n.zombies.pop();)Q.getParent()&&(aa=S.clone(),aa.moveToElementEditStart(Q),aa.removeEmptyBlocksAtEnd());if(da)for(;Q=da.pop();)CKEDITOR.env.needsBrFiller?Q.appendBogus():Q.append(S.document.createText(" "));for(;Q=n.mergeCandidates.pop();)Q.mergeSiblings();if(S.moveToBookmark(ba),!n.dontMoveCaret){for(Q=g(S);Q&&a(Q)&&!Q.is(m.$empty);){if(Q.isBlockBoundary())S.moveToPosition(Q,CKEDITOR.POSITION_BEFORE_END);else{if(e(Q)&&Q.getHtml().match(/(\s|&nbsp;)$/g)){Z=null;break}Z=S.clone(),Z.moveToPosition(Q,CKEDITOR.POSITION_BEFORE_END)}Q=Q.getLast(c)}Z&&S.moveToRange(Z)}}}}(),r=function(){function a(b){return b=new CKEDITOR.dom.walker(b),b.guard=function(a,b){return b?!1:a.type==CKEDITOR.NODE_ELEMENT?a.is(CKEDITOR.dtd.$tableContent):void 0},b.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT},b}function b(a,c,d){return c=a.getDocument().createElement(c),a.append(c,d),c}function c(a){var d,b=a.count();for(b;0<b--;)d=a.getItem(b),CKEDITOR.tools.trim(d.getHtml())||(d.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&d.getChildCount()&&d.getFirst().remove())}return function(d){var g=d.startContainer,e=g.getAscendant("table",1),f=!1;c(e.getElementsByTag("td")),c(e.getElementsByTag("th")),e=d.clone(),e.setStart(g,0),e=a(e).lastBackward(),e||(e=d.clone(),e.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),e=a(e).lastForward(),f=!0),e||(e=g),e.is("table")?(d.setStartAt(e,CKEDITOR.POSITION_BEFORE_START),d.collapse(!0),e.remove()):(e.is({tbody:1,thead:1,tfoot:1})&&(e=b(e,"tr",f)),e.is("tr")&&(e=b(e,e.getParent().is("thead")?"th":"td",f)),(g=e.getBogus())&&g.remove(),d.moveToPosition(e,f?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),w={eol:{detect:function(a,b){var c=a.range,d=c.clone(),g=c.clone(),e=new CKEDITOR.dom.elementPath(c.startContainer,b),f=new CKEDITOR.dom.elementPath(c.endContainer,b);d.collapse(1),g.collapse(),e.block&&d.checkBoundaryOfElement(e.block,CKEDITOR.END)&&(c.setStartAfter(e.block),a.prependEolBr=1),f.block&&g.checkBoundaryOfElement(f.block,CKEDITOR.START)&&(c.setEndBefore(f.block),a.appendEolBr=1)},fix:function(a,b){var d,c=b.getDocument();a.appendEolBr&&(d=this.createEolBr(c),a.fragment.append(d)),!a.prependEolBr||d&&!d.getPrevious()||a.fragment.append(this.createEolBr(c),1)},createEolBr:function(a){return a.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(a){var b=a.range.getBoundaryNodes(),c=b.startNode,b=b.endNode;!b||!t(b)||c&&c.equals(b)||a.range.setEndBefore(b)}},tree:{rebuild:function(a,b){var f,c=a.range,d=c.getCommonAncestor(),g=new CKEDITOR.dom.elementPath(d,b),e=new CKEDITOR.dom.elementPath(c.startContainer,b),c=new CKEDITOR.dom.elementPath(c.endContainer,b);if(d.type==CKEDITOR.NODE_TEXT&&(d=d.getParent()),g.blockLimit.is({tr:1,table:1})){var k=g.contains("table").getParent();f=function(a){return!a.equals(k)}}else if(g.block&&g.block.is(CKEDITOR.dtd.$listItem)&&(e=e.contains(CKEDITOR.dtd.$list),c=c.contains(CKEDITOR.dtd.$list),!e.equals(c))){var h=g.contains(CKEDITOR.dtd.$list).getParent();f=function(a){return!a.equals(h)}}f||(f=function(a){return!a.equals(g.block)&&!a.equals(g.blockLimit)}),this.rebuildFragment(a,b,d,f)},rebuildFragment:function(a,b,c,d){for(var g;c&&!c.equals(b)&&d(c);)g=c.clone(0,1),a.fragment.appendTo(g),a.fragment=g,c=c.getParent()}},cell:{shrink:function(a){a=a.range;var b=a.startContainer,c=a.endContainer,d=a.startOffset,g=a.endOffset;b.type==CKEDITOR.NODE_ELEMENT&&b.equals(c)&&b.is("tr")&&++d==g&&a.shrink(CKEDITOR.SHRINK_TEXT)}}},z=function(){function a(b,c){var d=b.getParent();d.is(CKEDITOR.dtd.$inline)&&b[c?"insertBefore":"insertAfter"](d)}function b(c,d,g){a(d),a(g,1);for(var e;e=g.getNext();)e.insertAfter(d),d=e;q(c)&&c.remove()}function c(a,b){var d=new CKEDITOR.dom.range(a);return d.setStartAfter(b.startNode),d.setEndBefore(b.endNode),d}return{list:{detectMerge:function(a,b){var d=c(b,a.bookmark),g=d.startPath(),e=d.endPath(),f=g.contains(CKEDITOR.dtd.$list),k=e.contains(CKEDITOR.dtd.$list);a.mergeList=f&&k&&f.getParent().equals(k.getParent())&&!f.equals(k),a.mergeListItems=g.block&&e.block&&g.block.is(CKEDITOR.dtd.$listItem)&&e.block.is(CKEDITOR.dtd.$listItem),(a.mergeList||a.mergeListItems)&&(d=d.clone(),d.setStartBefore(a.bookmark.startNode),d.setEndAfter(a.bookmark.endNode),a.mergeListBookmark=d.createBookmark())},merge:function(a,c){if(a.mergeListBookmark){var d=a.mergeListBookmark.startNode,g=a.mergeListBookmark.endNode,e=new CKEDITOR.dom.elementPath(d,c),f=new CKEDITOR.dom.elementPath(g,c);if(a.mergeList){var k=e.contains(CKEDITOR.dtd.$list),h=f.contains(CKEDITOR.dtd.$list);k.equals(h)||(h.moveChildren(k),h.remove())}a.mergeListItems&&(e=e.contains(CKEDITOR.dtd.$listItem),f=f.contains(CKEDITOR.dtd.$listItem),e.equals(f)||b(f,d,g)),d.remove(),g.remove()}}},block:{detectMerge:function(a,b){if(!a.tableContentsRanges&&!a.mergeListBookmark){var c=new CKEDITOR.dom.range(b);c.setStartBefore(a.bookmark.startNode),c.setEndAfter(a.bookmark.endNode),a.mergeBlockBookmark=c.createBookmark()}},merge:function(a,c){if(a.mergeBlockBookmark&&!a.purgeTableBookmark){var d=a.mergeBlockBookmark.startNode,g=a.mergeBlockBookmark.endNode,e=new CKEDITOR.dom.elementPath(d,c),f=new CKEDITOR.dom.elementPath(g,c),e=e.block,f=f.block;e&&f&&!e.equals(f)&&b(f,d,g),d.remove(),g.remove()}}},table:function(){function a(c){var e,g=[],f=new CKEDITOR.dom.walker(c),k=c.startPath().contains(d),h=c.endPath().contains(d),l={};return f.guard=function(a,f){if(a.type==CKEDITOR.NODE_ELEMENT){var m="visited_"+(f?"out":"in");if(a.getCustomData(m))return;CKEDITOR.dom.element.setMarker(l,a,m,1)}f&&k&&a.equals(k)?(e=c.clone(),e.setEndAt(k,CKEDITOR.POSITION_BEFORE_END),g.push(e)):!f&&h&&a.equals(h)?(e=c.clone(),e.setStartAt(h,CKEDITOR.POSITION_AFTER_START),g.push(e)):((m=!f)&&(m=a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&(!k||b(a,k))&&(!h||b(a,h))),m&&(e=c.clone(),e.selectNodeContents(a),g.push(e)))},f.lastForward(),CKEDITOR.dom.element.clearAllMarkers(l),g}function b(a,c){var d=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,g=a.getPosition(c);return g===CKEDITOR.POSITION_IDENTICAL?!1:0===(g&d)}var d={td:1,th:1,caption:1};return{detectPurge:function(a){var b=a.range,c=b.clone();c.enlarge(CKEDITOR.ENLARGE_ELEMENT);var c=new CKEDITOR.dom.walker(c),g=0;if(c.evaluator=function(a){a.type==CKEDITOR.NODE_ELEMENT&&a.is(d)&&++g},c.checkForward(),g>1){var c=b.startPath().contains("table"),e=b.endPath().contains("table");c&&e&&b.checkBoundaryOfElement(c,CKEDITOR.START)&&b.checkBoundaryOfElement(e,CKEDITOR.END)&&(b=a.range.clone(),b.setStartBefore(c),b.setEndAfter(e),a.purgeTableBookmark=b.createBookmark())}},detectRanges:function(g,e){var h,l,f=c(e,g.bookmark),k=f.clone(),m=f.getCommonAncestor();m.is(CKEDITOR.dtd.$tableContent)&&!m.is(d)&&(m=m.getAscendant("table",!0)),l=m,m=new CKEDITOR.dom.elementPath(f.startContainer,l),l=new CKEDITOR.dom.elementPath(f.endContainer,l),m=m.contains("table"),l=l.contains("table"),(m||l)&&(m&&l&&b(m,l)?(g.tableSurroundingRange=k,k.setStartAt(m,CKEDITOR.POSITION_AFTER_END),k.setEndAt(l,CKEDITOR.POSITION_BEFORE_START),k=f.clone(),k.setEndAt(m,CKEDITOR.POSITION_AFTER_END),h=f.clone(),h.setStartAt(l,CKEDITOR.POSITION_BEFORE_START),h=a(k).concat(a(h))):m?l||(g.tableSurroundingRange=k,k.setStartAt(m,CKEDITOR.POSITION_AFTER_END),f.setEndAt(m,CKEDITOR.POSITION_AFTER_END)):(g.tableSurroundingRange=k,k.setEndAt(l,CKEDITOR.POSITION_BEFORE_START),f.setStartAt(l,CKEDITOR.POSITION_AFTER_START)),g.tableContentsRanges=h?h:a(f))},deleteRanges:function(a){for(var b;b=a.tableContentsRanges.pop();)b.extractContents(),q(b.startContainer)&&b.startContainer.appendBogus();a.tableSurroundingRange&&a.tableSurroundingRange.extractContents()},purge:function(a){if(a.purgeTableBookmark){var b=a.doc,c=a.range.clone(),b=b.createElement("p");b.insertBefore(a.purgeTableBookmark.startNode),c.moveToBookmark(a.purgeTableBookmark),c.deleteContents(),a.range.moveToPosition(b,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(a){return!(a.range.startPath().contains(CKEDITOR.dtd.$listItem)&&a.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(a){a.startContainer.getDtd()["#"]||a.moveToClosestEditablePosition(null,!0)},autoParagraph:function(a,b){var d,c=b.startPath();l(a,c.block,c.blockLimit)&&(d=f(a))&&(d=b.document.createElement(d),d.appendBogus(),b.insertNode(d),b.moveToPosition(d,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function a(){var b,a=this._.fakeSelection;a&&(b=this.getSelection(1),b&&b.isHidden()||(a.reset(),a=0)),(a||(a=b||this.getSelection(1),a&&a.getType()!=CKEDITOR.SELECTION_NONE))&&(this.fire("selectionCheck",a),b=this.elementPath(),b.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=b,this.fire("selectionChange",{selection:a,path:b})))}function e(){u=!0,t||(b.call(this),t=CKEDITOR.tools.setTimeout(b,200,this))}function b(){t=null,u&&(CKEDITOR.tools.setTimeout(a,0,this),u=!1)}function c(a){return!(!p(a)&&(a.type!=CKEDITOR.NODE_ELEMENT||a.is(CKEDITOR.dtd.$empty)))}function d(a){function b(c,d){return c&&c.type!=CKEDITOR.NODE_TEXT?a.clone()["moveToElementEdit"+(d?"End":"Start")](c):!1}if(!(a.root instanceof CKEDITOR.editable))return!1;var d=a.startContainer,g=a.getPreviousNode(c,null,d),e=a.getNextNode(c,null,d);return!(!b(g)&&!b(e,1)&&(g||e||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()&&d.getBogus()))}function m(a){return a.getCustomData("cke-fillingChar")}function l(a,b){var c=a&&a.removeCustomData("cke-fillingChar");if(c){if(!1!==b){var d,g=a.getDocument().getSelection().getNative(),e=g&&"None"!=g.type&&g.getRangeAt(0);1<c.getLength()&&e&&e.intersectsNode(c.$)&&(d=h(g),e=g.focusNode==c.$&&0<g.focusOffset,g.anchorNode==c.$&&0<g.anchorOffset&&d[0].offset--,e&&d[1].offset--)}c.setText(f(c.getText())),d&&k(a.getDocument().$,d)}}function f(a){return a.replace(/\u200B( )?/g,function(a){return a[1]?" ":""})}function h(a){return[{node:a.anchorNode,offset:a.anchorOffset},{node:a.focusNode,offset:a.focusOffset}]}function k(a,b){var c=a.getSelection(),d=a.createRange();d.setStart(b[0].node,b[0].offset),d.collapse(!0),c.removeAllRanges(),c.addRange(d),c.extend(b[1].node,b[1].offset)}function g(a){var b=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',a.document);a.fire("lockSnapshot"),a.editable().append(b);var c=a.getSelection(1),d=a.createRange(),g=c.root.on("selectionchange",function(a){a.cancel()},null,null,0);d.setStartAt(b,CKEDITOR.POSITION_AFTER_START),d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END),c.selectRanges([d]),g.removeListener(),a.fire("unlockSnapshot"),a._.hiddenSelectionContainer=b}function n(a){var b={37:1,39:1,8:1,46:1};return function(c){var d=c.data.getKeystroke();if(b[d]){var g=a.getSelection().getRanges(),e=g[0];1==g.length&&e.collapsed&&(d=e[38>d?"getPreviousEditableNode":"getNextEditableNode"]())&&d.type==CKEDITOR.NODE_ELEMENT&&"false"==d.getAttribute("contenteditable")&&(a.getSelection().fake(d),c.data.preventDefault(),c.cancel())}}}function q(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.getCommonAncestor().isReadOnly()&&a.splice(b,1),!c.collapsed){if(c.startContainer.isReadOnly())for(var g,d=c.startContainer;d&&!((g=d.type==CKEDITOR.NODE_ELEMENT)&&d.is("body")||!d.isReadOnly());)g&&"false"==d.getAttribute("contentEditable")&&c.setStartAfter(d),d=d.getParent();d=c.startContainer,g=c.endContainer;var e=c.startOffset,f=c.endOffset,k=c.clone();d&&d.type==CKEDITOR.NODE_TEXT&&(e>=d.getLength()?k.setStartAfter(d):k.setStartBefore(d)),g&&g.type==CKEDITOR.NODE_TEXT&&(f?k.setEndAfter(g):k.setEndBefore(g)),d=new CKEDITOR.dom.walker(k),d.evaluator=function(d){if(d.type==CKEDITOR.NODE_ELEMENT&&d.isReadOnly()){var g=c.clone();return c.setEndBefore(d),c.collapsed&&a.splice(b--,1),d.getPosition(k.endContainer)&CKEDITOR.POSITION_CONTAINS||(g.setStartAfter(d),g.collapsed||a.splice(b+1,0,g)),!0}return!1},d.next()}}return a}var t,u,p=CKEDITOR.dom.walker.invisible(1),r=function(){function a(b){return function(a){var c=a.editor.createRange();return c.moveToClosestEditablePosition(a.selected,b)&&a.editor.getSelection().selectRanges([c]),!1}}function b(a){return function(b){var g,c=b.editor,d=c.createRange();return(g=d.moveToClosestEditablePosition(b.selected,a))||(g=d.moveToClosestEditablePosition(b.selected,!a)),g&&c.getSelection().selectRanges([d]),c.fire("saveSnapshot"),b.selected.remove(),g||(d.moveToElementEditablePosition(c.editable()),c.getSelection().selectRanges([d])),c.fire("saveSnapshot"),!1}}var c=a(),d=a(1);return{37:c,38:c,39:d,40:d,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",function(b){function c(){var a=d.getSelection();a&&a.removeAllRanges()}var d=b.editor;d.on("contentDom",function(){function b(){r=new CKEDITOR.dom.selection(d.getSelection()),r.lock()}function c(){f.removeListener("mouseup",c),m.removeListener("mouseup",c);var a=CKEDITOR.document.$.selection,b=a.createRange();"None"!=a.type&&b.parentElement().ownerDocument==g.$&&b.select()}var F,r,g=d.document,f=CKEDITOR.document,k=d.editable(),h=g.getBody(),m=g.getDocumentElement(),u=k.isInline();if(CKEDITOR.env.gecko&&k.attachListener(k,"focus",function(a){a.removeListener(),0!==F&&(a=d.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==k.$&&(a=d.createRange(),a.moveToElementEditStart(k),a.select())},null,null,-2),k.attachListener(k,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){F&&CKEDITOR.env.webkit&&(F=d._.previousActive&&d._.previousActive.equals(g.getActive())),d.unlockSelection(F),F=0},null,null,-1),k.attachListener(k,"mousedown",function(){F=0}),(CKEDITOR.env.ie||u)&&(w?k.attachListener(k,"beforedeactivate",b,null,null,-1):k.attachListener(d,"selectionCheck",b,null,null,-1),k.attachListener(k,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){d.lockSelection(r),F=1},null,null,-1),k.attachListener(k,"mousedown",function(){F=0})),CKEDITOR.env.ie&&!u){var v;k.attachListener(k,"mousedown",function(a){2==a.data.$.button&&((a=d.document.getSelection())&&a.getType()!=CKEDITOR.SELECTION_NONE||(v=d.window.getScrollPosition()))}),k.attachListener(k,"mouseup",function(a){2==a.data.$.button&&v&&(d.document.$.documentElement.scrollLeft=v.x,d.document.$.documentElement.scrollTop=v.y),v=null}),"BackCompat"!=g.$.compatMode&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&m.on("mousedown",function(a){function b(a){if(a=a.data.$,d){var c=h.$.createTextRange();try{c.moveToPoint(a.clientX,a.clientY)}catch(g){}d.setEndPoint(0>e.compareEndPoints("StartToStart",c)?"EndToEnd":"StartToStart",c),d.select()}}function c(){m.removeListener("mousemove",b),f.removeListener("mouseup",c),m.removeListener("mouseup",c),d.select()}if(a=a.data,a.getTarget().is("html")&&a.$.y<m.$.clientHeight&&a.$.x<m.$.clientWidth){var d=h.$.createTextRange();try{d.moveToPoint(a.$.clientX,a.$.clientY)}catch(g){}var e=d.duplicate();m.on("mousemove",b),f.on("mouseup",c),m.on("mouseup",c)}}),7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&m.on("mousedown",function(a){a.data.getTarget().is("html")&&(f.on("mouseup",c),m.on("mouseup",c))}))}if(k.attachListener(k,"selectionchange",a,d),k.attachListener(k,"keyup",e,d),k.attachListener(k,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){d.forceNextSelectionCheck(),d.selectionChange(1)}),u&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var t;k.attachListener(k,"mousedown",function(){t=1}),k.attachListener(g.getDocumentElement(),"mouseup",function(){t&&e.call(d),t=0});
}else k.attachListener(CKEDITOR.env.ie?k:g.getDocumentElement(),"mouseup",e,d);CKEDITOR.env.webkit&&k.attachListener(g,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:l(k)}},null,null,-1),k.attachListener(k,"keydown",n(d),null,null,-1)}),d.on("setData",function(){d.unlockSelection(),CKEDITOR.env.webkit&&c()}),d.on("contentDomUnload",function(){d.unlockSelection()}),CKEDITOR.env.ie9Compat&&d.on("beforeDestroy",c,null,null,9),d.on("dataReady",function(){delete d._.fakeSelection,delete d._.hiddenSelectionContainer,d.selectionChange(1)}),d.on("loadSnapshot",function(){var a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),b=d.editable().getLast(a);b&&b.hasAttribute("data-cke-hidden-sel")&&(b.remove(),CKEDITOR.env.gecko&&(a=d.editable().getFirst(a))&&a.is("br")&&a.getAttribute("_moz_editor_bogus_node")&&a.remove())},null,null,100),d.on("key",function(a){if("wysiwyg"==d.mode){var b=d.getSelection();if(b.isFake){var c=r[a.data.keyCode];if(c)return c({editor:d,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}})}),CKEDITOR.on("instanceReady",function(a){function b(){var a=d.editable();if(a&&(a=m(a))){var c=d.document.$.getSelection();"None"==c.type||c.anchorNode!=a.$&&c.focusNode!=a.$||(e=h(c)),g=a.getText(),a.setText(f(g))}}function c(){var a=d.editable();a&&(a=m(a))&&(a.setText(g),e&&(k(d.document.$,e),e=null))}var g,e,d=a.editor;CKEDITOR.env.webkit&&(d.on("selectionChange",function(){var a=d.editable(),b=m(a);b&&(b.getCustomData("ready")?l(a):b.setCustomData("ready",1))},null,null,-1),d.on("beforeSetMode",function(){l(d.editable())},null,null,-1),d.on("beforeUndoImage",b),d.on("afterUndoImage",c),d.on("beforeGetData",b,null,null,0),d.on("getData",c))}),CKEDITOR.editor.prototype.selectionChange=function(b){(b?a:e).call(this)},CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(a):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(a){return a=a||this.getSelection(1),a.getType()!=CKEDITOR.SELECTION_NONE?(!a.isLocked&&a.lock(),this._.savedSelection=a,!0):!1},CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return b?(b.unlock(a),delete this._.savedSelection,!0):!1},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return a.selectRanges([this]),a},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var w="function"!=typeof window.getSelection,z=1;CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection){var b=a;a=a.root}var c=a instanceof CKEDITOR.dom.element;if(this.rev=b?b.rev:z++,this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument(),this.root=c?a:this.document.getBody(),this.isLocked=0,this._={cache:{}},b)return CKEDITOR.tools.extend(this._.cache,b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;a=this.getNative();var d,g;if(a)if(a.getRangeAt)d=(g=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(g.commonAncestorContainer);else{try{g=a.createRange()}catch(e){}d=g&&CKEDITOR.dom.element.get(g.item&&g.item(0)||g.parentElement())}return(!d||d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_TEXT||!this.root.equals(d)&&!this.root.contains(d))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var B={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=w?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:w?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=CKEDITOR.SELECTION_TEXT),"Control"==d&&(b=CKEDITOR.SELECTION_ELEMENT),c.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(g){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_TEXT,c=this.getNative();if(c&&c.rangeCount){if(1==c.rangeCount){var c=c.getRangeAt(0),d=c.startContainer;d==c.endContainer&&1==d.nodeType&&1==c.endOffset-c.startOffset&&B[d.childNodes[c.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}}else b=CKEDITOR.SELECTION_NONE;return a.type=b},getRanges:function(){var a=w?function(){function a(b){return new CKEDITOR.dom.node(b).getIndex()}var b=function(b,c){b=b.duplicate(),b.collapse(c);var d=b.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};for(var e,f,n,u,g=d.children,k=b.duplicate(),h=0,l=g.length-1,m=-1;l>=h;)if(m=Math.floor((h+l)/2),e=g[m],k.moveToElementText(e),n=k.compareEndPoints("StartToStart",b),n>0)l=m-1;else{if(!(0>n))return{container:d,offset:a(e)};h=m+1}if(-1==m||m==g.length-1&&0>n){if(k.moveToElementText(d),k.setEndPoint("StartToStart",b),k=k.text.replace(/(\r\n|\r)/g,"\n").length,g=d.childNodes,!k)return e=g[g.length-1],e.nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:g.length}:{container:e,offset:e.nodeValue.length};for(d=g.length;k>0&&d>0;)f=g[--d],f.nodeType==CKEDITOR.NODE_TEXT&&(u=f,k-=f.nodeValue.length);return{container:u,offset:-k}}if(k.collapse(n>0),k.setEndPoint(n>0?"StartToStart":"EndToStart",b),k=k.text.replace(/(\r\n|\r)/g,"\n").length,!k)return{container:d,offset:a(e)+(n>0?0:1)};for(;k>0;)try{f=e[n>0?"previousSibling":"nextSibling"],f.nodeType==CKEDITOR.NODE_TEXT&&(k-=f.nodeValue.length,u=f),e=f}catch(r){return{container:d,offset:a(e)}}return{container:u,offset:n>0?-k:u.nodeValue.length+k}};return function(){var a=this.getNative(),c=a&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),d=b(c,!0),a.setStart(new CKEDITOR.dom.node(d.container),d.offset),d=b(c),a.setEnd(new CKEDITOR.dom.node(d.container),d.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(d==CKEDITOR.SELECTION_ELEMENT){for(var d=[],g=0;g<c.length;g++){for(var e=c.item(g),f=e.parentNode,k=0,a=new CKEDITOR.dom.range(this.root);k<f.childNodes.length&&f.childNodes[k]!=e;k++);a.setStart(new CKEDITOR.dom.node(f),k),a.setEnd(new CKEDITOR.dom.node(f),k+1),d.push(a)}return d}return[]}}():function(){var b,a=[],c=this.getNative();if(!c)return a;for(var d=0;d<c.rangeCount;d++){var g=c.getRangeAt(d);b=new CKEDITOR.dom.range(this.root),b.setStart(new CKEDITOR.dom.node(g.startContainer),g.startOffset),b.setEnd(new CKEDITOR.dom.node(g.endContainer),g.endOffset),a.push(b)}return a};return function(b){var c=this._.cache,d=c.ranges;return d||(c.ranges=d=new CKEDITOR.dom.rangeList(a.call(this))),b?q(new CKEDITOR.dom.rangeList(d.slice())):d}}(),getStartElement:function(){var a=this._.cache;if(void 0!==a.startElement)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];if(c){if(c.collapsed)b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(c.optimize();b=c.startContainer,c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)c.setStartAfter(b);if(b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if((b=b.getChild(c.startOffset))&&b.type==CKEDITOR.NODE_ELEMENT)for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;)b=c,c=c.getFirst();else b=c.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)},function(){for(var c,d,a=b.getRanges()[0].clone(),g=2;g&&!((c=a.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&B[c.getName()]&&(d=c));g--)a.shrink(CKEDITOR.SHRINK_ELEMENT);return d&&d.$});return a.selectedElement=c?new CKEDITOR.dom.element(c):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative(),b=w?"Control"==b.type?"":b.createRange().text:b.toString();return a.selectedText=b},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),c=!b&&this.getRanges(),d=this.isFake;this.isLocked=0,this.reset(),a&&(a=b||c[0]&&c[0].getCommonAncestor())&&a.getAscendant("body",1)&&(d?this.fake(b):b?this.selectElement(b):this.selectRanges(c))}},reset:function(){this._.cache={},this.isFake=0;var a=this.root.editor;if(a&&a._.fakeSelection)if(this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var c=a.checkDirty();a.fire("lockSnapshot"),b.remove(),a.fire("unlockSnapshot"),!c&&a.resetDirty()}delete a._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=z++},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a),b.setEndAfter(a),this.selectRanges([b])},selectRanges:function(a){var b=this.root.editor,b=b&&b._.hiddenSelectionContainer;if(this.reset(),b)for(var c,b=this.root,g=0;g<a.length;++g)c=a[g],c.endContainer.equals(b)&&(c.endOffset=Math.min(c.endOffset,b.getChildCount()));if(a.length)if(this.isLocked){var e=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(a),this.lock(),e&&!e.equals(this.root)&&e.focus()}else{var f,k,h;if(1==a.length&&!(h=a[0]).collapsed&&(f=h.getEnclosedNode())&&f.type==CKEDITOR.NODE_ELEMENT&&(h=h.clone(),h.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(k=h.getEnclosedNode())&&k.type==CKEDITOR.NODE_ELEMENT&&(f=k),"false"==f.getAttribute("contenteditable"))||(f=void 0),f)this.fake(f);else{if(w){h=CKEDITOR.dom.walker.whitespaces(!0),k=/\ufeff|\u00a0/,b={table:1,tbody:1,tr:1},1<a.length&&(f=a[a.length-1],a[0].setEnd(f.endContainer,f.endOffset)),f=a[0],a=f.collapsed;var m,n,u;if((c=f.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in B&&(!c.is("a")||!c.getText()))try{return u=c.$.createControlRange(),u.addElement(c.$),void u.select()}catch(F){}(f.startContainer.type==CKEDITOR.NODE_ELEMENT&&f.startContainer.getName()in b||f.endContainer.type==CKEDITOR.NODE_ELEMENT&&f.endContainer.getName()in b)&&(f.shrink(CKEDITOR.NODE_ELEMENT,!0),a=f.collapsed),u=f.createBookmark(),b=u.startNode,a||(e=u.endNode),u=f.document.$.body.createTextRange(),u.moveToElementText(b.$),u.moveStart("character",1),e?(k=f.document.$.body.createTextRange(),k.moveToElementText(e.$),u.setEndPoint("EndToEnd",k),u.moveEnd("character",-1)):(m=b.getNext(h),n=b.hasAscendant("pre"),m=!(m&&m.getText&&m.getText().match(k))&&(n||!b.hasPrevious()||b.getPrevious().is&&b.getPrevious().is("br")),n=f.document.createElement("span"),n.setHtml("&#65279;"),n.insertBefore(b),m&&f.document.createText("\ufeff").insertBefore(b)),f.setStartBefore(b),b.remove(),a?(m?(u.moveStart("character",-1),u.select(),f.document.$.selection.clear()):u.select(),f.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START),n.remove()):(f.setEndBefore(e),e.remove(),u.select())}else{if(e=this.getNative(),!e)return;for(this.removeAllRanges(),u=0;u<a.length;u++)if(u<a.length-1&&(m=a[u],n=a[u+1],k=m.clone(),k.setStart(m.endContainer,m.endOffset),k.setEnd(n.startContainer,n.startOffset),!k.collapsed&&(k.shrink(CKEDITOR.NODE_ELEMENT,!0),f=k.getCommonAncestor(),k=k.getEnclosedNode(),f.isReadOnly()||k&&k.isReadOnly())))n.setStart(m.startContainer,m.startOffset),a.splice(u--,1);else{f=a[u],n=this.document.$.createRange(),f.collapsed&&CKEDITOR.env.webkit&&d(f)&&(m=this.root,l(m,!1),k=m.getDocument().createText("​"),m.setCustomData("cke-fillingChar",k),f.insertNode(k),(m=k.getNext())&&!k.getPrevious()&&m.type==CKEDITOR.NODE_ELEMENT&&"br"==m.getName()?(l(this.root),f.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START)):f.moveToPosition(k,CKEDITOR.POSITION_AFTER_END)),n.setStart(f.startContainer.$,f.startOffset);try{n.setEnd(f.endContainer.$,f.endOffset)}catch(r){if(!(0<=r.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw r;f.collapse(1),n.setEnd(f.endContainer.$,f.endOffset)}e.addRange(n)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(a){var b=this.root.editor;this.reset(),g(b);var c=this._.cache,d=new CKEDITOR.dom.range(this.root);d.setStartBefore(a),d.setEndAfter(a),c.ranges=new CKEDITOR.dom.rangeList(d),c.selectedElement=c.startElement=a,c.type=CKEDITOR.SELECTION_ELEMENT,c.selectedText=c.nativeSel=null,this.isFake=1,this.rev=z++,b._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var a=this.getCommonAncestor();return a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent()),!(!a||!a.data("cke-hidden-sel"))},createBookmarks:function(a){return a=this.getRanges().createBookmarks(a),this.isFake&&(a.isFake=1),a},createBookmarks2:function(a){return a=this.getRanges().createBookmarks2(a),this.isFake&&(a.isFake=1),a},selectBookmarks:function(a){for(var c,b=[],d=0;d<a.length;d++){var g=new CKEDITOR.dom.range(this.root);g.moveToBookmark(a[d]),b.push(g)}return a.isFake&&(c=b[0].getEnclosedNode(),c&&c.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),a.isFake=0)),a.isFake?this.fake(c):this.selectRanges(b),this},getCommonAncestor:function(){var a=this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[w?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function a(a,b){for(var c,d;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))c=a;else if(!d){var g=a.getAttribute("contentEditable");"false"==g?c=a:"true"==g&&(d=1)}return c}function e(a,b,c,d){return(a.getPosition(b)|d)==d&&(!c.childRule||c.childRule(a))}function b(c){var g=c.document;if(c.collapsed)g=w(this,g),c.insertNode(g),c.moveToPosition(g,CKEDITOR.POSITION_BEFORE_END);else{var h,f=this.element,k=this._.definition,m=k.ignoreReadonly,l=m||k.includeReadonly;null==l&&(l=c.root.getCustomData("cke_includeReadonly"));var n=CKEDITOR.dtd[f];n||(h=!0,n=CKEDITOR.dtd.span),c.enlarge(CKEDITOR.ENLARGE_INLINE,1),c.trim();var z,r=c.createBookmark(),t=r.startNode,p=r.endNode,q=t;if(!m){var v=c.getCommonAncestor(),m=a(t,v),v=a(p,v);m&&(q=m.getNextSourceNode(!0)),v&&(p=v)}for(q.getPosition(p)==CKEDITOR.POSITION_FOLLOWING&&(q=0);q;){if(m=!1,q.equals(p))q=null,m=!0;else{var B=q.type==CKEDITOR.NODE_ELEMENT?q.getName():null,v=B&&"false"==q.getAttribute("contentEditable"),y=B&&q.getAttribute("data-nostyle");if(B&&q.data("cke-bookmark")){q=q.getNextSourceNode(!0);continue}if(v&&l&&CKEDITOR.dtd.$block[B])for(var C=q,x=d(C),A=void 0,D=x.length,G=0,C=D&&new CKEDITOR.dom.range(C.getDocument());D>G;++G){var A=x[G],ga=CKEDITOR.filter.instances[A.data("cke-filter")];(ga?ga.check(this):1)&&(C.selectNodeContents(A),b.call(this,C))}if(x=B?!n[B]||y?0:v&&!l?0:e(q,p,k,H):1){if(A=q.getParent(),x=k,D=f,G=h,!A||!(A.getDtd()||CKEDITOR.dtd.span)[D]&&!G||x.parentRule&&!x.parentRule(A))m=!0;else if(z||B&&CKEDITOR.dtd.$removeEmpty[B]&&(q.getPosition(p)|H)!=H||(z=c.clone(),z.setStartBefore(q)),B=q.type,B==CKEDITOR.NODE_TEXT||v||B==CKEDITOR.NODE_ELEMENT&&!q.getChildCount()){for(var fa,B=q;(m=!B.getNext(E))&&(fa=B.getParent(),n[fa.getName()])&&e(fa,t,k,K);)B=fa;z.setEndAfter(B)}}else m=!0;q=q.getNextSourceNode(y||v)}if(m&&z&&!z.collapsed){for(var I,Z,ha,m=w(this,g),v=m.hasAttributes(),y=z.getCommonAncestor(),B={},x={},A={},D={};m&&y;){if(y.getName()==f){for(I in k.attributes)!D[I]&&(ha=y.getAttribute(Z))&&(m.getAttribute(I)==ha?x[I]=1:D[I]=1);for(Z in k.styles)!A[Z]&&(ha=y.getStyle(Z))&&(m.getStyle(Z)==ha?B[Z]=1:A[Z]=1)}y=y.getParent()}for(I in x)m.removeAttribute(I);for(Z in B)m.removeStyle(Z);v&&!m.hasAttributes()&&(m=null),m?(z.extractContents().appendTo(m),z.insertNode(m),u.call(this,m),m.mergeSiblings(),CKEDITOR.env.ie||m.$.normalize()):(m=new CKEDITOR.dom.element("span"),z.extractContents().appendTo(m),z.insertNode(m),u.call(this,m),m.remove(!0)),z=null}}c.moveToBookmark(r),c.shrink(CKEDITOR.SHRINK_TEXT),c.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function c(a){function b(){for(var a=new CKEDITOR.dom.elementPath(d.getParent()),c=new CKEDITOR.dom.elementPath(m.getParent()),g=null,e=null,f=0;f<a.elements.length;f++){var k=a.elements[f];if(k==a.block||k==a.blockLimit)break;l.checkElementRemovable(k,!0)&&(g=k)}for(f=0;f<c.elements.length&&(k=c.elements[f],k!=c.block&&k!=c.blockLimit);f++)l.checkElementRemovable(k,!0)&&(e=k);e&&m.breakParent(e),g&&d.breakParent(g)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var c=a.createBookmark(),d=c.startNode;if(a.collapsed){for(var e,k,g=new CKEDITOR.dom.elementPath(d.getParent(),a.root),f=0;f<g.elements.length&&(k=g.elements[f])&&k!=g.block&&k!=g.blockLimit;f++)if(this.checkElementRemovable(k)){var h;a.collapsed&&(a.checkBoundaryOfElement(k,CKEDITOR.END)||(h=a.checkBoundaryOfElement(k,CKEDITOR.START)))?(e=k,e.match=h?"start":"end"):(k.mergeSiblings(),k.is(this.element)?t.call(this,k):p(k,v(this)[k.getName()]))}if(e){for(k=d,f=0;h=g.elements[f],!h.equals(e);f++)h.match||(h=h.clone(),h.append(k),k=h);k["start"==e.match?"insertBefore":"insertAfter"](e)}}else{var m=c.endNode,l=this;for(b(),g=d;!g.equals(m);)e=g.getNextSourceNode(),g.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(g)&&(g.getName()==this.element?t.call(this,g):p(g,v(this)[g.getName()]),e.type==CKEDITOR.NODE_ELEMENT&&e.contains(d)&&(b(),e=d.getNext())),g=e}a.moveToBookmark(c),a.shrink(CKEDITOR.NODE_ELEMENT,!0)}function d(a){var b=[];return a.forEach(function(a){return"true"==a.getAttribute("contenteditable")?(b.push(a),!1):void 0},CKEDITOR.NODE_ELEMENT,!0),b}function m(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1))&&!a.isReadOnly()&&z(a,this)}function l(a){var b=a.getCommonAncestor(!0,!0);if(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1)){var b=this._.definition,c=b.attributes;if(c)for(var d in c)a.removeAttribute(d,c[d]);if(b.styles)for(var g in b.styles)b.styles.hasOwnProperty(g)&&a.removeStyle(g)}}function f(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0,this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var d,e,g=a.document;d=c.getNextParagraph();)!d.isReadOnly()&&(c.activeFilter?c.activeFilter.check(this):1)&&(e=w(this,g,d),k(d,e));a.moveToBookmark(b)}function h(a){var b=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0,c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d,g;d=c.getNextParagraph();)this.checkElementRemovable(d)&&(d.is("pre")?((g=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&d.copyAttributes(g),k(d,g)):t.call(this,d));a.moveToBookmark(b)}function k(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),f=!d&&e;if(d&&!e){if(e=b,(f=a.getBogus())&&f.remove(),f=a.getHtml(),f=n(f,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),f=f.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),f=f.replace(/([ \t\n\r]+|&nbsp;)/g," "),f=f.replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var k=a.getDocument().createElement("div");k.append(e),e.$.outerHTML="<pre>"+f+"</pre>",e.copyAttributes(k.getFirst()),e=k.getFirst().remove()}else e.setHtml(f);b=e}else f?b=q(c?[a.getHtml()]:g(a),b):a.moveChildren(b);if(b.replace(a),d){var h,c=b;(h=c.getPrevious(I))&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("pre")&&(d=n(h.getHtml(),/\n$/,"")+"\n\n"+n(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="<pre>"+d+"</pre>":c.setHtml(d),h.remove())}else c&&r(b)}function g(a){var b=[];return n(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"</pre>"+c+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c)}),b}function n(a,b,c){var d="",g="";return a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){return b&&(d=b),c&&(g=c),""}),d+a.replace(b,c)+g}function q(a,b){var c;1<a.length&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var g=a[d],g=g.replace(/(\r\n|\r)/g,"\n"),g=n(g,/^[ \t]*\n/,""),g=n(g,/\n$/,""),g=n(g,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",a.length-1):CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "}),g=g.replace(/\n/g,"<br>"),g=g.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "});if(c){var f=b.clone();f.setHtml(g),c.append(f)}else b.setHtml(g)}return c||b}function t(a,b){var e,c=this._.definition,d=c.attributes,c=c.styles,g=v(this)[a.getName()],f=CKEDITOR.tools.isEmpty(d)&&CKEDITOR.tools.isEmpty(c);for(e in d)("class"!=e&&!this._.definition.fullMatch||a.getAttribute(e)==y(e,d[e]))&&(b&&"data-"==e.slice(0,5)||(f=a.hasAttribute(e),a.removeAttribute(e)));for(var k in c)this._.definition.fullMatch&&a.getStyle(k)!=y(k,c[k],!0)||(f=f||!!a.getStyle(k),a.removeStyle(k));p(a,g,x[a.getName()]),f&&(this._.definition.alwaysRemoveElement?r(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?r(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function u(a){for(var d,b=v(this),c=a.getElementsByTag(this.element),g=c.count();0<=--g;)d=c.getItem(g),d.isReadOnly()||t.call(this,d,!0);for(var e in b)if(e!=this.element)for(c=a.getElementsByTag(e),g=c.count()-1;g>=0;g--)d=c.getItem(g),d.isReadOnly()||p(d,b[e])}function p(a,b,c){if(b=b&&b.attributes)for(var d=0;d<b.length;d++){var e,g=b[d][0];if(e=a.getAttribute(g)){var f=b[d][1];(null===f||f.test&&f.test(e)||"string"==typeof f&&e==f)&&a.removeAttribute(g)}}c||r(a)}function r(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(I),d=a.getNext(I);!c||c.type!=CKEDITOR.NODE_TEXT&&c.isBlockBoundary({br:1})||a.append("br",1),!d||d.type!=CKEDITOR.NODE_TEXT&&d.isBlockBoundary({br:1})||a.append("br"),a.remove(!0)}else c=a.getFirst(),d=a.getLast(),a.remove(!0),c&&(c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings(),d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings())}function w(a,b,c){var d;return d=a.element,"*"==d&&(d="span"),d=new CKEDITOR.dom.element(d,b),c&&c.copyAttributes(d),d=z(d,a),b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1),d}function z(a,b){var c=b._.definition,d=c.attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var g in d)a.setAttribute(g,d[g]);return c&&a.setAttribute("style",c),a}function B(a,b){for(var c in a)a[c]=a[c].replace(G,function(a,c){return b[c]})}function v(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var e,f,g=c[d];if("string"==typeof g?e=g.toLowerCase():(e=g.element?g.element.toLowerCase():a.element,f=g.attributes),g=b[e]||(b[e]={}),f){var k,g=g.attributes=g.attributes||[];for(k in f)g.push([k.toLowerCase(),f[k]])}}}return b}function y(a,b,c){var d=new CKEDITOR.dom.element("span");return d[c?"setStyle":"setAttribute"](a,b),d[c?"getStyle":"getAttribute"](a)}function C(a,b,c){var d=a.document,g=a.getRanges();b=b?this.removeFromRange:this.applyToRange;for(var e,f=g.createIterator();e=f.getNextRange();)b.call(this,e,c);a.selectRanges(g),d.removeCustomData("doc_processing_style")}var x={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},A={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},D=/\s*(?:;\s*|$)/,G=/#\((.+?)\)/g,E=CKEDITOR.dom.walker.bookmark(0,1),I=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if("string"==typeof a.type)return new CKEDITOR.style.customHandlers[a.type](a);var c=a.attributes;c&&c.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style)),delete c.style),b&&(a=CKEDITOR.tools.clone(a),B(a.attributes,b),B(a.styles,b)),c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*",this.type=a.type||(x[c]?CKEDITOR.STYLE_BLOCK:A[c]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:a}},CKEDITOR.style.prototype={apply:function(a){if(a instanceof CKEDITOR.dom.document)return C.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode),C.call(this,a.getSelection(),0,a),this._.enterMode=b}},remove:function(a){if(a instanceof CKEDITOR.dom.document)return C.call(this,a.getSelection(),1);if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode),C.call(this,a.getSelection(),1,a),this._.enterMode=b}},applyToRange:function(a){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?b:this.type==CKEDITOR.STYLE_BLOCK?f:this.type==CKEDITOR.STYLE_OBJECT?m:null,this.applyToRange(a)},removeFromRange:function(a){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?h:this.type==CKEDITOR.STYLE_OBJECT?l:null,this.removeFromRange(a)},applyToObject:function(a){z(a,this)},checkActive:function(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var g,c=a.elements,d=0;d<c.length;d++)if(g=c[d],this.type!=CKEDITOR.STYLE_INLINE||g!=a.block&&g!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var e=g.getName();if(!("string"==typeof this.element?e==this.element:e in this.element))continue}if(this.checkElementRemovable(g,!0,b))return!0}}return!1},checkApplicable:function(a,b,c){if(b&&b instanceof CKEDITOR.filter&&(c=b),c&&!c.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var d=a.getName();if("string"==typeof this.element?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return!0;if(d=c._AC)c=d;else{var d={},g=0,e=c.attributes;if(e)for(var f in e)g++,d[f]=e[f];(f=CKEDITOR.style.getStyleText(c))&&(d.style||g++,d.style=f),d._length=g,c=c._AC=d}if(!c._length)return!0;for(var k in c)if("_length"!=k){if(g=a.getAttribute(k)||"","style"==k)a:{d=c[k],"string"==typeof d&&(d=CKEDITOR.tools.parseCssText(d)),"string"==typeof g&&(g=CKEDITOR.tools.parseCssText(g,!0)),f=void 0;for(f in d)if(!(f in g)||g[f]!=d[f]&&"inherit"!=d[f]&&"inherit"!=g[f]){d=!1;break a}d=!0}else d=c[k]==g;if(d){if(!b)return!0}else if(b)return!1}if(b)return!0}return!1},checkElementRemovable:function(a,b,c){if(this.checkElementMatch(a,b,c))return!0;if(b=v(this)[a.getName()]){var d;if(!(b=b.attributes))return!0;for(c=0;c<b.length;c++)if(d=b[c][0],d=a.getAttribute(d)){var g=b[c][1];if(null===g)return!0;if("string"==typeof g){if(d==g)return!0}else if(g.test(d))return!0}}return!1},buildPreview:function(a){var b=this._.definition,c=[],d=b.element;"bdo"==d&&(d="span");var c=["<",d],g=b.attributes;if(g)for(var f in g)c.push(" ",f,'="',g[f],'"');return(g=CKEDITOR.style.getStyleText(b))&&c.push(' style="',g,'"'),c.push(">",a||b.name,"</",d,">"),c.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(D,";"));for(var g in b){var f=b[g],e=(g+":"+f).replace(D,";");"inherit"==f?d+=e:c+=e}return c.length&&(c=CKEDITOR.tools.normalizeCssText(c,!0)),a._ST=c+d},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(a){var b=function(a){this._={definition:a},this.setup&&this.setup(a)};return b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},a,!0),this.customHandlers[a.type]=b};var H=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,K=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(a,e){this.requiredContent=this.allowedContent=this.style=a,CKEDITOR.tools.extend(this,e,!0)},CKEDITOR.styleCommand.prototype.exec=function(a){a.focus(),this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(a,e,b){CKEDITOR.stylesSet.addExternal(a,e,""),CKEDITOR.stylesSet.load(a,b)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,e){var b=this._.styleStateChangeCallbacks;b||(b=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var d=0;d<b.length;d++){var e=b[d],l=e.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;e.fn.call(this,l)}})),b.push({style:a,fn:e})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);else{var e=this,b=e.config.stylesCombo_stylesSet||e.config.stylesSet;if(!1===b)a(null);else if(b instanceof Array)e._.stylesDefinitions=b,a(b);else{b||(b="default");var b=b.split(":"),c=b[0];CKEDITOR.stylesSet.addExternal(c,b[1]?b.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(c,function(b){e._.stylesDefinitions=b[c],a(e._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function(a,e){"string"==typeof a&&(a=(e?e.$:document).createComment(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),function(){var b,a={},e={};for(b in CKEDITOR.dtd.$blockLimit)b in CKEDITOR.dtd.$list||(a[b]=1);for(b in CKEDITOR.dtd.$block)b in CKEDITOR.dtd.$blockLimit||b in CKEDITOR.dtd.$empty||(e[b]=1);CKEDITOR.dom.elementPath=function(b,d){var k,m=null,l=null,f=[],h=b;d=d||b.getDocument().getBody();do if(h.type==CKEDITOR.NODE_ELEMENT){if(f.push(h),!this.lastElement&&(this.lastElement=h,h.is(CKEDITOR.dtd.$object)||"false"==h.getAttribute("contenteditable")))continue;if(h.equals(d))break;if(!l&&(k=h.getName(),"true"==h.getAttribute("contenteditable")?l=h:!m&&e[k]&&(m=h),a[k])){if(k=!m&&"div"==k){a:{k=h.getChildren();for(var g=0,n=k.count();n>g;g++){var q=k.getItem(g);if(q.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[q.getName()]){k=!0;break a}}k=!1}k=!k}k?m=h:l=h}}while(h=h.getParent());l||(l=d),this.block=m,this.blockLimit=l,this.root=d,this.elements=f}}(),CKEDITOR.dom.elementPath.prototype={compare:function(a){var e=this.elements;if(a=a&&a.elements,!a||e.length!=a.length)return!1;for(var b=0;b<e.length;b++)if(!e[b].equals(a[b]))return!1;return!0},contains:function(a,e,b){
var c;"string"==typeof a&&(c=function(b){return b.getName()==a}),a instanceof CKEDITOR.dom.element?c=function(b){return b.equals(a)}:CKEDITOR.tools.isArray(a)?c=function(b){return-1<CKEDITOR.tools.indexOf(a,b.getName())}:"function"==typeof a?c=a:"object"==typeof a&&(c=function(b){return b.getName()in a});var d=this.elements,m=d.length;for(e&&m--,b&&(d=Array.prototype.slice.call(d,0),d.reverse()),e=0;m>e;e++)if(c(d[e]))return d[e];return null},isContextFor:function(a){var e;return a in CKEDITOR.dtd.$block?(e=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!e.getDtd()[a]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(a,e){"string"==typeof a&&(a=(e?e.$:document).createTextNode(a)),this.$=a},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var e=this.$.parentNode,b=e.childNodes.length,c=this.getLength(),d=this.getDocument(),m=new CKEDITOR.dom.text(this.$.splitText(a),d);return e.childNodes.length==b&&(a>=c?(m=d.createText(""),m.insertAfter(this)):(a=d.createText(""),a.insertAfter(m),a.remove())),m},substring:function(a,e){return"number"!=typeof e?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,e)}}),function(){function a(a,c,d){var e=a.serializable,l=c[d?"endContainer":"startContainer"],f=d?"endOffset":"startOffset",h=e?c.document.getById(a.startNode):a.startNode;return a=e?c.document.getById(a.endNode):a.endNode,l.equals(h.getPrevious())?(c.startOffset=c.startOffset-l.getLength()-a.getPrevious().getLength(),l=a.getNext()):l.equals(a.getPrevious())&&(c.startOffset-=l.getLength(),l=a.getNext()),l.equals(h.getParent())&&c[f]++,l.equals(a.getParent())&&c[f]++,c[d?"endContainer":"startContainer"]=l,c}CKEDITOR.dom.rangeList=function(a){return a instanceof CKEDITOR.dom.rangeList?a:(a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[],CKEDITOR.tools.extend(a,e))};var e={createIterator:function(){var e,a=this,c=CKEDITOR.dom.walker.bookmark(),d=[];return{getNextRange:function(l){e=void 0===e?0:e+1;var f=a[e];if(f&&1<a.length){if(!e)for(var h=a.length-1;h>=0;h--)d.unshift(a[h].createBookmark(!0));if(l)for(var k=0;a[e+k+1];){var g=f.document;for(l=0,h=g.getById(d[k].endNode),g=g.getById(d[k+1].startNode);;){if(h=h.getNextSourceNode(!1),g.equals(h))l=1;else if(c(h)||h.type==CKEDITOR.NODE_ELEMENT&&h.isBlockBoundary())continue;break}if(!l)break;k++}for(f.moveToBookmark(d.shift());k--;)h=a[++e],h.moveToBookmark(d.shift()),f.setEnd(h.endContainer,h.endOffset)}return f}}},createBookmarks:function(b){for(var d,c=[],e=0;e<this.length;e++){c.push(d=this[e].createBookmark(b,!0));for(var l=e+1;l<this.length;l++)this[l]=a(d,this[l]),this[l]=a(d,this[l],!0)}return c},createBookmarks2:function(a){for(var c=[],d=0;d<this.length;d++)c.push(this[d].createBookmark2(a));return c},moveToBookmarks:function(a){for(var c=0;c<this.length;c++)this[c].moveToBookmark(a[c])}}}(),function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function e(b){var c=CKEDITOR.skin["ua_"+b],d=CKEDITOR.env;if(c)for(var f,c=c.split(",").sort(function(a,b){return a>b?-1:1}),e=0;e<c.length;e++)if(f=c[e],d.ie&&(f.replace(/^ie/,"")==d.version||d.quirks&&"iequirks"==f)&&(f="ie"),d[f]){b+="_"+c[e];break}return CKEDITOR.getUrl(a()+b+".css")}function b(a,b){m[a]||(CKEDITOR.document.appendStyleSheet(e(a)),m[a]=1),b&&b()}function c(a){var b=a.getById(l);return b||(b=a.getHead().append("style"),b.setAttribute("id",l),b.setAttribute("type","text/css")),b}function d(a,b,c){var d,e,f;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),e=0;e<b.length;e++)b[e]=b[e].split("{");for(var h=0;h<a.length;h++)if(CKEDITOR.env.webkit)for(e=0;e<b.length;e++){for(f=b[e][1],d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);a[h].$.sheet.addRule(b[e][0],f)}else{for(f=b,d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?a[h].$.styleSheet.cssText+=f:a[h].$.innerHTML+=f}}var m={};CKEDITOR.skin={path:a,loadPart:function(c,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){b(c,d)}):b(c,d)},getPath:function(a){return CKEDITOR.getUrl(e(a))},icons:{},addIcon:function(a,b,c,d){a=a.toLowerCase(),this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"})},getIconStyle:function(a,b,c,d,e){var f;return a&&(a=a.toLowerCase(),b&&(f=this.icons[a+"-rtl"]),f||(f=this.icons[a])),a=c||f&&f.path||"",d=d||f&&f.offset,e=e||f&&f.bgsize||"16px",a&&"background-image:url("+CKEDITOR.getUrl(a)+");background-position:0 "+d+"px;background-size:"+e+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var b=c(CKEDITOR.document);return(this.setUiColor=function(a){this.uiColor=a;var c=CKEDITOR.skin.chameleon,e="",k="";"function"==typeof c&&(e=c(this,"editor"),k=c(this,"panel")),a=[[h,a]],d([b],e,a),d(f,k,a)}).call(this,a)}});var l="cke_ui_color",f=[],h=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var b=a.editor;a=function(a){if(a=(a.data[0]||a.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!a.getById("cke_ui_color")){a=c(a),f.push(a);var e=b.getUiColor();e&&d([a],CKEDITOR.skin.chameleon(b,"panel"),[[h,e]])}},b.on("panelShow",a),b.on("menuShow",a),b.config.uiColor&&b.setUiColor(b.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var a=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var e=a.getComputedStyle("border-top-color"),b=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!e||e!=b)}catch(c){CKEDITOR.env.hc=!1}a.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,e=0;e<a.length;e++)CKEDITOR.editor.prototype.constructor.apply(a[e][0],a[e][1]),CKEDITOR.add(a[e][0])}(),CKEDITOR.skin.name="moono",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8",CKEDITOR.skin.chameleon=function(){var a=function(){return function(a,b){for(var e=a.match(/[^#]./g),l=0;3>l;l++){var h,f=l;h=parseInt(e[l],16),h=("0"+(0>b?0|h*(1+b):0|h+(255-h)*b).toString(16)).slice(-2),e[f]=h}return"#"+e.join("")}}(),e=function(){var a=new CKEDITOR.template("background:#{to};background-image:linear-gradient(to bottom,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(b,e){return a.output({from:b,to:e})}}(),b={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(c,d){var m=c.uiColor,m={id:"."+c.id,defaultBorder:a(m,-.1),defaultGradient:e(a(m,.9),m),lightGradient:e(a(m,1),a(m,.7)),mediumGradient:e(a(m,.8),a(m,.5)),ckeButtonOn:e(a(m,.6),a(m,.7)),ckeResizer:a(m,-.4),ckeToolbarSeparator:a(m,.5),ckeColorauto:a(m,.8),dialogBody:a(m,.7),dialogTabSelected:e("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:a(m,-.6),elementsPathBg:m,menubuttonIcon:a(m,.5),menubuttonIconHover:a(m,.3)};return b[d].output(m).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var a=function(a){this._||(this._={}),this._.default=this._.initValue=a.default||"",this._.required=a.required||!1;for(var b=[this._],c=1;c<arguments.length;c++)b.push(arguments[c]);return b.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,b),this._},e={build:function(a,b,c){return new CKEDITOR.ui.dialog.textInput(a,b,c)}},b={build:function(a,b,c){return new CKEDITOR.ui.dialog[b.type](a,b,c)}},c={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},d=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(a,b){this._.domOnChangeRegistered||(a.on("load",function(){this.getInputElement().on("change",function(){a.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},!0),m=/^on([A-Z]\w+)/,l=function(a){for(var b in a)(m.test(b)||"title"==b||"type"==b)&&delete a[b];return a},f=function(a){a=a.data.getKeystroke(),a==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):a==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(b,c,d,e){if(!(4>arguments.length)){var f=a.call(this,c);f.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var m={role:c.role||"presentation"};c.includeLabel&&(m["aria-labelledby"]=f.labelId),CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"div",null,m,function(){var a=[],d=c.required?" cke_required":"";return"horizontal"!=c.labelLayout?a.push('<label class="cke_dialog_ui_labeled_label'+d+'" ',' id="'+f.labelId+'"',f.inputId?' for="'+f.inputId+'"':"",(c.labelStyle?' style="'+c.labelStyle+'"':"")+">",c.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',c.controlStyle?' style="'+c.controlStyle+'"':"",' role="presentation">',e.call(this,b,c),"</div>"):(d={type:"hbox",widths:c.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+d+'" id="'+f.labelId+'" for="'+f.inputId+'"'+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(c.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(c.controlStyle?' style="'+c.controlStyle+'"':"")+">"+e.call(this,b,c)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,d,a)),a.join("")})}},textInput:function(b,c,d){if(!(3>arguments.length)){a.call(this,c);var e=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",m={class:"cke_dialog_ui_input_"+c.type,id:e,type:c.type};c.validate&&(this.validate=c.validate),c.maxLength&&(m.maxlength=c.maxLength),c.size&&(m.size=c.size),c.inputStyle&&(m.style=c.inputStyle);var l=this,u=!1;b.on("load",function(){l.getInputElement().on("keydown",function(a){13==a.data.getKeystroke()&&(u=!0)}),l.getInputElement().on("keyup",function(a){13==a.data.getKeystroke()&&u&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),u=!1),l.bidi&&f.call(l,a)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){var a=['<div class="cke_dialog_ui_input_',c.type,'" role="presentation"'];c.width&&a.push('style="width:'+c.width+'" '),a.push("><input "),m["aria-labelledby"]=this._.labelId,this._.required&&(m["aria-required"]=this._.required);for(var b in m)a.push(b+'="'+m[b]+'" ');return a.push(" /></div>"),a.join("")})}},textarea:function(b,c,d){if(!(3>arguments.length)){a.call(this,c);var e=this,m=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",l={};c.validate&&(this.validate=c.validate),l.rows=c.rows||5,l.cols=c.cols||20,l.class="cke_dialog_ui_input_textarea "+(c.class||""),"undefined"!=typeof c.inputStyle&&(l.style=c.inputStyle),c.dir&&(l.dir=c.dir),e.bidi&&b.on("load",function(){e.getInputElement().on("keyup",f)},e),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){l["aria-labelledby"]=this._.labelId,this._.required&&(l["aria-required"]=this._.required);var b,a=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',m,'" '];for(b in l)a.push(b+'="'+CKEDITOR.tools.htmlEncode(l[b])+'" ');return a.push(">",CKEDITOR.tools.htmlEncode(e._.default),"</textarea></div>"),a.join("")})}},checkbox:function(b,c,d){if(!(3>arguments.length)){var e=a.call(this,c,{default:!!c.default});c.validate&&(this.validate=c.validate),CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"span",null,null,function(){var a=CKEDITOR.tools.extend({},c,{id:c.id?c.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),d=[],g=CKEDITOR.tools.getNextId()+"_label",f={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":g};return l(a),c.default&&(f.checked="checked"),"undefined"!=typeof a.inputStyle&&(a.style=a.inputStyle),e.checkbox=new CKEDITOR.ui.dialog.uiElement(b,a,d,"input",null,f),d.push(' <label id="',g,'" for="',f.id,'"'+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(c.label),"</label>"),d.join("")})}},radio:function(b,c,d){if(!(3>arguments.length)){a.call(this,c),this._.default||(this._.default=this._.initValue=c.items[0][1]),c.validate&&(this.validate=c.validate);var e=[],f=this;c.role="radiogroup",c.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){for(var a=[],d=[],g=(c.id?c.id:CKEDITOR.tools.getNextId())+"_radio",m=0;m<c.items.length;m++){var w=c.items[m],z=void 0!==w[2]?w[2]:w[0],B=void 0!==w[1]?w[1]:w[0],v=CKEDITOR.tools.getNextId()+"_radio_input",y=v+"_label",v=CKEDITOR.tools.extend({},c,{id:v,title:null,type:null},!0),z=CKEDITOR.tools.extend({},v,{title:z},!0),C={type:"radio",class:"cke_dialog_ui_radio_input",name:g,value:B,"aria-labelledby":y},x=[];f._.default==B&&(C.checked="checked"),l(v),l(z),"undefined"!=typeof v.inputStyle&&(v.style=v.inputStyle),v.keyboardFocusable=!0,e.push(new CKEDITOR.ui.dialog.uiElement(b,v,x,"input",null,C)),x.push(" "),new CKEDITOR.ui.dialog.uiElement(b,z,x,"label",null,{id:y,for:C.id},w[0]),a.push(x.join(""))}return new CKEDITOR.ui.dialog.hbox(b,e,a,d),d.join("")}),this._.children=e}},button:function(b,c,d){if(arguments.length){"function"==typeof c&&(c=c(b.getParentEditor())),a.call(this,c,{disabled:c.disabled||!1}),CKEDITOR.event.implementOn(this);var e=this;b.on("load",function(){var a=this.getElement();!function(){a.on("click",function(a){e.click(),a.data.preventDefault()}),a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(e.click(),a.data.preventDefault())})}(),a.unselectable()},this);var f=CKEDITOR.tools.extend({},c);delete f.style;var m=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,f,d,"a",null,{style:c.style,href:"javascript:void(0)",title:c.label,hidefocus:"true",class:c.class,role:"button","aria-labelledby":m},'<span id="'+m+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(c.label)+"</span>")}},select:function(b,c,d){if(!(3>arguments.length)){var e=a.call(this,c);c.validate&&(this.validate=c.validate),e.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){var a=CKEDITOR.tools.extend({},c,{id:c.id?c.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),d=[],g=[],f={id:e.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};d.push('<div class="cke_dialog_ui_input_',c.type,'" role="presentation"'),c.width&&d.push('style="width:'+c.width+'" '),d.push(">"),void 0!==c.size&&(f.size=c.size),void 0!==c.multiple&&(f.multiple=c.multiple),l(a);for(var w,m=0;m<c.items.length&&(w=c.items[m]);m++)g.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==w[1]?w[1]:w[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(w[0]));return"undefined"!=typeof a.inputStyle&&(a.style=a.inputStyle),e.select=new CKEDITOR.ui.dialog.uiElement(b,a,d,"select",null,f,g.join("")),d.push("</div>"),d.join("")})}},file:function(b,c,d){if(!(3>arguments.length)){void 0===c.default&&(c.default="");var e=CKEDITOR.tools.extend(a.call(this,c),{definition:c,buttons:[]});c.validate&&(this.validate=c.validate),b.on("load",function(){CKEDITOR.document.getById(e.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){e.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var a=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',e.frameId,'" title="',c.label,'" src="javascript:void('];return a.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),a.push(')"></iframe>'),a.join("")})}},fileButton:function(b,c,d){var e=this;if(!(3>arguments.length)){a.call(this,c),c.validate&&(this.validate=c.validate);var f=CKEDITOR.tools.extend({},c),m=f.onClick;f.className=(f.className?f.className+" ":"")+"cke_dialog_ui_button",f.onClick=function(a){var d=c.for;m&&!1===m.call(this,a)||(b.getContentElement(d[0],d[1]).submit(),this.disable())},b.on("load",function(){b.getContentElement(c.for[0],c.for[1])._.buttons.push(e)}),CKEDITOR.ui.dialog.button.call(this,b,f,d)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(d,e,f){if(!(3>arguments.length)){var m=[],l=e.html;"<"!=l.charAt(0)&&(l="<span>"+l+"</span>");var r=e.focus;if(r){var w=this.focus;this.focus=function(){("function"==typeof r?r:w).call(this),this.fire("focus")},e.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,d,e,m,"span",null,null,""),m=m.join("").match(a),l=l.match(b)||["","",""],c.test(l[1])&&(l[1]=l[1].slice(0,-1),l[2]="/"+l[2]),f.push([l[1]," ",m[1]||"",l[2]].join(""))}}}(),fieldset:function(a,b,c,d,e){var f=e.label;this._={children:b},CKEDITOR.ui.dialog.uiElement.call(this,a,e,d,"fieldset",null,null,function(){var a=[];f&&a.push("<legend"+(e.labelStyle?' style="'+e.labelStyle+'"':"")+">"+f+"</legend>");for(var b=0;b<c.length;b++)a.push(c[b]);return a.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(a){var b=CKEDITOR.document.getById(this._.labelId);return 1>b.getChildCount()?new CKEDITOR.dom.text(a,CKEDITOR.document).appendTo(b):b.getChild(0).$.nodeValue=a,this},getLabel:function(){var a=CKEDITOR.document.getById(this._.labelId);return!a||1>a.getChildCount()?"":a.getChild(0).getText()},eventProcessors:d},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(a,b){this.on("click",function(){b.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(a){if(this.bidi){var b=a&&a.charAt(0);(b="‪"==b?"ltr":"‫"==b?"rtl":null)&&(a=a.slice(1)),this.setDirectionMarker(b)}return a||(a=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var a=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&a){var b=this.getDirectionMarker();b&&(a=("ltr"==b?"‪":"‫")+a)}return a},setDirectionMarker:function(a){var b=this.getInputElement();a?b.setAttributes({dir:a,"data-cke-dir-marker":a}):this.getDirectionMarker()&&b.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},c,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,c){var d=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),e=this.getInputElement().$;return d.$.text=a,d.$.value=void 0===b||null===b?a:b,void 0===c||null===c?CKEDITOR.env.ie?e.add(d.$):e.add(d.$,null):e.add(d.$,c),this},remove:function(a){return this.getInputElement().$.remove(a),this},clear:function(){for(var a=this.getInputElement().$;0<a.length;)a.remove(0);return this},keyboardFocusable:!0},c,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a,b){this.getInputElement().$.checked=a,!b&&this.fire("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(a,b){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?d.onChange.apply(this,arguments):(a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$,"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this),this.on("change",b),null)}},keyboardFocusable:!0},c,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(a,b){for(var d,c=this._.children,e=0;e<c.length&&(d=c[e]);e++)d.getElement().$.checked=d.getValue()==a;!b&&this.fire("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},accessKeyUp:function(){var b,a=this._.children;for(b=0;b<a.length;b++)if(a[b].getElement().$.checked)return void a[b].getElement().focus();a[0].getElement().focus()},eventProcessors:{onChange:function(a,b){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?d.onChange.apply(this,arguments):(a.on("load",function(){for(var a=this._.children,b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){a=a.data.$,"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",b),null)}}},c,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,c,{getInputElement:function(){var a=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<a.$.forms.length?new CKEDITOR.dom.element(a.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(a){var c,e,b=/^on([A-Z]\w+)/,d=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})};for(e in a)(c=e.match(b))&&(this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]));return this},reset:function(){function a(){c.$.open();var h="";d.size&&(h=d.size-(CKEDITOR.env.ie?7:0));var z=b.frameId+"_input";for(c.$.write(['<html dir="'+l+'" lang="'+r+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+l+'" lang="'+r+'" action="',CKEDITOR.tools.htmlEncode(d.action),'"><label id="',b.labelId,'" for="',z,'" style="display:none">',CKEDITOR.tools.htmlEncode(d.label),'</label><input style="width:100%" id="',z,'" aria-labelledby="',b.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(d.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(h>0?h:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+f+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+m+")}","</script>"].join("")),c.$.close(),h=0;h<e.length;h++)e[h].enable()}var b=this._,c=CKEDITOR.document.getById(b.frameId).getFrameDocument(),d=b.definition,e=b.buttons,f=this.formLoadedNumber,m=this.formUnloadNumber,l=b.dialog._.editor.lang.dir,r=b.dialog._.editor.langCode;f||(f=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),m=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(f),CKEDITOR.tools.removeFunction(m)})),CKEDITOR.env.gecko?setTimeout(a,500):a()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(a,b){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",e),CKEDITOR.dialog.addUIElement("password",e),CKEDITOR.dialog.addUIElement("textarea",b),CKEDITOR.dialog.addUIElement("checkbox",b),CKEDITOR.dialog.addUIElement("radio",b),CKEDITOR.dialog.addUIElement("button",b),CKEDITOR.dialog.addUIElement("select",b),CKEDITOR.dialog.addUIElement("file",b),CKEDITOR.dialog.addUIElement("fileButton",b),CKEDITOR.dialog.addUIElement("html",b),CKEDITOR.dialog.addUIElement("fieldset",{build:function(a,b,c){for(var e,d=b.children,f=[],m=[],l=0;l<d.length&&(e=d[l]);l++){var r=[];f.push(r),m.push(CKEDITOR.dialog._.uiElementBuilders[e.type].build(a,e,r))}return new CKEDITOR.ui.dialog[b.type](a,m,f,c,b)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function a(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;c>b-a;c--)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function e(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;b+a>c;c++)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function b(a,b){for(var c=a.$.getElementsByTagName("input"),d=0,g=c.length;g>d;d++){var e=new CKEDITOR.dom.element(c[d]);"text"==e.getAttribute("type").toLowerCase()&&(b?(e.setAttribute("value",e.getCustomData("fake_value")||""),e.removeCustomData("fake_value")):(e.setCustomData("fake_value",e.getAttribute("value")),e.setAttribute("value","")))}}function c(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute("aria-invalid",!0)),a||(this.select?this.select():this.focus()),b&&alert(b),this.fire("validated",{valid:a,msg:b})}function d(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function m(a){var b=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",p).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),c=b.getChild([0,0,0,0,0]),d=c.getChild(0),e=c.getChild(1);return a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(c),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(a="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+a+'" tabIndex="-1"></iframe>').appendTo(c.getParent())),d.unselectable(),e.unselectable(),{element:b,parts:{dialog:b.getChild(0),title:d,close:e,tabs:c.getChild(2),contents:c.getChild([3,0,0,0]),footer:c.getChild([3,0,1,0])}}}function l(a,b,c){this.element=b,this.focusIndex=c,this.tabIndex=0,this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.currentFocusIndex=this.focusIndex,this.element.focus()},b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),b.on("focus",function(){this.fire("mouseover")}),b.on("blur",function(){this.fire("mouseout")})}function f(a){function b(){a.layout()}var c=CKEDITOR.document.getWindow();c.on("resize",b),a.on("hide",function(){c.removeListener("resize",b)})}function h(a,b){this._={dialog:a},CKEDITOR.tools.extend(this,b)}function k(a){function b(c){var h=a.getSize(),m=CKEDITOR.document.getWindow().getViewPaneSize(),l=c.data.$.screenX,n=c.data.$.screenY,r=l-d.x,u=n-d.y;d={x:l,y:n},e.x+=r,e.y+=u,a.move(e.x+k[3]<f?-k[3]:e.x-k[1]>m.width-h.width-f?m.width-h.width+("rtl"==g.lang.dir?0:k[1]):e.x,e.y+k[0]<f?-k[0]:e.y-k[2]>m.height-h.height-f?m.height-h.height+k[2]:e.y,1),c.data.preventDefault()}function c(){if(CKEDITOR.document.removeListener("mousemove",b),CKEDITOR.document.removeListener("mouseup",c),CKEDITOR.env.ie6Compat){var a=x.getChild(0).getFrameDocument();a.removeListener("mousemove",b),a.removeListener("mouseup",c)}}var d=null,e=null,g=a.getParentEditor(),f=g.config.dialog_magnetDistance,k=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof f&&(f=20),a.parts.title.on("mousedown",function(g){if(d={x:g.data.$.screenX,y:g.data.$.screenY},CKEDITOR.document.on("mousemove",b),
CKEDITOR.document.on("mouseup",c),e=a.getPosition(),CKEDITOR.env.ie6Compat){var f=x.getChild(0).getFrameDocument();f.on("mousemove",b),f.on("mouseup",c)}g.data.preventDefault()},a)}function g(a){function b(c){var n="rtl"==g.lang.dir,r=l.width,u=l.height,w=r+(c.data.$.screenX-m.x)*(n?-1:1)*(a._.moved?1:2),z=u+(c.data.$.screenY-m.y)*(a._.moved?1:2),t=a._.element.getFirst(),t=n&&t.getComputedStyle("right"),p=a.getPosition();p.y+z>h.height&&(z=h.height-p.y),(n?t:p.x)+w>h.width&&(w=h.width-(n?t:p.x)),e!=CKEDITOR.DIALOG_RESIZE_WIDTH&&e!=CKEDITOR.DIALOG_RESIZE_BOTH||(r=Math.max(d.minWidth||0,w-f)),e!=CKEDITOR.DIALOG_RESIZE_HEIGHT&&e!=CKEDITOR.DIALOG_RESIZE_BOTH||(u=Math.max(d.minHeight||0,z-k)),a.resize(r,u),a._.moved||a.layout(),c.data.preventDefault()}function c(){if(CKEDITOR.document.removeListener("mouseup",c),CKEDITOR.document.removeListener("mousemove",b),n&&(n.remove(),n=null),CKEDITOR.env.ie6Compat){var a=x.getChild(0).getFrameDocument();a.removeListener("mouseup",c),a.removeListener("mousemove",b)}}var d=a.definition,e=d.resizable;if(e!=CKEDITOR.DIALOG_RESIZE_NONE){var f,k,h,m,l,n,g=a.getParentEditor(),r=CKEDITOR.tools.addFunction(function(d){l=a.getSize();var e=a.parts.contents;e.$.getElementsByTagName("iframe").length&&(n=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),e.append(n)),k=l.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),f=l.width-a.parts.contents.getSize("width",1),m={x:d.screenX,y:d.screenY},h=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",c),CKEDITOR.env.ie6Compat&&(e=x.getChild(0).getFrameDocument(),e.on("mousemove",b),e.on("mouseup",c)),d.preventDefault&&d.preventDefault()});a.on("load",function(){var b="";e==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":e==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical"),b=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+b+" cke_resizer_"+g.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(g.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+r+', event )">'+("ltr"==g.lang.dir?"◢":"◣")+"</div>"),a.parts.footer.append(b,1)}),g.on("destroy",function(){CKEDITOR.tools.removeFunction(r)})}}function n(a){a.data.preventDefault(1)}function q(a){var b=CKEDITOR.document.getWindow(),c=a.config,d=c.dialog_backgroundCoverColor||"white",e=c.dialog_backgroundCoverOpacity,g=c.baseFloatZIndex,c=CKEDITOR.tools.genKey(d,e,g),f=C[c];f?f.show():(g=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",g,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+d,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(d="<html><body style=\\'background-color:"+d+";\\'></body></html>",g.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),g.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+d+"' );document.close();")+"})())"),g.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),g.push("</div>"),f=CKEDITOR.dom.element.createFromHtml(g.join("")),f.setOpacity(void 0!==e?e:.5),f.on("keydown",n),f.on("keypress",n),f.on("keyup",n),f.appendTo(CKEDITOR.document.getBody()),C[c]=f),a.focusManager.add(f),x=f,a=function(){var a=b.getViewPaneSize();f.setStyles({width:a.width+"px",height:a.height+"px"})};var k=function(){var a=b.getScrollPosition(),c=CKEDITOR.dialog._.currentTop;if(f.setStyles({left:a.x+"px",top:a.y+"px"}),c)do a=c.getPosition(),c.move(a.x,a.y);while(c=c._.parentDialog)};if(y=a,b.on("resize",a),a(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||f.focus(),CKEDITOR.env.ie6Compat){var h=function(){k(),arguments.callee.prevScrollHandler.apply(this,arguments)};b.$.setTimeout(function(){h.prevScrollHandler=window.onscroll||function(){},window.onscroll=h},0),k()}}function t(a){x&&(a.focusManager.remove(x),a=CKEDITOR.document.getWindow(),x.hide(),a.removeListener("resize",y),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),y=null)}var u=CKEDITOR.tools.cssLength,p='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(b,f){function h(){var a=x._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;b>c;c++)a[c].focusIndex=c}function l(a){var b=x._.focusList;if(a=a||0,!(1>b.length)){var c=x._.currentFocusIndex;x._.tabBarMode&&0>a&&(c=0);try{b[c].getInputElement().$.blur()}catch(d){}var e=c,g=1<x._.pageCount;do{if(e+=a,g&&!x._.tabBarMode&&(e==b.length||-1==e))return x._.tabBarMode=!0,x._.tabs[x._.currentTabId][0].focus(),void(x._.currentFocusIndex=-1);if(e=(e+b.length)%b.length,e==c)break}while(a&&!b[e].isFocusable());b[e].focus(),"text"==b[e].type&&b[e].select()}}function n(c){if(x==CKEDITOR.dialog._.currentTop){var d=c.data.getKeystroke(),g="rtl"==b.lang.dir,f=[37,38,39,40];if(B=y=0,9==d||d==CKEDITOR.SHIFT+9)l(d==CKEDITOR.SHIFT+9?-1:1),B=1;else if(d==CKEDITOR.ALT+121&&!x._.tabBarMode&&1<x.getPageCount())x._.tabBarMode=!0,x._.tabs[x._.currentTabId][0].focus(),x._.currentFocusIndex=-1,B=1;else if(-1!=CKEDITOR.tools.indexOf(f,d)&&x._.tabBarMode)d=-1!=CKEDITOR.tools.indexOf([g?39:37,38],d)?a.call(x):e.call(x),x.selectPage(d),x._.tabs[d][0].focus(),B=1;else if(13!=d&&32!=d||!x._.tabBarMode)if(13==d)d=c.data.getTarget(),d.is("a","button","select","textarea")||d.is("input")&&"button"==d.$.type||((d=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(d.click,0,d),B=1),y=1;else{if(27!=d)return;(d=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(d.click,0,d):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),y=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1),B=1;u(c)}}function u(a){B?a.data.preventDefault(1):y&&a.data.stopPropagation()}var B,y,w=CKEDITOR.dialog._.dialogDefinitions[f],z=CKEDITOR.tools.clone(r),t=b.config.dialog_buttonsOrder||"OS",p=b.lang.dir,q={};if(("OS"==t&&CKEDITOR.env.mac||"rtl"==t&&"ltr"==p||"ltr"==t&&"rtl"==p)&&z.buttons.reverse(),w=CKEDITOR.tools.extend(w(b),z),w=CKEDITOR.tools.clone(w),w=new v(this,w),z=m(b),this._={editor:b,element:z.element,name:f,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=z.parts,CKEDITOR.tools.setTimeout(function(){b.fire("ariaWidget",this.parts.contents)},0,this),z={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},z["rtl"==p?"right":"left"]=0,this.parts.dialog.setStyles(z),CKEDITOR.event.call(this),this.definition=w=CKEDITOR.fire("dialogDefinition",{name:f,definition:w},b).definition,!("removeDialogTabs"in b._)&&b.config.removeDialogTabs){for(z=b.config.removeDialogTabs.split(";"),p=0;p<z.length;p++)if(t=z[p].split(":"),2==t.length){var C=t[0];q[C]||(q[C]=[]),q[C].push(t[1])}b._.removeDialogTabs=q}if(b._.removeDialogTabs&&(q=b._.removeDialogTabs[f]))for(p=0;p<q.length;p++)w.removeContents(q[p]);w.onLoad&&this.on("load",w.onLoad),w.onShow&&this.on("show",w.onShow),w.onHide&&this.on("hide",w.onHide),w.onOk&&this.on("ok",function(a){b.fire("saveSnapshot"),setTimeout(function(){b.fire("saveSnapshot")},0),!1===w.onOk.call(this,a)&&(a.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,w.onCancel&&this.on("cancel",function(a){!1===w.onCancel.call(this,a)&&(a.data.hide=!1)});var x=this,A=function(a){var d,b=x._.contents,c=!1;for(d in b)for(var e in b[d])if(c=a.call(this,b[d][e]))return};this.on("ok",function(a){A(function(b){if(b.validate){var d=b.validate(this),e="string"==typeof d||!1===d;return e&&(a.data.hide=!1,a.stop()),c.call(b,!e,"string"==typeof d?d:void 0),e}})},this,null,0),this.on("cancel",function(a){A(function(c){return c.isChanged()?(b.config.dialog_noConfirmCancel||confirm(b.lang.common.confirmCancel)||(a.data.hide=!1),!0):void 0})},this,null,0),this.parts.close.on("click",function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),a.data.preventDefault()},this),this.changeFocus=l;var D=this._.element;for(b.focusManager.add(D,1),this.on("show",function(){D.on("keydown",n,this),CKEDITOR.env.gecko&&D.on("keypress",u,this)}),this.on("hide",function(){D.removeListener("keydown",n),CKEDITOR.env.gecko&&D.removeListener("keypress",u),A(function(a){d.apply(a)})}),this.on("iframeAdded",function(a){new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document).on("keydown",n,this,null,0)}),this.on("show",function(){h();var a=1<x._.pageCount;b.config.dialog_startupFocusTab&&a?(x._.tabBarMode=!0,x._.tabs[x._.currentTabId][0].focus(),x._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=a?-1:this._.focusList.length-1,w.onFocus?(a=w.onFocus.call(this))&&a.focus():l(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove(),b.appendTo(a)},this),k(this),g(this),new CKEDITOR.dom.text(w.title,CKEDITOR.document).appendTo(this.parts.title),p=0;p<w.contents.length;p++)(q=w.contents[p])&&this.addPage(q);for(this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1)),a.data.preventDefault())},this),p=[],q=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:w.buttons},p).getChild(),this.parts.footer.setHtml(p.join("")),p=0;p<q.length;p++)this._.buttons[q[p].id]=q[p]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(a,b){this._.contentSize&&this._.contentSize.width==a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})}}(),getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,c){var d=this._.element.getFirst(),e="rtl"==this._.editor.lang.dir,g="fixed"==d.getComputedStyle("position");CKEDITOR.env.ie&&d.setStyle("zoom","100%"),g&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},g||(g=CKEDITOR.document.getWindow().getScrollPosition(),a+=g.x,b+=g.y),e&&(g=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-g.width-a),b={top:(b>0?b:0)+"px"},b[e?"right":"left"]=(a>0?a:0)+"px",d.setStyles(b),c&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,q(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),a.on("keydown",D),a.on("keyup",G),this._.hasFocus=!1;for(var c in b.contents)if(b.contents[c]){var a=b.contents[c],d=this._.tabs[a.id],e=a.requiredContent,g=0;if(d){for(var k in this._.contents[a.id]){var h=this._.contents[a.id][k];"hbox"!=h.type&&"vbox"!=h.type&&h.getInputElement()&&(h.requiredContent&&!this._.editor.activeFilter.check(h.requiredContent)?h.disable():(h.enable(),g++))}!g||e&&!this._.editor.activeFilter.check(e)?d[0].addClass("cke_dialog_tab_disabled"):d[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),f(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),d=(c.width-b.width)/2,e=(c.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(e>0?e:0)>c.height||b.width+(d>0?d:0)>c.width?a.setStyle("position","absolute"):a.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:d,this._.moved?this._.position.y:e)},foreach:function(a){for(var b in this._.contents)for(var c in this._.contents[b])a.call(this,this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){return this.foreach(a),this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur(),b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var a=this._.element;for(a.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),I(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else t(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,a.removeListener("keydown",D),a.removeListener("keyup",G);var c=this._.editor;c.focus(),setTimeout(function(){c.focusManager.unlock(),CKEDITOR.env.iOS&&c.window.focus()},0)}delete this._.parentDialog,this.foreach(function(a){a.resetInitValue&&a.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title="'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",d=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),e=this._.contents[a.id]={},g=d.getChild(),f=0;d=g.shift();)d.notAllowed||"hbox"==d.type||"vbox"==d.type||f++,e[d.id]=d,"function"==typeof d.getChild&&g.push.apply(g,d.getChild());f||(a.hidden=!0),b=CKEDITOR.dom.element.createFromHtml(b.join("")),b.setAttribute("role","tabpanel"),d=CKEDITOR.env,e="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber(),c=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",c,a.hidden?' style="display:none"':"",' id="',e,'"',d.gecko&&!d.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',a.label,"</a>"].join("")),b.setAttribute("aria-labelledby",e),this._.tabs[a.id]=[c,b],this._.tabIdList.push(a.id),!a.hidden&&this._.pageCount++,this._.lastTab=c,this.updateStyle(),b.setAttribute("name",a.id),b.appendTo(this.parts.contents),c.unselectable(),this.parts.tabs.append(c),a.accessKey&&(E(this,this,"CTRL+"+a.accessKey,K,H),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var c in this._.tabs){var d=this._.tabs[c][0],e=this._.tabs[c][1];c!=a&&(d.removeClass("cke_dialog_tab_selected"),e.hide()),e.setAttribute("aria-hidden",c!=a)}var g=this._.tabs[a];g[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(b(g[1]),g[1].show(),setTimeout(function(){b(g[1],1)},0)):g[1].show(),this._.currentTabId=a,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(b){var c=this._.tabs[b]&&this._.tabs[b][0];c&&1!=this._.pageCount&&c.isVisible()&&(b==this._.currentTabId&&this.selectPage(a.call(this)),c.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){(a=this._.tabs[a]&&this._.tabs[a][0])&&(a.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new l(this,a,b));else{this._.focusList.splice(b,0,new l(this,a,b));for(var c=b+1;c<this._.focusList.length;c++)this._.focusList[c].focusIndex++}},setState:function(a){if(this.state!=a){if(this.state=a,a==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var b=this.getParentEditor().lang.dir,c={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==b?"right":"left"}};c.styles["margin-"+("rtl"==b?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",c),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else a==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",a)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,c){return a=a.config.removeDialogTabs,!(a&&a.match(new RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")))},okButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog,!1!==a.fire("ok",{hide:!0}).hide&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog,!1!==a.fire("cancel",{hide:!0}).hide&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var r={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},w=function(a,b,c){for(var e,d=0;e=a[d];d++)if(e.id==b||c&&e[c]&&(e=w(e[c],b,c)))return e;return null},z=function(a,b,c,d,e){if(c){for(var f,g=0;f=a[g];g++){if(f.id==c)return a.splice(g,0,b),b;if(d&&f[d]&&(f=z(f[d],b,c,d,!0)))return f}if(e)return null}return a.push(b),b},B=function(a,b,c){for(var e,d=0;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]&&(e=B(e[c],b,c)))return e}return null},v=function(a,b){this.dialog=a;for(var e,c=b.contents,d=0;e=c[d];d++)c[d]=e&&new h(a,e);CKEDITOR.tools.extend(this,b)};v.prototype={getContents:function(a){return w(this.contents,a)},getButton:function(a){return w(this.buttons,a)},addContents:function(a,b){return z(this.contents,a,b)},addButton:function(a,b){return z(this.buttons,a,b)},removeContents:function(a){B(this.contents,a)},removeButton:function(a){B(this.buttons,a)}},h.prototype={get:function(a){return w(this.elements,a,"children")},add:function(a,b){return z(this.elements,a,b,"children")},remove:function(a){B(this.elements,a,"children")}};var y,x,C={},A={},D=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=A[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},G=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=A[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),a.data.preventDefault()))},E=function(a,b,c,d,e){(A[c]||(A[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},I=function(a){for(var b in A){for(var c=A[b],d=c.length-1;d>=0;d--)c[d].dialog!=a&&c[d].uiElement!=a||c.splice(d,1);0===c.length&&delete A[b]}},H=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},K=function(){};!function(){CKEDITOR.ui.dialog={uiElement:function(a,b,c,d,e,g,f){if(!(4>arguments.length)){var k=(d.call?d(b):d)||"div",h=["<",k," "],m=(e&&e.call?e(b):e)||{},l=(g&&g.call?g(b):g)||{},n=(f&&f.call?f.call(this,a,b):f)||"",w=this.domId=l.id||CKEDITOR.tools.getNextId()+"_uiElement";b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(m.display="none",this.notAllowed=!0),l.id=w;var r={};b.type&&(r["cke_dialog_ui_"+b.type]=1),b.className&&(r[b.className]=1),b.disabled&&(r.cke_disabled=1);for(var u=l.class&&l.class.split?l.class.split(" "):[],w=0;w<u.length;w++)u[w]&&(r[u[w]]=1);u=[];for(w in r)u.push(w);l.class=u.join(" "),b.title&&(l.title=b.title),r=(b.style||"").split(";"),b.align&&(u=b.align,m["margin-left"]="left"==u?0:"auto",m["margin-right"]="right"==u?0:"auto");for(w in m)r.push(w+":"+m[w]);for(b.hidden&&r.push("display:none"),w=r.length-1;w>=0;w--)""===r[w]&&r.splice(w,1);0<r.length&&(l.style=(l.style?l.style+"; ":"")+r.join("; "));for(w in l)h.push(w+'="'+CKEDITOR.tools.htmlEncode(l[w])+'" ');h.push(">",n,"</",k,">"),c.push(h.join("")),(this._||(this._={})).dialog=a,"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged}),"function"==typeof b.isChanged&&(this.isChanged=b.isChanged),"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c))}})),"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(b),this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&E(this,a,"CTRL+"+b.accessKey);var z=this;a.on("load",function(){var b=z.getInputElement();if(b){var c=z.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=!1,a._.hasFocus=!0,z.fire("focus"),c&&this.addClass(c)}),b.on("blur",function(){z.fire("blur"),c&&this.removeClass(c)})}}),CKEDITOR.tools.extend(this,b),this.keyboardFocusable&&(this.tabIndex=b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=z.focusIndex}))}},hbox:function(a,b,c,d,e){if(!(4>arguments.length)){this._||(this._={});var h,g=this._.children=b,f=e&&e.widths||null,k=e&&e.height||null,m={role:"presentation"};e&&e.align&&(m.align=e.align),CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",{},m,function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(h=0;h<c.length;h++){var b="cke_dialog_ui_hbox_child",d=[];0===h&&(b="cke_dialog_ui_hbox_first"),h==c.length-1&&(b="cke_dialog_ui_hbox_last"),a.push('<td class="',b,'" role="presentation" '),f?f[h]&&d.push("width:"+u(f[h])):d.push("width:"+Math.floor(100/c.length)+"%"),k&&d.push("height:"+u(k)),e&&void 0!==e.padding&&d.push("padding:"+u(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[h].align&&d.push("text-align:"+g[h].align),0<d.length&&a.push('style="'+d.join("; ")+'" '),a.push(">",c[h],"</td>")}return a.push("</tr></tbody>"),a.join("")})}},vbox:function(a,b,c,d,e){if(!(3>arguments.length)){this._||(this._={});var g=this._.children=b,f=e&&e.width||null,h=e&&e.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"vbox"},d,"div",null,{role:"presentation"},function(){var b=['<table role="presentation" cellspacing="0" border="0" '];b.push('style="'),e&&e.expand&&b.push("height:100%;"),b.push("width:"+u(f||"100%"),";"),CKEDITOR.env.webkit&&b.push("float:none;"),b.push('"'),b.push('align="',CKEDITOR.tools.htmlEncode(e&&e.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" '),b.push("><tbody>");for(var d=0;d<c.length;d++){var k=[];b.push('<tr><td role="presentation" '),f&&k.push("width:"+u(f||"100%")),h?k.push("height:"+u(h[d])):e&&e.expand&&k.push("height:"+Math.floor(100/c.length)+"%"),e&&void 0!==e.padding&&k.push("padding:"+u(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[d].align&&k.push("text-align:"+g[d].align),0<k.length&&b.push('style="',k.join("; "),'" '),b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")}return b.push("</tbody></table>"),b.join("")})}}}}(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){return this.getInputElement().setValue(a),!b&&this.fire("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););return a?(a=a.getAttribute("name"),this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(a){var c,e,b=/^on([A-Z]\w+)/,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(e in a)(c=e.match(b))&&(this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]));return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){var a=this.getElement();this.getInputElement().removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){return 1>arguments.length?this._.children.concat():(a.splice||(a=[a]),2>a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var a={build:function(a,b,c){for(var e,d=b.children,g=[],f=[],h=0;h<d.length&&(e=d[h]);h++){var k=[];g.push(k),f.push(CKEDITOR.dialog._.uiElementBuilders[e.type].build(a,e,k))}return new CKEDITOR.ui.dialog[b.type](a,f,g,c,b)}};CKEDITOR.dialog.addUIElement("hbox",a),CKEDITOR.dialog.addUIElement("vbox",a)}(),CKEDITOR.dialogCommand=function(a,b){this.dialogName=a,CKEDITOR.tools.extend(this,b,!0)},CKEDITOR.dialogCommand.prototype={exec:function(a){a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,d=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,g=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var a=arguments;return function(){var c,g,b=this&&this.getValue?this.getValue():a[0],d=CKEDITOR.VALIDATE_AND,e=[];for(g=0;g<a.length&&"function"==typeof a[g];g++)e.push(a[g]);g<a.length&&"string"==typeof a[g]&&(c=a[g],g++),g<a.length&&"number"==typeof a[g]&&(d=a[g]);var f=d==CKEDITOR.VALIDATE_AND;for(g=0;g<e.length;g++)f=d==CKEDITOR.VALIDATE_AND?f&&e[g](b):f||e[g](b);return f?!0:c}},regex:function(a,b){return function(c){return c=this&&this.getValue?this.getValue():c,a.test(c)?!0:b}},notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},cssLength:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return g.test(CKEDITOR.tools.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}},CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var c in C)C[c].remove();C={}}a=a.editor._.storedDialogs;for(var d in a)a[d].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var c=null,d=CKEDITOR.dialog._.dialogDefinitions[a];if(null===CKEDITOR.dialog._.currentTop&&q(this),"function"==typeof d)c=this._.storedDialogs||(this._.storedDialogs={}),c=c[a]||(c[a]=new CKEDITOR.dialog(this,a)),b&&b.call(c,c),c.show();else{if("failed"==d)throw t(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');
"string"==typeof d&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed"),this.openDialog(a,b)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),c}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(a){a.on("doubleclick",function(e){e.data.dialog&&a.openDialog(e.data.dialog)},null,null,999)}}),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(a){var e=this;a.addCommand("a11yHelp",{exec:function(){var b=a.langCode,b=e.availableLangs[b]?b:e.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e.path+"dialogs/lang/"+b+".js"),function(){a.lang.a11yhelp=e.langEntries[b],a.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),a.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),a.on("ariaEditorHelpLabel",function(b){b.data.label=a.lang.common.editorHelp})}})}(),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var e=a.addCommand("about",new CKEDITOR.dialogCommand("about"));e.modes={wysiwyg:1,source:1},e.canUndo=!1,e.readOnly=1,a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.title,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(a){var e=0,b=function(b,d,h,k){if(k){k=new CKEDITOR.style(k);var g=c[h];g.unshift(k),a.attachStyleStateChange(k,function(b){!a.readOnly&&a.getCommand(h).setState(b)}),a.addCommand(h,new CKEDITOR.styleCommand(k,{contentForms:g})),a.ui.addButton&&a.ui.addButton(b,{label:d,command:h,toolbar:"basicstyles,"+(e+=10)})}},c={bold:["strong","b",["span",function(a){return a=a.styles["font-weight"],"bold"==a||+a>=700}]],italic:["em","i",["span",function(a){return"italic"==a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},d=a.config,m=a.lang.basicstyles;b("Bold",m.bold,"bold",d.coreStyles_bold),b("Italic",m.italic,"italic",d.coreStyles_italic),b("Underline",m.underline,"underline",d.coreStyles_underline),b("Strike",m.strike,"strike",d.coreStyles_strike),b("Subscript",m.subscript,"subscript",d.coreStyles_subscript),b("Superscript",m.superscript,"superscript",d.coreStyles_superscript),a.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){function a(a,b,c,d){if(!a.isReadOnly()&&!a.equals(c.editable())){CKEDITOR.dom.element.setMarker(d,a,"bidi_processed",1),d=a;for(var e=c.editable();(d=d.getParent())&&!d.equals(e);)if(d.getCustomData("bidi_processed"))return a.removeStyle("direction"),void a.removeAttribute("dir");d="useComputedState"in c.config?c.config.useComputedState:1,(d?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir"))!=b&&(a.removeStyle("direction"),d?(a.removeAttribute("dir"),b!=a.getComputedStyle("direction")&&a.setAttribute("dir",b)):a.setAttribute("dir",b),c.forceNextSelectionCheck())}}function e(a,b,c){var d=a.getCommonAncestor(!1,!0);if(a=a.clone(),a.enlarge(c==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),a.checkBoundaryOfElement(d,CKEDITOR.START)&&a.checkBoundaryOfElement(d,CKEDITOR.END)){for(var e;d&&d.type==CKEDITOR.NODE_ELEMENT&&(e=d.getParent())&&1==e.getChildCount()&&!(d.getName()in b);)d=e;return d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in b&&d}}function b(b){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(a,b){var d,c=a.config.useComputedState,c=void 0===c||c;if(!c){d=b.lastElement;for(var e=a.editable();d&&!(d.getName()in l||d.equals(e));){var g=d.getParent();if(!g)break;d=g}}d=d||b.block||b.blockLimit,d.equals(a.editable())&&(e=a.getSelection().getRanges()[0].getEnclosedNode())&&e.type==CKEDITOR.NODE_ELEMENT&&(d=e),d&&(c=c?d.getComputedStyle("direction"):d.getStyle("direction")||d.getAttribute("dir"),a.getCommand("bidirtl").setState("rtl"==c?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.getCommand("bidiltr").setState("ltr"==c?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)),c=(b.block||b.blockLimit||a.editable()).getDirection(1),c!=(a._.selDir||a.lang.dir)&&(a._.selDir=c,a.fire("contentDirChanged",c))},exec:function(c){var f=c.getSelection(),h=c.config.enterMode,k=f.getRanges();if(k&&k.length){for(var w,l={},r=f.createBookmarks(),k=k.createIterator(),z=0;w=k.getNextRange(1);){var B=w.getEnclosedNode();B&&(!B||B.type==CKEDITOR.NODE_ELEMENT&&B.getName()in m)||(B=e(w,d,h)),B&&a(B,b,c,l);var v=new CKEDITOR.dom.walker(w),y=r[z].startNode,C=r[z++].endNode;v.evaluator=function(a){var c,b=h==CKEDITOR.ENTER_P?"p":"div";return(c=(a?a.type==CKEDITOR.NODE_ELEMENT:!1)&&a.getName()in d)&&((b=a.is(b))&&(b=(b=a.getParent())?b.type==CKEDITOR.NODE_ELEMENT:!1),c=!(b&&a.getParent().is("blockquote"))),!!(c&&a.getPosition(y)&CKEDITOR.POSITION_FOLLOWING&&(a.getPosition(C)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;B=v.next();)a(B,b,c,l);for(w=w.createIterator(),w.enlargeBr=h!=CKEDITOR.ENTER_BR;B=w.getNextParagraph(h==CKEDITOR.ENTER_P?"p":"div");)a(B,b,c,l)}CKEDITOR.dom.element.clearAllMarkers(l),c.forceNextSelectionCheck(),f.selectBookmarks(r),c.focus()}}}}function c(a){var b=a==f.setAttribute,c=a==f.removeAttribute,d=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(e,f){if(!this.isReadOnly()){var h;if(h=e==(b||c?"dir":"direction")||"style"==e&&(c||d.test(f))){a:{h=this;for(var k=h.getDocument().getBody().getParent();h;){if(h.equals(k)){h=!1;break a}h=h.getParent()}h=!0}h=!h}if(h&&(h=this.getDirection(1),k=a.apply(this,arguments),h!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),k}return a.apply(this,arguments)}}var d={table:1,ul:1,ol:1,blockquote:1,div:1},m={},l={};CKEDITOR.tools.extend(m,d,{tr:1,p:1,div:1,li:1}),CKEDITOR.tools.extend(l,m,{td:1}),CKEDITOR.plugins.add("bidi",{init:function(a){function c(b,d,e,f,h){a.addCommand(e,new CKEDITOR.command(a,f)),a.ui.addButton&&a.ui.addButton(b,{label:d,command:e,toolbar:"bidi,"+h})}if(!a.blockless){var d=a.lang.bidi;c("BidiLtr",d.ltr,"bidiltr",b("ltr"),10),c("BidiRtl",d.rtl,"bidirtl",b("rtl"),20),a.on("contentDom",function(){a.document.on("dirChanged",function(b){a.fire("dirChanged",{node:b.data,dir:b.data.getDirection(1)})})}),a.on("contentDirChanged",function(b){b=(a.lang.dir!=b.data?"add":"remove")+"Class";var c=a.ui.space(a.config.toolbarLocation);c&&c[b]("cke_mixed_dir_content")})}}});for(var f=CKEDITOR.dom.element.prototype,h=["setStyle","removeStyle","setAttribute","removeAttribute"],k=0;k<h.length;k++)f[h[k]]=CKEDITOR.tools.override(f[h[k]],c)}(),function(){var a={exec:function(a){var b=a.getCommand("blockquote").state,c=a.getSelection(),d=c&&c.getRanges()[0];if(d){var m=c.createBookmarks();if(CKEDITOR.env.ie){var h,l=m[0].startNode,f=m[0].endNode;if(l&&"blockquote"==l.getParent().getName())for(h=l;h=h.getNext();)if(h.type==CKEDITOR.NODE_ELEMENT&&h.isBlockBoundary()){l.move(h,!0);break}if(f&&"blockquote"==f.getParent().getName())for(h=f;h=h.getPrevious();)if(h.type==CKEDITOR.NODE_ELEMENT&&h.isBlockBoundary()){f.move(h);break}}var k=d.createIterator();if(k.enlargeBr=a.config.enterMode!=CKEDITOR.ENTER_BR,b==CKEDITOR.TRISTATE_OFF){for(l=[];b=k.getNextParagraph();)l.push(b);for(1>l.length&&(b=a.document.createElement(a.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),f=m.shift(),d.insertNode(b),b.append(new CKEDITOR.dom.text("\ufeff",a.document)),d.moveToBookmark(f),d.selectNodeContents(b),d.collapse(!0),f=d.createBookmark(),l.push(b),m.unshift(f)),h=l[0].getParent(),d=[],f=0;f<l.length;f++)b=l[f],h=h.getCommonAncestor(b.getParent());for(b={table:1,tbody:1,tr:1,ol:1,ul:1};b[h.getName()];)h=h.getParent();for(f=null;0<l.length;){for(b=l.shift();!b.getParent().equals(h);)b=b.getParent();b.equals(f)||d.push(b),f=b}for(;0<d.length;)if(b=d.shift(),"blockquote"==b.getName()){for(f=new CKEDITOR.dom.documentFragment(a.document);b.getFirst();)f.append(b.getFirst().remove()),l.push(f.getLast());f.replace(b)}else l.push(b);for(d=a.document.createElement("blockquote"),d.insertBefore(l[0]);0<l.length;)b=l.shift(),d.append(b)}else if(b==CKEDITOR.TRISTATE_ON){for(f=[],h={};b=k.getNextParagraph();){for(l=d=null;b.getParent();){if("blockquote"==b.getParent().getName()){d=b.getParent(),l=b;break}b=b.getParent()}d&&l&&!l.getCustomData("blockquote_moveout")&&(f.push(l),CKEDITOR.dom.element.setMarker(h,l,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(h),b=[],l=[],h={};0<f.length;)k=f.shift(),d=k.getParent(),k.getPrevious()?k.getNext()?(k.breakParent(k.getParent()),l.push(k.getNext())):k.remove().insertAfter(d):k.remove().insertBefore(d),d.getCustomData("blockquote_processed")||(l.push(d),CKEDITOR.dom.element.setMarker(h,d,"blockquote_processed",!0)),b.push(k);for(CKEDITOR.dom.element.clearAllMarkers(h),f=l.length-1;f>=0;f--){d=l[f];a:{h=d;for(var k=0,g=h.getChildCount(),n=void 0;g>k&&(n=h.getChild(k));k++)if(n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()){h=!1;break a}h=!0}h&&d.remove()}if(a.config.enterMode==CKEDITOR.ENTER_BR)for(d=!0;b.length;)if(k=b.shift(),"div"==k.getName()){for(f=new CKEDITOR.dom.documentFragment(a.document),!d||!k.getPrevious()||k.getPrevious().type==CKEDITOR.NODE_ELEMENT&&k.getPrevious().isBlockBoundary()||f.append(a.document.createElement("br")),d=k.getNext()&&!(k.getNext().type==CKEDITOR.NODE_ELEMENT&&k.getNext().isBlockBoundary());k.getFirst();)k.getFirst().remove().appendTo(f);d&&f.append(a.document.createElement("br")),f.replace(k),d=!1}}c.selectBookmarks(m),a.focus()}},refresh:function(a,b){this.setState(a.elementPath(b.block||b.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(e){e.blockless||(e.addCommand("blockquote",a),e.ui.addButton&&e.ui.addButton("Blockquote",{label:e.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function a(a,b,c){return b.type||(b.type="auto"),c&&!1===a.fire("beforePaste",b)||!b.dataValue&&b.dataTransfer.isEmpty()?!1:(b.dataValue||(b.dataValue=""),CKEDITOR.env.gecko&&"drop"==b.method&&a.toolbox&&a.once("afterPaste",function(){a.toolbox.focus()}),a.fire("paste",b))}function e(b){function c(){var a=b.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var d=function(a){A.initPasteDataTransfer(a,b),a.data.preventDefault()};a.on("copy",d),a.on("cut",d),a.on("cut",function(){b.extractSelectedHtml()},null,null,999)}a.on(A.mainPasteEvent,function(a){"beforepaste"==A.mainPasteEvent&&D||y(a)}),"beforepaste"==A.mainPasteEvent&&(a.on("paste",function(a){G||(f(),a.data.preventDefault(),y(a),k("paste")||b.openDialog("paste"))}),a.on("contextmenu",h,null,null,0),a.on("beforepaste",function(a){!a.data||a.data.$.ctrlKey||a.data.$.shiftKey||h()},null,null,0)),a.on("beforecut",function(){!D&&m(b)});var e;a.attachListener(CKEDITOR.env.ie?a:b.document.getDocumentElement(),"mouseup",function(){e=setTimeout(function(){C()},0)}),b.on("destroy",function(){clearTimeout(e)}),a.on("keyup",C)}function d(a){return{type:a,canUndo:"cut"==a,startDisabled:!0,exec:function(){"cut"==this.type&&m();var a,c=this.type;if(CKEDITOR.env.ie)a=k(c);else try{a=b.document.$.execCommand(c,!1,null)}catch(d){a=!1}return a||b.showNotification(b.lang.clipboard[this.type+"Error"]),a}}}function e(){return{canUndo:!1,async:!0,exec:function(b,c){var d=function(c,d){c&&a(b,c,!!d),b.fire("afterCommandExec",{name:"paste",command:e,returnValue:!!c})},e=this;"string"==typeof c?d({dataValue:c,method:"paste",dataTransfer:A.initPasteDataTransfer()},1):b.getClipboardData(d)}}}function f(){G=1,setTimeout(function(){G=0},100)}function h(){D=1,setTimeout(function(){D=0},10)}function k(a){var c=b.document,d=c.getBody(),e=!1,f=function(){e=!0};return d.on(a,f),7<CKEDITOR.env.version?c.$.execCommand(a):c.$.selection.createRange().execCommand(a),d.removeListener(a,f),e}function m(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var c,d,e,a=b.getSelection();a.getType()==CKEDITOR.SELECTION_ELEMENT&&(c=a.getSelectedElement())&&(d=a.getRanges()[0],e=b.document.createText(""),e.insertBefore(c),d.setStartBefore(e),d.setEndAfter(c),a.selectRanges([d]),setTimeout(function(){c.getParent()&&(e.remove(),a.selectElement(c))},0))}}function l(a,c){var h,d=b.document,e=b.editable(),f=function(a){a.cancel()};if(!d.getById("cke_pastebin")){var k=b.getSelection(),m=k.createBookmarks();CKEDITOR.env.ie&&k.root.fire("selectionchange");var n=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!e.is("body")||CKEDITOR.env.ie?"div":"body",d);n.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var w=0,d=d.getWindow();CKEDITOR.env.webkit?(e.append(n),n.addClass("cke_editable"),e.is("body")||(w="static"!=e.getComputedStyle("position")?e:CKEDITOR.dom.element.get(e.$.offsetParent),w=w.getDocumentPosition().y)):e.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(n),n.setStyles({position:"absolute",top:d.getScrollPosition().y-w+10+"px",width:"1px",height:Math.max(1,d.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&n.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(w=n.getParent().isReadOnly())?(n.setOpacity(0),n.setAttribute("contenteditable",!0)):n.setStyle("ltr"==b.config.contentsLangDirection?"left":"right","-1000px"),b.on("selectionChange",f,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(h=e.once("blur",f,null,null,-100)),w&&n.focus(),w=new CKEDITOR.dom.range(n),w.selectNodeContents(n);var r=w.select();CKEDITOR.env.ie&&(h=e.once("blur",function(){b.lockSelection(r)}));var u=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=u),h&&h.removeListener(),CKEDITOR.env.ie&&e.focus(),k.selectBookmarks(m),n.remove();var a;CKEDITOR.env.webkit&&(a=n.getFirst())&&a.is&&a.hasClass("Apple-style-span")&&(n=a),b.removeListener("selectionChange",f),c(n.getHtml())},0)}}function B(){if("paste"==A.mainPasteEvent)return b.fire("beforePaste",{type:"auto",method:"paste"}),!1;b.focus(),f();var a=b.focusManager;return a.lock(),b.editable().fire(A.mainPasteEvent)&&!k("paste")?(a.unlock(),!1):(a.unlock(),!0)}function v(a){if("wysiwyg"==b.mode)switch(a.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:a=b.editable(),f(),"paste"==A.mainPasteEvent&&a.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:b.fire("saveSnapshot"),setTimeout(function(){b.fire("saveSnapshot")},50)}}function y(c){var d={type:"auto",method:"paste",dataTransfer:A.initPasteDataTransfer(c)};d.dataTransfer.cacheData();var e=!1!==b.fire("beforePaste",d);e&&A.canClipboardApiBeTrusted(d.dataTransfer,b)?(c.data.preventDefault(),setTimeout(function(){a(b,d)},0)):l(c,function(c){d.dataValue=c.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),e&&a(b,d)})}function C(){if("wysiwyg"==b.mode){var a=x("paste");b.getCommand("cut").setState(x("cut")),b.getCommand("copy").setState(x("copy")),b.getCommand("paste").setState(a),b.fire("pasteState",a)}}function x(a){if(E&&a in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==a)return CKEDITOR.TRISTATE_OFF;a=b.getSelection();var c=a.getRanges();return a.getType()==CKEDITOR.SELECTION_NONE||1==c.length&&c[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var A=CKEDITOR.plugins.clipboard,D=0,G=0,E=0;!function(){b.on("key",v),b.on("contentDom",c),b.on("selectionChange",function(a){E=a.data.selection.getRanges()[0].checkReadOnly(),C()}),b.contextMenu&&b.contextMenu.addListener(function(a,b){return E=b.getRanges()[0].checkReadOnly(),{cut:x("cut"),copy:x("copy"),paste:x("paste")}})}(),function(){function a(c,d,e,f,h){var k=b.lang.clipboard[d];b.addCommand(d,e),b.ui.addButton&&b.ui.addButton(c,{label:k,command:d,toolbar:"clipboard,"+f}),b.addMenuItems&&b.addMenuItem(d,{label:k,command:d,group:"clipboard",order:h})}a("Cut","cut",d("cut"),10,1),a("Copy","copy",d("copy"),20,4),a("Paste","paste",e(),30,8)}(),b.getClipboardData=function(a,c){function d(a){a.removeListener(),a.cancel(),c(a.data)}function e(a){a.removeListener(),a.cancel(),m=!0,c({type:k,dataValue:a.data,method:"paste"})}function f(){this.customTitle=a&&a.title}var h=!1,k="auto",m=!1;c||(c=a,a=null),b.on("paste",d,null,null,0),b.on("beforePaste",function(a){a.removeListener(),h=!0,k=a.data.type},null,null,1e3),!1===B()&&(b.removeListener("paste",d),h&&b.fire("pasteDialog",f)?(b.on("pasteDialogCommit",e),b.on("dialogHide",function(a){a.removeListener(),a.data.removeListener("pasteDialogCommit",e),setTimeout(function(){m||c(null)},10)})):c(null))}}function b(a){if(CKEDITOR.env.webkit){if(!a.match(/^[^<]*$/g)&&!a.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!a.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function c(a,b){function c(a){return CKEDITOR.tools.repeat("</p><p>",~~(a/2))+(1==a%2?"<br>":"")}return b=b.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),b=b.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase()}),b.match(/^[^<]$/)?b:(CKEDITOR.env.webkit&&-1<b.indexOf("<div>")&&(b=b.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),b.match(/<div>(<br>|)<\/div>/)&&(b="<p>"+b.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return c(a.split("</div><div>").length+1)})+"</p>"),b=b.replace(/<\/div><div>/g,"<br>"),b=b.replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&a.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(b=b.replace(/^<br><br>$/,"<br>")),-1<b.indexOf("<br><br>")&&(b="<p>"+b.replace(/(<br>){2,}/g,function(a){return c(a.length/4)})+"</p>")),l(a,b))}function d(){function a(){var c,b={};for(c in CKEDITOR.dtd)"$"!=c.charAt(0)&&"div"!=c&&"span"!=c&&(b[c]=1);return b}var b={};return{get:function(c){return"plain-text"==c?b.plainText||(b.plainText=new CKEDITOR.filter("br")):"semantic-content"==c?((c=b.semanticContent)||(c=new CKEDITOR.filter,c.allow({$1:{elements:a(),attributes:!0,styles:!1,classes:!1}}),c=b.semanticContent=c),c):c?new CKEDITOR.filter(c):null}}}function m(a,b,c){b=CKEDITOR.htmlParser.fragment.fromHtml(b);var d=new CKEDITOR.htmlParser.basicWriter;return c.applyTo(b,!0,!1,a.activeEnterMode),b.writeHtml(d),d.getHtml()}function l(a,b){return a.enterMode==CKEDITOR.ENTER_BR?b=b.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("<br>",a.length/7*2)}).replace(/<\/?p>/g,""):a.enterMode==CKEDITOR.ENTER_DIV&&(b=b.replace(/<(\/)?p>/g,"<$1div>")),b}function f(a){a.data.preventDefault(),a.data.$.dataTransfer.dropEffect="none"}function h(b){var c=CKEDITOR.plugins.clipboard;b.on("contentDom",function(){function d(c,e,f){e.select(),a(b,{dataTransfer:f,method:"drop"},1),f.sourceEditor.fire("saveSnapshot"),f.sourceEditor.editable().extractHtmlFromRange(c),f.sourceEditor.getSelection().selectRanges([c]),f.sourceEditor.fire("saveSnapshot")}function e(d,f){d.select(),a(b,{dataTransfer:f,method:"drop"},1),c.resetDragDataTransfer()}function f(a,c,d){var e={$:a.data.$,target:a.data.getTarget()};c&&(e.dragRange=c),d&&(e.dropRange=d),!1===b.fire(a.name,e)&&a.data.preventDefault()}function h(a){return a.type!=CKEDITOR.NODE_ELEMENT&&(a=a.getParent()),a.getChildCount()}var k=b.editable(),m=CKEDITOR.plugins.clipboard.getDropTarget(b),l=b.ui.space("top"),B=b.ui.space("bottom");c.preventDefaultDropOnElement(l),c.preventDefaultDropOnElement(B),k.attachListener(m,"dragstart",f),k.attachListener(b,"dragstart",c.resetDragDataTransfer,c,null,1),k.attachListener(b,"dragstart",function(a){c.initDragDataTransfer(a,b)},null,null,2),k.attachListener(b,"dragstart",function(){var a=c.dragRange=b.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(c.dragStartContainerChildCount=a?h(a.startContainer):null,c.dragEndContainerChildCount=a?h(a.endContainer):null)},null,null,100),k.attachListener(m,"dragend",f),k.attachListener(b,"dragend",c.initDragDataTransfer,c,null,1),k.attachListener(b,"dragend",c.resetDragDataTransfer,c,null,100),k.attachListener(m,"dragover",function(a){var b=a.data.getTarget();b&&b.is&&b.is("html")?a.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&a.data.$.dataTransfer.types.contains("Files")&&a.data.preventDefault()}),k.attachListener(m,"drop",function(a){a.data.preventDefault();var d=a.data.getTarget();if(!d.isReadOnly()||d.type==CKEDITOR.NODE_ELEMENT&&d.is("html")){var d=c.getRangeAtDropPosition(a,b),e=c.dragRange;d&&f(a,e,d)}}),k.attachListener(b,"drop",c.initDragDataTransfer,c,null,1),k.attachListener(b,"drop",function(a){if(a=a.data){var f=a.dropRange,h=a.dragRange,k=a.dataTransfer;k.getTransferType(b)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){c.internalDrop(h,f,k,b)},0):k.getTransferType(b)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?d(h,f,k):e(f,k)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(a){var f,k=d();a.config.forcePasteAsPlainText?f="plain-text":a.config.pasteFilter?f=a.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in a.config||(f="semantic-content"),a.pasteFilter=k.get(f),e(a),h(a),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),a.on("paste",function(b){if(b.data.dataTransfer||(b.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!b.data.dataValue){var c=b.data.dataTransfer,d=c.getData("text/html");d?(b.data.dataValue=d,b.data.type="html"):(d=c.getData("text/plain"))&&(b.data.dataValue=a.editable().transformPlainTextToHtml(d),b.data.type="text")}},null,null,1),a.on("paste",function(a){var b=a.data.dataValue,c=CKEDITOR.dtd.$block;if(-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<b.indexOf('<br class="Apple-interchange-newline">')&&(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),b.match(/^<[^<]+cke_(editable|contents)/i)){var d,e,f=new CKEDITOR.dom.element("div");for(f.setHtml(b);1==f.getChildCount()&&(d=f.getFirst())&&d.type==CKEDITOR.NODE_ELEMENT&&(d.hasClass("cke_editable")||d.hasClass("cke_contents"));)f=e=d;e&&(b=e.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,d){return d.toLowerCase()in c?(a.data.preSniffing="html","<"+d):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,d){return d in c?(a.data.endsWithEOL=1,"</"+d+">"):b}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1")),a.data.dataValue=b},null,null,3),a.on("paste",function(d){d=d.data;var h,e=d.type,f=d.dataValue,l=a.config.clipboard_defaultContentType||"html",n=d.dataTransfer.getTransferType(a);h="html"==e||"html"==d.preSniffing?"html":b(f),"htmlifiedtext"==h&&(f=c(a.config,f)),"text"==e&&"html"==h?f=m(a,f,k.get("plain-text")):n==CKEDITOR.DATA_TRANSFER_EXTERNAL&&a.pasteFilter&&!d.dontFilter&&(f=m(a,f,a.pasteFilter)),d.startsWithEOL&&(f='<br data-cke-eol="1">'+f),d.endsWithEOL&&(f+='<br data-cke-eol="1">'),"auto"==e&&(e="html"==h||"html"==l?"html":"text"),d.type=e,d.dataValue=f,delete d.preSniffing,delete d.startsWithEOL,delete d.endsWithEOL},null,null,6),a.on("paste",function(b){b=b.data,b.dataValue&&(a.insertHtml(b.dataValue,b.type,b.range),setTimeout(function(){a.fire("afterPaste")},0))},null,null,1e3),a.on("pasteDialog",function(b){setTimeout(function(){a.openDialog("paste",b.data)},0)})}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(a,b){return!!(a.getTransferType(b)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!a.isEmpty()||CKEDITOR.env.gecko&&(a.getData("text/html")||a.getFilesCount()))},getDropTarget:function(a){var b=a.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||b.isInline()?b:a.document},fixSplitNodesAfterDrop:function(a,b,c,d){function e(a,c,d){var f=a;return f.type==CKEDITOR.NODE_TEXT&&(f=a.getParent()),f.equals(c)&&d!=c.getChildCount()?(a=b.startContainer.getChild(b.startOffset-1),c=b.startContainer.getChild(b.startOffset),a&&a.type==CKEDITOR.NODE_TEXT&&c&&c.type==CKEDITOR.NODE_TEXT&&(d=a.getLength(),a.setText(a.getText()+c.getText()),c.remove(),b.setStart(a,d),b.collapse(!0)),!0):void 0}var f=b.startContainer;"number"==typeof d&&"number"==typeof c&&f.type==CKEDITOR.NODE_ELEMENT&&(e(a.startContainer,f,c)||e(a.endContainer,f,d))},isDropRangeAffectedByDragRange:function(a,b){var c=b.startContainer,d=b.endOffset;return!!(a.endContainer.equals(c)&&a.endOffset<=d||a.startContainer.getParent().equals(c)&&a.startContainer.getIndex()<d||a.endContainer.getParent().equals(c)&&a.endContainer.getIndex()<d)},internalDrop:function(b,c,d,e){var k,m,f=CKEDITOR.plugins.clipboard,h=e.editable();e.fire("saveSnapshot"),e.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(b,c,f.dragStartContainerChildCount,f.dragEndContainerChildCount),(m=this.isDropRangeAffectedByDragRange(b,c))||(k=b.createBookmark(!1)),f=c.clone().createBookmark(!1),m&&(k=b.createBookmark(!1)),b=k.startNode,c=k.endNode,m=f.startNode,c&&b.getPosition(m)&CKEDITOR.POSITION_PRECEDING&&c.getPosition(m)&CKEDITOR.POSITION_FOLLOWING&&m.insertBefore(b),b=e.createRange(),b.moveToBookmark(k),h.extractHtmlFromRange(b,1),c=e.createRange(),c.moveToBookmark(f),a(e,{dataTransfer:d,method:"drop",range:c},1),e.fire("unlockSnapshot")},getRangeAtDropPosition:function(a,b){var c=a.data.$,d=c.clientX,e=c.clientY,f=b.getSelection(!0).getRanges()[0],h=b.createRange();if(a.data.testRange)return a.data.testRange;if(document.caretRangeFromPoint)c=b.document.$.caretRangeFromPoint(d,e),h.setStart(CKEDITOR.dom.node(c.startContainer),c.startOffset),h.collapse(!0);else if(c.rangeParent)h.setStart(CKEDITOR.dom.node(c.rangeParent),c.rangeOffset),h.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&f&&b.editable().hasFocus)return f;if(!document.body.createTextRange)return null;b.focus(),c=b.document.getBody().$.createTextRange();try{for(var k=!1,m=0;20>m&&!k;m++){if(!k)try{c.moveToPoint(d,e-m),k=!0}catch(l){}if(!k)try{c.moveToPoint(d,e+m),k=!0}catch(v){}}if(k){var y="cke-temp-"+(new Date).getTime();c.pasteHTML('<span id="'+y+'">​</span>');var C=b.document.getById(y);h.moveToPosition(C,CKEDITOR.POSITION_BEFORE_START),C.remove()}else{var D,x=b.document.$.elementFromPoint(d,e),A=new CKEDITOR.dom.element(x);if(A.equals(b.editable())||"html"==A.getName())return f&&f.startContainer&&!f.startContainer.equals(b.editable())?f:null;D=A.getClientRect(),d<D.left?h.setStartAt(A,CKEDITOR.POSITION_AFTER_START):h.setStartAt(A,CKEDITOR.POSITION_BEFORE_END),h.collapse(!0)}}catch(G){return null}}return h},initDragDataTransfer:function(a,b){var c=a.data.$?a.data.$.dataTransfer:null,d=new this.dataTransfer(c,b);c?this.dragData&&d.id==this.dragData.id?d=this.dragData:this.dragData=d:this.dragData?d=this.dragData:this.dragData=d,a.data.dataTransfer=d},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(a,b){if(this.isCustomCopyCutSupported&&a&&a.data&&a.data.$){var c=new this.dataTransfer(a.data.$.clipboardData,b);return this.copyCutData&&c.id==this.copyCutData.id?(c=this.copyCutData,c.$=a.data.$.clipboardData):this.copyCutData=c,c}return new this.dataTransfer(null,b)},preventDefaultDropOnElement:function(a){a&&a.on("dragover",f)}};var k=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(a,b){if(a&&(this.$=a),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(a){return a=a.toLowerCase(),"text"==a||"text/plain"==a?"Text":"url"==a?"URL":a}},this.id=this.getData(k),this.id||(this.id="Text"==k?"":"cke-"+CKEDITOR.tools.getUniqueId()),"Text"!=k)try{this.$.setData(k,this.id)}catch(c){}b&&(this.sourceEditor=b,this.setData("text/html",b.getSelectedHtml(1)),"Text"==k||this.getData("text/plain")||this.setData("text/plain",b.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(a){a=this._.normalizeType(a);var b=this._.data[a];if(void 0===b||null===b||""===b)try{b=this.$.getData(a)}catch(c){}return void 0!==b&&null!==b&&""!==b||(b=""),"text/html"==a?(b=b.replace(this._.metaRegExp,""),(a=this._.bodyRegExp.exec(b))&&a.length&&(b=a[1],b=b.replace(this._.fragmentRegExp,""))):"Text"==a&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==b.substring(0,7)&&(b=""),b},setData:function(a,b){if(a=this._.normalizeType(a),this._.data[a]=b,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==a||"Text"==a){"Text"==k&&"Text"==a&&(this.id=b);try{this.$.setData(a,b)}catch(c){}}},getTransferType:function(a){return this.sourceEditor?this.sourceEditor==a?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function a(c){c=b._.normalizeType(c);var d=b.getData(c);d&&(b._.data[c]=d)}if(this.$){var c,d,b=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(c=0;c<this.$.types.length;c++)a(this.$.types[c])}else a("Text"),a("URL");if(d=this._getImageFromClipboard(),this.$&&this.$.files||d){for(this._.files=[],c=0;c<this.$.files.length;c++)this._.files.push(this.$.files[c]);0===this._.files.length&&d&&this._.files.push(d)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(a){return this._.files.length?this._.files[a]:this.$&&this.$.files&&this.$.files.length?this.$.files[a]:0===a?this._getImageFromClipboard():void 0},isEmpty:function(){var b,a={};if(this.getFilesCount())return!1;for(b in this._.data)a[b]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var c=0;c<this.$.types.length;c++)a[this.$.types[c]]=1}else a.Text=1,a.URL=1;"Text"!=k&&(a[k]=0);for(b in a)if(a[b]&&""!==this.getData(b))return!1;return!0},_getImageFromClipboard:function(){var a;if(this.$&&this.$.items&&this.$.items[0])try{if((a=this.$.items[0].getAsFile())&&a.type)return a}catch(b){}}}}(),function(){var a='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';
CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');var a=a+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),a=a+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',e=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),b=CKEDITOR.addTemplate("button",a);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}},CKEDITOR.ui.button.prototype={render:function(a,d){function m(){var b=a.mode;b&&(b=this.modes[b]?void 0!==p[b]?p[b]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,b=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:b,this.setState(b),this.refresh&&this.refresh())}var g,l=CKEDITOR.env,f=this._.id=CKEDITOR.tools.getNextId(),h="",k=this.command;this._.editor=a;var n={id:f,button:this,editor:a,focus:function(){CKEDITOR.document.getById(f).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},q=CKEDITOR.tools.addFunction(function(a){return n.onkey?(a=new CKEDITOR.dom.event(a),!1!==n.onkey(n,a.getKeystroke())):void 0}),t=CKEDITOR.tools.addFunction(function(a){var b;return n.onfocus&&(b=!1!==n.onfocus(n,new CKEDITOR.dom.event(a))),b}),u=0;if(n.clickFn=g=CKEDITOR.tools.addFunction(function(){u&&(a.unlockSelection(1),u=0),n.execute(),l.iOS&&a.focus()}),this.modes){var p={};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(p[a.mode]=this._.state)},this),a.on("activeFilterChange",m,this),a.on("mode",m,this),!this.readOnly&&a.on("readOnly",m,this)}else k&&(k=a.getCommand(k))&&(k.on("state",function(){this.setState(k.state)},this),h+=k.state==CKEDITOR.TRISTATE_ON?"on":k.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&a.on("contentDirChanged",function(b){var d=CKEDITOR.document.getById(this._.id),e=d.getFirst();b=b.data,b!=a.lang.dir?d.addClass("cke_"+b):d.removeClass("cke_ltr").removeClass("cke_rtl"),e.setAttribute("style",CKEDITOR.skin.getIconStyle(w,"rtl"==b,this.icon,this.iconOffset))},this),k||(h+="off");var r=this.name||this.command,w=r;return this.icon&&!/\./.test(this.icon)&&(w=this.icon,this.icon=null),h={id:f,name:r,iconName:w,label:this.label,cls:this.className||"",state:h,ariaDisabled:"disabled"==h?"true":"false",title:this.title,titleJs:l.gecko&&!l.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:q,focusFn:t,clickFn:g,style:CKEDITOR.skin.getIconStyle(w,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?e.output():""},b.output(h,d),this.onRender&&this.onRender(),n},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return b?(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;return this.allowedContent||this.requiredContent||!this.command||(b=a.getCommand(this.command)||b),this._.feature=b}},CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}}(),CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function a(a){var b=this._;b.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(a),b.on?b.panel.hide():b.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(e){var b=e.panel||{};delete e.panel,this.base(e),this.document=b.parent&&b.parent.getDocument()||CKEDITOR.document,b.block={attributes:b.attributes},this.hasArrow=b.toolbarRelated=!0,this.click=a,this._={panelDefinition:b}},statics:{handler:{create:function(a){return new CKEDITOR.ui.panelButton(a)}}},proto:{createPanel:function(a){var b=this._;if(!b.panel){var c=this._.panelDefinition,d=this._.panelDefinition.block,m=c.parent||CKEDITOR.document.getBody(),l=this._.panel=new CKEDITOR.ui.floatPanel(a,m,c),c=l.addBlock(b.id,d),f=this;l.onShow=function(){f.className&&this.element.addClass(f.className+"_panel"),f.setState(CKEDITOR.TRISTATE_ON),b.on=1,f.editorFocus&&a.focus(),f.onOpen&&f.onOpen()},l.onHide=function(c){f.className&&this.element.getFirst().removeClass(f.className+"_panel"),f.setState(f.modes&&f.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),b.on=0,!c&&f.onClose&&f.onClose()},l.onEscape=function(){l.hide(1),f.document.getById(b.id).focus()},this.onBlock&&this.onBlock(l,c),c.onHide=function(){b.on=0,f.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}}),CKEDITOR.UI_PANELBUTTON="panelbutton",function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=a,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var a=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),e=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),b=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(c,d){this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),c=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&c.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),c=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),a.write(b.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+c+");"},m))),a.getWindow().$.CKEDITOR=CKEDITOR,a.on("keydown",function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(b)?a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(b)&&a.data.preventDefault()},this),a=a.getBody(),a.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(c)}else a=this.document.getById(this.id);this._.holder=a}return a};var m={editorId:c.id,id:this.id,langCode:c.langCode,dir:c.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":c.config.baseFloatZIndex+1};if(this.isFramed){var l=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";m.frame=e.output({id:this.id+"_frame",src:l})}return l=a.output(m),d&&d.push(l),l},addBlock:function(a,b){return b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),b),this._.currentBlock||this.showBlock(a),b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var b=this._.currentBlock,e=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return b&&b.hide(),this._.currentBlock=a,CKEDITOR.fire("ariaWidget",e),a._.focusIndex=-1,this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a),a.show(),a},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),b&&CKEDITOR.tools.extend(this,b),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(a,b){var e=this.keys[a];switch(e){case"next":for(var f,l=this._.focusIndex,e=this.element.getElementsByTag("a");f=e.getItem(++l);)if(f.getAttribute("_cke_focus")&&f.$.offsetWidth){this._.focusIndex=l,f.focus();break}return f||b?!1:(this._.focusIndex=-1,this.onKeyDown(a,1));case"prev":for(l=this._.focusIndex,e=this.element.getElementsByTag("a");l>0&&(f=e.getItem(--l));){if(f.getAttribute("_cke_focus")&&f.$.offsetWidth){this._.focusIndex=l,f.focus();break}f=null}return f||b?!1:(this._.focusIndex=e.count(),this.onKeyDown(a,1));case"click":case"mouseup":return l=this._.focusIndex,(f=l>=0&&this.element.getElementsByTag("a").getItem(l))&&(f.$[e]?f.$[e]():f.$["on"+e]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function a(a,c,d,m,l){l=CKEDITOR.tools.genKey(c.getUniqueId(),d.getUniqueId(),a.lang.dir,a.uiColor||"",m.css||"",l||"");var f=e[l];return f||(f=e[l]=new CKEDITOR.ui.panel(c,m),f.element=d.append(CKEDITOR.dom.element.createFromHtml(f.render(a),c)),f.element.setStyles({display:"none",position:"absolute"})),f}var e={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(b,c,d,e){function l(){g.hide()}d.forceIFrame=1,d.toolbarRelated&&b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(c=CKEDITOR.document.getById("cke_"+b.name));var f=c.getDocument();e=a(b,f,c,d,e||0);var h=e.element,k=h.getFirst(),g=this;h.disableContextMenu(),this.element=h,this._={editor:b,panel:e,parentElement:c,definition:d,document:f,iframe:k,children:[],dir:b.lang.dir,showBlockParams:null},b.on("mode",l),b.on("resize",l),f.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(a,c){return this._.panel.addBlock(a,c)},addListBlock:function(a,c){return this._.panel.addListBlock(a,c)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,c,d,e,l,f){var h=this._.panel,k=h.showBlock(a);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var g=this._.editor.editable();this._.returnFocus=g.hasFocus?g:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var n=this.element,g=this._.iframe,g=CKEDITOR.env.ie&&!CKEDITOR.env.edge?g:new CKEDITOR.dom.window(g.$.contentWindow),q=n.getDocument(),t=this._.parentElement.getPositionedAncestor(),u=c.getDocumentPosition(q),q=t?t.getDocumentPosition(q):{x:0,y:0},p="rtl"==this._.dir,r=u.x+(e||0)-q.x,w=u.y+(l||0)-q.y;!p||1!=d&&4!=d?p||2!=d&&3!=d||(r+=c.$.offsetWidth-1):r+=c.$.offsetWidth,3!=d&&4!=d||(w+=c.$.offsetHeight-1),this._.panel._.offsetParentId=c.getId(),n.setStyles({top:w+"px",left:0,display:""}),n.setOpacity(0),n.getFirst().removeStyle("width"),this._.editor.focusManager.add(g),this._.blurSet||(CKEDITOR.event.useCapture=!0,g.on("blur",function(a){function b(){delete this._.returnFocus,this.hide()}this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(b,0,this)):b.call(this))},this),g.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(g.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),g.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),h.onEscape=CKEDITOR.tools.bind(function(a){return this.onEscape&&!1===this.onEscape(a)?!1:void 0},this),CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){var a=n;if(a.removeStyle("width"),k.autoSize){var b=k.element.getDocument(),b=(CKEDITOR.env.webkit?k.element:b.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&b>0&&(b+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3),a.setStyle("width",b+10+"px"),b=k.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&b>0&&(b+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3),a.setStyle("height",b+"px"),h._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");p&&(r-=n.$.offsetWidth),n.setStyle("left",r+"px");var b=h.element.getWindow(),a=n.$.getBoundingClientRect(),b=b.getViewPaneSize(),c=a.width||a.right-a.left,d=a.height||a.bottom-a.top,e=p?a.right:b.width-a.left,g=p?b.width-a.right:a.left;p?c>e&&(r=g>c?r+c:b.width>c?r-a.left:r-a.right+b.width):c>e&&(r=g>c?r-c:b.width>c?r-a.right+b.width:r-a.left),c=a.top,b.height-a.top<d&&(w=c>d?w-d:b.height>d?w-a.bottom+b.height:w-a.top),CKEDITOR.env.ie&&(b=a=new CKEDITOR.dom.element(n.$.offsetParent),"html"==b.getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(r=CKEDITOR.env.ie8Compat?r-2*n.getDocument().getDocumentElement().$.scrollLeft:r-(a.$.scrollWidth-a.$.clientWidth)));var m,a=n.getFirst();(m=a.getCustomData("activePanel"))&&m.onHide&&m.onHide.call(this,1),a.setCustomData("activePanel",this),n.setStyles({top:w+"px",left:r+"px"}),n.setOpacity(1),f&&f()},this);h.isLoaded?a():h.onLoad=a,CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),k.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var a=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,a))},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(a=a&&this._.returnFocus)&&(CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(a){var c=this._.panel;return void 0!==a&&(c.allowBlur=a),c.allowBlur},showAsChild:function(a,c,d,e,l,f){this._.activeChild==a&&a._.panel._.offsetParentId==d.getId()||(this.hideChild(),a.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(c,d,e,l,f),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(a){var c=this._.activeChild;c&&(delete c.onHide,delete this._.activeChild,c.hide(),a&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var c,a=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(c in e){var d=e[c];a?d.destroy():d.element.hide()}a&&(e={})})}(),CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(a){function e(c,e,h,k){var g=new CKEDITOR.style(d["colorButton_"+e+"Style"]),n=CKEDITOR.tools.getNextId()+"_colorBox";a.ui.add(c,CKEDITOR.UI_PANELBUTTON,{label:h,title:h,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+k,allowedContent:g,requiredContent:g,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":m.panelTitle}},onBlock:function(c,d){d.autoSize=!0,d.element.addClass("cke_colorblock"),d.element.setHtml(b(c,e,n)),d.element.getDocument().getBody().setStyle("overflow","hidden"),CKEDITOR.ui.fire("ready",this);var g=d.keys,h="rtl"==a.lang.dir;g[h?37:39]="next",g[40]="next",g[9]="next",g[h?39:37]="prev",g[38]="prev",g[CKEDITOR.SHIFT+9]="prev",g[32]="click"},refresh:function(){a.activeFilter.check(g)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var c,b=a.getSelection(),b=b&&b.getStartElement(),b=a.elementPath(b);if(b){b=b.block||b.blockLimit||a.document.getBody();do c=b&&b.getComputedStyle("back"==e?"background-color":"color")||"transparent";while("back"==e&&"transparent"==c&&b&&(b=b.getParent()));return c&&"transparent"!=c||(c="#ffffff"),this._.panel._.iframe.getFrameDocument().getById(n).setStyle("background-color",c),c}}})}function b(b,e,h){var k=[],g=d.colorButton_colors.split(","),n=a.plugins.colordialog&&!1!==d.colorButton_enableMore,q=g.length+(n?2:1),t=CKEDITOR.tools.addFunction(function(e,f){function g(a){this.removeListener("ok",g),this.removeListener("cancel",g),"ok"==a.name&&h(this.getContentElement("picker","selectedColor").getValue(),f)}var h=arguments.callee;if("?"==e)a.openDialog("colordialog",function(){this.on("ok",g),this.on("cancel",g)});else{if(a.focus(),b.hide(),a.fire("saveSnapshot"),a.removeStyle(new CKEDITOR.style(d["colorButton_"+f+"Style"],{color:"inherit"})),e){var k=d["colorButton_"+f+"Style"];k.childRule="back"==f?function(a){return c(a)}:function(a){return!(a.is("a")||a.getElementsByTag("a").count())||c(a)},a.applyStyle(new CKEDITOR.style(k,{color:e}))}a.fire("saveSnapshot")}});for(k.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',m.auto,'" onclick="CKEDITOR.tools.callFunction(',t,",null,'",e,"');return false;\" href=\"javascript:void('",m.auto,'\')" role="option" aria-posinset="1" aria-setsize="',q,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',h,'"></span></td><td colspan=7 align=center>',m.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">'),h=0;h<g.length;h++){0===h%8&&k.push("</tr><tr>");var u=g[h].split("/"),p=u[0],r=u[1]||p;u[1]||(p="#"+p.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3")),u=a.lang.colorbutton.colors[r]||r,k.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',u,'" onclick="CKEDITOR.tools.callFunction(',t,",'",p,"','",e,"'); return false;\" href=\"javascript:void('",u,'\')" role="option" aria-posinset="',h+2,'" aria-setsize="',q,'"><span class="cke_colorbox" style="background-color:#',r,'"></span></a></td>')}return n&&k.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',m.more,'" onclick="CKEDITOR.tools.callFunction(',t,",'?','",e,"');return false;\" href=\"javascript:void('",m.more,"')\"",' role="option" aria-posinset="',q,'" aria-setsize="',q,'">',m.more,"</a></td>"),k.push("</tr></table>"),k.join("")}function c(a){return"false"==a.getAttribute("contentEditable")||a.getAttribute("data-nostyle")}var d=a.config,m=a.lang.colorbutton;CKEDITOR.env.hc||(e("TextColor","fore",m.textColorTitle,10),e("BGColor","back",m.bgColorTitle,20))}}),CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},CKEDITOR.plugins.colordialog={requires:"dialog",init:function(a){var e=new CKEDITOR.dialogCommand("colordialog");e.editorFocus=!1,a.addCommand("colordialog",e),CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js"),a.getColorFromDialog=function(b,c){var d=function(a){this.removeListener("ok",d),this.removeListener("cancel",d),a="ok"==a.name?this.getValueOf("picker","selectedColor"):null,b.call(c,a)},e=function(a){a.on("ok",d),a.on("cancel",d)};a.execCommand("colordialog"),a._.storedDialogs&&a._.storedDialogs.colordialog?e(a._.storedDialogs.colordialog):CKEDITOR.on("dialogDefinition",function(a){if("colordialog"==a.data.name){var b=a.data.definition;a.removeListener(),b.onLoad=CKEDITOR.tools.override(b.onLoad,function(a){return function(){e(this),b.onLoad=a,"function"==typeof a&&a.call(this)}})}})}}},CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(a){for(var e=a.config.menu_groups.split(","),b=a._.menuGroups={},c=a._.menuItems={},d=0;d<e.length;d++)b[e[d]]=d+1;a.addMenuGroup=function(a,c){b[a]=c||100},a.addMenuItem=function(a,d){b[d.group]&&(c[a]=new CKEDITOR.menuItem(this,a,d))},a.addMenuItems=function(a){for(var b in a)this.addMenuItem(b,a[b])},a.getMenuItem=function(a){return c[a]},a.removeMenuItem=function(a){delete c[a]}}}),function(){function a(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.order<b.order?-1:a.order>b.order?1:0})}var e='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),b=CKEDITOR.addTemplate("menuItem",e+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),c=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,b){b=this._.definition=b||{},this.id=CKEDITOR.tools.getNextId(),this.editor=a,this.items=[],this._.listeners=[],this._.level=b.level||1;var c=CKEDITOR.tools.extend({},b.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),e=c.block.attributes=c.attributes||{};!e.role&&(e.role="menu"),this._.panelDefinition=c},_:{onShow:function(){var a=this.editor.getSelection(),b=a&&a.getStartElement(),c=this.editor.elementPath(),e=this._.listeners;this.removeAll();for(var h=0;h<e.length;h++){var k=e[h](b,a,c);if(k)for(var g in k){var n=this.editor.getMenuItem(g);!n||n.command&&!this.editor.getCommand(n.command).state||(n.state=k[g],this.add(n))}}},onClick:function(a){this.hide(),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;return b?b._.panel.hideChild(1):27==a&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var b=this._.subMenu,c=this.items[a];if(c=c.getItems&&c.getItems()){b?b.removeAll():(b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),b.parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var e in c){var h=this.editor.getMenuItem(e);h&&(h.state=c[e],b.add(h))}var k=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(a));setTimeout(function(){b.show(k,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(b,c,e,f){if(this.parent||(this._.onShow(),this.items.length)){c=c||("rtl"==this.editor.lang.dir?2:1);var h=this.items,k=this.editor,g=this._.panel,n=this._.element;if(!g){g=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),g.onEscape=CKEDITOR.tools.bind(function(a){return!1===this._.onEscape(a)?!1:void 0},this),g.onShow=function(){g._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},g.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),n=g.addBlock(this.id,this._.panelDefinition.block),n.autoSize=!0;var q=n.keys;q[40]="next",q[9]="next",q[38]="prev",q[CKEDITOR.SHIFT+9]="prev",q["rtl"==k.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",q[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(q[13]="mouseup"),n=this._.element=n.element,q=n.getDocument(),q.getBody().setStyle("overflow","hidden"),q.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,k.config.menu_subMenuDelay||400,this,[a])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];b.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):b.getItems?this._.showSubMenu(a):this._.onClick(b)},this)}a(h);for(var q=k.elementPath(),q=['<div class="cke_menu'+(q&&q.direction()!=k.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],t=h.length,u=t&&h[0].group,p=0;t>p;p++){var r=h[p];u!=r.group&&(q.push('<div class="cke_menuseparator" role="separator"></div>'),u=r.group),r.render(this,p,q)}q.push("</div>"),n.setHtml(q.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(g,this.id,b,c,e,f):g.showBlock(this.id,b,c,e,f),k.fire("menuShow",[g])}},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(a)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,b,c){CKEDITOR.tools.extend(this,c,{order:0,className:"cke_menubutton__"+b}),this.group=a._.menuGroups[this.group],this.editor=a,this.name=b},proto:{render:function(a,e,l){var f=a.id+String(e),h="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,k="",g=h==CKEDITOR.TRISTATE_ON?"on":h==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(k=' aria-checked="'+(h==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var n=this.getItems,q="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",t=this.name;this.icon&&!/\./.test(this.icon)&&(t=this.icon),a={id:f,name:this.name,iconName:t,label:this.label,cls:this.className||"",state:g,hasPopup:n?"true":"false",disabled:h==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:e,iconStyle:CKEDITOR.skin.getIconStyle(t,"rtl"==this.editor.lang.dir,t==this.icon?null:this.icon,this.iconOffset),arrowHtml:n?c.output({label:q}):"",role:this.role?this.role:"menuitem",ariaChecked:k},b.output(a,l)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,e){if(a.on("contextmenu",function(a){a=a.data;var c=CKEDITOR.env.webkit?b:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!e||!c){if(a.preventDefault(),CKEDITOR.env.mac&&CKEDITOR.env.webkit){var c=this.editor,l=new CKEDITOR.dom.elementPath(a.getTarget(),c.editable()).contains(function(a){return a.hasAttribute("contenteditable")},!0);l&&"false"==l.getAttribute("contenteditable")&&c.getSelection().fake(l)}var l=a.getTarget().getDocument(),f=a.getTarget().getDocument().getDocumentElement(),c=!l.equals(CKEDITOR.document),l=l.getWindow().getScrollPosition(),h=c?a.$.clientX:a.$.pageX||l.x+a.$.clientX,k=c?a.$.clientY:a.$.pageY||l.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(f,null,h,k)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var b,c=function(){b=0};a.on("keydown",function(a){b=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey}),a.on("keyup",c),a.on("contextmenu",c)}},open:function(a,e,b,c){this.editor.focus(),a=a||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(a,e,b,c)}}})},beforeInit:function(a){var e=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){e.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)}),a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}}),a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function a(a){var b=this.att;a=a&&a.hasAttribute(b)&&a.getAttribute(b)||"",void 0!==a&&this.setValue(a)}function e(){for(var a,b=0;b<arguments.length;b++)if(arguments[b]instanceof CKEDITOR.dom.element){a=arguments[b];break}if(a){var b=this.att,e=this.getValue();e?a.setAttribute(b,e):a.removeAttribute(b,e)}}var b={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(a){a||(a=b);var d=[];a.id&&d.push("id"),a.dir&&d.push("dir");var e="";return d.length&&(e+="["+d.join(",")+"]"),a.classes&&(e+="(*)"),a.styles&&(e+="{*}"),e},createAdvancedTab:function(c,d,m){d||(d=b);var l=c.lang.common,f={id:"advanced",label:l.advancedTab,title:l.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},h=[];return(d.id||d.dir)&&(d.id&&h.push({id:"advId",att:"id",type:"text",requiredContent:m?m+"[id]":null,label:l.id,setup:a,commit:e}),d.dir&&h.push({id:"advLangDir",att:"dir",type:"select",requiredContent:m?m+"[dir]":null,label:l.langDir,default:"",style:"width:100%",items:[[l.notSet,""],[l.langDirLTR,"ltr"],[l.langDirRTL,"rtl"]],setup:a,commit:e}),f.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(h)})),(d.styles||d.classes)&&(h=[],d.styles&&h.push({id:"advStyles",att:"style",type:"text",requiredContent:m?m+"{cke-xyz}":null,label:l.styles,default:"",validate:CKEDITOR.dialog.validate.inlineStyle(l.invalidInlineStyle),onChange:function(){},getStyle:function(a,b){var c=this.getValue().match(new RegExp("(?:^|;)\\s*"+a+"\\s*:\\s*([^;]*)","i"));return c?c[1]:b},updateStyle:function(a,b){var d=this.getValue(),e=c.document.createElement("span");e.setAttribute("style",d),e.setStyle(a,b),d=CKEDITOR.tools.normalizeCssText(e.getAttribute("style")),this.setValue(d,1)},setup:a,
commit:e}),d.classes&&h.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:m?m+"(cke-xyz)":null,label:l.cssClasses,default:"",setup:a,commit:e}]}),f.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(h)})),f}})}(),function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function(a){if(!a.blockless){var e=a.lang.div,b="div(*)";CKEDITOR.dialog.isTabEnabled(a,"editdiv","advanced")&&(b+=";div[dir,id,lang,title]{*}"),a.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:b,requiredContent:"div",contextSensitive:!0,refresh:function(a,b){this.setState("div"in(a.config.div_wrapTable?b.root:b.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})),a.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"})),a.addCommand("removediv",{requiredContent:"div",exec:function(a){function b(d){(d=CKEDITOR.plugins.div.getSurroundDiv(a,d))&&!d.data("cke-div-added")&&(k.push(d),d.data("cke-div-added"))}for(var f,e=a.getSelection(),l=e&&e.getRanges(),h=e.createBookmarks(),k=[],g=0;g<l.length;g++)f=l[g],f.collapsed?b(e.getStartElement()):(f=new CKEDITOR.dom.walker(f),f.evaluator=b,f.lastForward());for(g=0;g<k.length;g++)k[g].remove(!0);e.selectBookmarks(h)}}),a.ui.addButton&&a.ui.addButton("CreateDiv",{label:e.toolbar,command:"creatediv",toolbar:"blocks,50"}),a.addMenuItems&&(a.addMenuItems({editdiv:{label:e.edit,command:"editdiv",group:"div",order:1},removediv:{label:e.remove,command:"removediv",group:"div",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(b){return!b||b.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(a)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null})),CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js"),CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}}),CKEDITOR.plugins.div={getSurroundDiv:function(a,e){var b=a.elementPath(e);return a.elementPath(b.blockLimit).contains(function(a){return a.is("div")&&!a.isReadOnly()},1)}}}(),function(){function a(a,b){function l(b){if(b=g.list[b],b.equals(a.editable())||"true"==b.getAttribute("contenteditable")){var c=a.createRange();c.selectNodeContents(b),c.select()}else a.getSelection().selectElement(b);a.focus()}function f(){k&&k.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete g.list}var k,h=a.ui.spaceId("path"),g=a._.elementsPath,n=g.idBase;b.html+='<span id="'+h+'_label" class="cke_voice_label">'+a.lang.elementspath.eleLabel+'</span><span id="'+h+'" class="cke_path" role="group" aria-labelledby="'+h+'_label"><span class="cke_path_empty">&nbsp;</span></span>',a.on("uiReady",function(){var b=a.ui.space("path");b&&a.focusManager.add(b,1)}),g.onClick=l;var q=CKEDITOR.tools.addFunction(l),t=CKEDITOR.tools.addFunction(function(b,c){var f,e=g.idBase;switch(c=new CKEDITOR.dom.event(c),f="rtl"==a.lang.dir,c.getKeystroke()){case f?39:37:case 9:return(f=CKEDITOR.document.getById(e+(b+1)))||(f=CKEDITOR.document.getById(e+"0")),f.focus(),!1;case f?37:39:case CKEDITOR.SHIFT+9:return(f=CKEDITOR.document.getById(e+(b-1)))||(f=CKEDITOR.document.getById(e+(g.list.length-1))),f.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return l(b),!1}return!0});a.on("selectionChange",function(){for(var v,b=[],e=g.list=[],f=[],l=g.filters,m=!0,B=a.elementPath().elements,y=B.length;y--;){var C=B[y],x=0;v=C.data("cke-display-name")?C.data("cke-display-name"):C.data("cke-real-element-type")?C.data("cke-real-element-type"):C.getName(),(m=C.hasAttribute("contenteditable")?"true"==C.getAttribute("contenteditable"):m)||C.hasAttribute("contenteditable")||(x=1);for(var A=0;A<l.length;A++){var D=l[A](C,v);if(!1===D){x=1;break}v=D||v}x||(e.unshift(C),f.unshift(v))}for(e=e.length,l=0;e>l;l++)v=f[l],m=a.lang.elementspath.eleTitle.replace(/%1/,v),v=c.output({id:n+l,label:m,text:v,jsTitle:"javascript:void('"+v+"')",index:l,keyDownFn:t,clickFn:q}),b.unshift(v);k||(k=CKEDITOR.document.getById(h)),f=k,f.setHtml(b.join("")+'<span class="cke_path_empty">&nbsp;</span>'),a.fire("elementsPathUpdate",{space:f})}),a.on("readOnly",f),a.on("contentDomUnload",f),a.addCommand("elementsPathFocus",e.toolbarFocus),a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var e={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},b="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(b+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(b+=' onblur="this.style.cssText = this.style.cssText;"');var c=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+b+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(b){b._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},b.on("uiSpace",function(c){"bottom"==c.data.space&&a(b,c.data)})}})}(),function(){function a(a,b,c){c=a.config.forceEnterMode||c,"wysiwyg"==a.mode&&(b||(b=a.activeEnterMode),a.elementPath().isContextFor("p")||(b=CKEDITOR.ENTER_BR,c=1),a.fire("saveSnapshot"),b==CKEDITOR.ENTER_BR?l(a,b,null,c):f(a,b,null,c),a.fire("saveSnapshot"))}function e(a){a=a.getSelection().getRanges(!0);for(var b=a.length-1;b>0;b--)a[b].deleteContents();return a[0]}function b(a){var b=a.startContainer.getAscendant(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"true"==a.getAttribute("contenteditable")},!0);return a.root.equals(b)?a:(b=new CKEDITOR.dom.range(b),b.moveToRange(a),b)}CKEDITOR.plugins.add("enterkey",{init:function(b){b.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){a(b)}}),b.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){a(b,b.activeShiftEnterMode,1)}}),b.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var c=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(a,f,m,q){if(m=m||e(a)){m=b(m);var B,t=m.document,u=m.checkStartOfBlock(),p=m.checkEndOfBlock(),r=a.elementPath(m.startContainer),w=r.block,z=f==CKEDITOR.ENTER_DIV?"div":"p";if(u&&p){if(w&&(w.is("li")||w.getParent().is("li"))){w.is("li")||(w=w.getParent()),m=w.getParent(),B=m.getParent(),q=!w.hasPrevious();var v=!w.hasNext(),z=a.getSelection(),y=z.createBookmarks(),u=w.getDirection(1),p=w.getAttribute("class"),C=w.getAttribute("style"),x=B.getDirection(1)!=u;if(a=a.enterMode!=CKEDITOR.ENTER_BR||x||C||p,B.is("li"))q||v?(q&&v&&m.remove(),w[v?"insertAfter":"insertBefore"](B)):w.breakParent(B);else{if(a)r.block.is("li")?(B=t.createElement(f==CKEDITOR.ENTER_P?"p":"div"),x&&B.setAttribute("dir",u),C&&B.setAttribute("style",C),p&&B.setAttribute("class",p),w.moveChildren(B)):B=r.block,q||v?B[q?"insertBefore":"insertAfter"](m):(w.breakParent(m),B.insertAfter(m));else if(w.appendBogus(!0),q||v)for(;t=w[q?"getFirst":"getLast"]();)t[q?"insertBefore":"insertAfter"](m);else for(w.breakParent(m);t=w.getLast();)t.insertAfter(m);w.remove()}return void z.selectBookmarks(y)}if(w&&w.getParent().is("blockquote"))return w.breakParent(w.getParent()),w.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||w.getPrevious().remove(),w.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||w.getNext().remove(),m.moveToElementEditStart(w),void m.select()}else if(w&&w.is("pre")&&!p)return void l(a,f,m,q);if(u=m.splitBlock(z)){if(f=u.previousBlock,w=u.nextBlock,r=u.wasStartOfBlock,a=u.wasEndOfBlock,w?(y=w.getParent(),y.is("li")&&(w.breakParent(y),w.move(w.getNext(),1))):f&&(y=f.getParent())&&y.is("li")&&(f.breakParent(y),y=f.getNext(),m.moveToElementEditStart(y),f.move(f.getPrevious())),r||a){if(f?(f.is("li")||!h.test(f.getName())&&!f.is("pre"))&&(B=f.clone()):w&&(B=w.clone()),B?q&&!B.is("li")&&B.renameNode(z):y&&y.is("li")?B=y:(B=t.createElement(z),f&&(v=f.getDirection())&&B.setAttribute("dir",v)),t=u.elementPath)for(q=0,z=t.elements.length;z>q&&(y=t.elements[q],!y.equals(t.block)&&!y.equals(t.blockLimit));q++)CKEDITOR.dtd.$removeEmpty[y.getName()]&&(y=y.clone(),B.moveChildren(y),B.append(y));B.appendBogus(),B.getParent()||m.insertNode(B),B.is("li")&&B.removeAttribute("value"),!CKEDITOR.env.ie||!r||a&&f.getChildCount()||(m.moveToElementEditStart(a?f:B),m.select()),m.moveToElementEditStart(r&&!a?w:B)}else w.is("li")&&(B=m.clone(),B.selectNodeContents(w),B=new CKEDITOR.dom.walker(B),B.evaluator=function(a){return!(d(a)||c(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty))},(y=B.next())&&y.type==CKEDITOR.NODE_ELEMENT&&y.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?t.createElement("br"):t.createText(" ")).insertBefore(y)),w&&m.moveToElementEditStart(w);m.select(),m.scrollIntoView()}}},enterBr:function(a,b,c,d){if(c=c||e(a)){var m=c.document,l=c.checkEndOfBlock(),p=new CKEDITOR.dom.elementPath(a.getSelection().getStartElement()),r=p.block,w=r&&p.block.getName();d||"li"!=w?(!d&&l&&h.test(w)?(l=r.getDirection())?(m=m.createElement("div"),m.setAttribute("dir",l),m.insertAfter(r),c.setStart(m,0)):(m.createElement("br").insertAfter(r),CKEDITOR.env.gecko&&m.createText("").insertAfter(r),c.setStartAt(r.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(a="pre"==w&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?m.createText("\r"):m.createElement("br"),c.deleteContents(),c.insertNode(a),CKEDITOR.env.needsBrFiller?(m.createText("\ufeff").insertAfter(a),l&&(r||p.blockLimit).appendBogus(),a.getNext().$.nodeValue="",c.setStartAt(a.getNext(),CKEDITOR.POSITION_AFTER_START)):c.setStartAt(a,CKEDITOR.POSITION_AFTER_END)),c.collapse(!0),c.select(),c.scrollIntoView()):f(a,b,c,d)}}};var m=CKEDITOR.plugins.enterkey,l=m.enterBr,f=m.enterBlock,h=/^h[1-6]$/}(),function(){function a(a,b){var c={},d=[],m={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(a=a.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(a,e){var f=b?"&"+e+";":m[e];return c[f]=b?m[e]:"&"+e+";",d.push(f),""}),!b&&a){a=a.split(",");var f,l=document.createElement("div");for(l.innerHTML="&"+a.join(";&")+";",f=l.innerHTML,l=null,l=0;l<f.length;l++){var h=f.charAt(l);c[h]="&"+a[l]+";",d.push(h)}}return c.regex=d.join(b?"|":""),c}CKEDITOR.plugins.add("entities",{afterInit:function(e){function b(a){return h[a]}function c(a){return"force"!=d.entities_processNumerical&&l[a]?l[a]:"&#"+a.charCodeAt(0)+";"}var d=e.config;if(e=(e=e.dataProcessor)&&e.htmlFilter){var m=[];!1!==d.basicEntities&&m.push("nbsp,gt,lt,amp"),d.entities&&(m.length&&m.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),d.entities_latin&&m.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),d.entities_greek&&m.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),d.entities_additional&&m.push(d.entities_additional));var l=a(m.join(",")),f=l.regex?"["+l.regex+"]":"a^";delete l.regex,d.entities&&d.entities_processNumerical&&(f="[^ -~]|"+f);var f=new RegExp(f,"g"),h=a("nbsp,gt,lt,amp,shy",!0),k=new RegExp(h.regex,"g");e.addRules({text:function(a){return a.replace(k,b).replace(f,c)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(a,e,b,c){e=e||"80%",b=b||"70%","string"==typeof e&&1<e.length&&"%"==e.substr(e.length-1,1)&&(e=parseInt(window.screen.width*parseInt(e,10)/100,10)),"string"==typeof b&&1<b.length&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.height*parseInt(b,10)/100,10)),640>e&&(e=640),420>b&&(b=420);var d=parseInt((window.screen.height-b)/2,10),m=parseInt((window.screen.width-e)/2,10);c=(c||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+e+",height="+b+",top="+d+",left="+m;var l=window.open("",null,c,!0);if(!l)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(l.moveTo(m,d),l.resizeTo(e,b)),l.focus(),l.location.href=a}catch(f){window.open(a,null,c,!0)}return!0}}),function(){function a(a,b){var c=[];if(!b)return a;for(var d in b)c.push(d+"="+encodeURIComponent(b[d]));return a+(-1!=a.indexOf("?")?"&":"?")+c.join("&")}function e(a){return a+="",a.charAt(0).toUpperCase()+a.substr(1)}function b(){var b=this.getDialog(),c=b.getParentEditor();c._.filebrowserSe=this;var d=c.config["filebrowser"+e(b.getName())+"WindowWidth"]||c.config.filebrowserWindowWidth||"80%",b=c.config["filebrowser"+e(b.getName())+"WindowHeight"]||c.config.filebrowserWindowHeight||"70%",f=this.filebrowser.params||{};f.CKEditor=c.name,f.CKEditorFuncNum=c._.filebrowserFn,f.langCode||(f.langCode=c.langCode),f=a(this.filebrowser.url,f),c.popup(f,d,b,c.config.filebrowserWindowFeatures||c.config.fileBrowserWindowFeatures)}function c(){var a=this.getDialog();return a.getParentEditor()._.filebrowserSe=this,!(!a.getContentElement(this.for[0],this.for[1]).getInputElement().$.value||!a.getContentElement(this.for[0],this.for[1]).getAction())}function d(b,c,d){var e=d.params||{};e.CKEditor=b.name,e.CKEditorFuncNum=b._.filebrowserFn,e.langCode||(e.langCode=b.langCode),c.action=a(d.url,e),c.filebrowser=d}function m(a,f,g,l){if(l&&l.length)for(var q,t=l.length;t--;)if(q=l[t],"hbox"!=q.type&&"vbox"!=q.type&&"fieldset"!=q.type||m(a,f,g,q.children),q.filebrowser)if("string"==typeof q.filebrowser&&(q.filebrowser={action:"fileButton"==q.type?"QuickUpload":"Browse",target:q.filebrowser}),"Browse"==q.filebrowser.action){var u=q.filebrowser.url;void 0===u&&(u=a.config["filebrowser"+e(f)+"BrowseUrl"],void 0===u&&(u=a.config.filebrowserBrowseUrl)),u&&(q.onClick=b,q.filebrowser.url=u,q.hidden=!1)}else if("QuickUpload"==q.filebrowser.action&&q.for&&(u=q.filebrowser.url,void 0===u&&(u=a.config["filebrowser"+e(f)+"UploadUrl"],void 0===u&&(u=a.config.filebrowserUploadUrl)),u)){var p=q.onClick;q.onClick=function(a){var b=a.sender;return p&&!1===p.call(b,a)?!1:c.call(b,a)},q.filebrowser.url=u,q.hidden=!1,d(a,g.getContents(q.for[0]).get(q.for[1]),q.filebrowser)}}function l(a,b,c){if(-1!==c.indexOf(";")){c=c.split(";");for(var d=0;d<c.length;d++)if(l(a,b,c[d]))return!0;return!1}return(a=a.getContents(b).get(c).filebrowser)&&a.url}function f(a,b){var c=this._.filebrowserSe.getDialog(),d=this._.filebrowserSe.for,e=this._.filebrowserSe.filebrowser.onSelect;d&&c.getContentElement(d[0],d[1]).reset(),"function"==typeof b&&!1===b.call(this._.filebrowserSe)||e&&!1===e.call(this._.filebrowserSe,a,b)||("string"==typeof b&&b&&alert(b),a&&(d=this._.filebrowserSe,c=d.getDialog(),d=d.filebrowser.target||null)&&(d=d.split(":"),(e=c.getContentElement(d[0],d[1]))&&(e.setValue(a),c.selectPage(d[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(f,a),a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(a){if(a.editor.plugins.filebrowser)for(var c,b=a.data.definition,d=0;d<b.contents.length;++d)(c=b.contents[d])&&(m(a.editor,a.data.name,b,c.elements),c.hidden&&c.filebrowser&&(c.hidden=!l(b,c.id,c.filebrowser)))})}(),CKEDITOR.plugins.add("find",{requires:"dialog",init:function(a){var e=a.addCommand("find",new CKEDITOR.dialogCommand("find"));e.canUndo=!1,e.readOnly=1,a.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1,a.ui.addButton&&(a.ui.addButton("Find",{label:a.lang.find.find,command:"find",toolbar:"find,10"}),a.ui.addButton("Replace",{label:a.lang.find.replace,command:"replace",toolbar:"find,20"})),CKEDITOR.dialog.add("find",this.path+"dialogs/find.js"),CKEDITOR.dialog.add("replace",this.path+"dialogs/find.js")}}),CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}},function(){function a(a,b){var d=c.exec(a),e=c.exec(b);if(d){if(!d[2]&&"px"==e[2])return e[1];if("px"==d[2]&&!e[2])return e[1]+"px"}return b}var e=CKEDITOR.htmlParser.cssStyle,b=CKEDITOR.tools.cssLength,c=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,d={elements:{$:function(b){var c=b.attributes;if((c=(c=(c=c&&c["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(c)))&&c.children[0])&&b.attributes["data-cke-resizable"]){var d=new e(b).rules;b=c.attributes;var h=d.width,d=d.height;h&&(b.width=a(b.width,h)),d&&(b.height=a(b.height,d))}return c}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(d,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(a,c,d,h){var k=this.lang.fakeobjects,k=k[d]||k.unknown;return c={class:c,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:k,title:k,align:a.getAttribute("align")||""},CKEDITOR.env.hc||(c.src=CKEDITOR.tools.transparentImageData),d&&(c["data-cke-real-element-type"]=d),h&&(c["data-cke-resizable"]=h,d=new e,h=a.getAttribute("width"),a=a.getAttribute("height"),h&&(d.rules.width=b(h)),a&&(d.rules.height=b(a)),d.populate(c)),this.document.createElement("img",{attributes:c})},CKEDITOR.editor.prototype.createFakeParserElement=function(a,c,d,h){var g,k=this.lang.fakeobjects,k=k[d]||k.unknown;return g=new CKEDITOR.htmlParser.basicWriter,a.writeHtml(g),g=g.getHtml(),c={class:c,"data-cke-realelement":encodeURIComponent(g),"data-cke-real-node-type":a.type,alt:k,title:k,align:a.attributes.align||""},CKEDITOR.env.hc||(c.src=CKEDITOR.tools.transparentImageData),d&&(c["data-cke-real-element-type"]=d),h&&(c["data-cke-resizable"]=h,h=a.attributes,a=new e,d=h.width,h=h.height,void 0!==d&&(a.rules.width=b(d)),void 0!==h&&(a.rules.height=b(h)),a.populate(c)),new CKEDITOR.htmlParser.element("img",c)},CKEDITOR.editor.prototype.restoreRealElement=function(b){if(b.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var c=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(b.data("cke-realelement")),this.document);if(b.data("cke-resizable")){var d=b.getStyle("width");b=b.getStyle("height"),d&&c.setAttribute("width",a(c.getAttribute("width"),d)),b&&c.setAttribute("height",a(c.getAttribute("height"),b))}return c}}(),function(){function a(a){return a=a.attributes,"application/x-shockwave-flash"==a.type||b.test(a.src||"")}function e(a,b){return a.createFakeParserElement(b,"cke_flash","flash",!0)}var b=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(a){var b="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(a,"flash","properties")&&(b+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]"),CKEDITOR.dialog.isTabEnabled(a,"flash","advanced")&&(b+=";object[id]{*}; embed[bgcolor]{*}(*)"),a.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:b,requiredContent:"embed"})),a.ui.addButton&&a.ui.addButton("Flash",{label:a.lang.common.flash,command:"flash",toolbar:"insert,20"}),CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js"),a.addMenuItems&&a.addMenuItems({flash:{label:a.lang.flash.properties,command:"flash",group:"flash"}}),a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"flash"==b.data("cke-real-element-type")&&(a.data.dialog="flash")}),a.contextMenu&&a.contextMenu.addListener(function(a){return a&&a.is("img")&&!a.isReadOnly()&&"flash"==a.data("cke-real-element-type")?{flash:CKEDITOR.TRISTATE_OFF}:void 0})},afterInit:function(b){var d=b.dataProcessor;(d=d&&d.dataFilter)&&d.addRules({elements:{"cke:object":function(d){var l=d.attributes;if(!(l.classid&&String(l.classid).toLowerCase()||a(d))){for(l=0;l<d.children.length;l++)if("cke:embed"==d.children[l].name){if(!a(d.children[l]))break;return e(b,d)}return null}return e(b,d)},"cke:embed":function(d){return a(d)?e(b,d):null}}},5)}})}(),CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1}),function(){function a(a){var d=a.config,m=a.fire("uiSpace",{space:"top",html:""}).html,l=function(){function f(a,c,d){h.setStyle(c,b(d)),h.setStyle("position",a)}function g(a){var b=m.getDocumentPosition();switch(a){case"top":f("absolute","top",b.y-z-y);break;case"pin":f("fixed","top",x);break;case"bottom":f("absolute","top",b.y+(r.height||r.bottom-r.top)+y)}k=a}var k,m,p,r,w,z,B,v=d.floatSpaceDockedOffsetX||0,y=d.floatSpaceDockedOffsetY||0,C=d.floatSpacePinnedOffsetX||0,x=d.floatSpacePinnedOffsetY||0;return function(f){if(m=a.editable()){var n=f&&"focus"==f.name;n&&h.show(),a.fire("floatingSpaceLayout",{show:n}),h.removeStyle("left"),h.removeStyle("right"),p=h.getClientRect(),r=m.getClientRect(),w=e.getViewPaneSize(),z=p.height,B="pageXOffset"in e.$?e.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,k?(g(z+y<=r.top?"top":z+y>w.height-r.bottom?"pin":"bottom"),f=w.width/2,f=d.floatSpacePreferRight?"right":0<r.left&&r.right<w.width&&r.width>p.width?"rtl"==d.contentsLangDirection?"right":"left":f-r.left>r.right-f?"left":"right",p.width>w.width?(f="left",n=0):(n="left"==f?0<r.left?r.left:0:r.right<w.width?w.width-r.right:0,n+p.width>w.width&&(f="left"==f?"right":"left",n=0)),h.setStyle(f,b(("pin"==k?C:v)+n+("pin"==k?0:"left"==f?B:-B)))):(k="pin",g("pin"),l(f))}}}();if(m){var f=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),h=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(f.output({content:m,id:a.id,langDir:a.lang.dir,langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(d.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),k=CKEDITOR.tools.eventsBuffer(500,l),g=CKEDITOR.tools.eventsBuffer(100,l);h.unselectable(),h.on("mousedown",function(a){a=a.data,a.getTarget().hasAscendant("a",1)||a.preventDefault()}),a.on("focus",function(b){l(b),a.on("change",k.input),e.on("scroll",g.input),e.on("resize",g.input)}),a.on("blur",function(){h.hide(),a.removeListener("change",k.input),e.removeListener("scroll",g.input),e.removeListener("resize",g.input)}),a.on("destroy",function(){e.removeListener("scroll",g.input),e.removeListener("resize",g.input),h.clearCustomData(),h.remove()}),a.focusManager.hasFocus&&h.show(),a.focusManager.add(h,1)}}var e=CKEDITOR.document.getWindow(),b=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(b){b.on("loaded",function(){a(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var a=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),e=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),b=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),c=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){b=b||{};var c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=!0),!c.role&&(c.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",c.role),c=this.keys,c[40]="next",c[9]="next",c[38]="prev",c[CKEDITOR.SHIFT+9]="prev",c[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(c[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var b=a.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(b),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(a){var b=this.toggle(a);this.onClick&&this.onClick(a,b)},this)),this._.click}},proto:{add:function(a,b,l){var f=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[a]=f;var h;h=CKEDITOR.tools.htmlEncodeAttr(a).replace(c,"\\'"),a={id:f,val:h,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(l||a),text:b||a},this._.pendingList.push(e.output(a))},startGroup:function(a){this._.close();var c=CKEDITOR.tools.getNextId();this._.groups[a]=c,this._.pendingHtml.push(b.output({id:c,label:a}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);return b?this.unmark(a):this.mark(a),!b},hideGroup:function(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),b&&"ul"==b.getName()&&b.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var e,a=this._.items,b=this._.groups,c=this.element.getDocument();for(e in a)c.getById(a[e]).setStyle("display","");for(var h in b)a=c.getById(b[h]),e=a.getNext(),a.setStyle("display",""),e&&"ul"==e.getName()&&e.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll(),a=this._.items[a];var b=this.element.getDocument().getById(a);b.addClass("cke_selected"),this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(b)},unmark:function(a){var b=this.element.getDocument();a=this._.items[a];var c=b.getById(a);c.removeClass("cke_selected"),b.getById(a+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(c)},unmarkAll:function(){var c,a=this._.items,b=this.element.getDocument();for(c in a){var e=a[c];b.getById(e).removeClass("cke_selected"),b.getById(e+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var c,b=this.element.getElementsByTag("a"),e=-1;if(a){for(c=this.element.getDocument().getById(this._.items[a]).getFirst();a=b.getItem(++e);)if(a.equals(c)){this._.focusIndex=e;break}}else this.element.focus();c&&setTimeout(function(){c.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var a='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');var a=a+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),e=CKEDITOR.addTemplate("combo",a);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1}),a=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document,a.className="cke_combopanel",a.block={multiSelect:a.multiSelect,attributes:a.attributes},a.toolbarRelated=!0,this._={panelDefinition:a,items:{}}},proto:{renderHtml:function(a){var c=[];return this.render(a,c),c.join("")},render:function(a,c){function d(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var c=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(c=CKEDITOR.TRISTATE_DISABLED),this.setState(c),this.setValue(""),c!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var m=CKEDITOR.env,l="cke_"+this.id,f=CKEDITOR.tools.addFunction(function(c){q&&(a.unlockSelection(1),q=0),k.execute(c)},this),h=this,k={id:l,combo:this,focus:function(){CKEDITOR.document.getById(l).getChild(1).focus()},execute:function(c){var d=h._;if(d.state!=CKEDITOR.TRISTATE_DISABLED)if(h.createPanel(a),d.on)d.panel.hide();else{h.commit();var e=h.getValue();e?d.list.mark(e):d.list.unmarkAll(),d.panel.showBlock(h.id,new CKEDITOR.dom.element(c),4)}},clickFn:f};a.on("activeFilterChange",d,this),a.on("mode",d,this),a.on("selectionChange",d,this),!this.readOnly&&a.on("readOnly",d,this);var g=CKEDITOR.tools.addFunction(function(c,d){c=new CKEDITOR.dom.event(c);var e=c.getKeystroke();switch(40==e&&a.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)}),e){case 13:case 32:case 40:CKEDITOR.tools.callFunction(f,d);break;default:k.onkey(k,e)}c.preventDefault()}),n=CKEDITOR.tools.addFunction(function(){k.onfocus&&k.onfocus()}),q=0;return k.keyDownFn=g,m={id:l,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:m.gecko&&!m.hc?"":(this.title||"").replace("'",""),keydownFn:g,focusFn:n,clickFn:f},e.output(m,c),this.onRender&&this.onRender(),k},createPanel:function(a){if(!this._.panel){var c=this._.panelDefinition,d=this._.panelDefinition.block,e=c.parent||CKEDITOR.document.getBody(),l="cke_combopanel__"+this.name,f=new CKEDITOR.ui.floatPanel(a,e,c),h=f.addListBlock(this.id,d),k=this;
f.onShow=function(){this.element.addClass(l),k.setState(CKEDITOR.TRISTATE_ON),k._.on=1,k.editorFocus&&!a.focusManager.hasFocus&&a.focus(),k.onOpen&&k.onOpen(),a.once("panelShow",function(){h.focus(!h.multiSelect&&k.getValue())})},f.onHide=function(c){this.element.removeClass(l),k.setState(k.modes&&k.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),k._.on=0,!c&&k.onClose&&k.onClose()},f.onEscape=function(){f.hide(1)},h.onClick=function(a,b){k.onClick&&k.onClick.call(k,a,b),f.hide()},this._.panel=f,this._.list=h,f.getBlock(this.id).onHide=function(){k._.on=0,k.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(a,c){this._.value=a;var d=this.document.getById("cke_"+this.id+"_text");d&&(a||c?d.removeClass("cke_combo_inlinelabel"):(c=this.label,d.addClass("cke_combo_inlinelabel")),d.setText("undefined"!=typeof c?c:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,c,d){this._.items[a]=d||a,this._.list.add(a,c,d)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(a){if(this._.state!=a){var c=this.document.getById("cke_"+this.id);c.setState(a,"cke_combo"),a==CKEDITOR.TRISTATE_DISABLED?c.setAttribute("aria-disabled",!0):c.removeAttribute("aria-disabled"),this._.state=a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(a,c){this.add(a,CKEDITOR.UI_RICHCOMBO,c)}}(),function(){function a(a,c,d,m,l,f,h,k){var g=a.config,n=new CKEDITOR.style(h),q=l.split(";");l=[];for(var t={},u=0;u<q.length;u++){var p=q[u];if(p){var p=p.split("/"),r={},w=q[u]=p[0];r[d]=l[u]=p[1]||w,t[w]=new CKEDITOR.style(h,r),t[w]._.definition.name=w}else q.splice(u--,1)}a.ui.addRichCombo(c,{label:m.label,title:m.panelTitle,toolbar:"styles,"+k,allowedContent:n,requiredContent:n,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(g.contentsCss),multiSelect:!1,attributes:{"aria-label":m.panelTitle}},init:function(){this.startGroup(m.panelTitle);for(var a=0;a<q.length;a++){var b=q[a];this.add(b,t[b].buildPreview(),b)}},onClick:function(c){a.focus(),a.fire("saveSnapshot");var d=this.getValue(),f=t[c];if(d&&c!=d){var g=t[d],h=a.getSelection().getRanges()[0];if(h.collapsed){var k=a.elementPath(),l=k.contains(function(a){return g.checkElementRemovable(a)});if(l){var m=h.checkBoundaryOfElement(l,CKEDITOR.START),w=h.checkBoundaryOfElement(l,CKEDITOR.END);if(m&&w){for(m=h.createBookmark();k=l.getFirst();)k.insertBefore(l);l.remove(),h.moveToBookmark(m)}else m?h.moveToPosition(l,CKEDITOR.POSITION_BEFORE_START):w?h.moveToPosition(l,CKEDITOR.POSITION_AFTER_END):(h.splitElement(l),h.moveToPosition(l,CKEDITOR.POSITION_AFTER_END),e(h,k.elements.slice(),l));a.getSelection().selectRanges([h])}}else a.removeStyle(g)}a[d==c?"removeStyle":"applyStyle"](f),a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(c){var d=this.getValue();c=c.data.path.elements;for(var g,e=0;e<c.length;e++){g=c[e];for(var h in t)if(t[h].checkElementMatch(g,!0,a))return void(h!=d&&this.setValue(h))}this.setValue("",f)},this)},refresh:function(){a.activeFilter.check(n)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function e(a,c,d){var m=c.pop();if(m){if(d)return e(a,c,m.equals(d)?null:d);d=m.clone(),a.insertNode(d),a.moveToPosition(d,CKEDITOR.POSITION_AFTER_START),e(a,c)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(b){var c=b.config;a(b,"Font","family",b.lang.font,c.font_names,c.font_defaultLabel,c.font_style,30),a(b,"FontSize","size",b.lang.font.fontSize,c.fontSize_sizes,c.fontSize_defaultLabel,c.fontSize_style,40)}})}(),CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",CKEDITOR.config.font_defaultLabel="",CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",CKEDITOR.config.fontSize_defaultLabel="",CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var e=a.config,b=a.lang.format,c=e.format_tags.split(";"),d={},m=0,l=[],f=0;f<c.length;f++){var h=c[f],k=new CKEDITOR.style(e["format_"+h]);a.filter.customConfig&&!a.filter.check(k)||(m++,d[h]=k,d[h]._.enterMode=a.config.enterMode,l.push(k))}0!==m&&a.ui.addRichCombo("Format",{label:b.label,title:b.panelTitle,toolbar:"styles,20",allowedContent:l,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!1,attributes:{"aria-label":b.panelTitle}},init:function(){this.startGroup(b.panelTitle);for(var a in d){var c=b["tag_"+a];this.add(a,d[a].buildPreview(c),c)}},onClick:function(b){a.focus(),a.fire("saveSnapshot"),b=d[b];var c=a.elementPath();a[b.checkActive(c,a)?"removeStyle":"applyStyle"](b),setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(b){var c=this.getValue();b=b.data.path,this.refresh();for(var e in d)if(d[e].checkActive(b,a))return void(e!=c&&this.setValue(e,a.lang.format["tag_"+e]));this.setValue("")},this)},onOpen:function(){this.showAll();for(var b in d)a.activeFilter.check(d[b])||this.hideItem(b)},refresh:function(){var b=a.elementPath();if(b){if(b.isContextFor("p"))for(var c in d)if(a.activeFilter.check(d[c]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n"),CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(a){var e=a.lang,b=0,c={email:1,password:1,search:1,tel:1,text:1,url:1},d={checkbox:"input[type,name,checked,required]",radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},m={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},l=function(c,f,h){var l={allowedContent:d[f],requiredContent:m[f]};"form"==f&&(l.context="form"),a.addCommand(f,new CKEDITOR.dialogCommand(f,l)),a.ui.addButton&&a.ui.addButton(c,{label:e.common[c.charAt(0).toLowerCase()+c.slice(1)],command:f,toolbar:"forms,"+(b+=10)}),CKEDITOR.dialog.add(f,h)},f=this.path+"dialogs/";!a.blockless&&l("Form","form",f+"form.js"),l("Checkbox","checkbox",f+"checkbox.js"),l("Radio","radio",f+"radio.js"),l("TextField","textfield",f+"textfield.js"),l("Textarea","textarea",f+"textarea.js"),l("Select","select",f+"select.js"),l("Button","button",f+"button.js");var h=a.plugins.image;h&&!a.plugins.image2&&l("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js"),l("HiddenField","hiddenfield",f+"hiddenfield.js"),a.addMenuItems&&(l={checkbox:{label:e.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:e.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:e.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:e.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:e.forms.button.title,command:"button",group:"button"},select:{label:e.forms.select.title,command:"select",group:"select"},textarea:{label:e.forms.textarea.title,command:"textarea",group:"textarea"}},h&&(l.imagebutton={label:e.image.titleButton,command:"imagebutton",group:"imagebutton"}),!a.blockless&&(l.form={label:e.forms.form.menu,command:"form",group:"form"}),a.addMenuItems(l)),a.contextMenu&&(!a.blockless&&a.contextMenu.addListener(function(a,b,c){return(a=c.contains("form",1))&&!a.isReadOnly()?{form:CKEDITOR.TRISTATE_OFF}:void 0}),a.contextMenu.addListener(function(a){if(a&&!a.isReadOnly()){var b=a.getName();if("select"==b)return{select:CKEDITOR.TRISTATE_OFF};if("textarea"==b)return{textarea:CKEDITOR.TRISTATE_OFF};if("input"==b){var d=a.getAttribute("type")||"text";switch(d){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return h?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(c[d])return{textfield:CKEDITOR.TRISTATE_OFF}}if("img"==b&&"hiddenfield"==a.data("cke-real-element-type"))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}})),a.on("doubleclick",function(b){var d=b.data.element;if(!a.blockless&&d.is("form"))b.data.dialog="form";else if(d.is("select"))b.data.dialog="select";else if(d.is("textarea"))b.data.dialog="textarea";else if(d.is("img")&&"hiddenfield"==d.data("cke-real-element-type"))b.data.dialog="hiddenfield";else if(d.is("input")){switch(d=d.getAttribute("type")||"text"){case"button":case"submit":case"reset":b.data.dialog="button";break;case"checkbox":b.data.dialog="checkbox";break;case"radio":b.data.dialog="radio";break;case"image":b.data.dialog="imagebutton"}c[d]&&(b.data.dialog="textfield")}})},afterInit:function(a){var e=a.dataProcessor,b=e&&e.htmlFilter,e=e&&e.dataFilter;CKEDITOR.env.ie&&b&&b.addRules({elements:{input:function(a){a=a.attributes;var b=a.type;b||(a.type="text"),"checkbox"!=b&&"radio"!=b||"on"!=a.value||delete a.value}}},{applyToAll:!0}),e&&e.addRules({elements:{input:function(b){return"hidden"==b.attributes.type?a.createFakeParserElement(b,"cke_hidden","hiddenfield"):void 0}}},{applyToAll:!0})}}),function(){var a={canUndo:!1,exec:function(a){var b=a.document.createElement("hr");a.insertElement(b)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(e){e.blockless||(e.addCommand("horizontalrule",a),e.ui.addButton&&e.ui.addButton("HorizontalRule",{label:e.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(a){var e=new CKEDITOR.htmlWriter;e.forceSimpleAmpersand=a.config.forceSimpleAmpersand,e.indentationChars=a.config.dataIndentationChars||"	",a.dataProcessor.writer=e}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="	",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e,a=CKEDITOR.dtd;for(e in CKEDITOR.tools.extend({},a.$nonBodyContent,a.$block,a.$listItem,a.$tableContent))this.setRules(e,{indent:!a[e]["#"],breakBeforeOpen:1,breakBeforeClose:!a[e]["#"],breakAfterClose:1,needsSpace:e in a.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(a){var e=this._.rules[a];this._.afterCloser&&e&&e.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():e&&e.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",a),this._.afterCloser=0},openTagClose:function(a,e){var b=this._.rules[a];e?(this._.output.push(this.selfClosingEnd),b&&b.breakAfterClose&&(this._.needsSpace=b.needsSpace)):(this._.output.push(">"),b&&b.indent&&(this._.indentation+=this.indentationChars)),b&&b.breakAfterOpen&&this.lineBreak(),"pre"==a&&(this._.inPre=1)},attribute:function(a,e){"string"==typeof e&&(this.forceSimpleAmpersand&&(e=e.replace(/&amp;/g,"&")),e=CKEDITOR.tools.htmlEncodeAttr(e)),this._.output.push(" ",a,'="',e,'"')},closeTag:function(a){var e=this._.rules[a];e&&e.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():e&&e.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",a,">"),"pre"==a&&(this._.inPre=0),e&&e.breakAfterClose&&(this.lineBreak(),this._.needsSpace=e.needsSpace),this._.afterCloser=1},text:function(a){this._.indent&&(this.indentation(),!this._.inPre&&(a=CKEDITOR.tools.ltrim(a))),this._.output.push(a)},comment:function(a){this._.indent&&this.indentation(),this._.output.push("<!--",a,"-->")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(a,e){var b=this._.rules[a];b?CKEDITOR.tools.extend(b,e,!0):this._.rules[a]=e}}}),function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(a){var e=a.lang.iframe,b="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";a.plugins.dialogadvtab&&(b+=";iframe"+a.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1})),CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js"),a.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:b,requiredContent:"iframe"})),a.ui.addButton&&a.ui.addButton("Iframe",{label:e.toolbar,command:"iframe",toolbar:"insert,80"}),a.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&"iframe"==b.data("cke-real-element-type")&&(a.data.dialog="iframe")}),a.addMenuItems&&a.addMenuItems({iframe:{label:e.title,command:"iframe",group:"image"}}),a.contextMenu&&a.contextMenu.addListener(function(a){return a&&a.is("img")&&"iframe"==a.data("cke-real-element-type")?{iframe:CKEDITOR.TRISTATE_OFF}:void 0})},afterInit:function(a){var e=a.dataProcessor;(e=e&&e.dataFilter)&&e.addRules({elements:{iframe:function(b){return a.createFakeParserElement(b,"cke_iframe","iframe",!0)}}})}})}(),function(){function a(a,c){return c||(c=a.getSelection().getSelectedElement()),c&&c.is("img")&&!c.data("cke-realelement")&&!c.isReadOnly()?c:void 0}function e(a){var c=a.getStyle("float");return"inherit"!=c&&"none"!=c||(c=0),c||(c=a.getAttribute("align")),c}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(b){if(!b.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var c="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(c="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:c,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"}),b.on("doubleclick",function(a){var b=a.data.element;!b.is("img")||b.data("cke-realelement")||b.isReadOnly()||(a.data.dialog="image")}),b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}}),b.contextMenu&&b.contextMenu.addListener(function(c){return a(b,c)?{image:CKEDITOR.TRISTATE_OFF}:void 0})}},afterInit:function(b){function c(c){var m=b.getCommand("justify"+c);m&&("left"!=c&&"right"!=c||m.on("exec",function(l){var h,f=a(b);f&&(h=e(f),h==c?(f.removeStyle("float"),c==e(f)&&f.removeAttribute("align")):f.setStyle("float",c),l.cancel())}),m.on("refresh",function(l){var f=a(b);f&&(f=e(f),this.setState(f==c?CKEDITOR.TRISTATE_ON:"right"==c||"left"==c?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),l.cancel())}))}b.plugins.image2||(c("left"),c("right"),c("center"),c("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function a(a,d){var m,l;d.on("refresh",function(a){var d,c=[e];for(d in a.data.states)c.push(a.data.states[d]);this.setState(CKEDITOR.tools.search(c,b)?b:e)},d,null,100),d.on("exec",function(b){m=a.getSelection(),l=m.createBookmarks(1),b.data||(b.data={}),b.data.done=!1},d,null,0),d.on("exec",function(){a.forceNextSelectionCheck(),m.selectBookmarks(l)},d,null,100)}var e=CKEDITOR.TRISTATE_DISABLED,b=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(b){var d=CKEDITOR.plugins.indent.genericDefinition;a(b,b.addCommand("indent",new d(!0))),a(b,b.addCommand("outdent",new d)),b.ui.addButton&&(b.ui.addButton("Indent",{label:b.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),b.ui.addButton("Outdent",{label:b.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),b.on("dirChanged",function(a){var d=b.createRange(),e=a.data.node;d.setStartBefore(e),d.setEndAfter(e);for(var k,h=new CKEDITOR.dom.walker(d);k=h.next();)if(k.type==CKEDITOR.NODE_ELEMENT)if(!k.equals(e)&&k.getDirection())d.setStartAfter(k),h=new CKEDITOR.dom.walker(d);else{var g=b.config.indentClasses;if(g)for(var n="ltr"==a.data.dir?["_rtl",""]:["","_rtl"],q=0;q<g.length;q++)k.hasClass(g[q]+n[0])&&(k.removeClass(g[q]+n[0]),k.addClass(g[q]+n[1]));g=k.getStyle("margin-right"),n=k.getStyle("margin-left"),g?k.setStyle("margin-left",g):k.removeStyle("margin-left"),n?k.setStyle("margin-right",n):k.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a,this.startDisabled=!this.isIndent},specificDefinition:function(a,b,e){this.name=b,this.editor=a,this.jobs={},this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!e,this.relatedGlobal=e?"indent":"outdent",this.indentKey=e?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var a in b)(function(a,b){var d,c=a.getCommand(b.relatedGlobal);for(d in b.jobs)c.on("exec",function(c){c.data.done||(a.fire("lockSnapshot"),b.execJob(a,d)&&(c.data.done=!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))},this,null,d),c.on("refresh",function(c){c.data.states||(c.data.states={}),c.data.states[b.name+"@"+d]=b.refreshJob(a,d,c.data.path)},this,null,d);a.addFeature(b)})(this,b[a])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,b){var m=this.jobs[b];return m.state!=e?m.exec.call(this,a):void 0},refreshJob:function(a,b,m){return b=this.jobs[b],a.activeFilter.checkFeature(this)?b.state=b.refresh.call(this,a,m):b.state=e,b.state},getContext:function(a){return a.contains(this.context)}}}(),function(){function a(a,b,c){if(!a.getCustomData("indent_processed")){var d=this.editor,g=this.isIndent;if(b){if(d=a.$.className.match(this.classNameRegex),c=0,d&&(d=d[1],c=CKEDITOR.tools.indexOf(b,d)+1),0>(c+=g?1:-1))return;c=Math.min(c,b.length),c=Math.max(c,0),a.$.className=CKEDITOR.tools.ltrim(a.$.className.replace(this.classNameRegex,"")),c>0&&a.addClass(b[c-1])}else{b=e(a,c),c=parseInt(a.getStyle(b),10);var m=d.config.indentOffset||40;if(isNaN(c)&&(c=0),c+=(g?1:-1)*m,0>c)return;c=Math.max(c,0),c=Math.ceil(c/m)*m,a.setStyle(b,c?c+(d.config.indentUnit||"px"):""),""===a.getAttribute("style")&&a.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,a,"indent_processed",1)}}function e(a,b){return"ltr"==(b||a.getComputedStyle("direction"))?"margin-left":"margin-right"}var b=CKEDITOR.dtd.$listItem,c=CKEDITOR.dtd.$list,d=CKEDITOR.TRISTATE_DISABLED,m=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(l){function f(){h.specificDefinition.apply(this,arguments),this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:k?null:"margin-left,margin-right",classes:k||null}},this.enterBr&&(this.allowedContent.div=!0),this.requiredContent=(this.enterBr?"div":"p")+(k?"("+k.join(",")+")":"{margin-left}"),this.jobs={20:{refresh:function(a,c){var f=c.block||c.blockLimit;if(!f.is(b))var h=f.getAscendant(b),f=h&&c.contains(h)||f;if(f.is(b)&&(f=f.getParent()),this.enterBr||this.getContext(c)){if(k){var h=k,f=f.$.className.match(this.classNameRegex),l=this.isIndent,h=f?l?f[1]!=h.slice(-1):!0:l;return h?m:d}return this.isIndent?m:f?CKEDITOR[0>=(parseInt(f.getStyle(e(f)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:d}return d},exec:function(b){var e,d=b.getSelection(),d=d&&d.getRanges()[0];if(e=b.elementPath().contains(c))a.call(this,e,k);else for(d=d.createIterator(),b=b.config.enterMode,d.enforceRealBlocks=!0,d.enlargeBr=b!=CKEDITOR.ENTER_BR;e=d.getNextParagraph(b==CKEDITOR.ENTER_P?"p":"div");)e.isReadOnly()||a.call(this,e,k);return!0}}}}var h=CKEDITOR.plugins.indent,k=l.config.indentClasses;h.registerCommands(l,{indentblock:new f(l,"indentblock",!0),outdentblock:new f(l,"outdentblock")}),CKEDITOR.tools.extend(f.prototype,h.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:k?new RegExp("(?:^|\\s+)("+k.join("|")+")(?=$|\\s)"):null})}})}(),function(){function a(a){function c(e){for(var h=t.startContainer,m=t.endContainer;h&&!h.getParent().equals(e);)h=h.getParent();for(;m&&!m.getParent().equals(e);)m=m.getParent();if(!h||!m)return!1;for(var u=h,h=[],p=!1;!p;)u.equals(m)&&(p=!0),h.push(u),u=u.getNext();if(1>h.length)return!1;for(u=e.getParents(!0),m=0;m<u.length;m++)if(u[m].getName&&l[u[m].getName()]){e=u[m];break}for(var u=d.isIndent?1:-1,m=h[0],h=h[h.length-1],p=CKEDITOR.plugins.list.listToArray(e,g),y=p[h.getCustomData("listarray_index")].indent,m=m.getCustomData("listarray_index");m<=h.getCustomData("listarray_index");m++)if(p[m].indent+=u,u>0){var q=p[m].parent;p[m].parent=new CKEDITOR.dom.element(q.getName(),q.getDocument())}for(m=h.getCustomData("listarray_index")+1;m<p.length&&p[m].indent>y;m++)p[m].indent+=u;if(h=CKEDITOR.plugins.list.arrayToList(p,g,null,a.config.enterMode,e.getDirection()),!d.isIndent){var x;if((x=e.getParent())&&x.is("li"))for(var D,u=h.listNode.getChildren(),A=[],m=u.count()-1;m>=0;m--)(D=u.getItem(m))&&D.is&&D.is("li")&&A.push(D)}if(h&&h.listNode.replace(e),A&&A.length)for(m=0;m<A.length;m++){for(D=e=A[m];(D=D.getNext())&&D.is&&D.getName()in l;)CKEDITOR.env.needsNbspFiller&&!e.getFirst(b)&&e.append(t.document.createText(" ")),e.append(D);e.insertAfter(x)}return h&&a.fire("contentDomInvalidated"),!0}for(var t,d=this,g=this.database,l=this.context,m=a.getSelection(),m=(m&&m.getRanges()).createIterator();t=m.getNextRange();){for(var u=t.getCommonAncestor();u&&(u.type!=CKEDITOR.NODE_ELEMENT||!l[u.getName()]);){if(a.editable().equals(u)){u=!1;break}u=u.getParent()}if(u||(u=t.startPath().contains(l))&&t.setEndAt(u,CKEDITOR.POSITION_BEFORE_END),!u){var p=t.getEnclosedNode();p&&p.type==CKEDITOR.NODE_ELEMENT&&p.getName()in l&&(t.setStartAt(p,CKEDITOR.POSITION_AFTER_START),t.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),u=p)}if(u&&t.startContainer.type==CKEDITOR.NODE_ELEMENT&&t.startContainer.getName()in l&&(p=new CKEDITOR.dom.walker(t),p.evaluator=e,t.startContainer=p.next()),u&&t.endContainer.type==CKEDITOR.NODE_ELEMENT&&t.endContainer.getName()in l&&(p=new CKEDITOR.dom.walker(t),p.evaluator=e,t.endContainer=p.previous()),u)return c(u)}return 0}function e(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is("li")}function b(a){return c(a)&&d(a)}var c=CKEDITOR.dom.walker.whitespaces(!0),d=CKEDITOR.dom.walker.bookmark(!1,!0),m=CKEDITOR.TRISTATE_DISABLED,l=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(b){function c(b){d.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],b.on("key",function(a){if("wysiwyg"==b.mode&&a.data.keyCode==this.indentKey){var c=this.getContext(b.elementPath());!c||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,b.elementPath(),c)||(b.execCommand(this.relatedGlobal),a.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(a,b){var c=this.getContext(b),d=CKEDITOR.plugins.indentList.firstItemInPath(this.context,b,c);return c&&this.isIndent&&!d?l:m}:function(a,b){return!this.getContext(b)||this.isIndent?m:l},exec:CKEDITOR.tools.bind(a,this)}}var d=CKEDITOR.plugins.indent;d.registerCommands(b,{indentlist:new c(b,"indentlist",!0),outdentlist:new c(b,"outdentlist")}),CKEDITOR.tools.extend(c.prototype,d.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(a,b,c){var d=b.contains(e);return c||(c=b.contains(a)),c&&d&&d.equals(c.getFirst(e))}}(),function(){function a(a,b){b=void 0===b||b;var e;if(b)e=a.getComputedStyle("text-align");else{for(;(!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align"))&&(e=a.getParent(),e);)a=e;e=a.getStyle("text-align")||a.getAttribute("align")||""}return e&&(e=e.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!e&&b&&(e="rtl"==a.getComputedStyle("direction")?"right":"left"),e}function e(a,b,e){this.editor=a,this.name=b,this.value=e,this.context="p",b=a.config.justifyClasses;var l=a.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(b){switch(e){case"left":this.cssClassName=b[0];break;case"center":this.cssClassName=b[1];break;case"right":this.cssClassName=b[2];break;case"justify":this.cssClassName=b[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+b.join("|")+")(?=$|\\s)"),this.requiredContent=l+"("+this.cssClassName+")"}else this.requiredContent=l+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},a.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function b(a){var b=a.editor,e=b.createRange();e.setStartBefore(a.data.node),e.setEndAfter(a.data.node);for(var f,l=new CKEDITOR.dom.walker(e);f=l.next();)if(f.type==CKEDITOR.NODE_ELEMENT)if(!f.equals(a.data.node)&&f.getDirection())e.setStartAfter(f),l=new CKEDITOR.dom.walker(e);else{var h=b.config.justifyClasses;h&&(f.hasClass(h[0])?(f.removeClass(h[0]),f.addClass(h[2])):f.hasClass(h[2])&&(f.removeClass(h[2]),f.addClass(h[0]))),h=f.getStyle("text-align"),"left"==h?f.setStyle("text-align","right"):"right"==h&&f.setStyle("text-align","left")}}e.prototype={exec:function(b){var d=b.getSelection(),e=b.config.enterMode;if(d){for(var k,g,l=d.createBookmarks(),f=d.getRanges(),h=this.cssClassName,n=b.config.useComputedState,n=void 0===n||n,q=f.length-1;q>=0;q--)for(k=f[q].createIterator(),k.enlargeBr=e!=CKEDITOR.ENTER_BR;g=k.getNextParagraph(e==CKEDITOR.ENTER_P?"p":"div");)if(!g.isReadOnly()){g.removeAttribute("align"),g.removeStyle("text-align");var t=h&&(g.$.className=CKEDITOR.tools.ltrim(g.$.className.replace(this.cssClassRegex,""))),u=this.state==CKEDITOR.TRISTATE_OFF&&(!n||a(g,!0)!=this.value);h?u?g.addClass(h):t||g.removeAttribute("class"):u&&g.setStyle("text-align",this.value)}b.focus(),b.forceNextSelectionCheck(),d.selectBookmarks(l)}},refresh:function(b,d){var e=d.block||d.blockLimit;this.setState("body"!=e.getName()&&a(e,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("justify",{init:function(a){if(!a.blockless){var d=new e(a,"justifyleft","left"),m=new e(a,"justifycenter","center"),l=new e(a,"justifyright","right"),f=new e(a,"justifyblock","justify");a.addCommand("justifyleft",d),a.addCommand("justifycenter",m),a.addCommand("justifyright",l),a.addCommand("justifyblock",f),a.ui.addButton&&(a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright",toolbar:"align,30"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock",toolbar:"align,40"})),a.on("dirChanged",b)}}})}(),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var a=function(a){var b=this._,c=b.menu;b.state!==CKEDITOR.TRISTATE_DISABLED&&(b.on&&c?c.hide():(b.previousState=b.state,c||(c=b.menu=new CKEDITOR.menu(a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.common.options}}}),c.onHide=CKEDITOR.tools.bind(function(){var c=this.command?a.getCommand(this.command).modes:this.modes;this.setState(!c||c[a.mode]?b.previousState:CKEDITOR.TRISTATE_DISABLED),b.on=0},this),this.onMenu&&c.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),b.on=1,setTimeout(function(){c.show(CKEDITOR.document.getById(b.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(e){delete e.panel,this.base(e),this.hasArrow=!0,this.click=a},statics:{handler:{create:function(a){return new CKEDITOR.ui.menuButton(a)}}}})},beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(a){var m,l,f,h,e=a.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],b=this,c=a.lang.language,d={};for(a.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(a,b){var c=d["language_"+b];c&&a[c.style.checkActive(a.elementPath(),a)?"removeStyle":"applyStyle"](c.style)},refresh:function(a){this.setState(b.getCurrentLangElement(a)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}}),h=0;h<e.length;h++)m=e[h].split(":"),l=m[0],f="language_"+l,d[f]={label:m[1],langId:l,group:"language",order:h,ltr:"rtl"!=(""+m[2]).toLowerCase(),onClick:function(){a.execCommand("language",this.langId)},role:"menuitemcheckbox"},d[f].style=new CKEDITOR.style({element:"span",attributes:{lang:l,dir:d[f].ltr?"ltr":"rtl"}});d.language_remove={label:c.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:d.length,onClick:function(){var c=b.getCurrentLangElement(a);c&&a.execCommand("language",c.getAttribute("lang"))}},a.addMenuGroup("language",1),a.addMenuGroup("language_remove"),a.addMenuItems(d),a.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:c.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",
toolbar:"bidi,30",command:"language",onMenu:function(){var f,c={},e=b.getCurrentLangElement(a);for(f in d)c[f]=CKEDITOR.TRISTATE_OFF;return c.language_remove=e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,e&&(c["language_"+e.getAttribute("lang")]=CKEDITOR.TRISTATE_ON),c}})},getCurrentLangElement:function(a){var e=a.elementPath();a=e&&e.elements;var b;if(e)for(var c=0;c<a.length;c++)e=a[c],!b&&"span"==e.getName()&&e.hasAttribute("dir")&&e.hasAttribute("lang")&&(b=e);return b}})}(),function(){function a(a){return a.replace(/'/g,"\\$&")}function e(a){for(var b,c=a.length,d=[],e=0;c>e;e++)b=a.charCodeAt(e),d.push(b);return"String.fromCharCode("+d.join(",")+")"}function b(b,c){var f,g,d=b.plugins.link,e=d.compiledProtectionFunction.params;g=[d.compiledProtectionFunction.name,"("];for(var h=0;h<e.length;h++)d=e[h].toLowerCase(),f=c[d],h>0&&g.push(","),g.push("'",f?a(encodeURIComponent(c[d])):"","'");return g.push(")"),g.join("")}function c(a){a=a.config.emailProtection||"";var b;return a&&"encode"!=a&&(b={},a.replace(/^([^(]+)\(([^)]+)\)$/,function(a,c,d){b.name=c,b.params=[],d.replace(/[^,\s]+/g,function(a){b.params.push(a)})})),b}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function a(b){return c.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b)}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",c=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(a("ltr")+a("rtl"))},init:function(a){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(a,"link","advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(a,"link","target")&&(b=b.replace("]",",target,onclick]")),a.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"})),a.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),a.addCommand("unlink",new CKEDITOR.unlinkCommand),a.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),a.setKeystroke(CKEDITOR.CTRL+76,"link"),a.ui.addButton&&(a.ui.addButton("Link",{label:a.lang.link.toolbar,command:"link",toolbar:"links,10"}),a.ui.addButton("Unlink",{label:a.lang.link.unlink,command:"unlink",toolbar:"links,20"}),a.ui.addButton("Anchor",{label:a.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),a.on("doubleclick",function(b){var c=CKEDITOR.plugins.link.getSelectedLink(a)||b.data.element;c.isReadOnly()||(c.is("a")?(b.data.dialog=!c.getAttribute("name")||c.getAttribute("href")&&c.getChildCount()?"link":"anchor",b.data.link=c):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,c)&&(b.data.dialog="anchor"))},null,null,0),a.on("doubleclick",function(b){b.data.dialog in{link:1,anchor:1}&&b.data.link&&a.getSelection().selectElement(b.data.link)},null,null,20),a.addMenuItems&&a.addMenuItems({anchor:{label:a.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:a.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:a.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:a.lang.link.unlink,command:"unlink",group:"link",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(b){if(!b||b.isReadOnly())return null;if(b=CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b),!b&&!(b=CKEDITOR.plugins.link.getSelectedLink(a)))return null;var c={};return b.getAttribute("href")&&b.getChildCount()&&(c={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),b&&b.hasAttribute("name")&&(c.anchor=c.removeAnchor=CKEDITOR.TRISTATE_OFF),c}),this.compiledProtectionFunction=c(a)},afterInit:function(a){a.dataProcessor.dataFilter.addRules({elements:{a:function(b){return b.attributes.name?b.children.length?null:a.createFakeParserElement(b,"cke_anchor","anchor"):null}}});var b=a._.elementsPath&&a._.elementsPath.filters;b&&b.push(function(b,c){return"a"!=c||!CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b)&&(!b.getAttribute("name")||b.getAttribute("href")&&b.getChildCount())?void 0:"anchor"})}});var d=/^javascript:/,m=/^mailto:([^?]+)(?:\?(.+))?$/,l=/subject=([^;?:@&=$,\/]*)/,f=/body=([^;?:@&=$,\/]*)/,h=/^#(.*)$/,k=/^((?:http|https|ftp|news):\/\/)?(.*)$/,g=/^(_(?:self|top|parent|blank))$/,n=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,q=/^javascript:([^(]+)\(([^)]+)\)$/,t=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,u=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,p={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(a){var b=a.getSelection(),c=b.getSelectedElement();return c&&c.is("a")?c:(b=b.getRanges()[0])?(b.shrink(CKEDITOR.SHRINK_TEXT),a.elementPath(b.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(a){for(var f,b=a.editable(),c=b.isInline()&&!a.plugins.divarea?a.document:b,b=c.getElementsByTag("a"),c=c.getElementsByTag("img"),d=[],e=0;f=b.getItem(e++);)(f.data("cke-saved-name")||f.hasAttribute("name"))&&d.push({name:f.data("cke-saved-name")||f.getAttribute("name"),id:f.getAttribute("id")});for(e=0;f=c.getItem(e++);)(f=this.tryRestoreFakeAnchor(a,f))&&d.push({name:f.getAttribute("name"),id:f.getAttribute("id")});return d},fakeAnchor:!0,tryRestoreFakeAnchor:function(a,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var c=a.restoreRealElement(b);if(c.data("cke-saved-name"))return c}},parseLinkAttributes:function(a,b){var y,c=b&&(b.data("cke-saved-href")||b.getAttribute("href"))||"",e=a.plugins.link.compiledProtectionFunction,v=a.config.emailProtection,C={};if(c.match(d)&&("encode"==v?c=c.replace(n,function(a,b,c){return"mailto:"+String.fromCharCode.apply(String,b.split(","))+(c&&c.replace(/\\'/g,"'"))}):v&&c.replace(q,function(a,b,c){if(b==e.name){C.type="email",a=C.email={},b=/(^')|('$)/g,c=c.match(/[^,\s]+/g);for(var f,g,d=c.length,h=0;d>h;h++)f=decodeURIComponent,g=c[h].replace(b,"").replace(/\\'/g,"'"),g=f(g),f=e.params[h].toLowerCase(),a[f]=g;a.address=[a.name,a.domain].join("@")}})),!C.type)if(v=c.match(h))C.type="anchor",C.anchor={},C.anchor.name=C.anchor.id=v[1];else if(v=c.match(m)){y=c.match(l),c=c.match(f),C.type="email";var x=C.email={};x.address=v[1],y&&(x.subject=decodeURIComponent(y[1])),c&&(x.body=decodeURIComponent(c[1]))}else c&&(y=c.match(k))&&(C.type="url",C.url={},C.url.protocol=y[1],C.url.url=y[2]);if(b){if(c=b.getAttribute("target"))C.target={type:c.match(g)?c:"frame",name:c};else if(c=(c=b.data("cke-pa-onclick")||b.getAttribute("onclick"))&&c.match(t))for(C.target={type:"popup",name:c[1]};v=u.exec(c[2]);)"yes"!=v[2]&&"1"!=v[2]||v[1]in{height:1,width:1,top:1,left:1}?isFinite(v[2])&&(C.target[v[1]]=v[2]):C.target[v[1]]=!0;var A,c={};for(A in p)(v=b.getAttribute(A))&&(c[p[A]]=v);(A=b.data("cke-saved-name")||c.advName)&&(c.advName=A),CKEDITOR.tools.isEmpty(c)||(C.advanced=c)}return C},getLinkAttributes:function(c,d){var f=c.config.emailProtection||"",g={};switch(d.type){case"url":var f=d.url&&void 0!==d.url.protocol?d.url.protocol:"http://",h=d.url&&CKEDITOR.tools.trim(d.url.url)||"";g["data-cke-saved-href"]=0===h.indexOf("/")?h:f+h;break;case"anchor":f=d.anchor&&d.anchor.id,g["data-cke-saved-href"]="#"+(d.anchor&&d.anchor.name||f||"");break;case"email":var k=d.email,h=k.address;switch(f){case"":case"encode":var l=encodeURIComponent(k.subject||""),m=encodeURIComponent(k.body||""),k=[];l&&k.push("subject="+l),m&&k.push("body="+m),k=k.length?"?"+k.join("&"):"","encode"==f?(f=["javascript:void(location.href='mailto:'+",e(h)],k&&f.push("+'",a(k),"'"),f.push(")")):f=["mailto:",h,k];break;default:f=h.split("@",2),k.name=f[0],k.domain=f[1],f=["javascript:",b(c,k)]}g["data-cke-saved-href"]=f.join("")}if(d.target)if("popup"==d.target.type){for(var f=["window.open(this.href, '",d.target.name||"","', '"],u="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),h=u.length,l=function(a){d.target[a]&&u.push(a+"="+d.target[a])},k=0;h>k;k++)u[k]+=d.target[u[k]]?"=yes":"=no";l("width"),l("left"),l("height"),l("top"),f.push(u.join(","),"'); return false;"),g["data-cke-pa-onclick"]=f.join("")}else"notSet"!=d.target.type&&d.target.name&&(g.target=d.target.name);if(d.advanced){for(var n in p)(f=d.advanced[p[n]])&&(g[n]=f);g.name&&(g["data-cke-saved-name"]=g.name)}g["data-cke-saved-href"]&&(g.href=g["data-cke-saved-href"]),n={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1},d.advanced&&CKEDITOR.tools.extend(n,p);for(var t in g)delete n[t];return{set:g,removed:CKEDITOR.tools.objectKeys(n)}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(a){var b=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});a.removeStyle(b)},refresh:function(a,b){var c=b.lastElement&&b.lastElement.getAscendant("a",!0);c&&"a"==c.getName()&&c.getAttribute("href")&&c.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(a){var d,b=a.getSelection(),c=b.createBookmarks();b&&(d=b.getSelectedElement())&&(d.getChildCount()?d.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,d))?d.remove(1):(d=CKEDITOR.plugins.link.getSelectedLink(a))&&(d.hasAttribute("href")?(d.removeAttributes({name:1,"data-cke-saved-name":1}),d.removeClass("cke_anchor")):d.remove(1)),b.selectBookmarks(c)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function a(a,b,c){function d(c){!(l=k[c?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(m=b.root[c?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||m.is&&m.isBlockBoundary({br:1})||a.document.createElement("br")[c?"insertBefore":"insertAfter"](l)}for(var e=CKEDITOR.plugins.list.listToArray(b.root,c),f=[],g=0;g<b.contents.length;g++){var h=b.contents[g];(h=h.getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(f.push(h),CKEDITOR.dom.element.setMarker(c,h,"list_item_processed",!0))}for(h=null,g=0;g<f.length;g++)h=f[g].getCustomData("listarray_index"),e[h].indent=-1;for(g=h+1;g<e.length;g++)if(e[g].indent>e[g-1].indent+1){for(f=e[g-1].indent+1-e[g].indent,h=e[g].indent;e[g]&&e[g].indent>=h;)e[g].indent+=f,g++;g--}var l,m,k=CKEDITOR.plugins.list.arrayToList(e,c,null,a.config.enterMode,b.root.getAttribute("dir")).listNode;d(!0),d(),k.replace(b.root),a.fire("contentDomInvalidated")}function e(a,b){this.name=a,this.context=this.type=b,this.allowedContent=b+" li",this.requiredContent=b}function b(a,b,c,d){for(var e,f;e=a[d?"getLast":"getFirst"](t);)(f=e.getDirection(1))!==b.getDirection(1)&&e.setAttribute("dir",f),e.remove(),c?e[d?"insertBefore":"insertAfter"](c):b.append(e,d)}function c(a){function c(d){var e=a[d?"getPrevious":"getNext"](g);e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is(a.getName())&&(b(a,e,null,!d),a.remove(),a=e)}c(),c(1)}function d(a){return a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in CKEDITOR.dtd.$block||a.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[a.getName()]["#"]}function m(a,d,e){a.fire("saveSnapshot"),e.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var f=e.extractContents();d.trim(!1,!0);var h=d.createBookmark(),k=new CKEDITOR.dom.elementPath(d.startContainer),m=k.block,k=k.lastElement.getAscendant("li",1)||m,t=new CKEDITOR.dom.elementPath(e.startContainer),q=t.contains(CKEDITOR.dtd.$listItem),t=t.contains(CKEDITOR.dtd.$list);for(m?(m=m.getBogus())&&m.remove():t&&(m=t.getPrevious(g))&&n(m)&&m.remove(),(m=f.getLast())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("br")&&m.remove(),(m=d.startContainer.getChild(d.startOffset))?f.insertBefore(m):d.startContainer.append(f),q&&(f=l(q))&&(k.contains(q)?(b(f,q.getParent(),q),f.remove()):k.append(f));e.checkStartOfBlock()&&e.checkEndOfBlock()&&(t=e.startPath(),f=t.block,f);)f.is("li")&&(k=f.getParent(),f.equals(k.getLast(g))&&f.equals(k.getFirst(g))&&(f=k)),e.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),f.remove();e=e.clone(),f=a.editable(),e.setEndAt(f,CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(e),e.evaluator=function(a){return g(a)&&!n(a)},(e=e.next())&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$list&&c(e),d.moveToBookmark(h),d.select(),a.fire("saveSnapshot")}function l(a){return(a=a.getLast(g))&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in f?a:null}var f={ol:1,ul:1},h=CKEDITOR.dom.walker.whitespaces(),k=CKEDITOR.dom.walker.bookmark(),g=function(a){return!(h(a)||k(a))},n=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(a,b,c,d,e){if(!f[a.getName()])return[];d||(d=0),c||(c=[]);for(var g=0,h=a.getChildCount();h>g;g++){var k=a.getChild(g);if(k.type==CKEDITOR.NODE_ELEMENT&&k.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(k,b,c,d+1),"li"==k.$.nodeName.toLowerCase()){var m={parent:a,indent:d,element:k,contents:[]};e?m.grandparent=e:(m.grandparent=a.getParent(),m.grandparent&&"li"==m.grandparent.$.nodeName.toLowerCase()&&(m.grandparent=m.grandparent.getParent())),b&&CKEDITOR.dom.element.setMarker(b,k,"listarray_index",c.length),c.push(m);for(var t,l=0,n=k.getChildCount();n>l;l++)t=k.getChild(l),t.type==CKEDITOR.NODE_ELEMENT&&f[t.getName()]?CKEDITOR.plugins.list.listToArray(t,b,c,d+1,m.grandparent):m.contents.push(t)}}return c},arrayToList:function(a,b,c,d,e){if(c||(c=0),!a||a.length<c+1)return null;for(var h,G,E,m=a[c].parent.getDocument(),l=new CKEDITOR.dom.documentFragment(m),n=null,t=c,q=Math.max(a[c].indent,0),D=null,I=d==CKEDITOR.ENTER_P?"p":"div";;){var H=a[t];if(h=H.grandparent,G=H.element.getDirection(1),H.indent==q){for(n&&a[t].parent.getName()==n.getName()||(n=a[t].parent.clone(!1,1),e&&n.setAttribute("dir",e),l.append(n)),D=n.append(H.element.clone(0,1)),G!=n.getDirection(1)&&D.setAttribute("dir",G),h=0;h<H.contents.length;h++)D.append(H.contents[h].clone(1,1));t++}else if(H.indent==Math.max(q,0)+1)H=a[t-1].element.getDirection(1),t=CKEDITOR.plugins.list.arrayToList(a,null,t,d,H!=G?G:null),!D.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=m.$.documentMode&&D.append(m.createText(" ")),D.append(t.listNode),t=t.nextIndex;else{if(-1!=H.indent||c||!h)return null;f[h.getName()]?(D=H.element.clone(!1,!0),G!=h.getDirection(1)&&D.setAttribute("dir",G)):D=new CKEDITOR.dom.documentFragment(m);var P,O,n=h.getDirection(1)!=G,K=H.element,F=K.getAttribute("class"),N=K.getAttribute("style"),R=D.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(d!=CKEDITOR.ENTER_BR||n||N||F),T=H.contents.length;for(h=0;T>h;h++)if(P=H.contents[h],k(P)&&T>1)R?O=P.clone(1,1):D.append(P.clone(1,1));else if(P.type==CKEDITOR.NODE_ELEMENT&&P.isBlockBoundary()){n&&!P.getDirection()&&P.setAttribute("dir",G),E=P;var Y=K.getAttribute("style");Y&&E.setAttribute("style",Y.replace(/([^;])$/,"$1;")+(E.getAttribute("style")||"")),F&&P.addClass(F),E=null,O&&(D.append(O),O=null),D.append(P.clone(1,1))}else R?(E||(E=m.createElement(I),D.append(E),n&&E.setAttribute("dir",G)),N&&E.setAttribute("style",N),F&&E.setAttribute("class",F),O&&(E.append(O),O=null),E.append(P.clone(1,1))):D.append(P.clone(1,1));O&&((E||D).append(O),O=null),D.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&t!=a.length-1&&(CKEDITOR.env.needsBrFiller&&(G=D.getLast())&&G.type==CKEDITOR.NODE_ELEMENT&&G.is("br")&&G.remove(),(G=D.getLast(g))&&G.type==CKEDITOR.NODE_ELEMENT&&G.is(CKEDITOR.dtd.$block)||D.append(m.createElement("br"))),G=D.$.nodeName.toLowerCase(),"div"!=G&&"p"!=G||D.appendBogus(),l.append(D),n=null,t++}if(E=null,a.length<=t||Math.max(a[t].indent,0)<q)break}if(b)for(a=l.getFirst();a;){if(a.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(b,a),a.getName()in CKEDITOR.dtd.$listItem&&(c=a,m=e=d=void 0,d=c.getDirection()))){for(e=c.getParent();e&&!(m=e.getDirection());)e=e.getParent();d==m&&c.removeAttribute("dir")}a=a.getNextSourceNode()}return{listNode:l,nextIndex:t}}};var q=/^h[1-6]$/,t=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);e.prototype={exec:function(b){this.refresh(b,b.elementPath());var d=b.config,e=b.getSelection(),h=e&&e.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var k=b.editable();if(k.getFirst(g)){var m=1==h.length&&h[0];(d=m&&m.getEnclosedNode())&&d.is&&this.type==d.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else d.enterMode==CKEDITOR.ENTER_BR?k.appendBogus():h[0].fixBlock(1,d.enterMode==CKEDITOR.ENTER_P?"p":"div"),e.selectRanges(h)}for(var d=e.createBookmarks(!0),k=[],l={},h=h.createIterator(),n=0;(m=h.getNextRange())&&++n;){var t=m.getBoundaryNodes(),x=t.startNode,A=t.endNode;for(x.type==CKEDITOR.NODE_ELEMENT&&"td"==x.getName()&&m.setStartAt(t.startNode,CKEDITOR.POSITION_AFTER_START),A.type==CKEDITOR.NODE_ELEMENT&&"td"==A.getName()&&m.setEndAt(t.endNode,CKEDITOR.POSITION_BEFORE_END),m=m.createIterator(),m.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;t=m.getNextParagraph();)if(!t.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(l,t,"list_block",1);for(var G,D=b.elementPath(t),x=D.elements,A=0,D=D.blockLimit,E=x.length-1;E>=0&&(G=x[E]);E--)if(f[G.getName()]&&D.contains(G)){D.removeCustomData("list_group_object_"+n),(x=G.getCustomData("list_group_object"))?x.contents.push(t):(x={root:G,contents:[t]},k.push(x),CKEDITOR.dom.element.setMarker(l,G,"list_group_object",x)),A=1;break}A||(A=D,A.getCustomData("list_group_object_"+n)?A.getCustomData("list_group_object_"+n).contents.push(t):(x={root:A,contents:[t]},CKEDITOR.dom.element.setMarker(l,A,"list_group_object_"+n,x),k.push(x)))}}for(G=[];0<k.length;)if(x=k.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(f[x.root.getName()]){for(h=b,n=x,x=l,m=G,A=CKEDITOR.plugins.list.listToArray(n.root,x),D=[],t=0;t<n.contents.length;t++)E=n.contents[t],(E=E.getAscendant("li",!0))&&!E.getCustomData("list_item_processed")&&(D.push(E),CKEDITOR.dom.element.setMarker(x,E,"list_item_processed",!0));for(var E=n.root.getDocument(),I=void 0,H=void 0,t=0;t<D.length;t++){var K=D[t].getCustomData("listarray_index"),I=A[K].parent;I.is(this.type)||(H=E.createElement(this.type),I.copyAttributes(H,{start:1,type:1}),H.removeStyle("list-style-type"),A[K].parent=H)}for(x=CKEDITOR.plugins.list.arrayToList(A,x,null,h.config.enterMode),A=void 0,D=x.listNode.getChildCount(),t=0;D>t&&(A=x.listNode.getChild(t));t++)A.getName()==this.type&&m.push(A);x.listNode.replace(n.root),h.fire("contentDomInvalidated")}else{for(A=b,m=x,t=G,D=m.contents,h=m.root.getDocument(),n=[],1==D.length&&D[0].equals(m.root)&&(x=h.createElement("div"),D[0].moveChildren&&D[0].moveChildren(x),D[0].append(x),D[0]=x),m=m.contents[0].getParent(),E=0;E<D.length;E++)m=m.getCommonAncestor(D[E].getParent());for(I=A.config.useComputedState,A=x=void 0,I=void 0===I||I,E=0;E<D.length;E++)for(H=D[E];K=H.getParent();){if(K.equals(m)){n.push(H),!A&&H.getDirection()&&(A=1),H=H.getDirection(I),null!==x&&(x=x&&x!=H?null:H);break}H=K}if(!(1>n.length)){for(D=n[n.length-1].getNext(),E=h.createElement(this.type),t.push(E),I=t=void 0;n.length;)t=n.shift(),I=h.createElement("li"),H=t,H.is("pre")||q.test(H.getName())||"false"==H.getAttribute("contenteditable")?t.appendTo(I):(t.copyAttributes(I),x&&t.getDirection()&&(I.removeStyle("direction"),I.removeAttribute("dir")),t.moveChildren(I),t.remove()),I.appendTo(E);x&&A&&E.setAttribute("dir",x),D?E.insertBefore(D):E.appendTo(m)}}else this.state==CKEDITOR.TRISTATE_ON&&f[x.root.getName()]&&a.call(this,b,x,l);for(E=0;E<G.length;E++)c(G[E]);CKEDITOR.dom.element.clearAllMarkers(l),e.selectBookmarks(d),b.focus()},refresh:function(a,b){var c=b.contains(f,1),d=b.blockLimit||b.root;c&&d.contains(c)?this.setState(c.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(a){a.blockless||(a.addCommand("numberedlist",new e("numberedlist","ol")),a.addCommand("bulletedlist",new e("bulletedlist","ul")),a.ui.addButton&&(a.ui.addButton("NumberedList",{label:a.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),a.ui.addButton("BulletedList",{label:a.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),a.on("key",function(b){var e,c=b.data.domEvent.getKey();if("wysiwyg"==a.mode&&c in{8:1,46:1}){var h=a.getSelection().getRanges()[0],k=h&&h.startPath();if(h&&h.collapsed){var t=8==c,q=a.editable(),C=new CKEDITOR.dom.walker(h.clone());if(C.evaluator=function(a){return g(a)&&!n(a)},C.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))},c=h.clone(),t){var x;if((x=k.contains(f))&&h.checkBoundaryOfElement(x,CKEDITOR.START)&&(x=x.getParent())&&x.is("li")&&(x=l(x))?(e=x,x=x.getPrevious(g),c.moveToPosition(x&&n(x)?x:e,CKEDITOR.POSITION_BEFORE_START)):(C.range.setStartAt(q,CKEDITOR.POSITION_AFTER_START),C.range.setEnd(h.startContainer,h.startOffset),(x=C.previous())&&x.type==CKEDITOR.NODE_ELEMENT&&(x.getName()in f||x.is("li"))&&(x.is("li")||(C.range.selectNodeContents(x),C.reset(),C.evaluator=d,x=C.previous()),e=x,c.moveToElementEditEnd(e),c.moveToPosition(c.endPath().block,CKEDITOR.POSITION_BEFORE_END))),e)m(a,c,h),b.cancel();else{var A=k.contains(f);A&&h.checkBoundaryOfElement(A,CKEDITOR.START)&&(e=A.getFirst(g),h.checkBoundaryOfElement(e,CKEDITOR.START)&&(x=A.getPrevious(g),l(e)?x&&(h.moveToElementEditEnd(x),h.select()):a.execCommand("outdent"),b.cancel()))}}else if(e=k.contains("li")){if(C.range.setEndAt(q,CKEDITOR.POSITION_BEFORE_END),t=(q=e.getLast(g))&&d(q)?q:e,k=0,(x=C.next())&&x.type==CKEDITOR.NODE_ELEMENT&&x.getName()in f&&x.equals(q)?(k=1,x=C.next()):h.checkBoundaryOfElement(t,CKEDITOR.END)&&(k=2),k&&x){if(h=h.clone(),h.moveToElementEditStart(x),1==k&&(c.optimize(),!c.startContainer.equals(e))){for(e=c.startContainer;e.is(CKEDITOR.dtd.$inline);)A=e,e=e.getParent();A&&c.moveToPosition(A,CKEDITOR.POSITION_AFTER_END)}2==k&&(c.moveToPosition(c.endPath().block,CKEDITOR.POSITION_BEFORE_END),h.endPath().block&&h.moveToPosition(h.endPath().block,CKEDITOR.POSITION_AFTER_START)),m(a,c,h),b.cancel()}}else C.range.setEndAt(q,CKEDITOR.POSITION_BEFORE_END),(x=C.next())&&x.type==CKEDITOR.NODE_ELEMENT&&x.is(f)&&(x=x.getFirst(g),k.block&&h.checkStartOfBlock()&&h.checkEndOfBlock()?(k.block.remove(),h.moveToElementEditStart(x),h.select()):l(x)?(h.moveToElementEditStart(x),h.select()):(h=h.clone(),h.moveToElementEditStart(x),m(a,c,h)),b.cancel());setTimeout(function(){a.selectionChange(1)})}}}))}})}(),function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(a){if(!a.blockless){var e;e=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"}),e=a.addCommand("numberedListStyle",e),a.addFeature(e),CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),e=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"}),e=a.addCommand("bulletedListStyle",e),a.addFeature(e),CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),a.addMenuGroup("list",108),a.addMenuItems({numberedlist:{label:a.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:a.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}}),a.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;for(;a;){var c=a.getName();if("ol"==c)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==c)return{bulletedlist:CKEDITOR.TRISTATE_OFF};a=a.getParent()}return null})}}},CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)}(),function(){function a(a,b,c){return n(b)&&n(c)&&c.equals(b.getNext(function(a){return!(ba(a)||X(a)||q(a))}))}function e(a){this.upper=a[0],this.lower=a[1],this.set.apply(this,a.slice(2))}function b(a){var b=a.element;if(b&&n(b)&&(b=b.getAscendant(a.triggers,!0))&&a.editable.contains(b)){var c=l(b);if("true"==c.getAttribute("contenteditable"))return b;if(c.is(a.triggers))return c}return null}function c(a,b,c){return v(a,b),v(a,c),a=b.size.bottom,c=c.size.top,a&&c?0|(a+c)/2:a||c}function d(a,b,c){return b=b[c?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!ba(b)||n(b)&&!q(b)&&!g(a,b)})}function m(a,b,c){return a>b&&c>a}function l(a,b){if(a.data("cke-editable"))return null;for(b||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function f(a){var b=a.doc,c=G('<span contenteditable="false" style="'+Q+"position:absolute;border-top:1px dashed "+a.boxColor+'"></span>',b),d=CKEDITOR.getUrl(this.path+"images/"+(E.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png");for(A(c,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(a.editable,!0),this},lineChildren:[A(G('<span title="'+a.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',b),{base:Q+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+d+") center no-repeat "+a.boxColor+";cursor:pointer;"+(E.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(E.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),A(G(V,b),{base:aa+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),A(G(V,b),{base:aa+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){v(a,this);var b=a.holdDistance,c=this.size;return!!(c&&m(a.mouse.y,c.top-b,c.bottom+b)&&m(a.mouse.x,c.left-b,c.right+b))},place:function(){var b=a.view,c=a.editable,d=a.trigger,e=d.upper,f=d.lower,g=e||f,h=g.getParent(),k={};this.trigger=d,e&&v(a,e,!0),f&&v(a,f,!0),v(a,h,!0),a.inInlineMode&&y(a,!0),h.equals(c)?(k.left=b.scroll.x,k.right=-b.scroll.x,k.width=""):(k.left=g.size.left-g.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),k.width=g.size.outerWidth+g.size.margin.left+g.size.margin.right+b.scroll.x,k.right=""),e&&f?k.top=e.size.margin.bottom===f.size.margin.top?0|e.size.bottom+e.size.margin.bottom/2:e.size.margin.bottom<f.size.margin.top?e.size.bottom+e.size.margin.bottom:e.size.bottom+e.size.margin.bottom-f.size.margin.top:e?f||(k.top=e.size.bottom+e.size.margin.bottom):k.top=f.size.top-f.size.margin.top,d.is(T)||m(k.top,b.scroll.y-15,b.scroll.y+5)?(k.top=a.inInlineMode?0:b.scroll.y,this.look(T)):d.is(O)||m(k.top,b.pane.bottom-5,b.pane.bottom+15)?(k.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(O)):(a.inInlineMode&&(k.top-=b.editable.top+b.editable.border.top),this.look(Y)),a.inInlineMode&&(k.top--,k.top+=b.editable.scroll.top,k.left+=b.editable.scroll.left);for(var l in k)k[l]=CKEDITOR.tools.cssLength(k[l]);this.setStyles(k)},look:function(a){if(this.oldLook!=a){for(var c,b=this.lineChildren.length;b--;)(c=this.lineChildren[b]).setAttribute("style",c.base+c.looks[0|a/2]);this.oldLook=a}},wrap:new D("span",a.doc)}),b=c.lineChildren.length;b--;)c.lineChildren[b].appendTo(c);c.look(Y),c.appendTo(c.wrap),c.unselectable(),c.lineChildren[0].on("mouseup",function(b){c.detach(),h(a,function(b){var c=a.line.trigger;b[c.is(F)?"insertBefore":"insertAfter"](c.is(F)?c.lower:c.upper)},!0),a.editor.focus(),E.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView(),b.data.preventDefault(!0)}),c.on("mousedown",function(a){a.data.preventDefault(!0)}),a.line=c}function h(a,b,c){var f,d=new CKEDITOR.dom.range(a.doc),e=a.editor;E.ie&&a.enterMode==CKEDITOR.ENTER_BR?f=a.doc.createText(M):(f=(f=l(a.element,!0))&&f.data("cke-enter-mode")||a.enterMode,f=new D(K[f],a.doc),f.is("br")||a.doc.createText(M).appendTo(f)),c&&e.fire("saveSnapshot"),b(f),d.moveToPosition(f,CKEDITOR.POSITION_AFTER_START),e.getSelection().selectRanges([d]),a.hotNode=f,c&&e.fire("saveSnapshot")}function k(a,c){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function e(b){var d=E.ie&&9>E.version?" ":M,f=a.hotNode&&a.hotNode.getText()==d&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!c;h(a,function(d){f&&a.hotNode&&a.hotNode.remove(),d[c?"insertAfter":"insertBefore"](b),d.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!c}),a.lastCmdDirection=!!c}),E.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView(),a.line.detach()}return function(f){f=f.getSelection().getStartElement();var g;if(f=f.getAscendant(L,1),!p(a,f)&&f&&!f.equals(a.editable)&&!f.contains(a.editable)){(g=l(f))&&"false"==g.getAttribute("contenteditable")&&(f=g),a.element=f,g=d(a,f,!c);var h;n(g)&&g.is(a.triggers)&&g.is(J)&&(!d(a,g,!c)||(h=d(a,g,!c))&&n(h)&&h.is(a.triggers))?e(g):(h=b(a,f),n(h)&&(d(a,h,!c)?(f=d(a,h,!c))&&n(f)&&f.is(a.triggers)&&e(h):e(h)))}}}()}}function g(a,b){if(!b||b.type!=CKEDITOR.NODE_ELEMENT||!b.$)return!1;var c=a.line;return c.wrap.equals(b)||c.wrap.contains(b)}function n(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.$}function q(a){if(!n(a))return!1;var b;return(b=t(a))||(n(a)?(b={left:1,right:1,center:1},b=!(!b[a.getComputedStyle("float")]&&!b[a.getAttribute("align")])):b=!1),b}function t(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function u(a,b){return n(b)?b.is(a.triggers):null}function p(a,b){if(!b)return!1;for(var c=b.getParents(1),d=c.length;d--;)for(var e=a.tabuList.length;e--;)if(c[d].hasAttribute(a.tabuList[e]))return!0;return!1}function r(a,b,c){return(b=b[c?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(U)}))?(v(a,b),c?b.size.top>a.mouse.y:b.size.bottom<a.mouse.y):!1}function w(a){var b=a.editable,c=a.mouse,d=a.view,f=a.triggerOffset;y(a);var h=c.y>(a.inInlineMode?d.editable.top+d.editable.height/2:Math.min(d.editable.height,d.pane.height)/2),b=b[h?"getLast":"getFirst"](function(a){return!(ba(a)||X(a))});return b?(g(a,b)&&(b=a.line.wrap[h?"getPrevious":"getNext"](function(a){return!(ba(a)||X(a))})),n(b)&&!q(b)&&u(a,b)?(v(a,b),!h&&0<=b.size.top&&m(c.y,0,b.size.top+f)?(a=a.inInlineMode||0===d.scroll.y?T:Y,new e([null,b,F,P,a])):h&&b.size.bottom<=d.pane.height&&m(c.y,b.size.bottom-f,d.pane.height)?(a=a.inInlineMode||m(b.size.bottom,d.pane.height-f,d.pane.height)?O:Y,new e([b,null,N,P,a])):null):null):null}function z(a){var c=a.mouse,f=a.view,g=a.triggerOffset,h=b(a);if(!h)return null;v(a,h);var l,p,g=Math.min(g,0|h.size.outerHeight/2),k=[];if(m(c.y,h.size.top-1,h.size.top+g))p=!1;else{if(!m(c.y,h.size.bottom-g,h.size.bottom+1))return null;p=!0}if(q(h)||r(a,h,p)||h.getParent().is(W))return null;var t=d(a,h,!p);if(t){if(t&&t.type==CKEDITOR.NODE_TEXT)return null;if(n(t)){if(q(t)||!u(a,t)||t.getParent().is(W))return null;k=[t,h][p?"reverse":"concat"]().concat([R,P])}}else h.equals(a.editable[p?"getLast":"getFirst"](a.isRelevant))?(y(a),p&&m(c.y,h.size.bottom-g,f.pane.height)&&m(h.size.bottom,f.pane.height-g,f.pane.height)?l=O:m(c.y,0,h.size.top+g)&&(l=T)):l=Y,k=[null,h][p?"reverse":"concat"]().concat([p?N:F,P,l,h.equals(a.editable[p?"getLast":"getFirst"](a.isRelevant))?p?O:T:Y]);return 0 in k?new e(k):null}function B(a,b,c,d){for(var e=b.getDocumentPosition(),f={},g={},h={},k={},m=ca.length;m--;)f[ca[m]]=parseInt(b.getComputedStyle.call(b,"border-"+ca[m]+"-width"),10)||0,h[ca[m]]=parseInt(b.getComputedStyle.call(b,"padding-"+ca[m]),10)||0,g[ca[m]]=parseInt(b.getComputedStyle.call(b,"margin-"+ca[m]),10)||0;
return c&&!d||C(a,d),k.top=e.y-(c?0:a.view.scroll.y),k.left=e.x-(c?0:a.view.scroll.x),k.outerWidth=b.$.offsetWidth,k.outerHeight=b.$.offsetHeight,k.height=k.outerHeight-(h.top+h.bottom+f.top+f.bottom),k.width=k.outerWidth-(h.left+h.right+f.left+f.right),k.bottom=k.top+k.outerHeight,k.right=k.left+k.outerWidth,a.inInlineMode&&(k.scroll={top:b.$.scrollTop,left:b.$.scrollLeft}),A({border:f,padding:h,margin:g,ignoreScroll:c},k,!0)}function v(a,b,c){if(!n(b))return b.size=null;if(b.size){if(b.size.ignoreScroll==c&&b.size.date>new Date-S)return null}else b.size={};return A(b.size,B(a,b,c),{date:+new Date},!0)}function y(a,b){a.view.editable=B(a,a.editable,b,!0)}function C(a,b){a.view||(a.view={});var c=a.view;if(!(!b&&c&&c.date>new Date-S)){var d=a.win,c=d.getScrollPosition(),d=d.getViewPaneSize();A(a.view,{scroll:{x:c.x,y:c.y,width:a.doc.$.documentElement.scrollWidth-d.width,height:a.doc.$.documentElement.scrollHeight-d.height},pane:{width:d.width,height:d.height,bottom:d.height+c.y},date:+new Date},!0)}}function x(a,b,c,d){for(var f=d,g=d,h=0,k=!1,m=!1,l=a.view.pane.height,n=a.mouse;n.y+h<l&&0<n.y-h&&(k||(k=b(f,d)),m||(m=b(g,d)),!k&&0<n.y-h&&(f=c(a,{x:n.x,y:n.y-h})),!m&&n.y+h<l&&(g=c(a,{x:n.x,y:n.y+h})),!k||!m);)h+=2;return new e([f,g,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var u,r,v,c=a.config,m=c.magicline_triggerOffset||30,l={editor:a,enterMode:c.enterMode,triggerOffset:m,holdDistance:0|m*(c.magicline_holdDistance||.5),boxColor:c.magicline_color||"#ff0000",rtl:"rtl"==c.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(c.magicline_tabuList||[]),triggers:c.magicline_everywhere?L:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};l.isRelevant=function(a){return n(a)&&!g(l,a)&&!q(a)},a.on("contentDom",function(){var m=a.editable(),n=a.document,q=a.window;A(l,{editable:m,inInlineMode:m.isInline(),doc:n,win:q,hotNode:null},!0),l.boundary=l.inInlineMode?l.editable:l.doc.getDocumentElement(),m.is(H.$inline)||(l.inInlineMode&&!t(m)&&m.setStyles({position:"relative",top:null,left:null}),f.call(this,l),C(l),m.attachListener(a,"beforeUndoImage",function(){l.line.detach()}),m.attachListener(a,"beforeGetData",function(){l.line.wrap.getParent()&&(l.line.detach(),a.once("getData",function(){l.line.attach()},null,null,1e3))},null,null,0),m.attachListener(l.inInlineMode?n:n.getWindow().getFrame(),"mouseout",function(b){if("wysiwyg"==a.mode)if(l.inInlineMode){var c=b.data.$.clientX;b=b.data.$.clientY,C(l),y(l,!0);var d=l.view.editable,e=l.view.scroll;c>d.left-e.x&&c<d.right-e.x&&b>d.top-e.y&&b<d.bottom-e.y||(clearTimeout(v),v=null,l.line.detach())}else clearTimeout(v),v=null,l.line.detach()}),m.attachListener(m,"keyup",function(){l.hiddenMode=0}),m.attachListener(m,"keydown",function(b){if("wysiwyg"==a.mode)switch(b.data.getKeystroke()){case 2228240:case 16:l.hiddenMode=1,l.line.detach()}}),m.attachListener(l.inInlineMode?m:n,"mousemove",function(b){if(r=!0,"wysiwyg"==a.mode&&!a.readOnly&&!v){var c={x:b.data.$.clientX,y:b.data.$.clientY};v=setTimeout(function(){l.mouse=c,v=l.trigger=null,C(l),r&&!l.hiddenMode&&a.focusManager.hasFocus&&!l.line.mouseNear()&&(l.element=da(l,!0))&&((l.trigger=w(l)||z(l)||ea(l))&&!p(l,l.trigger.upper||l.trigger.lower)?l.line.attach().place():(l.trigger=null,l.line.detach()),r=!1)},30)}}),m.attachListener(q,"scroll",function(){"wysiwyg"==a.mode&&(l.line.detach(),E.webkit&&(l.hiddenMode=1,clearTimeout(u),u=setTimeout(function(){l.mouseDown||(l.hiddenMode=0)},50)))}),m.attachListener(I?n:q,"mousedown",function(){"wysiwyg"==a.mode&&(l.line.detach(),l.hiddenMode=1,l.mouseDown=1)}),m.attachListener(I?n:q,"mouseup",function(){l.hiddenMode=0,l.mouseDown=0}),a.addCommand("accessPreviousSpace",k(l)),a.addCommand("accessNextSpace",k(l,!0)),a.setKeystroke([[c.magicline_keystrokePrevious,"accessPreviousSpace"],[c.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var b,c,d,e;for(e in{p:1,br:1,div:1})for(b=a.document.getElementsByTag(e),d=b.count();d--;)if((c=b.getItem(d)).data("cke-magicline-hot"))return l.hotNode=c,void(l.lastCmdDirection="true"===c.data("cke-magicline-dir"))}),this.backdoor={accessFocusSpace:h,boxTrigger:e,isLine:g,getAscendantTrigger:b,getNonEmptyNeighbour:d,getSize:B,that:l,triggerEdge:z,triggerEditable:w,triggerExpand:ea})},this)}});var A=CKEDITOR.tools.extend,D=CKEDITOR.dom.element,G=D.createFromHtml,E=CKEDITOR.env,I=CKEDITOR.env.ie&&9>CKEDITOR.env.version,H=CKEDITOR.dtd,K={},F=128,N=64,R=32,P=16,T=4,O=2,Y=1,M=" ",W=H.$listItem,U=H.$tableContent,J=A({},H.$nonEditable,H.$empty),L=H.$block,S=100,Q="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",aa=Q+"border-color:transparent;display:block;border-style:solid;",V="<span>"+M+"</span>";K[CKEDITOR.ENTER_BR]="br",K[CKEDITOR.ENTER_P]="p",K[CKEDITOR.ENTER_DIV]="div",e.prototype={set:function(a,b,c){return this.properties=a+b+(c||Y),this},is:function(a){return(this.properties&a)==a}};var da=function(){function a(b,c){var d=b.$.elementFromPoint(c.x,c.y);return d&&d.nodeType?new CKEDITOR.dom.element(d):null}return function(b,c,d){if(!b.mouse)return null;var e=b.doc,f=b.line.wrap;d=d||b.mouse;var h=a(e,d);return c&&g(b,h)&&(f.hide(),h=a(e,d),f.show()),!h||h.type!=CKEDITOR.NODE_ELEMENT||!h.$||E.ie&&9>E.version&&!b.boundary.equals(h)&&!b.boundary.contains(h)?null:h}}(),ba=CKEDITOR.dom.walker.whitespaces(),X=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),ea=function(){function b(e){var g,h,k,f=e.element;if(!n(f)||f.contains(e.editable)||f.isReadOnly())return null;if(k=x(e,function(a,b){return!b.equals(a)},function(a,b){return da(a,!0,b)},f),g=k.upper,h=k.lower,a(e,g,h))return k.set(R,8);if(g&&f.contains(g))for(;!g.getParent().equals(f);)g=g.getParent();else g=f.getFirst(function(a){return d(e,a)});if(h&&f.contains(h))for(;!h.getParent().equals(f);)h=h.getParent();else h=f.getLast(function(a){return d(e,a)});if(!g||!h)return null;if(v(e,g),v(e,h),!m(e.mouse.y,g.size.top,h.size.bottom))return null;for(var l,p,u,t,f=Number.MAX_VALUE;h&&!h.equals(g)&&(p=g.getNext(e.isRelevant));)l=Math.abs(c(e,g,p)-e.mouse.y),f>l&&(f=l,u=g,t=p),g=p,v(e,g);return u&&t&&m(e.mouse.y,u.size.top,t.size.bottom)?(k.upper=u,k.lower=t,k.set(R,8)):null}function d(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||X(b)||q(b)||g(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(c){var e,d=b(c);if(e=d){e=d.upper;var f=d.lower;e=!e||!f||q(f)||q(e)||f.equals(e)||e.equals(f)||f.contains(e)||e.contains(f)?!1:!!(u(c,e)&&u(c,f)&&a(c,e,f))}return e?d:null}}(),ca=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function a(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var b=[],c=["style","className"],d=0;d<c.length;d++){var e=a.$.elements.namedItem(c[d]);e&&(e=new CKEDITOR.dom.element(e),b.push([e,e.nextSibling]),e.remove())}return b}function e(a,b){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&0<b.length)for(var c=b.length-1;c>=0;c--){var d=b[c][0],e=b[c][1];e?d.insertBefore(e):d.appendTo(a)}}function b(b,c){var d=a(b),h={},k=b.$;return c||(h.class=k.className||"",k.className=""),h.inline=k.style.cssText||"",c||(k.style.cssText="position: static; overflow: visible"),e(d),h}function c(b,c){var d=a(b),h=b.$;"class"in c&&(h.className=c.class),"inline"in c&&(h.style.cssText=c.inline),e(d)}function d(a){if(!a.editable().isInline()){var c,b=CKEDITOR.instances;for(c in b){var d=b[c];"wysiwyg"!=d.mode||d.readOnly||(d=d.document.getBody(),d.setAttribute("contentEditable",!1),d.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(a){function e(){var b=k.getViewPaneSize();a.resize(b.width,b.height,null,!0)}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var g,n,q,f=a.lang,h=CKEDITOR.document,k=h.getWindow(),t=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var u=a.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}),p=a.ui.space("contents");if("wysiwyg"==a.mode){var r=a.getSelection();g=r&&r.getRanges(),n=k.getScrollPosition()}else{var w=a.editable().$;g=!CKEDITOR.env.ie&&[w.selectionStart,w.selectionEnd],n=[w.scrollLeft,w.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(k.on("resize",e),q=k.getScrollPosition(),r=a.container;r=r.getParent();)r.setCustomData("maximize_saved_styles",b(r)),r.setStyle("z-index",a.config.baseFloatZIndex-5);p.setCustomData("maximize_saved_styles",b(p,!0)),u.setCustomData("maximize_saved_styles",b(u,!0)),p={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},h.getDocumentElement().setStyles(p),!CKEDITOR.env.gecko&&h.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||h.getBody().setStyles(p),CKEDITOR.env.ie?setTimeout(function(){k.$.scrollTo(0,0)},0):k.$.scrollTo(0,0),u.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),u.$.offsetLeft,u.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"}),u.addClass("cke_maximized"),e(),p=u.getDocumentPosition(),u.setStyles({left:-1*p.x+"px",top:-1*p.y+"px"}),CKEDITOR.env.gecko&&d(a)}else if(this.state==CKEDITOR.TRISTATE_ON){k.removeListener("resize",e);for(var r=[p,u],z=0;z<r.length;z++)c(r[z],r[z].getCustomData("maximize_saved_styles")),r[z].removeCustomData("maximize_saved_styles");for(r=a.container;r=r.getParent();)c(r,r.getCustomData("maximize_saved_styles")),r.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){k.$.scrollTo(q.x,q.y)},0):k.$.scrollTo(q.x,q.y),u.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(u.setStyle("display","inline"),setTimeout(function(){u.setStyle("display","block")},0)),a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:p.$.offsetHeight,outerWidth:a.container.$.offsetWidth})}this.toggleState(),(r=this.uiItems[0])&&(p=this.state==CKEDITOR.TRISTATE_OFF?f.maximize.maximize:f.maximize.minimize,r=CKEDITOR.document.getById(r._.id),r.getChild(1).setHtml(p),r.setAttribute("title",p),r.setAttribute("href",'javascript:void("'+p+'");')),"wysiwyg"==a.mode?g?(CKEDITOR.env.gecko&&d(a),a.getSelection().selectRanges(g),(w=a.getSelection().getStartElement())&&w.scrollIntoView(!0)):k.$.scrollTo(n.x,n.y):(g&&(w.selectionStart=g[0],w.selectionEnd=g[1]),w.scrollLeft=n[0],w.scrollTop=n[1]),g=n=null,t=this.state,a.fire("maximize",this.state)},canUndo:!1}),a.ui.addButton&&a.ui.addButton("Maximize",{label:f.maximize.maximize,command:"maximize",toolbar:"tools,10"}),a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:t)},null,null,100)}}})}(),CKEDITOR.plugins.add("newpage",{init:function(a){a.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(a){var b=this;a.setData(a.config.newpage_html||"",function(){a.focus(),setTimeout(function(){a.fire("afterCommandExec",{name:"newpage",command:b}),a.selectionChange()},200)})},async:!0}),a.ui.addButton&&a.ui.addButton("NewPage",{label:a.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}}),function(){function a(a){return{"aria-label":a,class:"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:a}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var a=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak{"+a+"}")},init:function(a){a.blockless||(a.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),a.ui.addButton&&a.ui.addButton("PageBreak",{label:a.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&a.on("contentDom",function(){a.document.on("click",function(b){b=b.data.getTarget(),b.is("div")&&b.hasClass("cke_pagebreak")&&a.getSelection().selectElement(b)})}))},afterInit:function(e){function b(b){CKEDITOR.tools.extend(b.attributes,a(e.lang.pagebreak.alt),!0),b.children.length=0}var c=e.dataProcessor,d=c&&c.dataFilter,c=c&&c.htmlFilter,m=/page-break-after\s*:\s*always/i,l=/display\s*:\s*none/i;c&&c.addRules({attributes:{class:function(a,b){var c=a.replace("cke_pagebreak","");if(c!=a){var d=CKEDITOR.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>').children[0];b.children.length=0,b.add(d),d=b.attributes,delete d["aria-label"],delete d.contenteditable,delete d.title}return c}}},{applyToAll:!0,priority:5}),d&&d.addRules({elements:{div:function(a){if(a.attributes["data-cke-pagebreak"])b(a);else if(m.test(a.attributes.style)){var c=a.children[0];c&&"span"==c.name&&l.test(c.attributes.style)&&b(a)}}}})}}),CKEDITOR.plugins.pagebreakCmd={exec:function(e){var b=e.document.createElement("div",{attributes:a(e.lang.pagebreak.alt)});e.insertElement(b)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(a){return(a=a.parent)&&"div"==a.name&&a.styles&&a.styles["page-break-after"]},styles:"display"}},requiredContent:"div{page-break-after}"}}(),function(){function a(a,c,d){var e=CKEDITOR.cleanWord;return e?d():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||c+"filter/default.js"),CKEDITOR.scriptLoader.load(a,d,null,!0)),!e}function e(a){a.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(b){var c=0,d=this.path;b.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a){var b=this;c=1,a.once("beforePaste",e),a.getClipboardData({title:a.lang.pastefromword.title},function(c){c&&a.fire("paste",{type:"html",dataValue:c.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()}),a.fire("afterCommandExec",{name:"pastefromword",command:b,returnValue:!!c})})}}),b.ui.addButton&&b.ui.addButton("PasteFromWord",{label:b.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),b.on("pasteState",function(a){b.getCommand("pastefromword").setState(a.data)}),b.on("paste",function(e){var l=e.data,f=l.dataValue;if(f&&(c||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(f))){l.dontFilter=!0;var h=a(b,d,function(){h?b.fire("paste",l):(!b.config.pasteFromWordPromptCleanup||c||confirm(b.lang.pastefromword.confirmCleanup))&&(l.dataValue=CKEDITOR.cleanWord(f,b)),c=0});h&&e.cancel()}},null,null,3)}})}(),function(){var a={canUndo:!1,async:!0,exec:function(e){e.getClipboardData({title:e.lang.pastetext.title},function(b){b&&e.fire("paste",{type:"text",dataValue:b.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()}),e.fire("afterCommandExec",{name:"pastetext",command:a,returnValue:!!b})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(e){e.addCommand("pastetext",a),e.ui.addButton&&e.ui.addButton("PasteText",{label:e.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),e.config.forcePasteAsPlainText&&e.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")}),e.on("pasteState",function(a){e.getCommand("pastetext").setState(a.data)})}})}(),function(){var a,e={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(b){var c,d=b.config,e=d.baseHref?'<base href="'+d.baseHref+'"/>':"";if(d.fullPage)c=b.getData().replace(/<head>/,"$&"+e).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+b.lang.preview.preview);else{var d="<body ",l=b.document&&b.document.getBody();l&&(l.getAttribute("id")&&(d+='id="'+l.getAttribute("id")+'" '),l.getAttribute("class")&&(d+='class="'+l.getAttribute("class")+'" ')),d+=">",c=b.config.docType+'<html dir="'+b.config.contentsLangDirection+'"><head>'+e+"<title>"+b.lang.preview.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(b.config.contentsCss)+"</head>"+d+b.getData()+"</body></html>"}e=640,d=420,l=80;try{var f=window.screen,e=Math.round(.8*f.width),d=Math.round(.7*f.height),l=Math.round(.1*f.width)}catch(h){}if(!1===b.fire("contentPreview",b={dataValue:c}))return!1;var k,f="";return CKEDITOR.env.ie&&(window._cke_htmlToLoad=b.dataValue,k="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )",f=""),CKEDITOR.env.gecko&&(window._cke_htmlToLoad=b.dataValue,f=CKEDITOR.getUrl(a+"preview.html")),f=window.open(f,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+e+",height="+d+",left="+l),CKEDITOR.env.ie&&f&&(f.location=k),CKEDITOR.env.ie||CKEDITOR.env.gecko||(k=f.document,k.open(),k.write(b.dataValue),k.close()),!0}};CKEDITOR.plugins.add("preview",{init:function(b){b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(a=this.path,b.addCommand("preview",e),b.ui.addButton&&b.ui.addButton("Preview",{label:b.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})}(),CKEDITOR.plugins.add("print",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(a.addCommand("print",CKEDITOR.plugins.print),a.ui.addButton&&a.ui.addButton("Print",{label:a.lang.print.toolbar,command:"print",toolbar:"document,50"}))}}),CKEDITOR.plugins.print={exec:function(a){CKEDITOR.env.gecko?a.window.$.print():a.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}},CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var f,e=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),b=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),c=CKEDITOR.plugins.removeformat.filter,d=a.getSelection().getRanges(),m=d.createIterator(),l=function(a){return a.type==CKEDITOR.NODE_ELEMENT};f=m.getNextRange();){f.collapsed||f.enlarge(CKEDITOR.ENLARGE_ELEMENT);var h=f.createBookmark(),k=h.startNode,g=h.endNode,n=function(b){for(var h,d=a.elementPath(b),f=d.elements,g=1;(h=f[g])&&!h.equals(d.block)&&!h.equals(d.blockLimit);g++)e.test(h.getName())&&c(a,h)&&b.breakParent(h)};if(n(k),g)for(n(g),k=k.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);k&&!k.equals(g);)if(k.isReadOnly()){if(k.getPosition(g)&CKEDITOR.POSITION_CONTAINS)break;k=k.getNext(l)}else n=k.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==k.getName()&&k.data("cke-realelement")||!c(a,k)||(e.test(k.getName())?k.remove(1):(k.removeAttributes(b),a.fire("removeFormatCleanup",k))),k=n;f.moveToBookmark(h)}a.forceNextSelectionCheck(),a.getSelection().selectRanges(d)}}},filter:function(a,e){for(var b=a._.removeFormatFilters||[],c=0;c<b.length;c++)if(!1===b[c](e))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(a)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(a){function e(b){var d=h.width,e=h.height,l=d+(b.data.$.screenX-f.x)*("rtl"==m?-1:1);b=e+(b.data.$.screenY-f.y),k&&(d=Math.max(c.resize_minWidth,Math.min(l,c.resize_maxWidth))),g&&(e=Math.max(c.resize_minHeight,Math.min(b,c.resize_maxHeight))),a.resize(k?d:null,e)}function b(){CKEDITOR.document.removeListener("mousemove",e),CKEDITOR.document.removeListener("mouseup",b),a.document&&(a.document.removeListener("mousemove",e),a.document.removeListener("mouseup",b))}var c=a.config,d=a.ui.spaceId("resizer"),m=a.element?a.element.getDirection(1):"ltr";if(!c.resize_dir&&(c.resize_dir="vertical"),void 0===c.resize_maxWidth&&(c.resize_maxWidth=3e3),void 0===c.resize_maxHeight&&(c.resize_maxHeight=3e3),void 0===c.resize_minWidth&&(c.resize_minWidth=750),void 0===c.resize_minHeight&&(c.resize_minHeight=250),!1!==c.resize_enabled){var f,h,l=null,k=("both"==c.resize_dir||"horizontal"==c.resize_dir)&&c.resize_minWidth!=c.resize_maxWidth,g=("both"==c.resize_dir||"vertical"==c.resize_dir)&&c.resize_minHeight!=c.resize_maxHeight,n=CKEDITOR.tools.addFunction(function(d){l||(l=a.getResizable()),h={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0},f={x:d.screenX,y:d.screenY},c.resize_minWidth>h.width&&(c.resize_minWidth=h.width),c.resize_minHeight>h.height&&(c.resize_minHeight=h.height),CKEDITOR.document.on("mousemove",e),CKEDITOR.document.on("mouseup",b),a.document&&(a.document.on("mousemove",e),a.document.on("mouseup",b)),d.preventDefault&&d.preventDefault()});a.on("destroy",function(){CKEDITOR.tools.removeFunction(n)}),a.on("uiSpace",function(b){if("bottom"==b.data.space){var c="";k&&!g&&(c=" cke_resizer_horizontal"),!k&&g&&(c=" cke_resizer_vertical");var e='<span id="'+d+'" class="cke_resizer'+c+" cke_resizer_"+m+'" title="'+CKEDITOR.tools.htmlEncode(a.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+n+', event)">'+("ltr"==m?"◢":"◣")+"</span>";"ltr"==m&&"ltr"==c?b.data.html+=e:b.data.html=e+b.data.html}},a,null,100),a.on("maximize",function(b){a.ui.space("resizer")[b.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),function(){var a={readOnly:1,exec:function(a){if(a.fire("save")&&(a=a.element.$.form))try{a.submit()}catch(b){a.submit.click&&a.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(e){e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.addCommand("save",a).modes={wysiwyg:!!e.element.$.form},e.ui.addButton&&e.ui.addButton("Save",{label:e.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})}(),function(){CKEDITOR.plugins.add("selectall",{init:function(a){a.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(a){var b=a.editable();if(b.is("textarea"))a=b.$,CKEDITOR.env.ie?a.createTextRange().execCommand("SelectAll"):(a.selectionStart=0,a.selectionEnd=a.value.length),a.focus();else{if(b.is("body"))a.document.$.execCommand("SelectAll",!1,null);else{var c=a.createRange();c.selectNodeContents(b),c.select()}a.forceNextSelectionCheck(),a.selectionChange()}},canUndo:!1}),a.ui.addButton&&a.ui.addButton("SelectAll",{label:a.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})}(),function(){var a={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){if(a.document){var b=this.state!=CKEDITOR.TRISTATE_ON||a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!a.focusManager.hasFocus?"removeClass":"attachClass";a.editable()[b]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var b,c,d,m,k,g,a="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),l=CKEDITOR.getUrl(this.path),f=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),h=f?":not([contenteditable=false]):not(.cke_show_blocks_off)":"";for(b=c=d=m="";k=a.pop();)g=a.length?",":"",b+=".cke_show_blocks "+k+h+g,d+=".cke_show_blocks.cke_contents_ltr "+k+h+g,m+=".cke_show_blocks.cke_contents_rtl "+k+h+g,c+=".cke_show_blocks "+k+h+"{background-image:url("+CKEDITOR.getUrl(l+"images/block_"+k+".png")+")}";CKEDITOR.addCss((b+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(c,d+"{background-position:top left;padding-left:8px}",m+"{background-position:top right;padding-right:8px}")),f||CKEDITOR.addCss(".cke_show_blocks [contenteditable=false],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable=false],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable=false],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(e){function b(){c.refresh(e)}if(!e.blockless){var c=e.addCommand("showblocks",a);c.canUndo=!1,e.config.startupOutlineBlocks&&c.setState(CKEDITOR.TRISTATE_ON),e.ui.addButton&&e.ui.addButton("ShowBlocks",{label:e.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"}),e.on("mode",function(){c.state!=CKEDITOR.TRISTATE_DISABLED&&c.refresh(e)}),e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(e.on("focus",b),e.on("blur",b)),e.on("contentDom",function(){c.state!=CKEDITOR.TRISTATE_DISABLED&&c.refresh(e)})}}})}(),function(){var a={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){if(a.document){var b=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[b]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(a)},init:function(e){var b=e.addCommand("showborders",a);b.canUndo=!1,!1!==e.config.startupShowBorders&&b.setState(CKEDITOR.TRISTATE_ON),e.on("mode",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(e)},null,null,100),e.on("contentDom",function(){b.state!=CKEDITOR.TRISTATE_DISABLED&&b.refresh(e)}),e.on("removeFormatCleanup",function(a){a=a.data,e.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&a.is("table")&&(!a.hasAttribute("border")||0>=parseInt(a.getAttribute("border"),10))&&a.addClass("cke_show_border")})},afterInit:function(a){var b=a.dataProcessor;a=b&&b.dataFilter,b=b&&b.htmlFilter,a&&a.addRules({elements:{table:function(a){a=a.attributes;var b=a.class,e=parseInt(a.border,10);e&&!(0>=e)||b&&-1!=b.indexOf("cke_show_border")||(a.class=(b||"")+" cke_show_border")}}}),b&&b.addRules({elements:{table:function(a){a=a.attributes;var b=a.class;b&&(a.class=b.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(a){var b=a.data.name;"table"!=b&&"tableProperties"!=b||(a=a.data.definition,b=a.getContents("info").get("txtBorder"),b.commit=CKEDITOR.tools.override(b.commit,function(a){return function(b,e){a.apply(this,arguments);var l=parseInt(this.getValue(),10);e[!l||0>=l?"addClass":"removeClass"]("cke_show_border")}}),(a=(a=a.getContents("advanced"))&&a.get("advCSSClasses"))&&(a.setup=CKEDITOR.tools.override(a.setup,function(a){return function(){a.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),a.commit=CKEDITOR.tools.override(a.commit,function(a){return function(b,e){a.apply(this,arguments),parseInt(e.getAttribute("border"),10)||e.addClass("cke_show_border")}})))})}(),CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(a){a.config.smiley_path=a.config.smiley_path||this.path+"images/",a.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"})),a.ui.addButton&&a.ui.addButton("Smiley",{label:a.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"}),CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}}),CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" "),CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";"),function(){CKEDITOR.plugins.add("sourcearea",{init:function(e){function b(){var a=d&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),a&&this.focus()}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var c=CKEDITOR.plugins.sourcearea;e.addMode("source",function(c){var d=e.ui.space("contents").getDocument().createElement("textarea");d.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",e.config.sourceAreaTabSize||4))),d.setAttribute("dir","ltr"),d.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),e.ui.space("contents").append(d),d=e.editable(new a(e,d)),d.setData(e.getData(1)),CKEDITOR.env.ie&&(d.attachListener(e,"resize",b,d),d.attachListener(CKEDITOR.document.getWindow(),"resize",b,d),CKEDITOR.tools.setTimeout(b,0,d)),e.fire("ariaWidget",this),c()}),e.addCommand("source",c.commands.source),e.ui.addButton&&e.ui.addButton("Source",{label:e.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),e.on("mode",function(){e.getCommand("source").setState("source"==e.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var d=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var a=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){a.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(a){"wysiwyg"==a.mode&&a.fire("saveSnapshot"),a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),a.setMode("source"==a.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var e=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),a.addCommand("specialchar",{exec:function(){var b=a.langCode,b=e.availableLangs[b]?b:e.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e.path+"dialogs/lang/"+b+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,e.langEntries[b]),a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),
function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(a){var e=a.config,b=a.lang.stylescombo,c={},d=[],m=[];a.on("stylesSet",function(b){if(b=b.data.styles){for(var f,h,k,g=0,n=b.length;n>g;g++)f=b[g],a.blockless&&f.element in CKEDITOR.dtd.$block||(h=f.name,f=new CKEDITOR.style(f),a.filter.customConfig&&!a.filter.check(f))||(f._name=h,f._.enterMode=e.enterMode,f._.type=k=f.assignedTo||f.type,f._.weight=g+1e3*(k==CKEDITOR.STYLE_OBJECT?1:k==CKEDITOR.STYLE_BLOCK?2:3),c[h]=f,d.push(f),m.push(f));d.sort(function(a,b){return a._.weight-b._.weight})}}),a.ui.addRichCombo("Styles",{label:b.label,title:b.panelTitle,toolbar:"styles,10",allowedContent:m,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!0,attributes:{"aria-label":b.panelTitle}},init:function(){var a,c,e,k,g,m;for(g=0,m=d.length;m>g;g++)a=d[g],c=a._name,k=a._.type,k!=e&&(this.startGroup(b["panelTitle"+String(k)]),e=k),this.add(c,a.type==CKEDITOR.STYLE_OBJECT?c:a.buildPreview(),c);this.commit()},onClick:function(b){a.focus(),a.fire("saveSnapshot"),b=c[b];var d=a.elementPath();a[b.checkActive(d,a)?"removeStyle":"applyStyle"](b),a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(b){var d=this.getValue();b=b.data.path.elements;for(var g,e=0,k=b.length;k>e;e++){g=b[e];for(var m in c)if(c[m].checkElementRemovable(g,!0,a))return void(m!=d&&this.setValue(m))}this.setValue("")},this)},onOpen:function(){var d=a.getSelection().getSelectedElement(),d=a.elementPath(d),e=[0,0,0,0];this.showAll(),this.unmarkAll();for(var h in c){var k=c[h],g=k._.type;k.checkApplicable(d,a,a.activeFilter)?e[g]++:this.hideItem(h),k.checkActive(d,a)&&this.mark(h)}e[CKEDITOR.STYLE_BLOCK]||this.hideGroup(b["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),e[CKEDITOR.STYLE_INLINE]||this.hideGroup(b["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),e[CKEDITOR.STYLE_OBJECT]||this.hideGroup(b["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var b=a.elementPath();if(b){for(var d in c)if(c[d].checkApplicable(b,a,a.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){c={},d=[]}})}})}(),function(){function a(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(b){if(b.editable().hasFocus){var e,c=b.getSelection();if(e=new CKEDITOR.dom.elementPath(c.getCommonAncestor(),c.root).contains({td:1,th:1},1)){var c=b.createRange(),h=CKEDITOR.tools.tryThese(function(){var b=e.getParent().$.cells[e.$.cellIndex+(a?-1:1)];return b.parentNode.parentNode,b},function(){var b=e.getParent(),b=b.getAscendant("table").$.rows[b.$.rowIndex+(a?-1:1)];return b.cells[a?b.cells.length-1:0]});if(h||a){if(!h)return!0;h=new CKEDITOR.dom.element(h),c.moveToElementEditStart(h),c.checkStartOfBlock()&&c.checkEndOfBlock()||c.selectNodeContents(h)}else{for(var k=e.getAscendant("table").$,h=e.getParent().$.cells,k=new CKEDITOR.dom.element(k.insertRow(-1),b.document),g=0,n=h.length;n>g;g++)k.append(new CKEDITOR.dom.element(h[g],b.document).clone(!1,!1)).appendBogus();c.moveToElementEditStart(k)}return c.select(!0),!0}}return!1}}}var e={editorFocus:!1,modes:{wysiwyg:1,source:1}},b={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},c={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(d){for(var m=!1!==d.config.enableTabKeyTools,l=d.config.tabSpaces||0,f="";l--;)f+=" ";f&&d.on("key",function(a){9==a.data.keyCode&&(d.insertText(f),a.cancel())}),m&&d.on("key",function(a){(9==a.data.keyCode&&d.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&d.execCommand("selectPreviousCell"))&&a.cancel()}),d.addCommand("blur",CKEDITOR.tools.extend(b,e)),d.addCommand("blurBack",CKEDITOR.tools.extend(c,e)),d.addCommand("selectNextCell",a()),d.addCommand("selectPreviousCell",a(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(a,e){var c,d,m,l,f,h,b=void 0===e?this.getTabIndex():e;if(0>=b)for(f=this.getNextSourceNode(a,CKEDITOR.NODE_ELEMENT);f;){if(f.isVisible()&&0===f.getTabIndex()){m=f;break}f=f.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(f=this.getDocument().getBody().getFirst();f=f.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!c)if(!d&&f.equals(this)){if(d=!0,a){if(!(f=f.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;c=1}}else d&&!this.contains(f)&&(c=1);if(f.isVisible()&&!(0>(h=f.getTabIndex()))){if(c&&h==b){m=f;break}h>b&&(!m||!l||l>h)?(m=f,l=h):m||0!==h||(m=f,l=h)}}m&&m.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(a,e){for(var c,d,m,f,b=void 0===e?this.getTabIndex():e,l=0,h=this.getDocument().getBody().getLast();h=h.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!c)if(!d&&h.equals(this)){if(d=!0,a){if(!(h=h.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;c=1}}else d&&!this.contains(h)&&(c=1);if(h.isVisible()&&!(0>(f=h.getTabIndex())))if(0>=b){if(c&&0===f){m=h;break}f>l&&(m=h,l=f)}else{if(c&&f==b){m=h;break}b>f&&(!m||f>l)&&(m=h,l=f)}}m&&m.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function e(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var b=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]})),a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e())),a.addCommand("tableDelete",e({exec:function(a){var b=a.elementPath().contains("table",1);if(b){var e=b.getParent(),l=a.editable();1!=e.getChildCount()||e.is("td","th")||e.equals(l)||(b=e),a=a.createRange(),a.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START),b.remove(),a.select()}}})),a.ui.addButton&&a.ui.addButton("Table",{label:b.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),a.addMenuItems&&a.addMenuItems({table:{label:b.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:b.deleteTable,command:"tableDelete",group:"table",order:1}}),a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog="tableProperties")}),a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function a(a){function b(a){0<c.length||a.type!=CKEDITOR.NODE_ELEMENT||!q.test(a.getName())||a.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(d,a,"selected_cell",!0),c.push(a))}a=a.getRanges();for(var c=[],d={},e=0;e<a.length;e++){var f=a[e];if(f.collapsed)f=f.getCommonAncestor(),(f=f.getAscendant("td",!0)||f.getAscendant("th",!0))&&c.push(f);else{var g,f=new CKEDITOR.dom.walker(f);for(f.guard=b;g=f.next();)g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.table)||(g=g.getAscendant("td",!0)||g.getAscendant("th",!0))&&!g.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(d,g,"selected_cell",!0),c.push(g))}}return CKEDITOR.dom.element.clearAllMarkers(d),c}function e(b,c){for(var d=a(b),e=d[0],f=e.getAscendant("table"),e=e.getDocument(),g=d[0].getParent(),h=g.$.rowIndex,d=d[d.length-1],k=d.getParent().$.rowIndex+d.$.rowSpan-1,d=new CKEDITOR.dom.element(f.$.rows[k]),h=c?h:k,g=c?g:d,d=CKEDITOR.tools.buildTableMap(f),f=d[h],h=c?d[h-1]:d[h+1],d=d[0].length,e=e.createElement("tr"),k=0;f[k]&&d>k;k++){var l;1<f[k].rowSpan&&h&&f[k]==h[k]?(l=f[k],l.rowSpan+=1):(l=new CKEDITOR.dom.element(f[k]).clone(),l.removeAttribute("rowSpan"),l.appendBogus(),e.append(l),l=l.$),k+=l.colSpan-1}c?e.insertBefore(g):e.insertAfter(g)}function b(c){if(c instanceof CKEDITOR.dom.selection){var d=a(c),e=d[0].getAscendant("table"),f=CKEDITOR.tools.buildTableMap(e);c=d[0].getParent().$.rowIndex;for(var d=d[d.length-1],g=d.getParent().$.rowIndex+d.$.rowSpan-1,d=[],h=c;g>=h;h++){for(var k=f[h],l=new CKEDITOR.dom.element(e.$.rows[h]),m=0;m<k.length;m++){var n=new CKEDITOR.dom.element(k[m]),q=n.getParent().$.rowIndex;1==n.$.rowSpan?n.remove():(--n.$.rowSpan,q==h&&(q=f[h+1],q[m-1]?n.insertAfter(new CKEDITOR.dom.element(q[m-1])):new CKEDITOR.dom.element(e.$.rows[h+1]).append(n,1))),m+=n.$.colSpan-1}d.push(l)}for(f=e.$.rows,e=new CKEDITOR.dom.element(f[g+1]||(c>0?f[c-1]:null)||e.$.parentNode),h=d.length;h>=0;h--)b(d[h]);return e}return c instanceof CKEDITOR.dom.element&&(e=c.getAscendant("table"),1==e.$.rows.length?e.remove():c.remove()),null}function c(a,b){for(var c=b?1/0:0,d=0;d<a.length;d++){var e;e=a[d];for(var f=b,g=e.getParent().$.cells,h=0,k=0;k<g.length;k++){var l=g[k],h=h+(f?1:l.colSpan);if(l==e.$)break}e=h-1,(b?c>e:e>c)&&(c=e)}return c}function d(b,d){for(var e=a(b),f=e[0].getAscendant("table"),g=c(e,1),e=c(e),g=d?g:e,h=CKEDITOR.tools.buildTableMap(f),f=[],e=[],k=h.length,l=0;k>l;l++)f.push(h[l][g]),e.push(d?h[l][g-1]:h[l][g+1]);for(l=0;k>l;l++)f[l]&&(1<f[l].colSpan&&e[l]==f[l]?(g=f[l],g.colSpan+=1):(g=new CKEDITOR.dom.element(f[l]).clone(),g.removeAttribute("colSpan"),g.appendBogus(),g[d?"insertBefore":"insertAfter"].call(g,new CKEDITOR.dom.element(f[l])),g=g.$),l+=g.rowSpan-1)}function m(a,b){var c=a.getStartElement();if(c=c.getAscendant("td",1)||c.getAscendant("th",1)){var d=c.clone();d.appendBogus(),b?d.insertBefore(c):d.insertAfter(c)}}function l(b){if(b instanceof CKEDITOR.dom.selection){b=a(b);var d,c=b[0]&&b[0].getAscendant("table");a:{var e=0;d=b.length-1;for(var h,k,g={};h=b[e++];)CKEDITOR.dom.element.setMarker(g,h,"delete_cell",!0);for(e=0;h=b[e++];)if((k=h.getPrevious())&&!k.getCustomData("delete_cell")||(k=h.getNext())&&!k.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(g),d=k;break a}CKEDITOR.dom.element.clearAllMarkers(g),k=b[0].getParent(),(k=k.getPrevious())?d=k.getLast():(k=b[d].getParent(),d=(k=k.getNext())?k.getChild(0):null)}for(k=b.length-1;k>=0;k--)l(b[k]);d?f(d,!0):c&&c.remove()}else b instanceof CKEDITOR.dom.element&&(c=b.getParent(),1==c.getChildCount()?c.remove():b.remove())}function f(a,b){var c=a.getDocument(),d=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(d.focus(),c.focus()),c=new CKEDITOR.dom.range(c),c["moveToElementEdit"+(b?"End":"Start")](a)||(c.selectNodeContents(a),c.collapse(!b)),c.select(!0)}function h(a,b,c){if(a=a[b],"undefined"==typeof c)return a;for(b=0;a&&b<a.length;b++){if(c.is&&a[b]==c.$)return b;if(b==c)return new CKEDITOR.dom.element(a[b])}return c.is?-1:null}function k(b,c,d){var f,e=a(b);if((c?1!=e.length:2>e.length)||(f=b.getCommonAncestor())&&f.type==CKEDITOR.NODE_ELEMENT&&f.is("table"))return!1;var g;b=e[0],f=b.getAscendant("table");var k=CKEDITOR.tools.buildTableMap(f),l=k.length,m=k[0].length,n=b.getParent().$.rowIndex,q=h(k,n,b);if(c){var A;try{var D=parseInt(b.getAttribute("rowspan"),10)||1;g=parseInt(b.getAttribute("colspan"),10)||1,A=k["up"==c?n-D:"down"==c?n+D:n]["left"==c?q-g:"right"==c?q+g:q]}catch(G){return!1}if(!A||b.$==A)return!1;e["up"==c||"left"==c?"unshift":"push"](new CKEDITOR.dom.element(A))}c=b.getDocument();var E=n,D=A=0,I=!d&&new CKEDITOR.dom.documentFragment(c),H=0;for(c=0;c<e.length;c++){g=e[c];var K=g.getParent(),F=g.getFirst(),N=g.$.colSpan,R=g.$.rowSpan,K=K.$.rowIndex,P=h(k,K,g),H=H+N*R,D=Math.max(D,P-q+N);A=Math.max(A,K-n+R),d||(N=g,(R=N.getBogus())&&R.remove(),N.trim(),g.getChildren().count()&&(K==E||!F||F.isBlockBoundary&&F.isBlockBoundary({br:1})||(E=I.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!E||E.is&&E.is("br")||I.append("br")),g.moveChildren(I)),c?g.remove():g.setHtml("")),E=K}if(d)return A*D==H;for(I.moveChildren(b),b.appendBogus(),D>=m?b.removeAttribute("rowSpan"):b.$.rowSpan=A,A>=l?b.removeAttribute("colSpan"):b.$.colSpan=D,d=new CKEDITOR.dom.nodeList(f.$.rows),e=d.count(),c=e-1;c>=0;c--)f=d.getItem(c),f.$.cells.length||(f.remove(),e++);return b}function g(b,c){var d=a(b);if(1<d.length)return!1;if(c)return!0;var n,d=d[0],e=d.getParent(),f=e.getAscendant("table"),g=CKEDITOR.tools.buildTableMap(f),k=e.$.rowIndex,l=h(g,k,d),m=d.$.rowSpan;if(m>1){n=Math.ceil(m/2);for(var q,m=Math.floor(m/2),e=k+n,f=new CKEDITOR.dom.element(f.$.rows[e]),g=h(g,e),e=d.clone(),k=0;k<g.length;k++){if(q=g[k],q.parentNode==f.$&&k>l){e.insertBefore(new CKEDITOR.dom.element(q));break}q=null}q||f.append(e)}else for(m=n=1,f=e.clone(),f.insertAfter(e),f.append(e=d.clone()),q=h(g,k),l=0;l<q.length;l++)q[l].rowSpan++;return e.appendBogus(),d.$.rowSpan=n,e.$.rowSpan=m,1==n&&d.removeAttribute("rowSpan"),1==m&&e.removeAttribute("rowSpan"),e}function n(b,c){var d=a(b);if(1<d.length)return!1;if(c)return!0;var d=d[0],e=d.getParent(),f=e.getAscendant("table"),f=CKEDITOR.tools.buildTableMap(f),g=h(f,e.$.rowIndex,d),k=d.$.colSpan;if(k>1)e=Math.ceil(k/2),k=Math.floor(k/2);else{for(var k=e=1,l=[],m=0;m<f.length;m++){var n=f[m];l.push(n[g]),1<n[g].rowSpan&&(m+=n[g].rowSpan-1)}for(f=0;f<l.length;f++)l[f].colSpan++}return f=d.clone(),f.insertAfter(d),f.appendBogus(),d.$.colSpan=e,f.$.colSpan=k,1==e&&d.removeAttribute("colSpan"),1==k&&f.removeAttribute("colSpan"),f}var q=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(c){function h(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function p(a,b){var d=c.addCommand(a,b);c.addFeature(d)}var q=c.lang.table;p("cellProperties",new CKEDITOR.dialogCommand("cellProperties",h({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),p("rowDelete",h({requiredContent:"table",exec:function(a){a=a.getSelection(),f(b(a))}})),p("rowInsertBefore",h({requiredContent:"table",exec:function(a){a=a.getSelection(),e(a,!0)}})),p("rowInsertAfter",h({requiredContent:"table",exec:function(a){a=a.getSelection(),e(a)}})),p("columnDelete",h({requiredContent:"table",exec:function(b){b=b.getSelection(),b=a(b);var c=b[0],d=b[b.length-1];b=c.getAscendant("table");for(var g,h,e=CKEDITOR.tools.buildTableMap(b),k=[],l=0,m=e.length;m>l;l++)for(var n=0,t=e[l].length;t>n;n++)e[l][n]==c.$&&(g=n),e[l][n]==d.$&&(h=n);for(l=g;h>=l;l++)for(n=0;n<e.length;n++)d=e[n],c=new CKEDITOR.dom.element(b.$.rows[n]),d=new CKEDITOR.dom.element(d[l]),d.$&&(1==d.$.colSpan?d.remove():--d.$.colSpan,n+=d.$.rowSpan-1,c.$.cells.length||k.push(c));h=b.$.rows[0]&&b.$.rows[0].cells,g=new CKEDITOR.dom.element(h[g]||(g?h[g-1]:b.$.parentNode)),k.length==m&&b.remove(),g&&f(g,!0)}})),p("columnInsertBefore",h({requiredContent:"table",exec:function(a){a=a.getSelection(),d(a,!0)}})),p("columnInsertAfter",h({requiredContent:"table",exec:function(a){a=a.getSelection(),d(a)}})),p("cellDelete",h({requiredContent:"table",exec:function(a){a=a.getSelection(),l(a)}})),p("cellMerge",h({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a){f(k(a.getSelection()),!0)}})),p("cellMergeRight",h({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){f(k(a.getSelection(),"right"),!0)}})),p("cellMergeDown",h({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){f(k(a.getSelection(),"down"),!0)}})),p("cellVerticalSplit",h({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){f(n(a.getSelection()))}})),p("cellHorizontalSplit",h({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){f(g(a.getSelection()))}})),p("cellInsertBefore",h({requiredContent:"table",exec:function(a){a=a.getSelection(),m(a,!0)}})),p("cellInsertAfter",h({requiredContent:"table",exec:function(a){a=a.getSelection(),m(a)}})),c.addMenuItems&&c.addMenuItems({tablecell:{label:q.cell.menu,group:"tablecell",order:1,getItems:function(){var b=c.getSelection(),d=a(b);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:k(b,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:k(b,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:k(b,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:n(b,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:g(b,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<d.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:q.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:q.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:q.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:q.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:q.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:q.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:q.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:q.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:q.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:q.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:q.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:q.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:q.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:q.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:q.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:q.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:q.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),c.contextMenu&&c.contextMenu.addListener(function(a,b,c){return(a=c.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:a},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(a){a=a.$.rows;for(var e=-1,b=[],c=0;c<a.length;c++){e++,!b[e]&&(b[e]=[]);for(var d=-1,m=0;m<a[c].cells.length;m++){var l=a[c].cells[m];for(d++;b[e][d];)d++;for(var f=isNaN(l.colSpan)?1:l.colSpan,l=isNaN(l.rowSpan)?1:l.rowSpan,h=0;l>h;h++){b[e+h]||(b[e+h]=[]);for(var k=0;f>k;k++)b[e+h][d+k]=a[c].cells[m]}d+=f-1}}return b},function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(a){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js")),a.addCommand("templates",new CKEDITOR.dialogCommand("templates")),a.ui.addButton&&a.ui.addButton("Templates",{label:a.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var a={},e={};CKEDITOR.addTemplates=function(b,c){a[b]=c},CKEDITOR.getTemplates=function(b){return a[b]},CKEDITOR.loadTemplates=function(a,c){for(var d=[],m=0,l=a.length;l>m;m++)e[a[m]]||(d.push(a[m]),e[a[m]]=1);d.length?CKEDITOR.scriptLoader.load(d,c):setTimeout(c,0)}}(),CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")],CKEDITOR.config.templates_replaceContent=!0,function(){function a(a){function b(){for(var g=c(),h=CKEDITOR.tools.clone(a.config.toolbarGroups)||e(a),k=0;k<h.length;k++){var m=h[k];if("/"!=m){"string"==typeof m&&(m=h[k]={name:m});var p,r=m.groups;if(r)for(var w=0;w<r.length;w++)p=r[w],(p=g[p])&&f(m,p);(p=g[m.name])&&f(m,p)}}return h}function c(){var e,f,g,b={};for(e in a.ui.items)f=a.ui.items[e],g=f.toolbar||"others",g=g.split(","),f=g[0],g=parseInt(g[1]||-1,10),b[f]||(b[f]=[]),b[f].push({name:e,order:g});for(f in b)b[f]=b[f].sort(function(a,b){return a.order==b.order?0:0>b.order?-1:0>a.order?1:a.order<b.order?-1:1});return b}function f(b,c){if(c.length){b.items?b.items.push(a.ui.create("-")):b.items=[];for(var e;e=c.shift();)e="string"==typeof e?e:e.name,k&&-1!=CKEDITOR.tools.indexOf(k,e)||(e=a.ui.create(e))&&a.addFeature(e)&&b.items.push(e)}}function h(a){var c,d,e,b=[];for(c=0;c<a.length;++c)d=a[c],e={},"/"==d?b.push(d):CKEDITOR.tools.isArray(d)?(f(e,CKEDITOR.tools.clone(d)),b.push(e)):d.items&&(f(e,CKEDITOR.tools.clone(d.items)),e.name=d.name,b.push(e));return b}var k=a.config.removeButtons,k=k&&k.split(","),g=a.config.toolbar;return"string"==typeof g&&(g=a.config["toolbar_"+g]),a.toolbar=g?h(g):b()}function e(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var b=function(){this.toolbars=[],this.focusCommandExecuted=!1};b.prototype.focus=function(){for(var b,a=0;b=this.toolbars[a++];)for(var e,c=0;e=b.items[c++];)if(e.focus)return void e.focus()};var c={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(d){var e,l=function(a,b){var c,g="rtl"==d.lang.dir,n=d.config.toolbarGroupCycling,q=g?37:39,g=g?39:37,n=void 0===n||n;switch(b){case 9:case CKEDITOR.SHIFT+9:for(;!c||!c.items.length;)if(c=9==b?(c?c.next:a.toolbar.next)||d.toolbox.toolbars[0]:(c?c.previous:a.toolbar.previous)||d.toolbox.toolbars[d.toolbox.toolbars.length-1],c.items.length)for(a=c.items[e?c.items.length-1:0];a&&!a.focus;)(a=e?a.previous:a.next)||(c=0);return a&&a.focus(),!1;case q:c=a;do c=c.next,!c&&n&&(c=a.toolbar.items[0]);while(c&&!c.focus);return c?c.focus():l(a,9),!1;case 40:return a.button&&a.button.hasArrow?(d.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)}),a.execute()):l(a,40==b?q:g),!1;case g:case 38:c=a;do c=c.previous,!c&&n&&(c=a.toolbar.items[a.toolbar.items.length-1]);while(c&&!c.focus);return c?c.focus():(e=1,l(a,CKEDITOR.SHIFT+9),e=0),!1;case 27:return d.focus(),!1;case 13:case 32:return a.execute(),!1}return!0};d.on("uiSpace",function(c){if(c.data.space==d.config.toolbarLocation){c.removeListener(),d.toolbox=new b;var g,m,e=CKEDITOR.tools.getNextId(),k=['<span id="',e,'" class="cke_voice_label">',d.lang.toolbar.toolbars,"</span>",'<span id="'+d.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',e,'" onmousedown="return false;">'],e=!1!==d.config.toolbarStartupExpanded;d.config.toolbarCanCollapse&&d.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&k.push('<span class="cke_toolbox_main"'+(e?">":' style="display:none">'));for(var q=d.toolbox.toolbars,t=a(d),u=0;u<t.length;u++){var p,w,B,r=0,z=t[u];if(z)if(g&&(k.push("</span>"),m=g=0),"/"===z)k.push('<span class="cke_toolbar_break"></span>');else{B=z.items||z;for(var v=0;v<B.length;v++){var C,y=B[v];if(y){var x=function(a){a=a.render(d,k),A=r.items.push(a)-1,A>0&&(a.previous=r.items[A-1],a.previous.next=a),a.toolbar=r,a.onkey=l,a.onfocus=function(){d.toolbox.focusCommandExecuted||d.focus()}};if(y.type==CKEDITOR.UI_SEPARATOR)m=g&&y;else{if(C=!1!==y.canGroup,!r){p=CKEDITOR.tools.getNextId(),r={id:p,items:[]},w=z.name&&(d.lang.toolbar.toolbarGroups[z.name]||z.name),k.push('<span id="',p,'" class="cke_toolbar"',w?' aria-labelledby="'+p+'_label"':"",' role="toolbar">'),w&&k.push('<span id="',p,'_label" class="cke_voice_label">',w,"</span>"),k.push('<span class="cke_toolbar_start"></span>');var A=q.push(r)-1;A>0&&(r.previous=q[A-1],r.previous.next=r)}C?g||(k.push('<span class="cke_toolgroup" role="presentation">'),g=1):g&&(k.push("</span>"),g=0),m&&(x(m),m=0),x(y)}}}g&&(k.push("</span>"),m=g=0),r&&k.push('<span class="cke_toolbar_end"></span></span>')}}if(d.config.toolbarCanCollapse&&k.push("</span>"),d.config.toolbarCanCollapse&&d.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var D=CKEDITOR.tools.addFunction(function(){d.execCommand("toolbarCollapse")});d.on("destroy",function(){CKEDITOR.tools.removeFunction(D)}),d.addCommand("toolbarCollapse",{readOnly:1,exec:function(a){var b=a.ui.space("toolbar_collapser"),c=b.getPrevious(),d=a.ui.space("contents"),e=c.getParent(),f=parseInt(d.$.style.height,10),g=e.$.offsetHeight,h=b.hasClass("cke_toolbox_collapser_min");h?(c.show(),b.removeClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarCollapse)):(c.hide(),b.addClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarExpand)),b.getFirst().setText(h?"▲":"◀"),d.setStyle("height",f-(e.$.offsetHeight-g)+"px"),a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:d.$.offsetHeight,outerWidth:a.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),d.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),k.push('<a title="'+(e?d.lang.toolbar.toolbarCollapse:d.lang.toolbar.toolbarExpand)+'" id="'+d.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),e||k.push(" cke_toolbox_collapser_min"),k.push('" onclick="CKEDITOR.tools.callFunction('+D+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}k.push("</span>"),c.data.html+=k.join("")}}),d.on("destroy",function(){if(this.toolbox){var a,c,d,e,b=0;for(a=this.toolbox.toolbars;b<a.length;b++)for(d=a[b].items,c=0;c<d.length;c++)e=d[c],e.clickFn&&CKEDITOR.tools.removeFunction(e.clickFn),e.keyDownFn&&CKEDITOR.tools.removeFunction(e.keyDownFn)}}),d.on("uiReady",function(){var a=d.ui.space("toolbox");a&&d.focusManager.add(a,1)}),d.addCommand("toolbarFocus",c),d.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),d.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),d.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,b){return b.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(a,b,c){var f=e(this.editor),h=0===b,k={name:a};if(c){if(c=CKEDITOR.tools.search(f,function(a){return a.name==c}))return!c.groups&&(c.groups=[]),b&&(b=CKEDITOR.tools.indexOf(c.groups,b),b>=0)?void c.groups.splice(b+1,0,a):void(h?c.groups.splice(0,0,a):c.groups.push(a));b=null}b&&(b=CKEDITOR.tools.indexOf(f,function(a){return a.name==b})),h?f.splice(0,0,a):"number"==typeof b?f.splice(b+1,0,k):f.push(a)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){var a=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],e={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(c){function d(a){g.enabled&&!1!==a.data.command.canUndo&&g.save()}function e(){g.enabled=c.readOnly?!1:"wysiwyg"==c.mode,g.onChange()}var g=c.undoManager=new b(c),l=g.editingHandler=new m(g),q=c.addCommand("undo",{exec:function(){g.undo()&&(c.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),t=c.addCommand("redo",{exec:function(){g.redo()&&(c.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});c.setKeystroke([[a[0],"undo"],[a[1],"redo"],[a[2],"redo"]]),g.onChange=function(){q.setState(g.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),t.setState(g.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},c.on("beforeCommandExec",d),c.on("afterCommandExec",d),c.on("saveSnapshot",function(a){g.save(a.data&&a.data.contentOnly)}),c.on("contentDom",l.attachListeners,l),c.on("instanceReady",function(){c.fire("saveSnapshot")}),c.on("beforeModeUnload",function(){"wysiwyg"==c.mode&&g.save(!0)}),c.on("mode",e),c.on("readOnly",e),c.ui.addButton&&(c.ui.addButton("Undo",{label:c.lang.undo.undo,command:"undo",toolbar:"undo,10"}),c.ui.addButton("Redo",{label:c.lang.undo.redo,command:"redo",toolbar:"undo,20"})),c.resetUndo=function(){g.reset(),c.fire("saveSnapshot")},c.on("updateSnapshot",function(){g.currentImage&&g.update()}),c.on("lockSnapshot",function(a){a=a.data,g.lock(a&&a.dontUpdate,a&&a.forceUpdate)}),c.on("unlockSnapshot",g.unlock,g)}}),CKEDITOR.plugins.undo={};var b=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=a.config.undoStackSize||20,this.strokesLimit=25,this.editor=a,this.reset()};b.prototype={type:function(a,c){var d=b.getKeyGroup(a),e=this.strokesRecorded[d]+1;c=c||e>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),c?(e=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[d]=e,this.previousKeyGroup=d},keyGroupChanged:function(a){return b.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(a,b,d){var e=this.editor;if(this.locked||"ready"!=e.status||"wysiwyg"!=e.mode)return!1;var l=e.editable();if(!l||"ready"!=l.status)return!1;if(l=this.snapshots,b||(b=new c(e)),!1===b.contents)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1}else!1!==d&&e.fire("change");return l.splice(this.index+1,l.length-this.index-1),l.length==this.limit&&l.shift(),this.index=l.push(b)-1,this.currentImage=b,!1!==d&&this.refreshState(),!0},restoreImage:function(a){var c,b=this.editor;a.bookmarks&&(b.focus(),c=b.getSelection()),this.locked={level:999},this.editor.loadSnapshot(a.contents),a.bookmarks?c.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(c=this.editor.document.getBody().$.createTextRange(),c.collapse(!0),c.select()),this.locked=null,this.index=a.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),b.fire("change")},getNextImage:function(a){var d,b=this.snapshots,c=this.currentImage;if(c)if(a){for(d=this.index-1;d>=0;d--)if(a=b[d],!c.equalsContent(a))return a.index=d,a}else for(d=this.index+1;d<b.length;d++)if(a=b[d],!c.equalsContent(a))return a.index=d,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||(a=new c(this.editor));for(var b=this.index,d=this.snapshots;b>0&&this.currentImage.equalsContent(d[b-1]);)--b;d.splice(b,this.index-b+1,a),this.index=b,this.currentImage=a}},updateSelection:function(a){if(!this.snapshots.length)return!1;var b=this.snapshots,c=b[b.length-1];return c.equalsContent(a)&&!c.equalsSelection(a)?(this.currentImage=b[b.length-1]=a,!0):!1},lock:function(a,b){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var d=null;if(b)d=!0;else{var e=new c(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(e)&&(d=e)}this.locked={
update:d,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;if(this.locked=null,!0===a)this.update();else if(a){var b=new c(this.editor,!0);a.equalsContent(b)||this.update()}}}},b.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},b.keyGroups={PRINTABLE:0,FUNCTIONAL:1},b.isNavigationKey=function(a){return!!b.navigationKeyCodes[a]},b.getKeyGroup=function(a){var c=b.keyGroups;return e[a]?c.FUNCTIONAL:c.PRINTABLE},b.getOppositeKeyGroup=function(a){var c=b.keyGroups;return a==c.FUNCTIONAL?c.PRINTABLE:c.FUNCTIONAL},b.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&b.getKeyGroup(a)==b.keyGroups.FUNCTIONAL};var c=CKEDITOR.plugins.undo.Image=function(a,b){this.editor=a,a.fire("beforeUndoImage");var c=a.getSnapshot();CKEDITOR.env.ie&&c&&(c=c.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=c,b||(this.bookmarks=(c=c&&a.getSelection())&&c.createBookmarks2(!0)),a.fire("afterUndoImage")},d=/\b(?:href|src|name)="[^"]*?"/gi;c.prototype={equalsContent:function(a){var b=this.contents;return a=a.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(b=b.replace(d,""),a=a.replace(d,"")),b==a},equalsSelection:function(a){var b=this.bookmarks;if(a=a.bookmarks,b||a){if(!b||!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++){var d=b[c],e=a[c];if(d.startOffset!=e.startOffset||d.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(d.start,e.start)||!CKEDITOR.tools.arrayCompare(d.end,e.end))return!1}}return!0}};var m=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a,this.ignoreInputEvent=!1,this.keyEventsStack=new l,this.lastKeydownImage=null};m.prototype={onKeydown:function(d){var e=d.data.getKey();229!==e&&(-1<CKEDITOR.tools.indexOf(a,d.data.getKeystroke())?d.data.preventDefault():(this.keyEventsStack.cleanUp(d),d=this.undoManager,this.keyEventsStack.getLast(e)||this.keyEventsStack.push(e),this.lastKeydownImage=new c(d.editor),(b.isNavigationKey(e)||this.undoManager.keyGroupChanged(e))&&(d.strokesRecorded[0]||d.strokesRecorded[1])&&(d.save(!1,this.lastKeydownImage,!1),d.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0)),this.keyEventsStack.increment(a.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(a){var d=this.undoManager;a=a.data.getKey();var e=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(a),b.ieFunctionalKeysBug(a)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new c(d.editor,!0))||(e>0?d.type(a):b.isNavigationKey(a)&&this.onNavigationKey(!0))},onNavigationKey:function(a){var b=this.undoManager;!a&&b.save(!0,null,!1)||b.updateSelection(new c(b.editor)),b.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var a=this.undoManager.editor,c=a.editable(),d=this;c.attachListener(c,"keydown",function(a){d.onKeydown(a),b.ieFunctionalKeysBug(a.data.getKey())&&d.onInput()},null,null,999),c.attachListener(c,CKEDITOR.env.ie?"keypress":"input",d.onInput,d,null,999),c.attachListener(c,"keyup",d.onKeyup,d,null,999),c.attachListener(c,"paste",d.ignoreInputEventListener,d,null,999),c.attachListener(c,"drop",d.ignoreInputEventListener,d,null,999),c.attachListener(c.isInline()?c:a.document.getDocumentElement(),"click",function(){d.onNavigationKey()},null,null,999),c.attachListener(this.undoManager.editor,"blur",function(){d.keyEventsStack.remove(9)},null,null,999)}};var l=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};l.prototype={push:function(a){return a=this.stack.push({keyCode:a,inputs:0}),this.stack[a-1]},getLastIndex:function(a){if("number"!=typeof a)return this.stack.length-1;for(var b=this.stack.length;b--;)if(this.stack[b].keyCode==a)return b;return-1},getLast:function(a){return a=this.getLastIndex(a),-1!=a?this.stack[a]:null},increment:function(a){this.getLast(a).inputs++},remove:function(a){a=this.getLastIndex(a),-1!=a&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a)this.getLast(a).inputs=0;else for(a=this.stack.length;a--;)this.stack[a].inputs=0},getTotalInputs:function(){for(var a=this.stack.length,b=0;a--;)b+=this.stack[a].inputs;return b},cleanUp:function(a){a=a.data.$,a.ctrlKey||a.metaKey||this.remove(17),a.shiftKey||this.remove(16),a.altKey||this.remove(18)}}}(),function(){function a(a){function b(a){var c=!1;g.attachListener(g,"keydown",function(){var b=f.getBody().getElementsByTag(a);if(!c){for(var d=0;d<b.count();d++)b.getItem(d).setCustomData("retain",!0);c=!0}},null,null,1),g.attachListener(g,"keyup",function(){var b=f.getElementsByTag(a);c&&(1!=b.count()||b.getItem(0).getCustomData("retain")||b.getItem(0).remove(1),c=!1)})}var c=this.editor,f=a.document,h=f.body,k=f.getElementById("cke_actscrpt");k&&k.parentNode.removeChild(k),(k=f.getElementById("cke_shimscrpt"))&&k.parentNode.removeChild(k),(k=f.getElementById("cke_basetagscrpt"))&&k.parentNode.removeChild(k),h.contentEditable=!0,CKEDITOR.env.ie&&(h.hideFocus=!0,h.disabled=!0,h.removeAttribute("disabled")),delete this._.isLoadingData,this.$=h,f=new CKEDITOR.dom.document(f),this.setup(),this.fixInitialSelection();var g=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&c.enterMode!=CKEDITOR.ENTER_P?b("p"):CKEDITOR.env.edge&&c.enterMode!=CKEDITOR.ENTER_DIV&&b("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&f.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){c.editable().focus()})}),e(c);try{c.document.$.execCommand("2D-position",!1,!0)}catch(n){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==c.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var b=a.data.getKeystroke();if(33==b||34==b)if(CKEDITOR.env.ie)setTimeout(function(){c.getSelection().scrollIntoView()},0);else if(c.window.$.innerHeight>this.$.offsetHeight){var d=c.createRange();d[33==b?"moveToElementEditStart":"moveToElementEditEnd"](this),d.select(),a.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(f,"blur",function(){try{f.$.selection.empty()}catch(a){}}),CKEDITOR.env.iOS&&this.attachListener(f,"touchend",function(){a.focus()}),h=c.document.getElementsByTag("title").getItem(0),h.data("cke-title",h.getText()),CKEDITOR.env.ie&&(c.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),c.fire("contentDom"),this._.isPendingFocus&&(c.focus(),this._.isPendingFocus=!1),setTimeout(function(){c.fire("dataReady")},0)},0,this)}function e(a){function b(){var e;a.editable().attachListener(a,"selectionChange",function(){var b=a.getSelection().getSelectedElement();b&&(e&&(e.detachEvent("onresizestart",c),e=null),b.$.attachEvent("onresizestart",c),e=b.$)})}function c(a){a.returnValue=!1}if(CKEDITOR.env.gecko)try{var e=a.document.$;e.execCommand("enableObjectResizing",!1,!a.config.disableObjectResizing),e.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch(h){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&a.config.disableObjectResizing&&b(a)}function b(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var c,b=[];for(c in CKEDITOR.dtd.$removeEmpty)b.push("html.CSS1Compat "+c+"[contenteditable=false]");a.push(b.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return a.push("html{cursor:text;*cursor:auto}"),a.push("img,input,textarea{cursor:default}"),a.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),a.addMode("wysiwyg",function(b){function e(f){f&&f.removeListener(),a.editable(new c(a,h.$.contentWindow.document.body)),a.setData(a.getData(1),b)}var f="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",f=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(f)+"}())":"",h=CKEDITOR.dom.element.createFromHtml('<iframe src="'+f+'" frameBorder="0"></iframe>');h.setStyles({width:"100%",height:"100%"}),h.addClass("cke_wysiwyg_frame").addClass("cke_reset"),f=a.ui.space("contents"),f.append(h);var k=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;k&&h.on("load",e);var g=a.title,n=a.fire("ariaEditorHelpLabel",{}).label;if(g&&(CKEDITOR.env.ie&&n&&(g+=", "+n),h.setAttribute("title",g)),n){var g=CKEDITOR.tools.getNextId(),q=CKEDITOR.dom.element.createFromHtml('<span id="'+g+'" class="cke_voice_label">'+n+"</span>");f.append(q,1),h.setAttribute("aria-describedby",g)}a.on("beforeModeUnload",function(a){a.removeListener(),q&&q.remove()}),h.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"}),!k&&e(),a.fire("ariaWidget",h)})}}),CKEDITOR.editor.prototype.addContentsCss=function(a){var b=this.config,c=b.contentsCss;CKEDITOR.tools.isArray(c)||(b.contentsCss=c?[c]:[]),b.contentsCss.push(a)};var c=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(b){CKEDITOR.tools.setTimeout(a,0,this,b)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(a,c){var e=this.editor;if(c)this.setHtml(a),this.fixInitialSelection(),e.fire("dataReady");else{this._.isLoadingData=!0,e._.dataStore={id:1};var f=e.config,h=f.fullPage,k=f.docType,g=CKEDITOR.tools.buildStyleHtml(b()).replace(/<style>/,'<style data-cke-temp="1">');h||(g+=CKEDITOR.tools.buildStyleHtml(e.config.contentsCss));var n=f.baseHref?'<base href="'+f.baseHref+'" data-cke-temp="1" />':"";h&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){return e.docType=k=a,""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){return e.xmlDeclaration=a,""})),a=e.dataProcessor.toHtml(a),h?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),n&&(a=a.replace(/<head[^>]*?>/,"$&"+n)),a=a.replace(/<\/head\s*>/,g+"$&"),a=k+a):a=f.docType+'<html dir="'+f.contentsLangDirection+'" lang="'+(f.contentsLanguage||e.langCode)+'"><head><title>'+this._.docTitle+"</title>"+n+g+"</head><body"+(f.bodyId?' id="'+f.bodyId+'"':"")+(f.bodyClass?' class="'+f.bodyClass+'"':"")+">"+a+"</body></html>",CKEDITOR.env.gecko&&(a=a.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),f='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(f+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>'),n&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(f+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;</script>'),a=a.replace(/(?=\s*<\/(:?head)>)/,f),this.clearCustomData(),this.clearListeners(),e.fire("contentDomUnload");var q=this.getDocument();try{q.write(a)}catch(t){setTimeout(function(){q.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();a=this.editor;var b=a.config,c=b.fullPage,e=c&&a.docType,h=c&&a.xmlDeclaration,k=this.getDocument(),c=c?k.getDocumentElement().getOuterHtml():k.getBody().getHtml();return CKEDITOR.env.gecko&&b.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),c=a.dataProcessor.toDataFormat(c),h&&(c=h+"\n"+c),e&&(c=e+"\n"+c),c},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:c.baseProto.focus.call(this)},detach:function(){var a=this.editor,b=a.document,a=a.window.getFrame();c.baseProto.detach.call(this),this.clearCustomData(),b.getDocumentElement().clearCustomData(),a.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(b=a.removeCustomData("onResize"))&&b.removeListener(),a.remove()}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css"),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(a){a.config.wsc_onFinish="function"==typeof a.config.wsc_onFinish?a.config.wsc_onFinish:function(){},a.config.wsc_onClose="function"==typeof a.config.wsc_onClose?a.config.wsc_onClose:function(){}},parseConfig:function(a){a.config.wsc_customerId=a.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",a.config.wsc_customDictionaryIds=a.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",a.config.wsc_userDictionaryName=a.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",a.config.wsc_customLoaderScript=a.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,CKEDITOR.config.wsc_cmd=a.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(a){var e=CKEDITOR.env;this.parseConfig(a),this.parseApi(a),a.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||e.ie&&(8>e.version||e.quirks))},"undefined"==typeof a.plugins.scayt&&a.ui.addButton&&a.ui.addButton("SpellChecker",{label:a.lang.wsc.toolbar,click:function(a){var c=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(c=c.replace(/\s/g,""))?a.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,menu,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,format,forms,horizontalrule,htmlwriter,iframe,image,indent,indentblock,indentlist,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastefromword,pastetext,preview,print,removeformat,resize,save,selectall,showblocks,showborders,smiley,sourcearea,specialchar,stylescombo,tab,table,tabletools,templates,toolbar,undo,wysiwygarea,wsc",CKEDITOR.config.skin="moono",function(){var a=function(a,b){var c=CKEDITOR.getUrl("plugins/"+b);a=a.split(",");for(var d=0;d<a.length;d++)CKEDITOR.skin.icons[a[d]]={path:c,offset:-a[++d],bgsize:a[++d]}};CKEDITOR.env.hidpi?a("about,0,,spellcheck,48,auto,bold,48,,italic,72,,strike,96,,subscript,120,,superscript,144,,underline,168,,bidiltr,192,,bidirtl,216,,blockquote,240,,copy-rtl,264,,copy,288,,cut-rtl,312,,cut,336,,paste-rtl,360,,paste,384,,codesnippet,408,,bgcolor,432,,textcolor,456,,creatediv,480,,docprops-rtl,504,,docprops,528,,embed,552,,embedsemantic,576,,find-rtl,600,,find,624,,replace,648,,flash,672,,button,696,,checkbox,720,,form,744,,hiddenfield,768,,imagebutton,792,,radio,816,,select-rtl,840,,select,864,,textarea-rtl,888,,textarea,912,,textfield-rtl,936,,textfield,960,,horizontalrule,984,,iframe,1008,,image,1032,,indent-rtl,1056,,indent,1080,,outdent-rtl,1104,,outdent,1128,,justifyblock,1152,,justifycenter,1176,,justifyleft,1200,,justifyright,1224,,language,1248,,anchor-rtl,1272,,anchor,1296,,link,1320,,unlink,1344,,bulletedlist-rtl,1368,,bulletedlist,1392,,numberedlist-rtl,1416,,numberedlist,1440,,mathjax,1464,,maximize,1488,,newpage-rtl,1512,,newpage,1536,,pagebreak-rtl,1560,,pagebreak,1584,,pastefromword-rtl,1608,,pastefromword,1632,,pastetext-rtl,1656,,pastetext,1680,,placeholder,1704,,preview-rtl,1728,,preview,1752,,print,1776,,removeformat,1800,,save,1824,,selectall,1848,,showblocks-rtl,1872,,showblocks,1896,,smiley,1920,,source-rtl,1944,,source,1968,,sourcedialog-rtl,1992,,sourcedialog,2016,,specialchar,2040,,table,2064,,templates-rtl,2088,,templates,2112,,uicolor,2136,,redo-rtl,2160,,redo,2184,,undo-rtl,2208,,undo,2232,,simplebox,4512,auto,spellchecker,2280,","icons_hidpi.png"):a("about,0,auto,spellcheck,24,auto,bold,48,auto,italic,72,auto,strike,96,auto,subscript,120,auto,superscript,144,auto,underline,168,auto,bidiltr,192,auto,bidirtl,216,auto,blockquote,240,auto,copy-rtl,264,auto,copy,288,auto,cut-rtl,312,auto,cut,336,auto,paste-rtl,360,auto,paste,384,auto,codesnippet,408,auto,bgcolor,432,auto,textcolor,456,auto,creatediv,480,auto,docprops-rtl,504,auto,docprops,528,auto,embed,552,auto,embedsemantic,576,auto,find-rtl,600,auto,find,624,auto,replace,648,auto,flash,672,auto,button,696,auto,checkbox,720,auto,form,744,auto,hiddenfield,768,auto,imagebutton,792,auto,radio,816,auto,select-rtl,840,auto,select,864,auto,textarea-rtl,888,auto,textarea,912,auto,textfield-rtl,936,auto,textfield,960,auto,horizontalrule,984,auto,iframe,1008,auto,image,1032,auto,indent-rtl,1056,auto,indent,1080,auto,outdent-rtl,1104,auto,outdent,1128,auto,justifyblock,1152,auto,justifycenter,1176,auto,justifyleft,1200,auto,justifyright,1224,auto,language,1248,auto,anchor-rtl,1272,auto,anchor,1296,auto,link,1320,auto,unlink,1344,auto,bulletedlist-rtl,1368,auto,bulletedlist,1392,auto,numberedlist-rtl,1416,auto,numberedlist,1440,auto,mathjax,1464,auto,maximize,1488,auto,newpage-rtl,1512,auto,newpage,1536,auto,pagebreak-rtl,1560,auto,pagebreak,1584,auto,pastefromword-rtl,1608,auto,pastefromword,1632,auto,pastetext-rtl,1656,auto,pastetext,1680,auto,placeholder,1704,auto,preview-rtl,1728,auto,preview,1752,auto,print,1776,auto,removeformat,1800,auto,save,1824,auto,selectall,1848,auto,showblocks-rtl,1872,auto,showblocks,1896,auto,smiley,1920,auto,source-rtl,1944,auto,source,1968,auto,sourcedialog-rtl,1992,auto,sourcedialog,2016,auto,specialchar,2040,auto,table,2064,auto,templates-rtl,2088,auto,templates,2112,auto,uicolor,2136,auto,redo-rtl,2160,auto,redo,2184,auto,undo-rtl,2208,auto,undo,2232,auto,simplebox,2256,auto,spellchecker,2280,auto","icons.png")}(),CKEDITOR.lang.languages={af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1})}(),CKEDITOR.editorConfig=function(config){};
//# sourceMappingURL=jsapi.min.js.map